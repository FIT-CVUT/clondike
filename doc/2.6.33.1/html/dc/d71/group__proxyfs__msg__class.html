<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: proxyfs_msg class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported Linux kernel 2.6.33.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d71/group__proxyfs__msg__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">proxyfs_msg class<div class="ingroups"><a class="el" href="../../d3/d0e/group__proxyfs__module__class.html">ProxyFS</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class represents connection between two peers allows sending and receiving messages.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for proxyfs_msg class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../dc/d71/group__proxyfs__msg__class.png" border="0" alt="" usemap="#dc_2d71_2group____proxyfs____msg____class"/>
<map name="dc_2d71_2group____proxyfs____msg____class" id="dc_2d71_2group____proxyfs____msg____class">
<area shape="rect" id="node2" href="../../d3/d0e/group__proxyfs__module__class.html" title="Classes in this group represent proxy filesystem and related objects." alt="" coords="6,5,79,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d0/d17/structproxyfs__msg__header"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">proxyfs_msg_header</a></td></tr>
<tr class="memdesc:d0/d17/structproxyfs__msg__header"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proxyfs message header structure We allways start sending with sending this structure.  <a href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">More...</a><br/></td></tr>
<tr class="separator:d0/d17/structproxyfs__msg__header"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/d9d/structproxyfs__msg"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a></td></tr>
<tr class="memdesc:dd/d9d/structproxyfs__msg"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proxyfs message structure.  <a href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">More...</a><br/></td></tr>
<tr class="separator:dd/d9d/structproxyfs__msg"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9f5326fb7cb6d24467a69c2316c686b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga9f5326fb7cb6d24467a69c2316c686b4">MSG_HDR_SIZE</a>&#160;&#160;&#160;(sizeof(struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">proxyfs_msg_header</a>))</td></tr>
<tr class="memdesc:ga9f5326fb7cb6d24467a69c2316c686b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Size od message header  <a href="#ga9f5326fb7cb6d24467a69c2316c686b4">More...</a><br/></td></tr>
<tr class="separator:ga9f5326fb7cb6d24467a69c2316c686b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9ffa836affaa6041250981c2eb83907"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gaa9ffa836affaa6041250981c2eb83907">MSG_MAGIC</a>&#160;&#160;&#160;0x1ee7babe</td></tr>
<tr class="memdesc:gaa9ffa836affaa6041250981c2eb83907"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Magic number, each message starts with it  <a href="#gaa9ffa836affaa6041250981c2eb83907">More...</a><br/></td></tr>
<tr class="separator:gaa9ffa836affaa6041250981c2eb83907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5a2da7fe0739dc631b4f9bc25ca1001"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gaa5a2da7fe0739dc631b4f9bc25ca1001">MSG_MAX_SIZE</a>&#160;&#160;&#160;(4 &lt;&lt; 10)</td></tr>
<tr class="memdesc:gaa5a2da7fe0739dc631b4f9bc25ca1001"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Max.  <a href="#gaa5a2da7fe0739dc631b4f9bc25ca1001">More...</a><br/></td></tr>
<tr class="separator:gaa5a2da7fe0739dc631b4f9bc25ca1001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19c0aa6fb1bb3ca56b253ee3900181c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga19c0aa6fb1bb3ca56b253ee3900181c1">MSG_OPEN</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga19c0aa6fb1bb3ca56b253ee3900181c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which is send when opening file  <a href="#ga19c0aa6fb1bb3ca56b253ee3900181c1">More...</a><br/></td></tr>
<tr class="separator:ga19c0aa6fb1bb3ca56b253ee3900181c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef0c3934fa593d14d279b7bae99f2eb1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gaef0c3934fa593d14d279b7bae99f2eb1">MSG_WRITE</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:gaef0c3934fa593d14d279b7bae99f2eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for write message  <a href="#gaef0c3934fa593d14d279b7bae99f2eb1">More...</a><br/></td></tr>
<tr class="separator:gaef0c3934fa593d14d279b7bae99f2eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ac355ed0e800684c76ce1d208bbc3e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga8ac355ed0e800684c76ce1d208bbc3e7">MSG_IOCTL</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga8ac355ed0e800684c76ce1d208bbc3e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for ioctl message  <a href="#ga8ac355ed0e800684c76ce1d208bbc3e7">More...</a><br/></td></tr>
<tr class="separator:ga8ac355ed0e800684c76ce1d208bbc3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44dca88b5b5105e02e2db8aff8bae5ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga44dca88b5b5105e02e2db8aff8bae5ed">MSG_CLOSE</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:ga44dca88b5b5105e02e2db8aff8bae5ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which is send when closing file  <a href="#ga44dca88b5b5105e02e2db8aff8bae5ed">More...</a><br/></td></tr>
<tr class="separator:ga44dca88b5b5105e02e2db8aff8bae5ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga225b5499b870c6d6ce98c26e8a92c82d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga225b5499b870c6d6ce98c26e8a92c82d">MSG_FSYNC</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:ga225b5499b870c6d6ce98c26e8a92c82d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which is send when syncing file  <a href="#ga225b5499b870c6d6ce98c26e8a92c82d">More...</a><br/></td></tr>
<tr class="separator:ga225b5499b870c6d6ce98c26e8a92c82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d97e62b786fb007286781f259f1cd3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga9d97e62b786fb007286781f259f1cd3f">MSG_READ_REQUEST</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:ga9d97e62b786fb007286781f259f1cd3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Read request is used to notify server that the client is interested in reading from a file.  <a href="#ga9d97e62b786fb007286781f259f1cd3f">More...</a><br/></td></tr>
<tr class="separator:ga9d97e62b786fb007286781f259f1cd3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga959b8277fc2f4352b19a30346c2a775a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga959b8277fc2f4352b19a30346c2a775a">MSG_OPEN_RESP_OK</a>&#160;&#160;&#160;101</td></tr>
<tr class="memdesc:ga959b8277fc2f4352b19a30346c2a775a"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga19c0aa6fb1bb3ca56b253ee3900181c1" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when opening file">MSG_OPEN</a>  <a href="#ga959b8277fc2f4352b19a30346c2a775a">More...</a><br/></td></tr>
<tr class="separator:ga959b8277fc2f4352b19a30346c2a775a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9711cfb17b7c8256679065430e3ffa34"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga9711cfb17b7c8256679065430e3ffa34">MSG_OPEN_RESP_FAILED</a>&#160;&#160;&#160;102</td></tr>
<tr class="memdesc:ga9711cfb17b7c8256679065430e3ffa34"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga19c0aa6fb1bb3ca56b253ee3900181c1" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when opening file">MSG_OPEN</a>  <a href="#ga9711cfb17b7c8256679065430e3ffa34">More...</a><br/></td></tr>
<tr class="separator:ga9711cfb17b7c8256679065430e3ffa34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5018eba84874e3d11b71002e5f82035c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga5018eba84874e3d11b71002e5f82035c">MSG_WRITE_RESP</a>&#160;&#160;&#160;301</td></tr>
<tr class="memdesc:ga5018eba84874e3d11b71002e5f82035c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gaef0c3934fa593d14d279b7bae99f2eb1" title="&lt;&lt;public&gt;&gt; msg_num for write message">MSG_WRITE</a>  <a href="#ga5018eba84874e3d11b71002e5f82035c">More...</a><br/></td></tr>
<tr class="separator:ga5018eba84874e3d11b71002e5f82035c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89cadf62df52dcb87ec8bc21e53e1365"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga89cadf62df52dcb87ec8bc21e53e1365">MSG_IOCTL_RESP</a>&#160;&#160;&#160;401</td></tr>
<tr class="memdesc:ga89cadf62df52dcb87ec8bc21e53e1365"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga8ac355ed0e800684c76ce1d208bbc3e7" title="&lt;&lt;public&gt;&gt; msg_num for ioctl message">MSG_IOCTL</a>  <a href="#ga89cadf62df52dcb87ec8bc21e53e1365">More...</a><br/></td></tr>
<tr class="separator:ga89cadf62df52dcb87ec8bc21e53e1365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae39a4d97bf64f21cba02de89bb73f92d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gae39a4d97bf64f21cba02de89bb73f92d">MSG_CLOSE_RESP</a>&#160;&#160;&#160;501</td></tr>
<tr class="memdesc:gae39a4d97bf64f21cba02de89bb73f92d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga44dca88b5b5105e02e2db8aff8bae5ed" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when closing file">MSG_CLOSE</a>  <a href="#gae39a4d97bf64f21cba02de89bb73f92d">More...</a><br/></td></tr>
<tr class="separator:gae39a4d97bf64f21cba02de89bb73f92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f28952dd33558e4590ca29978cbb502"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga8f28952dd33558e4590ca29978cbb502">MSG_FSYNC_RESP</a>&#160;&#160;&#160;601</td></tr>
<tr class="memdesc:ga8f28952dd33558e4590ca29978cbb502"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga225b5499b870c6d6ce98c26e8a92c82d" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when syncing file">MSG_FSYNC</a>  <a href="#ga8f28952dd33558e4590ca29978cbb502">More...</a><br/></td></tr>
<tr class="separator:ga8f28952dd33558e4590ca29978cbb502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4935568512ed38bb94453730d0d72bac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga4935568512ed38bb94453730d0d72bac">MSG_READ_REQUEST_RESP</a>&#160;&#160;&#160;701</td></tr>
<tr class="memdesc:ga4935568512ed38bb94453730d0d72bac"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga9d97e62b786fb007286781f259f1cd3f" title="&lt;&lt;public&gt;&gt; Read request is used to notify server that the client is interested in reading from a file...">MSG_READ_REQUEST</a>  <a href="#ga4935568512ed38bb94453730d0d72bac">More...</a><br/></td></tr>
<tr class="separator:ga4935568512ed38bb94453730d0d72bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae833de60d8f4e3e8ad7fc8e931dc08b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gae833de60d8f4e3e8ad7fc8e931dc08b6">WRITE_RESP_BUFFER_FULL</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gae833de60d8f4e3e8ad7fc8e931dc08b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">write_resp msg constants  <a href="#gae833de60d8f4e3e8ad7fc8e931dc08b6">More...</a><br/></td></tr>
<tr class="separator:gae833de60d8f4e3e8ad7fc8e931dc08b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92c1a3f8028814ef46253c83f9604f79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga92c1a3f8028814ef46253c83f9604f79">WRITE_RESP_BUFFER_NOT_FULL</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ga92c1a3f8028814ef46253c83f9604f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0b79d334f8e0b2441e178a38d38b1a29"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga0b79d334f8e0b2441e178a38d38b1a29">proxyfs_msg_get_size</a> (struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga0b79d334f8e0b2441e178a38d38b1a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Returns size of message (header + data)  <a href="#ga0b79d334f8e0b2441e178a38d38b1a29">More...</a><br/></td></tr>
<tr class="separator:ga0b79d334f8e0b2441e178a38d38b1a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60323723423ceaadf6fe16da2243d9b8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga60323723423ceaadf6fe16da2243d9b8">proxyfs_msg_new</a> (unsigned long msg_num, unsigned long <a class="el" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d">file_ident</a>, unsigned long data_size, void *data_ptr)</td></tr>
<tr class="memdesc:ga60323723423ceaadf6fe16da2243d9b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Proxyfs message constructor  <a href="#ga60323723423ceaadf6fe16da2243d9b8">More...</a><br/></td></tr>
<tr class="separator:ga60323723423ceaadf6fe16da2243d9b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf49653e7e5979e1773350c2c3ccd5e9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gacf49653e7e5979e1773350c2c3ccd5e9">proxyfs_msg_new_takeover_ownership</a> (unsigned long msg_num, unsigned long <a class="el" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d">file_ident</a>, unsigned long data_size, void *data_ptr)</td></tr>
<tr class="memdesc:gacf49653e7e5979e1773350c2c3ccd5e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Proxyfs message constructor.  <a href="#gacf49653e7e5979e1773350c2c3ccd5e9">More...</a><br/></td></tr>
<tr class="separator:gacf49653e7e5979e1773350c2c3ccd5e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae386d833d535603242dfdff6e97cdc2f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gae386d833d535603242dfdff6e97cdc2f">proxyfs_msg_compose_new</a> (unsigned long msg_num, unsigned long <a class="el" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d">file_ident</a>,...)</td></tr>
<tr class="memdesc:gae386d833d535603242dfdff6e97cdc2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Proxyfs message constructor  <a href="#gae386d833d535603242dfdff6e97cdc2f">More...</a><br/></td></tr>
<tr class="separator:gae386d833d535603242dfdff6e97cdc2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa135b4d6c64975cb6c4aa0caf45889f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gaaa135b4d6c64975cb6c4aa0caf45889f">proxyfs_msg_destroy</a> (struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaaa135b4d6c64975cb6c4aa0caf45889f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Releases a message instance  <a href="#gaaa135b4d6c64975cb6c4aa0caf45889f">More...</a><br/></td></tr>
<tr class="separator:gaaa135b4d6c64975cb6c4aa0caf45889f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49c873d11a26d57a76ccea0c45c484bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga49c873d11a26d57a76ccea0c45c484bf">proxyfs_msg_real_send</a> (struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock)</td></tr>
<tr class="memdesc:ga49c873d11a26d57a76ccea0c45c484bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Send message to socket  <a href="#ga49c873d11a26d57a76ccea0c45c484bf">More...</a><br/></td></tr>
<tr class="separator:ga49c873d11a26d57a76ccea0c45c484bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae4fcd194cf644dadda7020adf5fd68c7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">proxyfs_msg_header</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gae4fcd194cf644dadda7020adf5fd68c7">__attribute__</a></td></tr>
<tr class="separator:gae4fcd194cf644dadda7020adf5fd68c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This class represents connection between two peers allows sending and receiving messages. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d0/d17/structproxyfs__msg__header" id="d0/d17/structproxyfs__msg__header"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct proxyfs_msg_header</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Proxyfs message header structure We allways start sending with sending this structure. </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00047">47</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for proxyfs_msg_header:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d7/d85/structproxyfs__msg__header__coll__graph.png" border="0" usemap="#proxyfs__msg__header_coll__map" alt="Collaboration graph"/></div>
<map name="proxyfs__msg__header_coll__map" id="proxyfs__msg__header_coll__map">
</map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0dc14840ae3ff0d871d55310094b32be"></a>u_int32_t</td>
<td class="fieldname">
data[]</td>
<td class="fielddoc">
Open structure... </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a76a5e745b5278067e40ea7c9a8b68c4d"></a>unsigned long</td>
<td class="fieldname">
data_size</td>
<td class="fielddoc">
Size of data which are send after header. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5ccc4b03f63c3ba5a65300887483a765"></a>unsigned long</td>
<td class="fieldname">
file_ident</td>
<td class="fielddoc">
Identifiktion of file which is the message afecting. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac16cbdc037ef4ae1f646445ce355adfe"></a>unsigned long</td>
<td class="fieldname">
magic</td>
<td class="fielddoc">
Magic for error detection. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5f6fb9764033c247b45e0057f45bccc8"></a>unsigned long</td>
<td class="fieldname">
msg_num</td>
<td class="fielddoc">
Message type. </td></tr>
</table>

</div>
</div>
<a name="dd/d9d/structproxyfs__msg" id="dd/d9d/structproxyfs__msg"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct proxyfs_msg</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Proxyfs message structure. </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00061">61</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for proxyfs_msg:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d29/structproxyfs__msg__coll__graph.png" border="0" usemap="#proxyfs__msg_coll__map" alt="Collaboration graph"/></div>
<map name="proxyfs__msg_coll__map" id="proxyfs__msg_coll__map">
<area shape="rect" id="node2" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header" title="Proxyfs message header structure We allways start sending with sending this structure." alt="" coords="5,5,147,141"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1ccf9a00dda95cb151c0b170c011b777"></a>void *</td>
<td class="fieldname">
data</td>
<td class="fielddoc">
Pointer to data which are send after header. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a6b3a34cd4ece38f19dbf9d51ce4c5f97"></a>int</td>
<td class="fieldname">
free</td>
<td class="fielddoc">
Call kfree on data after sending message. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a881a537e78b1ef059ad37973c7d68ad8"></a>struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">proxyfs_msg_header</a></td>
<td class="fieldname">
header</td>
<td class="fielddoc">
Message header. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7c16058f181cd7a51bf87c8b252858b8"></a>struct list_head</td>
<td class="fieldname">
msg_queue</td>
<td class="fielddoc">
Struct for queueing messagges. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5f3432e5921cece244d0ff0f946fb3ad"></a>size_t</td>
<td class="fieldname">
send_start</td>
<td class="fielddoc">
How far we are in sending progress. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga44dca88b5b5105e02e2db8aff8bae5ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_CLOSE&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which is send when closing file </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00089">89</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00268">proxyfs_proxy_file_close()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="gae39a4d97bf64f21cba02de89bb73f92d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_CLOSE_RESP&#160;&#160;&#160;501</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga44dca88b5b5105e02e2db8aff8bae5ed" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when closing file">MSG_CLOSE</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00109">109</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00268">proxyfs_proxy_file_close()</a>, <a class="el" href="../../d5/d89/proxyfs__real__file_8c_source.html#l00155">proxyfs_real_file_close()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga225b5499b870c6d6ce98c26e8a92c82d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_FSYNC&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which is send when syncing file </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00091">91</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00308">proxyfs_proxy_file_fsync()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8f28952dd33558e4590ca29978cbb502"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_FSYNC_RESP&#160;&#160;&#160;601</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga225b5499b870c6d6ce98c26e8a92c82d" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when syncing file">MSG_FSYNC</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00111">111</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00308">proxyfs_proxy_file_fsync()</a>, <a class="el" href="../../d5/d89/proxyfs__real__file_8c_source.html#l00183">proxyfs_real_file_fsync()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f5326fb7cb6d24467a69c2316c686b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_HDR_SIZE&#160;&#160;&#160;(sizeof(struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">proxyfs_msg_header</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Size od message header </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00076">76</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00123">proxyfs_msg_get_size()</a>, <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00041">proxyfs_msg_new_internal()</a>, <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00151">proxyfs_msg_real_send()</a>, <a class="el" href="../../d8/d8b/proxyfs__peer_8h_source.html#l00126">proxyfs_peer_clear_msg()</a>, <a class="el" href="../../d8/d8b/proxyfs__peer_8h_source.html#l00144">proxyfs_peer_get_msg()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00149">proxyfs_peer_real_recv()</a>, and <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00355">proxyfs_task_send_write_buf()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8ac355ed0e800684c76ce1d208bbc3e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_IOCTL&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for ioctl message </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00087">87</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00190">proxyfs_proxy_file_ioctl_user()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga89cadf62df52dcb87ec8bc21e53e1365"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_IOCTL_RESP&#160;&#160;&#160;401</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga8ac355ed0e800684c76ce1d208bbc3e7" title="&lt;&lt;public&gt;&gt; msg_num for ioctl message">MSG_IOCTL</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00107">107</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa9ffa836affaa6041250981c2eb83907"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_MAGIC&#160;&#160;&#160;0x1ee7babe</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Magic number, each message starts with it </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00078">78</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00098">proxyfs_msg_compose_new()</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00123">proxyfs_msg_get_size()</a>, and <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00041">proxyfs_msg_new_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa5a2da7fe0739dc631b4f9bc25ca1001"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_MAX_SIZE&#160;&#160;&#160;(4 &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Max. </p>
<p>messagge size </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00080">80</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00041">proxyfs_msg_new_internal()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00065">proxyfs_peer_init()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00087">proxyfs_peer_put()</a>, and <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00355">proxyfs_task_send_write_buf()</a>.</p>

</div>
</div>
<a class="anchor" id="ga19c0aa6fb1bb3ca56b253ee3900181c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_OPEN&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which is send when opening file </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00083">83</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00155">proxyfs_client_open_files()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9711cfb17b7c8256679065430e3ffa34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_OPEN_RESP_FAILED&#160;&#160;&#160;102</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga19c0aa6fb1bb3ca56b253ee3900181c1" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when opening file">MSG_OPEN</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00103">103</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga959b8277fc2f4352b19a30346c2a775a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_OPEN_RESP_OK&#160;&#160;&#160;101</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga19c0aa6fb1bb3ca56b253ee3900181c1" title="&lt;&lt;public&gt;&gt; msg_num for message which is send when opening file">MSG_OPEN</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00101">101</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, <a class="el" href="../../d3/d28/proxyfs__generic__real__file_8c_source.html#l00152">proxyfs_generic_real_file_open()</a>, <a class="el" href="../../d2/dbd/proxyfs__pipe__real__file_8c_source.html#l00252">proxyfs_pipe_real_file_open()</a>, and <a class="el" href="../../dc/dfb/proxyfs__tty__real__file_8c_source.html#l00159">proxyfs_tty_real_file_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9d97e62b786fb007286781f259f1cd3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_READ_REQUEST&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Read request is used to notify server that the client is interested in reading from a file. </p>
<p>It is a workaround for not nice behaving programs like make, which open pipe, fork child and use correctly pipe as unidiractional, but they do not close the other end. We may then send the data to a reading end, which is not interested in this data, and the process that really wants the data from pipe won't ever get them.. </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00098">98</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d5/d2c/proxyfs__pipe__proxy__file_8c_source.html#l00085">proxyfs_pipe_proxy_file_read_user()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4935568512ed38bb94453730d0d72bac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_READ_REQUEST_RESP&#160;&#160;&#160;701</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#ga9d97e62b786fb007286781f259f1cd3f" title="&lt;&lt;public&gt;&gt; Read request is used to notify server that the client is interested in reading from a file...">MSG_READ_REQUEST</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00113">113</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, <a class="el" href="../../d5/d2c/proxyfs__pipe__proxy__file_8c_source.html#l00085">proxyfs_pipe_proxy_file_read_user()</a>, <a class="el" href="../../d5/d89/proxyfs__real__file_8c_source.html#l00205">proxyfs_real_file_mark_read_request()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="gaef0c3934fa593d14d279b7bae99f2eb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_WRITE&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for write message </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00085">85</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00271">proxyfs_server_read_and_write_real_files()</a>, <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00284">proxyfs_task_handle_msg()</a>, and <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00355">proxyfs_task_send_write_buf()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5018eba84874e3d11b71002e5f82035c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_WRITE_RESP&#160;&#160;&#160;301</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; msg_num for message which can be send as reply for <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#gaef0c3934fa593d14d279b7bae99f2eb1" title="&lt;&lt;public&gt;&gt; msg_num for write message">MSG_WRITE</a> </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00105">105</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00065">proxyfs_proxy_file_read_user()</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00271">proxyfs_server_read_and_write_real_files()</a>, and <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00284">proxyfs_task_handle_msg()</a>.</p>

</div>
</div>
<a class="anchor" id="gae833de60d8f4e3e8ad7fc8e931dc08b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_RESP_BUFFER_FULL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write_resp msg constants </p>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00116">116</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga92c1a3f8028814ef46253c83f9604f79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_RESP_BUFFER_NOT_FULL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00117">117</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae386d833d535603242dfdff6e97cdc2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a>* proxyfs_msg_compose_new </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>msg_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>file_ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Proxyfs message constructor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg_num</td><td>- Message type identifikator </td></tr>
    <tr><td class="paramname">file_ident</td><td>- File identifikator </td></tr>
    <tr><td class="paramname">...</td><td>- size of the first arg., pointer to the first arg., size of the second arg. pointer to the second arg. etc... ended by 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new message or NULL on error </dd></dl>

<p>Definition at line <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00098">98</a> of file <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html">proxyfs_msg.c</a>.</p>

<p>References <a class="el" href="../../d9/d10/tcmi__npm__params_8h_source.html#l00052">args</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00065">proxyfs_msg::data</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00055">proxyfs_msg_header::data_size</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00053">proxyfs_msg_header::file_ident</a>, <a class="el" href="../../d1/de9/proxyfs__file_8h_source.html#l00059">file_ident</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00071">proxyfs_msg::free</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00063">proxyfs_msg::header</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00049">proxyfs_msg_header::magic</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00078">MSG_MAGIC</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00051">proxyfs_msg_header::msg_num</a>, and <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00069">proxyfs_msg::send_start</a>.</p>

<p>Referenced by <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00065">proxyfs_proxy_file_read_user()</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00271">proxyfs_server_read_and_write_real_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg" title="Proxyfs message structure.">proxyfs_msg</a> *msg;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    va_list <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496" title="Arrays of args and envps.">args</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">size_t</span> msg_size, element_size;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    msg = (<span class="keyword">struct </span><a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg" title="Proxyfs message structure.">proxyfs_msg</a> *)kmalloc( <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg" title="Proxyfs message structure.">proxyfs_msg</a>), GFP_KERNEL );</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span>( msg == NULL ){</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Proxyfs message allocation failed&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    va_start(args, <a class="code" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d" title="Semi-unique number identificating file.">file_ident</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">for</span>(msg_size = 0; (element_size = va_arg(args, u_int32_t)) != 0; va_arg(args, <span class="keywordtype">void</span>*)) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        msg_size += element_size;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    va_end(args);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span>( (msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a1ccf9a00dda95cb151c0b170c011b777" title="Pointer to data which are send after header.">data</a> = kmalloc( msg_size, GFP_KERNEL ) ) == NULL ){</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Memory allocation for data (%lu bytes)  failed&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)msg_size);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    va_start(args, <a class="code" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d" title="Semi-unique number identificating file.">file_ident</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">for</span>(msg_size = 0; (element_size = va_arg(args, u_int32_t)) != 0; msg_size += element_size ) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordtype">void</span>* from_pointer = va_arg(args, <span class="keywordtype">void</span>*);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Appending argument on post %lu. Arg size: %lu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)msg_size, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)element_size);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        memcpy( msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a1ccf9a00dda95cb151c0b170c011b777" title="Pointer to data which are send after header.">data</a> + msg_size, from_pointer, element_size );     </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    va_end(args);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ac16cbdc037ef4ae1f646445ce355adfe" title="Magic for error detection.">magic</a> = <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#gaa9ffa836affaa6041250981c2eb83907" title="&lt;&lt;public&gt;&gt; Magic number, each message starts with it">MSG_MAGIC</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f6fb9764033c247b45e0057f45bccc8" title="Message type.">msg_num</a> = msg_num;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5ccc4b03f63c3ba5a65300887483a765" title="Identifiktion of file which is the message afecting.">file_ident</a> = <a class="code" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d" title="Semi-unique number identificating file.">file_ident</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a76a5e745b5278067e40ea7c9a8b68c4d" title="Size of data which are send after header.">data_size</a> = msg_size;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a6b3a34cd4ece38f19dbf9d51ce4c5f97" title="Call kfree on data after sending message.">free</a> = 1;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    msg-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a> = 0;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> msg;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;exit1:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    kfree(msg);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;exit0:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaaa135b4d6c64975cb6c4aa0caf45889f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxyfs_msg_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Releases a message instance </p>

<p>Definition at line <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00191">191</a> of file <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html">proxyfs_msg.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00116">proxyfs_peer_real_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                   {    </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> ( self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a6b3a34cd4ece38f19dbf9d51ce4c5f97" title="Call kfree on data after sending message.">free</a> ) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying message data: %p (Size: %lu)&quot;</span>, self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a1ccf9a00dda95cb151c0b170c011b777" title="Pointer to data which are send after header.">data</a>, self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a76a5e745b5278067e40ea7c9a8b68c4d" title="Size of data which are send after header.">data_size</a>); </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        kfree(self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a1ccf9a00dda95cb151c0b170c011b777" title="Pointer to data which are send after header.">data</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying message: %p&quot;</span>, <span class="keyword">self</span>);    </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;};</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga0b79d334f8e0b2441e178a38d38b1a29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int proxyfs_msg_get_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Returns size of message (header + data) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>- pointer to <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg" title="Proxyfs message structure.">proxyfs_msg</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>message size </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00123">123</a> of file <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html">proxyfs_msg.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00076">MSG_HDR_SIZE</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00078">MSG_MAGIC</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00197">proxyfs_client_handle_msg()</a>, <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00151">proxyfs_msg_real_send()</a>, <a class="el" href="../../d8/d8b/proxyfs__peer_8h_source.html#l00126">proxyfs_peer_clear_msg()</a>, <a class="el" href="../../d8/d8b/proxyfs__peer_8h_source.html#l00144">proxyfs_peer_get_msg()</a>, and <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00149">proxyfs_peer_real_recv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span>( self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ac16cbdc037ef4ae1f646445ce355adfe" title="Magic for error detection.">magic</a> != <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#gaa9ffa836affaa6041250981c2eb83907" title="&lt;&lt;public&gt;&gt; Magic number, each message starts with it">MSG_MAGIC</a> ){</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Bad magic&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;header.data_size + <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ga9f5326fb7cb6d24467a69c2316c686b4" title="&lt;&lt;public&gt;&gt; Size od message header">MSG_HDR_SIZE</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga60323723423ceaadf6fe16da2243d9b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a>* proxyfs_msg_new </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>msg_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>file_ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Proxyfs message constructor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg_num</td><td>- Message type identifikator </td></tr>
    <tr><td class="paramname">file_ident</td><td>- File identifikator </td></tr>
    <tr><td class="paramname">data_size</td><td>- size of data which will be send after header </td></tr>
    <tr><td class="paramname">data_ptr</td><td>- pointer to data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new message or NULL on error </dd></dl>

<p>Definition at line <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00077">77</a> of file <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html">proxyfs_msg.c</a>.</p>

<p>References <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00041">proxyfs_msg_new_internal()</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00155">proxyfs_client_open_files()</a>, <a class="el" href="../../d3/d28/proxyfs__generic__real__file_8c_source.html#l00152">proxyfs_generic_real_file_open()</a>, <a class="el" href="../../d5/d2c/proxyfs__pipe__proxy__file_8c_source.html#l00085">proxyfs_pipe_proxy_file_read_user()</a>, <a class="el" href="../../d2/dbd/proxyfs__pipe__real__file_8c_source.html#l00252">proxyfs_pipe_real_file_open()</a>, <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00268">proxyfs_proxy_file_close()</a>, <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00308">proxyfs_proxy_file_fsync()</a>, <a class="el" href="../../d7/dd3/proxyfs__proxy__file_8c_source.html#l00190">proxyfs_proxy_file_ioctl_user()</a>, <a class="el" href="../../d5/d89/proxyfs__real__file_8c_source.html#l00155">proxyfs_real_file_close()</a>, <a class="el" href="../../d5/d89/proxyfs__real__file_8c_source.html#l00183">proxyfs_real_file_fsync()</a>, <a class="el" href="../../d5/d89/proxyfs__real__file_8c_source.html#l00205">proxyfs_real_file_mark_read_request()</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00156">proxyfs_server_handle_msg()</a>, and <a class="el" href="../../dc/dfb/proxyfs__tty__real__file_8c_source.html#l00159">proxyfs_tty_real_file_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/dbe/proxyfs__msg_8c.html#a5235c4aa2ee920fc26ce339e7fd20a6f" title="Maximum message size.">proxyfs_msg_new_internal</a>(msg_num, <a class="code" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d" title="Semi-unique number identificating file.">file_ident</a>, data_size, data_ptr, 0);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d71/group__proxyfs__msg__class_ga60323723423ceaadf6fe16da2243d9b8_cgraph.png" border="0" usemap="#dc/d71/group__proxyfs__msg__class_ga60323723423ceaadf6fe16da2243d9b8_cgraph" alt=""/></div>
<map name="dc/d71/group__proxyfs__msg__class_ga60323723423ceaadf6fe16da2243d9b8_cgraph" id="dc/d71/group__proxyfs__msg__class_ga60323723423ceaadf6fe16da2243d9b8_cgraph">
<area shape="rect" id="node2" href="../../db/dbe/proxyfs__msg_8c.html#a5235c4aa2ee920fc26ce339e7fd20a6f" title="Maximum message size." alt="" coords="182,5,357,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gacf49653e7e5979e1773350c2c3ccd5e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a>* proxyfs_msg_new_takeover_ownership </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>msg_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>file_ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Proxyfs message constructor. </p>
<p>In this version the message takes ownership of the data </p>

<p>Definition at line <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00084">84</a> of file <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html">proxyfs_msg.c</a>.</p>

<p>References <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00041">proxyfs_msg_new_internal()</a>.</p>

<p>Referenced by <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00355">proxyfs_task_send_write_buf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                                           {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/dbe/proxyfs__msg_8c.html#a5235c4aa2ee920fc26ce339e7fd20a6f" title="Maximum message size.">proxyfs_msg_new_internal</a>(msg_num, <a class="code" href="../../d1/de9/proxyfs__file_8h.html#acbe1edb656abbae690ad0d220ddde73d" title="Semi-unique number identificating file.">file_ident</a>, data_size, data_ptr, 1);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d71/group__proxyfs__msg__class_gacf49653e7e5979e1773350c2c3ccd5e9_cgraph.png" border="0" usemap="#dc/d71/group__proxyfs__msg__class_gacf49653e7e5979e1773350c2c3ccd5e9_cgraph" alt=""/></div>
<map name="dc/d71/group__proxyfs__msg__class_gacf49653e7e5979e1773350c2c3ccd5e9_cgraph" id="dc/d71/group__proxyfs__msg__class_gacf49653e7e5979e1773350c2c3ccd5e9_cgraph">
<area shape="rect" id="node2" href="../../db/dbe/proxyfs__msg_8c.html#a5235c4aa2ee920fc26ce339e7fd20a6f" title="Maximum message size." alt="" coords="235,12,410,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga49c873d11a26d57a76ccea0c45c484bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proxyfs_msg_real_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg">proxyfs_msg</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Send message to socket </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>- pointer to <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#dd/d9d/structproxyfs__msg" title="Proxyfs message structure.">proxyfs_msg</a> instance </td></tr>
    <tr><td class="paramname">sock</td><td>- socket used for sending</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the message was completely send </dd></dl>

<p>Definition at line <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00151">151</a> of file <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html">proxyfs_msg.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00239">kkc_sock_getpeername2()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00066">KKC_SOCK_NONBLOCK</a>, <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00135">kkc_sock_send()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00076">MSG_HDR_SIZE</a>, <a class="el" href="../../d7/d05/proxyfs__msg_8h_source.html#l00123">proxyfs_msg_get_size()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00116">proxyfs_peer_real_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">int</span> msg_size;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    msg_size = <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ga0b79d334f8e0b2441e178a38d38b1a29" title="&lt;&lt;public&gt;&gt; Returns size of message (header + data)">proxyfs_msg_get_size</a>( <span class="keyword">self</span> );</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Sending message %lu for file %lu size %d peer_name %s;&quot;</span>, </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f6fb9764033c247b45e0057f45bccc8" title="Message type.">msg_num</a>, self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a881a537e78b1ef059ad37973c7d68ad8" title="Message header.">header</a>.<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5ccc4b03f63c3ba5a65300887483a765" title="Identifiktion of file which is the message afecting.">file_ident</a>, msg_size,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(sock));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span>( self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a> &lt; <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ga9f5326fb7cb6d24467a69c2316c686b4" title="&lt;&lt;public&gt;&gt; Size od message header">MSG_HDR_SIZE</a> ){ <span class="comment">// Header hasn&#39;t been send yet</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        result = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data.">kkc_sock_send</a>( sock, <span class="keyword">self</span> + self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a>,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ga9f5326fb7cb6d24467a69c2316c686b4" title="&lt;&lt;public&gt;&gt; Size od message header">MSG_HDR_SIZE</a> - self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a>, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa34e5e1c2017bb76800a1d3a894dae9d1">KKC_SOCK_NONBLOCK</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span>( result &gt; 0 ){</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Send %d bytes&quot;</span>, result); </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keyword">self</span>-&gt;send_start += result;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span>( self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a> &gt;= <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ga9f5326fb7cb6d24467a69c2316c686b4" title="&lt;&lt;public&gt;&gt; Size od message header">MSG_HDR_SIZE</a> ){ <span class="comment">// Header has been send </span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span>( self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a> == msg_size )</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">return</span> 1; <span class="comment">// Message send</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        result = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data.">kkc_sock_send</a>( sock, self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a1ccf9a00dda95cb151c0b170c011b777" title="Pointer to data which are send after header.">data</a> + self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a> - <a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#ga9f5326fb7cb6d24467a69c2316c686b4" title="&lt;&lt;public&gt;&gt; Size od message header">MSG_HDR_SIZE</a>,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                msg_size - self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a>, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa34e5e1c2017bb76800a1d3a894dae9d1">KKC_SOCK_NONBLOCK</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span>( result &gt; 0 ){</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Send %d bytes&quot;</span>, result); </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keyword">self</span>-&gt;send_start += result;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">if</span>( self-&gt;<a class="code" href="../../dc/d71/group__proxyfs__msg__class.html#a5f3432e5921cece244d0ff0f946fb3ad" title="How far we are in sending progress.">send_start</a> == msg_size )</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">return</span> 1; <span class="comment">// Message send</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d71/group__proxyfs__msg__class_ga49c873d11a26d57a76ccea0c45c484bf_cgraph.png" border="0" usemap="#dc/d71/group__proxyfs__msg__class_ga49c873d11a26d57a76ccea0c45c484bf_cgraph" alt=""/></div>
<map name="dc/d71/group__proxyfs__msg__class_ga49c873d11a26d57a76ccea0c45c484bf_cgraph" id="dc/d71/group__proxyfs__msg__class_ga49c873d11a26d57a76ccea0c45c484bf_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="214,5,381,32"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="241,56,354,83"/><area shape="rect" id="node6" href="../../dc/d71/group__proxyfs__msg__class.html#ga0b79d334f8e0b2441e178a38d38b1a29" title="&lt;&lt;public&gt;&gt; Returns size of message (header + data)" alt="" coords="221,107,373,133"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="429,5,589,32"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="438,56,581,83"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gae4fcd194cf644dadda7020adf5fd68c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d71/group__proxyfs__msg__class.html#d0/d17/structproxyfs__msg__header">proxyfs_msg_header</a>   __attribute__</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 18:46:51 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
