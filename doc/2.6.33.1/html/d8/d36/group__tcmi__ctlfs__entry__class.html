<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_ctlfs_entry class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported Linux kernel 2.6.33.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/d36/group__tcmi__ctlfs__entry__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_ctlfs_entry class<div class="ingroups"><a class="el" href="../../d9/d0a/group__tcmi__ctlfs__class.html">control filesystem</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class represents a generic entry in the tcmi control file system.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_ctlfs_entry class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d8/d36/group__tcmi__ctlfs__entry__class.png" border="0" alt="" usemap="#d8_2d36_2group____tcmi____ctlfs____entry____class"/>
<map name="d8_2d36_2group____tcmi____ctlfs____entry____class" id="d8_2d36_2group____tcmi____ctlfs____entry____class">
<area shape="rect" id="node1" href="../../d1/de7/group__tcmi__ctlfs__file__class.html" title="A file in the TCMI control file system is used to export object interfaces." alt="" coords="376,56,512,83"/><area shape="rect" id="node2" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html" title="This class provides a robust solution for symbolic link creation." alt="" coords="379,107,509,149"/><area shape="rect" id="node3" href="../../d9/d0a/group__tcmi__ctlfs__class.html" title="This &lt;&lt;singleton&gt;&gt; class represents TCMI control filesystem." alt="" coords="6,56,130,83"/><area shape="rect" id="node4" href="../../dc/def/group__tcmi__ctlfs__dir__class.html" title="This class represents a directory in the tcmi control file system." alt="" coords="377,5,511,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:dc/def/group__tcmi__ctlfs__dir__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/def/group__tcmi__ctlfs__dir__class.html">tcmi_ctlfs_dir class</a></td></tr>
<tr class="memdesc:dc/def/group__tcmi__ctlfs__dir__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class represents a directory in the tcmi control file system. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d1/de7/group__tcmi__ctlfs__file__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de7/group__tcmi__ctlfs__file__class.html">tcmi_ctlfs_file class</a></td></tr>
<tr class="memdesc:d1/de7/group__tcmi__ctlfs__file__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">A file in the TCMI control file system is used to export object interfaces. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/d30/group__tcmi__ctlfs__symlink__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html">tcmi_ctlfs_symlink class</a></td></tr>
<tr class="memdesc:dd/d30/group__tcmi__ctlfs__symlink__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class provides a robust solution for symbolic link creation. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:db/d2a/structtcmi__ctlfs__entry"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a></td></tr>
<tr class="memdesc:db/d2a/structtcmi__ctlfs__entry"><td class="mdescLeft">&#160;</td><td class="mdescRight">An entry compound structure.  <a href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">More...</a><br/></td></tr>
<tr class="separator:db/d2a/structtcmi__ctlfs__entry"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:df/d10/structtcmi__ctlfs__ops"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">tcmi_ctlfs_ops</a></td></tr>
<tr class="memdesc:df/d10/structtcmi__ctlfs__ops"><td class="mdescLeft">&#160;</td><td class="mdescRight">entry operations that support polymorphism  <a href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">More...</a><br/></td></tr>
<tr class="separator:df/d10/structtcmi__ctlfs__ops"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga40271ad06bcd5a49e0014d2e9915ae60"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga40271ad06bcd5a49e0014d2e9915ae60">MAX_ENTRY_NAME_LEN</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ga40271ad06bcd5a49e0014d2e9915ae60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum entry name length.  <a href="#ga40271ad06bcd5a49e0014d2e9915ae60">More...</a><br/></td></tr>
<tr class="separator:ga40271ad06bcd5a49e0014d2e9915ae60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd32888576caebe57e30d25081d77698"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gabd32888576caebe57e30d25081d77698">TCMI_CTLFS_DENTRY_TO_ENTRY</a>(dentry)&#160;&#160;&#160;<a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga9d0f1b0d82e9c3872aa08724a9be306b">TCMI_CTLFS_ENTRY</a>(dentry-&gt;d_fsdata)</td></tr>
<tr class="memdesc:gabd32888576caebe57e30d25081d77698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts the entry object from the dentry.  <a href="#gabd32888576caebe57e30d25081d77698">More...</a><br/></td></tr>
<tr class="separator:gabd32888576caebe57e30d25081d77698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d0f1b0d82e9c3872aa08724a9be306b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga9d0f1b0d82e9c3872aa08724a9be306b">TCMI_CTLFS_ENTRY</a>(e)&#160;&#160;&#160;((struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *)e)</td></tr>
<tr class="memdesc:ga9d0f1b0d82e9c3872aa08724a9be306b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts a child entry to the super class.  <a href="#ga9d0f1b0d82e9c3872aa08724a9be306b">More...</a><br/></td></tr>
<tr class="separator:ga9d0f1b0d82e9c3872aa08724a9be306b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaed2ff1a579396261139d8f277f901435"><td class="memItemLeft" align="right" valign="top">typedef void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435">callback</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *, void *)</td></tr>
<tr class="memdesc:gaed2ff1a579396261139d8f277f901435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback method of an object when traversing through predecessors.  <a href="#gaed2ff1a579396261139d8f277f901435">More...</a><br/></td></tr>
<tr class="separator:gaed2ff1a579396261139d8f277f901435"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga20c8c8e2e7f6c373c438b87504f9bb44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga20c8c8e2e7f6c373c438b87504f9bb44">tcmi_ctlfs_add_depth</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *curr_depth)</td></tr>
<tr class="memdesc:ga20c8c8e2e7f6c373c438b87504f9bb44"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Helper callback function when calculating entry depth.  <a href="#ga20c8c8e2e7f6c373c438b87504f9bb44">More...</a><br/></td></tr>
<tr class="separator:ga20c8c8e2e7f6c373c438b87504f9bb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadac6e4ac71df92c5ecdd9380e97262f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gadac6e4ac71df92c5ecdd9380e97262f5">tcmi_ctlfs_add_length</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *curr_length)</td></tr>
<tr class="memdesc:gadac6e4ac71df92c5ecdd9380e97262f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Helper callback function when calculating entry pathname length.  <a href="#gadac6e4ac71df92c5ecdd9380e97262f5">More...</a><br/></td></tr>
<tr class="separator:gadac6e4ac71df92c5ecdd9380e97262f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34ff536143e832833c73376ef43e3c7f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga34ff536143e832833c73376ef43e3c7f">tcmi_ctlfs_add_path</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *buf_data)</td></tr>
<tr class="memdesc:ga34ff536143e832833c73376ef43e3c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Helper callback method when filling the entry's pathname The entry fills in its name and the '/' as prefix to the current end of the buffer.  <a href="#ga34ff536143e832833c73376ef43e3c7f">More...</a><br/></td></tr>
<tr class="separator:ga34ff536143e832833c73376ef43e3c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cb543134cb98474842fe71b27abb82c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4cb543134cb98474842fe71b27abb82c">tcmi_ctlfs_entry_release</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga4cb543134cb98474842fe71b27abb82c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; This private method is responsible for freeing any resources the entry is currently using(currently nothing).  <a href="#ga4cb543134cb98474842fe71b27abb82c">More...</a><br/></td></tr>
<tr class="separator:ga4cb543134cb98474842fe71b27abb82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga256f5088d3434bfadcdb0cb59bf25cb7"><td class="memItemLeft" align="right" valign="top">static struct inode *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7">tcmi_ctlfs_get_inode</a> (struct inode *dir, struct super_block *sb, mode_t <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77">mode</a>, const struct inode_operations *i_ops, const struct file_operations *f_ops)</td></tr>
<tr class="memdesc:ga256f5088d3434bfadcdb0cb59bf25cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; A method for inode allocation.  <a href="#ga256f5088d3434bfadcdb0cb59bf25cb7">More...</a><br/></td></tr>
<tr class="separator:ga256f5088d3434bfadcdb0cb59bf25cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeeb7fba5f385c90d93878a60a4dcf1dc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc">tcmi_ctlfs_entry_alloc_dentry</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *parent, struct inode *inode)</td></tr>
<tr class="memdesc:gaeeb7fba5f385c90d93878a60a4dcf1dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent's dentry and the current name of the ctlfs entry.  <a href="#gaeeb7fba5f385c90d93878a60a4dcf1dc">More...</a><br/></td></tr>
<tr class="separator:gaeeb7fba5f385c90d93878a60a4dcf1dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fbd3f1c3789bd79d4e2c684fc08d1a2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2">tcmi_ctlfs_entry_exists</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, const char *name)</td></tr>
<tr class="memdesc:ga4fbd3f1c3789bd79d4e2c684fc08d1a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name  <a href="#ga4fbd3f1c3789bd79d4e2c684fc08d1a2">More...</a><br/></td></tr>
<tr class="separator:ga4fbd3f1c3789bd79d4e2c684fc08d1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga964c2769e577e9523bf5a6c83ff66640"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga964c2769e577e9523bf5a6c83ff66640">tcmi_ctlfs_dentry_delete</a> (struct dentry *dentry)</td></tr>
<tr class="memdesc:ga964c2769e577e9523bf5a6c83ff66640"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS delete_dentry operation.  <a href="#ga964c2769e577e9523bf5a6c83ff66640">More...</a><br/></td></tr>
<tr class="separator:ga964c2769e577e9523bf5a6c83ff66640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga998576674f932bf983a71a04010dd07e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga998576674f932bf983a71a04010dd07e">tcmi_ctlfs_dentry_release</a> (struct dentry *dentry)</td></tr>
<tr class="memdesc:ga998576674f932bf983a71a04010dd07e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS release_dentry operation.  <a href="#ga998576674f932bf983a71a04010dd07e">More...</a><br/></td></tr>
<tr class="separator:ga998576674f932bf983a71a04010dd07e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga532181c3f7224fe5aa7651a69e6ad6b4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4">tcmi_ctlfs_entry_init</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *parent, mode_t <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77">mode</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">tcmi_ctlfs_ops</a> *entry_ops, const struct inode_operations *i_ops, const struct file_operations *f_ops, const char namefmt[], va_list <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496">args</a>)</td></tr>
<tr class="memdesc:ga532181c3f7224fe5aa7651a69e6ad6b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Initializes an instance.  <a href="#ga532181c3f7224fe5aa7651a69e6ad6b4">More...</a><br/></td></tr>
<tr class="separator:ga532181c3f7224fe5aa7651a69e6ad6b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacda4dfc581441853eea35819b0beca60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gacda4dfc581441853eea35819b0beca60">tcmi_ctlfs_rootentry_init</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct super_block *sb, mode_t <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77">mode</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">tcmi_ctlfs_ops</a> *entry_ops, const struct inode_operations *i_ops, const struct file_operations *f_ops)</td></tr>
<tr class="memdesc:gacda4dfc581441853eea35819b0beca60"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Initializes a root entry instance.  <a href="#gacda4dfc581441853eea35819b0beca60">More...</a><br/></td></tr>
<tr class="separator:gacda4dfc581441853eea35819b0beca60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga256fabe04c04ac21ed1cecbda615a137"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137">tcmi_ctlfs_entry_traverse_pred</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435">callback</a> *func, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga256fabe04c04ac21ed1cecbda615a137"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Iterator through entry predecessors.  <a href="#ga256fabe04c04ac21ed1cecbda615a137">More...</a><br/></td></tr>
<tr class="separator:ga256fabe04c04ac21ed1cecbda615a137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a5db62b2c9c6edfad1c1e250a1d7834"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga8a5db62b2c9c6edfad1c1e250a1d7834">tcmi_ctlfs_entry_depth</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *entry)</td></tr>
<tr class="memdesc:ga8a5db62b2c9c6edfad1c1e250a1d7834"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Calculates the current depth of the entry in the tree.  <a href="#ga8a5db62b2c9c6edfad1c1e250a1d7834">More...</a><br/></td></tr>
<tr class="separator:ga8a5db62b2c9c6edfad1c1e250a1d7834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad56d4df45a818d731f8c69d55b500ae3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gad56d4df45a818d731f8c69d55b500ae3">tcmi_ctlfs_entry_path_length</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad56d4df45a818d731f8c69d55b500ae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Calculates the length of the pathname string.  <a href="#gad56d4df45a818d731f8c69d55b500ae3">More...</a><br/></td></tr>
<tr class="separator:gad56d4df45a818d731f8c69d55b500ae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6273db7c0aede033cd4dd2563cc4848d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6273db7c0aede033cd4dd2563cc4848d">tcmi_ctlfs_entry_fill_path</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *buffer, int length)</td></tr>
<tr class="memdesc:ga6273db7c0aede033cd4dd2563cc4848d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Fills in the entry's pathname.  <a href="#ga6273db7c0aede033cd4dd2563cc4848d">More...</a><br/></td></tr>
<tr class="separator:ga6273db7c0aede033cd4dd2563cc4848d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71558bf14c4a13eed4e4b9ca240fd016"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga71558bf14c4a13eed4e4b9ca240fd016">tcmi_ctlfs_entry_inc_links</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga71558bf14c4a13eed4e4b9ca240fd016"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Increments the number of links referencing this entry's inode.  <a href="#ga71558bf14c4a13eed4e4b9ca240fd016">More...</a><br/></td></tr>
<tr class="separator:ga71558bf14c4a13eed4e4b9ca240fd016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga986b629882729daaf2c9607bfca57c3c"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c">tcmi_ctlfs_entry_name</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga986b629882729daaf2c9607bfca57c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Entry name accessor.  <a href="#ga986b629882729daaf2c9607bfca57c3c">More...</a><br/></td></tr>
<tr class="separator:ga986b629882729daaf2c9607bfca57c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58cab501507b9dca27df7f2c2be23c8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga58cab501507b9dca27df7f2c2be23c8e">tcmi_ctlfs_entry_isroot</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga58cab501507b9dca27df7f2c2be23c8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree.  <a href="#ga58cab501507b9dca27df7f2c2be23c8e">More...</a><br/></td></tr>
<tr class="separator:ga58cab501507b9dca27df7f2c2be23c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab2e404bb2da373a66578541e2dc4ba9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9">tcmi_ctlfs_entry_get</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaab2e404bb2da373a66578541e2dc4ba9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter.  <a href="#gaab2e404bb2da373a66578541e2dc4ba9">More...</a><br/></td></tr>
<tr class="separator:gaab2e404bb2da373a66578541e2dc4ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb72c9fd91acc569fd17362539c781f3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gafb72c9fd91acc569fd17362539c781f3">tcmi_ctlfs_entry_get_parent</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gafb72c9fd91acc569fd17362539c781f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented.  <a href="#gafb72c9fd91acc569fd17362539c781f3">More...</a><br/></td></tr>
<tr class="separator:gafb72c9fd91acc569fd17362539c781f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d6cbcd957efaaa590b335ac3150bb30"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30">tcmi_ctlfs_entry_put</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga6d6cbcd957efaaa590b335ac3150bb30"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the dentry that the instance uses to carry it through out the file system.  <a href="#ga6d6cbcd957efaaa590b335ac3150bb30">More...</a><br/></td></tr>
<tr class="separator:ga6d6cbcd957efaaa590b335ac3150bb30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga21e13dd59db82b54720dfcdbbd7c9760"><td class="memItemLeft" align="right" valign="top">static struct dentry_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga21e13dd59db82b54720dfcdbbd7c9760">tcmi_ctlfs_dentry_ops</a></td></tr>
<tr class="memdesc:ga21e13dd59db82b54720dfcdbbd7c9760"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom dentry delete operation for VFS.  <a href="#ga21e13dd59db82b54720dfcdbbd7c9760">More...</a><br/></td></tr>
<tr class="separator:ga21e13dd59db82b54720dfcdbbd7c9760"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This class represents a generic entry in the tcmi control file system. </p>
<p>No instances of this class can be made. The goal is to provide generic functionality that can be used by specific file system entries:</p>
<ul>
<li>Initialization/deletion/freeing of instances.</li>
<li>Instance reference counting - this is needed as we expect multiple threads of execution to access one entry at a time. This ensures no memory leaks will occur. The reference counting is not implemented from scratch. Each entry is associated with a VFS dentry. These are VFS objects that already have a reference counter. Each instance registers with VFS and receives a notification when the reference counter reaches 0 (<a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga998576674f932bf983a71a04010dd07e" title="&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS release_dentry operation.">tcmi_ctlfs_dentry_release()</a>) and the associated dentry is to be freed. This approach provides a safe access to the entry instances from multiple threads of execution without writing an extra reference couting code.</li>
<li>entry location methods - a generic method that iterates through all predecessors of an entry is provided. This is used when determining the depth of the entry in the filesystem tree. </li>
</ul>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="db/d2a/structtcmi__ctlfs__entry" id="db/d2a/structtcmi__ctlfs__entry"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_ctlfs_entry</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>An entry compound structure. </p>
<p>Contains the associated dentry. </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00075">75</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_ctlfs_entry:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dd9/structtcmi__ctlfs__entry__coll__graph.png" border="0" usemap="#tcmi__ctlfs__entry_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__ctlfs__entry_coll__map" id="tcmi__ctlfs__entry_coll__map">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops" title="entry operations that support polymorphism" alt="" coords="7,5,119,83"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="adfb1f60f3f2ad3dfb452446439c5eace"></a>struct dentry *</td>
<td class="fieldname">
dentry</td>
<td class="fielddoc">
VFS directory entry(dentry) that is associated with an instance. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a46be1f1f05c6cd6dbbb335f3bc81b296"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">tcmi_ctlfs_ops</a> *</td>
<td class="fieldname">
entry_ops</td>
<td class="fielddoc">
custom operations </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a056665de0a509035b66c5668c1d75995"></a>char</td>
<td class="fieldname">
name[256]</td>
<td class="fielddoc">
current entry name </td></tr>
</table>

</div>
</div>
<a name="df/d10/structtcmi__ctlfs__ops" id="df/d10/structtcmi__ctlfs__ops"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_ctlfs_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>entry operations that support polymorphism </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00086">86</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_ctlfs_ops:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de1/structtcmi__ctlfs__ops__coll__graph.png" border="0" usemap="#tcmi__ctlfs__ops_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__ctlfs__ops_coll__map" id="tcmi__ctlfs__ops_coll__map">
</map>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:ab3b0901bfd2d7946969402e883cc6379"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ab3b0901bfd2d7946969402e883cc6379">entry_release</a> )(struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *)</td></tr>
<tr class="memdesc:ab3b0901bfd2d7946969402e883cc6379"><td class="mdescLeft">&#160;</td><td class="mdescRight">child class method, that frees all instance resources (but keeps the instance).  <a href="#ab3b0901bfd2d7946969402e883cc6379">More...</a><br/></td></tr>
<tr class="separator:ab3b0901bfd2d7946969402e883cc6379"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="ab3b0901bfd2d7946969402e883cc6379"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_ctlfs_ops::entry_release)(struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>child class method, that frees all instance resources (but keeps the instance). </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00090">90</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga40271ad06bcd5a49e0014d2e9915ae60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ENTRY_NAME_LEN&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum entry name length. </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00070">70</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabd32888576caebe57e30d25081d77698"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_CTLFS_DENTRY_TO_ENTRY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dentry</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga9d0f1b0d82e9c3872aa08724a9be306b">TCMI_CTLFS_ENTRY</a>(dentry-&gt;d_fsdata)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracts the entry object from the dentry. </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00124">124</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00482">tcmi_ctlfs_dentry_release()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00197">tcmi_ctlfs_entry_get_parent()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00320">tcmi_ctlfs_file_read()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00391">tcmi_ctlfs_file_write()</a>, and <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00175">tcmi_ctlfs_symlink_follow_link()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9d0f1b0d82e9c3872aa08724a9be306b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_CTLFS_ENTRY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *)e)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts a child entry to the super class. </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00126">126</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>Referenced by <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00072">tcmi_ctlfs_dir_vnew()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00224">tcmi_ctlfs_genericfile_new()</a>, <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00113">tcmi_ctlfs_rootdir_new()</a>, <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00128">tcmi_ctlfs_symlink_get_link()</a>, and <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00053">tcmi_ctlfs_symlink_new()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaed2ff1a579396261139d8f277f901435"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void callback(struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *, void *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback method of an object when traversing through predecessors. </p>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00111">111</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga20c8c8e2e7f6c373c438b87504f9bb44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_add_depth </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>curr_depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Helper callback function when calculating entry depth. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*curr_depth</td><td>- pointer to the current depth </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00267">267</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00208">tcmi_ctlfs_entry_depth()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;{</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    (*((<span class="keywordtype">int</span> *)curr_depth))++;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gadac6e4ac71df92c5ecdd9380e97262f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_add_length </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>curr_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Helper callback function when calculating entry pathname length. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*curr_length</td><td>- pointer to the current length </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00280">280</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">tcmi_ctlfs_entry_name()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00223">tcmi_ctlfs_entry_path_length()</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/* + 1 accounts for &#39;/&#39; */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    (*((<span class="keywordtype">int</span> *)curr_length)) += strlen(<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>)) + 1;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_gadac6e4ac71df92c5ecdd9380e97262f5_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_gadac6e4ac71df92c5ecdd9380e97262f5_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_gadac6e4ac71df92c5ecdd9380e97262f5_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_gadac6e4ac71df92c5ecdd9380e97262f5_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="203,5,357,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga34ff536143e832833c73376ef43e3c7f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_add_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Helper callback method when filling the entry's pathname The entry fills in its name and the '/' as prefix to the current end of the buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*buf_data</td><td>- buffer data that contain pointer to the buffer and its current length. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00296">296</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">tcmi_ctlfs_entry_name()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00241">tcmi_ctlfs_entry_fill_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordtype">char</span> *buffer;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    } *buf = buf_data;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">int</span> cur = strlen(<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Adding.. %s, buffer length=%d&quot;</span>, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>), buf-&gt;length);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">/* back up enough to print entry name with &#39;/&#39; prefix */</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    buf-&gt;length -= cur;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    strncpy(buf-&gt;buffer + buf-&gt;length, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>), cur);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    *(buf-&gt;buffer + --(buf-&gt;length)) = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;New buffer length=%d&quot;</span>, buf-&gt;length);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga34ff536143e832833c73376ef43e3c7f_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga34ff536143e832833c73376ef43e3c7f_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga34ff536143e832833c73376ef43e3c7f_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga34ff536143e832833c73376ef43e3c7f_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="193,5,346,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga964c2769e577e9523bf5a6c83ff66640"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ctlfs_dentry_delete </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS delete_dentry operation. </p>
<p>The delete_dentry is called by VFS when destroying the dentry associated with a particular <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> object. This happens when the dentry's reference counter reaches 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dentry</td><td>- pointer to the dentry that is to be deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- always 1 since we don't want the VFS to put the dentry into the dentry_unused. This way the dentry will be unhashed and removed right away </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00462">462</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga998576674f932bf983a71a04010dd07e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_dentry_release </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS release_dentry operation. </p>
<p>The release_dentry is called by VFS when releasing the dentry associated with a particular <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> object. This happens when the dentry's reference counter reaches 0.</p>
<p>Unlike previous VFS method, we are allowed to sleep as the dcache lock and dentry lock are not held anymore (see fs/dcache.c)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dentry</td><td>- pointer to the dentry that is to be deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- always 1 since we don't want the VFS to put the dentry into the dentry_unused. This way the dentry will be unhashed and removed right away </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00482">482</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00124">TCMI_CTLFS_DENTRY_TO_ENTRY</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00324">tcmi_ctlfs_entry_release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">/* get the instance first */</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> *<span class="keyword">self</span> = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gabd32888576caebe57e30d25081d77698" title="Extracts the entry object from the dentry.">TCMI_CTLFS_DENTRY_TO_ENTRY</a>(<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4cb543134cb98474842fe71b27abb82c" title="&lt;&lt;private&gt;&gt; This private method is responsible for freeing any resources the entry is currently using...">tcmi_ctlfs_entry_release</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR2, <span class="stringliteral">&quot;VFS issued dentry_release on a dentry without tcmi_ctlfs_instance!!&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga998576674f932bf983a71a04010dd07e_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga998576674f932bf983a71a04010dd07e_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga998576674f932bf983a71a04010dd07e_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga998576674f932bf983a71a04010dd07e_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4cb543134cb98474842fe71b27abb82c" title="&lt;&lt;private&gt;&gt; This private method is responsible for freeing any resources the entry is currently using..." alt="" coords="224,5,387,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="435,5,589,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaeeb7fba5f385c90d93878a60a4dcf1dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ctlfs_entry_alloc_dentry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct inode *&#160;</td>
          <td class="paramname"><em>inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent's dentry and the current name of the ctlfs entry. </p>
<p>The dentry is associated with the specified inode. The dentry is assigned our custom operations vector, so that we are informed about dentry destruction.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*parent</td><td>- pointer to the parent entry - has to be a directory </td></tr>
    <tr><td class="paramname">*inode</td><td>- pointer to the inode, that is to be associated with the new dentry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00404">404</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00077">tcmi_ctlfs_entry::dentry</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00493">tcmi_ctlfs_dentry_ops</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00066">tcmi_ctlfs_entry_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keyword">struct </span>dentry *dentry;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordtype">int</span> error = 1;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">/* try allocating the dentry */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> ((dentry = d_alloc_name(parent-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>))) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        d_add(dentry, inode); <span class="comment">/* enters the dentry into hash queues */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        dentry-&gt;d_fsdata = (<span class="keywordtype">void</span> *)<span class="keyword">self</span>; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        dentry-&gt;d_op = &amp;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga21e13dd59db82b54720dfcdbbd7c9760" title="Custom dentry delete operation for VFS.">tcmi_ctlfs_dentry_ops</a>; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keyword">self</span>-&gt;dentry = dentry;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="comment">/* dget(dentry); Extra count - pin the dentry in core - not needed */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        error = 0;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to allocate a new dentry for %s&quot;</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga8a5db62b2c9c6edfad1c1e250a1d7834"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_ctlfs_entry_depth </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Calculates the current depth of the entry in the tree. </p>
<p>&lt;&lt;public&gt;&gt; Calculates the current depth of the entry in the tree.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- depth (0 denotes root entry) </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00208">208</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00267">tcmi_ctlfs_add_depth()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00128">tcmi_ctlfs_symlink_get_link()</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">int</span> depth = 0;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137" title="&lt;&lt;public&gt;&gt; Iterates through all entry predecessors and calls the specified method for each entry (inc...">tcmi_ctlfs_entry_traverse_pred</a>(<span class="keyword">self</span>, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga20c8c8e2e7f6c373c438b87504f9bb44" title="&lt;&lt;private&gt;&gt; Helper callback function when calculating entry depth.">tcmi_ctlfs_add_depth</a>, &amp;depth);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> depth;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga8a5db62b2c9c6edfad1c1e250a1d7834_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga8a5db62b2c9c6edfad1c1e250a1d7834_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga8a5db62b2c9c6edfad1c1e250a1d7834_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga8a5db62b2c9c6edfad1c1e250a1d7834_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga20c8c8e2e7f6c373c438b87504f9bb44" title="&lt;&lt;private&gt;&gt; Helper callback function when calculating entry depth." alt="" coords="235,11,381,38"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137" title="&lt;&lt;public&gt;&gt; Iterates through all entry predecessors and calls the specified method for each entry (inc..." alt="" coords="209,62,407,88"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="659,91,797,118"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga58cab501507b9dca27df7f2c2be23c8e" title="&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree." alt="" coords="457,32,610,59"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gafb72c9fd91acc569fd17362539c781f3" title="&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented." alt="" coords="464,84,603,125"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="659,146,797,172"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="846,116,999,143"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4fbd3f1c3789bd79d4e2c684fc08d1a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ctlfs_entry_exists </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*name</td><td>- pointer to the name to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 - if the entry of the specified name exists </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00432">432</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00066">tcmi_ctlfs_entry_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keyword">struct </span>dentry *dentry;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keyword">struct </span>qstr q;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">int</span> exists = 0;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    q.name = name;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    q.len = strlen(name);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    q.hash = full_name_hash(q.name, q.len);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    dentry = d_lookup(self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>, &amp;q);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">/* dentry already exists, decrement its reference counter since lookup </span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">     incremented it */</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (dentry) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        dput(dentry);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            exists = 1;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> exists;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga6273db7c0aede033cd4dd2563cc4848d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_ctlfs_entry_fill_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Fills in the entry's pathname. </p>
<p>&lt;&lt;public&gt;&gt; Fills in the entry's pathname.</p>
<p>The pathname is being filled in reverse order starting from the end of the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this symlink instance </td></tr>
    <tr><td class="paramname">*buffer</td><td>- buffer where store the pathname </td></tr>
    <tr><td class="paramname">length</td><td>- size of the buffer allocated for the pathname - this is can be &gt; pathname length, as the user might want to add some prefix to the pathname (e.g. ../'s) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00241">241</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00296">tcmi_ctlfs_add_path()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00128">tcmi_ctlfs_symlink_get_link()</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordtype">char</span> *buffer;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    } buf_data;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    buf_data.buffer = buffer;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">/* account for terminating \0 */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    buf_data.length = --length; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137" title="&lt;&lt;public&gt;&gt; Iterates through all entry predecessors and calls the specified method for each entry (inc...">tcmi_ctlfs_entry_traverse_pred</a>(<span class="keyword">self</span>, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga34ff536143e832833c73376ef43e3c7f" title="&lt;&lt;private&gt;&gt; Helper callback method when filling the entry&#39;s pathname The entry fills in its name ...">tcmi_ctlfs_add_path</a>, &amp;buf_data);   </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga6273db7c0aede033cd4dd2563cc4848d_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga6273db7c0aede033cd4dd2563cc4848d_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga6273db7c0aede033cd4dd2563cc4848d_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga6273db7c0aede033cd4dd2563cc4848d_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga34ff536143e832833c73376ef43e3c7f" title="&lt;&lt;private&gt;&gt; Helper callback method when filling the entry&#39;s pathname The entry fills in its name ..." alt="" coords="669,5,808,32"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137" title="&lt;&lt;public&gt;&gt; Iterates through all entry predecessors and calls the specified method for each entry (inc..." alt="" coords="219,79,418,105"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="857,111,1010,137"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="669,111,808,137"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga58cab501507b9dca27df7f2c2be23c8e" title="&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree." alt="" coords="467,79,621,105"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gafb72c9fd91acc569fd17362539c781f3" title="&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented." alt="" coords="475,130,613,171"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="669,165,808,192"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaab2e404bb2da373a66578541e2dc4ba9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_ctlfs_entry_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter. </p>
<p>The user is now guaranteed, that the instance stays in memory while he is using it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> instance </dd></dl>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00180">180</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">tcmi_ctlfs_entry_name()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00197">tcmi_ctlfs_entry_get_parent()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>, <a class="el" href="../../d0/d02/tcmi__ctlfs_8c_source.html#l00075">tcmi_ctlfs_get_root()</a>, <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00053">tcmi_ctlfs_symlink_new()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00358">tcmi_migman_init_ctlfs_dirs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Incrementing ref. count of &#39;%s&#39;(%p)&quot;</span>, </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;             <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>), <span class="keyword">self</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        dget(self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_gaab2e404bb2da373a66578541e2dc4ba9_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_gaab2e404bb2da373a66578541e2dc4ba9_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_gaab2e404bb2da373a66578541e2dc4ba9_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_gaab2e404bb2da373a66578541e2dc4ba9_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="193,5,346,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gafb72c9fd91acc569fd17362539c781f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_ctlfs_entry_get_parent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- parent entry. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00197">197</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00124">TCMI_CTLFS_DENTRY_TO_ENTRY</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00180">tcmi_ctlfs_entry_get()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter...">tcmi_ctlfs_entry_get</a>(<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gabd32888576caebe57e30d25081d77698" title="Extracts the entry object from the dentry.">TCMI_CTLFS_DENTRY_TO_ENTRY</a>(self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>-&gt;d_parent));</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_gafb72c9fd91acc569fd17362539c781f3_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_gafb72c9fd91acc569fd17362539c781f3_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_gafb72c9fd91acc569fd17362539c781f3_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_gafb72c9fd91acc569fd17362539c781f3_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="192,12,331,39"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="379,12,533,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga71558bf14c4a13eed4e4b9ca240fd016"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_entry_inc_links </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Increments the number of links referencing this entry's inode. </p>
<p>This method is used by directory entries. When a new child entry is added to the directory, the number of links in the inode-&gt;i_nlink needs to be adjusted as well as its parent's inode-&gt;i_nlink also needs to be incremented</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00138">138</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>Referenced by <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00072">tcmi_ctlfs_dir_vnew()</a>, and <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00113">tcmi_ctlfs_rootdir_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">/* FIX ME: down i_sem */</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">self</span>-&gt;dentry-&gt;d_inode-&gt;i_nlink++;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">/* up i_sem */</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga532181c3f7224fe5aa7651a69e6ad6b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_ctlfs_entry_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">tcmi_ctlfs_ops</a> *&#160;</td>
          <td class="paramname"><em>entry_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct inode_operations *&#160;</td>
          <td class="paramname"><em>i_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct file_operations *&#160;</td>
          <td class="paramname"><em>f_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>namefmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Initializes an instance. </p>
<p>&lt;&lt;public&gt;&gt; Initializes an instance.</p>
<p>It follows these steps:</p>
<ul>
<li>converts the nameformat string and the args into a regular string This will be the name assigned to the dentry</li>
<li>checks whether we have a valid parent directory</li>
<li>check whether an entry with the same name already exists in the parent directory entry(if so, an error is returned)</li>
<li>creates a new inode with the specified super block and operations</li>
<li>creates a new dentry associated with the inode.</li>
<li>sets a entry_operations specific to this particular entry type This supports polymorphism.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*parent</td><td>- pointer to the parent entry - has to be a directory </td></tr>
    <tr><td class="paramname">*mode</td><td>- file type and access rights for the inode </td></tr>
    <tr><td class="paramname">*entry_ops</td><td>- custom operations of the child class </td></tr>
    <tr><td class="paramname">*i_ops</td><td>- inode operations </td></tr>
    <tr><td class="paramname">*f_ops</td><td>- file operations(also stored in the new inode) </td></tr>
    <tr><td class="paramname">namefmt</td><td>- nameformat string (printf style) </td></tr>
    <tr><td class="paramname">args</td><td>- arguments to the format string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00066">66</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00077">tcmi_ctlfs_entry::dentry</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00404">tcmi_ctlfs_entry_alloc_dentry()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00432">tcmi_ctlfs_entry_exists()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">tcmi_ctlfs_entry_name()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00360">tcmi_ctlfs_get_inode()</a>.</p>

<p>Referenced by <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00072">tcmi_ctlfs_dir_vnew()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00224">tcmi_ctlfs_genericfile_new()</a>, and <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00053">tcmi_ctlfs_symlink_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">struct </span>inode *dir;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">struct </span>inode *inode;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    vsnprintf(self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>, <span class="keyword">sizeof</span>(self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>), namefmt, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496" title="Arrays of args and envps.">args</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Initializing a new tcmi_ctlfs_entry, &#39;%s&#39;(%p)&quot;</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>, <span class="keyword">self</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (!parent) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;Can&#39;t initialized new entry &#39;%s&#39;, no parent specified! &quot;</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Parent entry=&#39;%s&#39;&quot;</span>, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(parent));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">/* */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    dir = parent-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>-&gt;d_inode;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (!S_ISDIR(dir-&gt;i_mode)) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t initialize new entry &#39;%s&#39;, parent entry is not a directory!&quot;</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">/* check parent for an entry with &#39;name&#39; */</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name">tcmi_ctlfs_entry_exists</a>(parent, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>)) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3,<span class="stringliteral">&quot;Can&#39;t initialize new entry &#39;%s&#39;, parent entry contains an entry of the same name!&quot;</span>, </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;             self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* allocate a new inode */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (!(inode = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation.">tcmi_ctlfs_get_inode</a>(dir, dir-&gt;i_sb, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77" title="access mode for the file">mode</a>, i_ops, f_ops))) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to allocate an inode for &#39;%s&#39;&quot;</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">/* allocate a new dentry, associated with the inode */</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ...">tcmi_ctlfs_entry_alloc_dentry</a>(<span class="keyword">self</span>, parent, inode)) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to allocate a new dentry for %s&quot;</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a056665de0a509035b66c5668c1d75995" title="current entry name">name</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">/* Custom operations of the child class */</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">self</span>-&gt;entry_ops = entry_ops;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; exit1:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    iput(inode);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; exit0:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> -ENOSPC;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga532181c3f7224fe5aa7651a69e6ad6b4_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga532181c3f7224fe5aa7651a69e6ad6b4_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga532181c3f7224fe5aa7651a69e6ad6b4_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga532181c3f7224fe5aa7651a69e6ad6b4_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="197,5,345,46"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="193,71,349,97"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="194,121,347,148"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="200,172,341,199"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga58cab501507b9dca27df7f2c2be23c8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ctlfs_entry_isroot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree. </p>
<p>This is when the d_parent of the dentry of this <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> points back to the dentry</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- 1 if it is root </dd></dl>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00165">165</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">struct </span>dentry *dentry = <span class="keyword">self</span>-&gt;dentry;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> (dentry == dentry-&gt;d_parent);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga986b629882729daaf2c9607bfca57c3c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* tcmi_ctlfs_entry_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Entry name accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- entry name </dd></dl>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">151</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00280">tcmi_ctlfs_add_length()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00296">tcmi_ctlfs_add_path()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00180">tcmi_ctlfs_entry_get()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00066">tcmi_ctlfs_entry_init()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00324">tcmi_ctlfs_entry_release()</a>, and <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00101">tcmi_ctlfs_symlink_release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;dentry-&gt;d_name.name;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad56d4df45a818d731f8c69d55b500ae3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_ctlfs_entry_path_length </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Calculates the length of the pathname string. </p>
<p>&lt;&lt;public&gt;&gt; Calculates the length of the pathname string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pathname length </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00223">223</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00280">tcmi_ctlfs_add_length()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00128">tcmi_ctlfs_symlink_get_link()</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">int</span> length = 1;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137" title="&lt;&lt;public&gt;&gt; Iterates through all entry predecessors and calls the specified method for each entry (inc...">tcmi_ctlfs_entry_traverse_pred</a>(<span class="keyword">self</span>, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gadac6e4ac71df92c5ecdd9380e97262f5" title="&lt;&lt;private&gt;&gt; Helper callback function when calculating entry pathname length.">tcmi_ctlfs_add_length</a>, &amp;length);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> length;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_gad56d4df45a818d731f8c69d55b500ae3_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_gad56d4df45a818d731f8c69d55b500ae3_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_gad56d4df45a818d731f8c69d55b500ae3_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_gad56d4df45a818d731f8c69d55b500ae3_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gadac6e4ac71df92c5ecdd9380e97262f5" title="&lt;&lt;private&gt;&gt; Helper callback function when calculating entry pathname length." alt="" coords="651,5,799,32"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256fabe04c04ac21ed1cecbda615a137" title="&lt;&lt;public&gt;&gt; Iterates through all entry predecessors and calls the specified method for each entry (inc..." alt="" coords="201,79,399,105"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="849,111,1002,137"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="656,111,795,137"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga58cab501507b9dca27df7f2c2be23c8e" title="&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree." alt="" coords="449,79,602,105"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gafb72c9fd91acc569fd17362539c781f3" title="&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented." alt="" coords="456,130,595,171"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="656,165,795,192"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6d6cbcd957efaaa590b335ac3150bb30"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_entry_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the dentry that the instance uses to carry it through out the file system. </p>
<p>If the reference count reaches 0, the dentry will be released from the dentry cache and the instance of <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> will be freed. (VFS calls the d_delete() method of the dentry that we have customized</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga964c2769e577e9523bf5a6c83ff66640" title="&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS delete_dentry operation.">tcmi_ctlfs_dentry_delete</a> and d_release() that is also customized in <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga998576674f932bf983a71a04010dd07e" title="&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS release_dentry operation.">tcmi_ctlfs_dentry_release()</a>)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">214</a> of file <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html">tcmi_ctlfs_entry.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">tcmi_ctlfs_entry_name()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00133">tcmi_ccnman_init_ctlfs_dirs()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00248">tcmi_ccnman_stop_ctlfs_dirs()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00258">tcmi_ccnman_stop_ctlfs_files()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00161">tcmi_ccnmigman_stop_ctlfs_files()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">tcmi_ctlfs_entry_traverse_pred()</a>, <a class="el" href="../../d0/d02/tcmi__ctlfs_8c_source.html#l00116">tcmi_ctlfs_put_root()</a>, <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00101">tcmi_ctlfs_symlink_release()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00227">tcmi_man_init_ctlfs_dirs()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00324">tcmi_man_stop_ctlfs_dirs()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00341">tcmi_man_stop_ctlfs_files()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00358">tcmi_migman_init_ctlfs_dirs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00404">tcmi_migman_init_ctlfs_files()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00454">tcmi_migman_stop_ctlfs_dirs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00472">tcmi_migman_stop_ctlfs_files()</a>, <a class="el" href="../../d0/d0f/tcmi__module_8c_source.html#l00168">tcmi_module_exit()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00123">tcmi_penman_stop_ctlfs_files()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00177">tcmi_penmigman_stop_ctlfs_files()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00112">tcmi_task_init()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00209">tcmi_task_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Decrementing ref. count of &#39;%s&#39;(%p) (dentry: %p). Count before dec: %d&quot;</span>, </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;             <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>), <span class="keyword">self</span>, self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>, atomic_read(&amp;self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>-&gt;d_count));</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        dput(self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#adfb1f60f3f2ad3dfb452446439c5eace" title="VFS directory entry(dentry) that is associated with an instance.">dentry</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga6d6cbcd957efaaa590b335ac3150bb30_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga6d6cbcd957efaaa590b335ac3150bb30_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga6d6cbcd957efaaa590b335ac3150bb30_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga6d6cbcd957efaaa590b335ac3150bb30_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="193,5,346,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4cb543134cb98474842fe71b27abb82c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ctlfs_entry_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; This private method is responsible for freeing any resources the entry is currently using(currently nothing). </p>
<p>When possible the child class is also notified. The instance is eventually destroyed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00324">324</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00151">tcmi_ctlfs_entry_name()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00482">tcmi_ctlfs_dentry_release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;entry &#39;%s&#39; is being freed(%p)&quot;</span>, </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor.">tcmi_ctlfs_entry_name</a>(<span class="keyword">self</span>), <span class="keyword">self</span>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">/* free child class instance data? */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a46be1f1f05c6cd6dbbb335f3bc81b296" title="custom operations">entry_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#a46be1f1f05c6cd6dbbb335f3bc81b296" title="custom operations">entry_ops</a>-&gt;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ab3b0901bfd2d7946969402e883cc6379" title="child class method, that frees all instance resources (but keeps the instance).">entry_release</a>) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keyword">self</span>-&gt;entry_ops-&gt;entry_release(<span class="keyword">self</span>);   </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga4cb543134cb98474842fe71b27abb82c_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga4cb543134cb98474842fe71b27abb82c_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga4cb543134cb98474842fe71b27abb82c_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga4cb543134cb98474842fe71b27abb82c_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="217,5,370,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga256fabe04c04ac21ed1cecbda615a137"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_ctlfs_entry_traverse_pred </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435">callback</a> *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Iterator through entry predecessors. </p>
<p>&lt;&lt;public&gt;&gt; Iterator through entry predecessors.</p>
<p>The root entry is omitted. The callback function is supplied with the pointer to data that the users specified as parameter. This provides a safe way of iterating through all predecessors. The reference counters are used to control the access from multiple threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*func</td><td>- pointer to the callback function </td></tr>
    <tr><td class="paramname">*data</td><td>- pointer to the data that is passed the callback. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00180">180</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d9/d10/tcmi__npm__params_8h_source.html#l00059">data</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00180">tcmi_ctlfs_entry_get()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00197">tcmi_ctlfs_entry_get_parent()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00165">tcmi_ctlfs_entry_isroot()</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00208">tcmi_ctlfs_entry_depth()</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00241">tcmi_ctlfs_entry_fill_path()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00223">tcmi_ctlfs_entry_path_length()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> *parent;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure.">tcmi_ctlfs_entry</a> *entry = <span class="keyword">self</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">/* increment the ref counter and get the instance */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    parent = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter...">tcmi_ctlfs_entry_get</a>(entry);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">/* mdbg(INFO4, &quot;getting %s&quot;, tcmi_ctlfs_entry_name(entry)); */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga58cab501507b9dca27df7f2c2be23c8e" title="&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree.">tcmi_ctlfs_entry_isroot</a>(parent)) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        entry = parent;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        parent = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gafb72c9fd91acc569fd17362539c781f3" title="&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented.">tcmi_ctlfs_entry_get_parent</a>(entry);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">/* mdbg(INFO4, &quot;getting %s&quot;, tcmi_ctlfs_entry_name(parent)); */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        (*func)(entry, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>); <span class="comment">/* notify the next entry */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(entry);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">/* mdbg(INFO4, &quot;putting %s&quot;, tcmi_ctlfs_entry_name(entry)); */</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    } </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">/* decrement the root&#39;s reference counter too */</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(parent);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">/* mdbg(INFO4, &quot;putting %s&quot;, tcmi_ctlfs_entry_name(parent)); */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_ga256fabe04c04ac21ed1cecbda615a137_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_ga256fabe04c04ac21ed1cecbda615a137_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_ga256fabe04c04ac21ed1cecbda615a137_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_ga256fabe04c04ac21ed1cecbda615a137_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="456,33,595,59"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gafb72c9fd91acc569fd17362539c781f3" title="&lt;&lt;public&gt;&gt; Returns parent entry, reference counter is incremented." alt="" coords="261,25,400,67"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga58cab501507b9dca27df7f2c2be23c8e" title="&lt;&lt;public&gt;&gt; Checks whether a given entry is the root of the TCMI ctlfs tree." alt="" coords="254,91,407,118"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="456,115,595,142"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="643,61,797,87"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga256f5088d3434bfadcdb0cb59bf25cb7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct inode* tcmi_ctlfs_get_inode </td>
          <td>(</td>
          <td class="paramtype">struct inode *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct inode_operations *&#160;</td>
          <td class="paramname"><em>i_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct file_operations *&#160;</td>
          <td class="paramname"><em>f_ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; A method for inode allocation. </p>
<p>Currently the uid and gid is assigned based on the current's fsuid and fsgid. Block size is not relevant, set to page size. If the user doesn't specify any inode or file operations, the default(empty operations, but not NULL) assigned by the VFS will be kept.</p>
<p>If the user specified a parent directory inode, it's access rights are investigated and inherited by the new inode as follows:</p>
<ul>
<li>if the parent has the SGID bit set, parent's gid is assigned to the new inode.</li>
<li>a parent SGID bit is set on the new inode, if the new inode is a directory</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dir</td><td>- inode of the parent directory for the new inode </td></tr>
    <tr><td class="paramname">*sb</td><td>- super block of the filesystem where the inode is to be allocated </td></tr>
    <tr><td class="paramname">*mode</td><td>- file type and access rights for the inode </td></tr>
    <tr><td class="paramname">*i_ops</td><td>- inode operations </td></tr>
    <tr><td class="paramname">*f_ops</td><td>- file operations (also stored in the new inode) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the new inode or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00360">360</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00221">minfo</a>, and <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h_source.html#l00129">mode</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00066">tcmi_ctlfs_entry_init()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00130">tcmi_ctlfs_rootentry_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">struct </span>inode *inode = new_inode(sb);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (inode) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        inode-&gt;i_mode = <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77" title="access mode for the file">mode</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        inode-&gt;i_uid = current_fsuid();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        inode-&gt;i_gid = current_fsgid();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        inode-&gt;i_blocks = 0;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        inode-&gt;i_op  = (i_ops ? i_ops : inode-&gt;i_op);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        inode-&gt;i_fop = (f_ops ? f_ops : inode-&gt;i_fop);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        inode-&gt;i_atime = inode-&gt;i_mtime = inode-&gt;i_ctime = CURRENT_TIME;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;New inode allocated, inode number = %ld&quot;</span>, inode-&gt;i_ino);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">/* check parent inode&#39;s(if any) access rights */</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> (dir &amp;&amp; (dir-&gt;i_mode &amp; S_ISGID)) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            inode-&gt;i_gid = dir-&gt;i_gid;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">if</span> (S_ISDIR(<a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77" title="access mode for the file">mode</a>))</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                inode-&gt;i_mode |= S_ISGID;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Failed to allocate a new inode&quot;</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gacda4dfc581441853eea35819b0beca60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_ctlfs_rootentry_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops">tcmi_ctlfs_ops</a> *&#160;</td>
          <td class="paramname"><em>entry_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct inode_operations *&#160;</td>
          <td class="paramname"><em>i_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct file_operations *&#160;</td>
          <td class="paramname"><em>f_ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Initializes a root entry instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">*sb</td><td>- pointer to the super block of the filesystem </td></tr>
    <tr><td class="paramname">*mode</td><td>- file type and access rights for the inode </td></tr>
    <tr><td class="paramname">*entry_ops</td><td>- custom operations of the child class </td></tr>
    <tr><td class="paramname">*i_ops</td><td>- inode operations </td></tr>
    <tr><td class="paramname">*f_ops</td><td>- file operations(also stored in the new inode) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00130">130</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00493">tcmi_ctlfs_dentry_ops</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00360">tcmi_ctlfs_get_inode()</a>.</p>

<p>Referenced by <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00113">tcmi_ctlfs_rootdir_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">struct </span>dentry *root;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">struct </span>inode *inode;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Initializing a root entry&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (!(inode = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation.">tcmi_ctlfs_get_inode</a>(NULL, sb, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a511a8806c63b72ff1b8b5f1a7f9d7c77" title="access mode for the file">mode</a>, i_ops, f_ops))) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR1, <span class="stringliteral">&quot;Failed to allocate inode for root dentry!&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">/* try allocating the dentry */</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (!(root = d_alloc_root(inode))) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR1, <span class="stringliteral">&quot;Failed to allocate a root dentry!&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">/* Initialize the dentry */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    root-&gt;d_fsdata = (<span class="keywordtype">void</span> *)<span class="keyword">self</span>; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    root-&gt;d_op = &amp;<a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga21e13dd59db82b54720dfcdbbd7c9760" title="Custom dentry delete operation for VFS.">tcmi_ctlfs_dentry_ops</a>; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">self</span>-&gt;dentry = root;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    sb-&gt;s_root = root;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">/* Custom operations of the child class */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">self</span>-&gt;entry_ops = entry_ops;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">/* error handling*/</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; exit1:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    iput(inode);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; exit0:</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> -ENOSPC;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d36/group__tcmi__ctlfs__entry__class_gacda4dfc581441853eea35819b0beca60_cgraph.png" border="0" usemap="#d8/d36/group__tcmi__ctlfs__entry__class_gacda4dfc581441853eea35819b0beca60_cgraph" alt=""/></div>
<map name="d8/d36/group__tcmi__ctlfs__entry__class_gacda4dfc581441853eea35819b0beca60_cgraph" id="d8/d36/group__tcmi__ctlfs__entry__class_gacda4dfc581441853eea35819b0beca60_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="213,5,355,32"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga21e13dd59db82b54720dfcdbbd7c9760"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct dentry_operations tcmi_ctlfs_dentry_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    .d_delete   = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga964c2769e577e9523bf5a6c83ff66640" title="&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS delete_dentry operation.">tcmi_ctlfs_dentry_delete</a>,</div>
<div class="line">    .d_release      = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga998576674f932bf983a71a04010dd07e" title="&lt;&lt;private&gt;&gt; This class method is a custom implementation of a VFS release_dentry operation.">tcmi_ctlfs_dentry_release</a>,</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Custom dentry delete operation for VFS. </p>

<p>Definition at line <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00493">493</a> of file <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html">tcmi_ctlfs_entry.c</a>.</p>

<p>Referenced by <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00404">tcmi_ctlfs_entry_alloc_dentry()</a>, and <a class="el" href="../../df/d1c/tcmi__ctlfs__entry_8c_source.html#l00130">tcmi_ctlfs_rootentry_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 18:46:56 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
