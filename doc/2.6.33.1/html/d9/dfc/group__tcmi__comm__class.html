<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_comm class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported Linux kernel 2.6.33.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d9/dfc/group__tcmi__comm__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_comm class<div class="ingroups"><a class="el" href="../../d4/d6b/group__tcmi__comm__group.html">communication</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class provides functionality to receive and deliver messages via a specified connection.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_comm class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d9/dfc/group__tcmi__comm__class.png" border="0" alt="" usemap="#d9_2dfc_2group____tcmi____comm____class"/>
<map name="d9_2dfc_2group____tcmi____comm____class" id="d9_2dfc_2group____tcmi____comm____class">
<area shape="rect" id="node1" href="../../d4/d6b/group__tcmi__comm__group.html" title="Classes in this group provide TCMI communication features." alt="" coords="6,5,117,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:de/d0f/structtcmi__comm"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a></td></tr>
<tr class="memdesc:de/d0f/structtcmi__comm"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compound structure that holds reference to the connection and the user method.  <a href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">More...</a><br/></td></tr>
<tr class="separator:de/d0f/structtcmi__comm"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga8cefd1921db426bb7cde4545441dd43a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#ga8cefd1921db426bb7cde4545441dd43a">TCMI_COMM</a>(c)&#160;&#160;&#160;((struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a>*)c)</td></tr>
<tr class="memdesc:ga8cefd1921db426bb7cde4545441dd43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a> instance.  <a href="#ga8cefd1921db426bb7cde4545441dd43a">More...</a><br/></td></tr>
<tr class="separator:ga8cefd1921db426bb7cde4545441dd43a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9db330620d4a0492584227e29697ae94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#ga9db330620d4a0492584227e29697ae94">wait_on_should_stop</a>()</td></tr>
<tr class="memdesc:ga9db330620d4a0492584227e29697ae94"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro implements atomic check for thread stop request and puts the task to sleep until such request arrives.  <a href="#ga9db330620d4a0492584227e29697ae94">More...</a><br/></td></tr>
<tr class="separator:ga9db330620d4a0492584227e29697ae94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaa58ae753d6619eb8f90be0556f8c017e"><td class="memItemLeft" align="right" valign="top">typedef int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#gaa58ae753d6619eb8f90be0556f8c017e">deliver_method_t</a> (void *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td></tr>
<tr class="memdesc:gaa58ae753d6619eb8f90be0556f8c017e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message delivery callback method type.  <a href="#gaa58ae753d6619eb8f90be0556f8c017e">More...</a><br/></td></tr>
<tr class="separator:gaa58ae753d6619eb8f90be0556f8c017e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaef03fa6d00b3c8a916625e2d17b961d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#gaef03fa6d00b3c8a916625e2d17b961d0">tcmi_comm_thread</a> (void *<a class="el" href="../../d6/db7/tcmi__ckpt_8h.html#a59d00a3d4123d24c34c7d6a461b26a48">comm</a>)</td></tr>
<tr class="memdesc:gaef03fa6d00b3c8a916625e2d17b961d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Messages receiving thread.  <a href="#gaef03fa6d00b3c8a916625e2d17b961d0">More...</a><br/></td></tr>
<tr class="separator:gaef03fa6d00b3c8a916625e2d17b961d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6dd2840fed12c1b41a99ec4cd0f3457c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#ga6dd2840fed12c1b41a99ec4cd0f3457c">tcmi_comm_new</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock, <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#gaa58ae753d6619eb8f90be0556f8c017e">deliver_method_t</a> *method, void *obj, int msg_group)</td></tr>
<tr class="memdesc:ga6dd2840fed12c1b41a99ec4cd0f3457c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; TCMI communication component constructor.  <a href="#ga6dd2840fed12c1b41a99ec4cd0f3457c">More...</a><br/></td></tr>
<tr class="separator:ga6dd2840fed12c1b41a99ec4cd0f3457c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89dc5a63295a65407cc93606c79ca314"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314">tcmi_comm_put</a> (struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga89dc5a63295a65407cc93606c79ca314"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Decrements the reference counter.  <a href="#ga89dc5a63295a65407cc93606c79ca314">More...</a><br/></td></tr>
<tr class="separator:ga89dc5a63295a65407cc93606c79ca314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab87b5efee1ea8614a01f1ec4dec9d7a4"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#gab87b5efee1ea8614a01f1ec4dec9d7a4">tcmi_comm_get</a> (struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gab87b5efee1ea8614a01f1ec4dec9d7a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count.  <a href="#gab87b5efee1ea8614a01f1ec4dec9d7a4">More...</a><br/></td></tr>
<tr class="separator:gab87b5efee1ea8614a01f1ec4dec9d7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga9c2282ee3b7cfd3d410d86855f84e910"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#ga9c2282ee3b7cfd3d410d86855f84e910">tcmi_comm_counter</a> = 0</td></tr>
<tr class="memdesc:ga9c2282ee3b7cfd3d410d86855f84e910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread counter - used for receiving thread naming.  <a href="#ga9c2282ee3b7cfd3d410d86855f84e910">More...</a><br/></td></tr>
<tr class="separator:ga9c2282ee3b7cfd3d410d86855f84e910"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This class provides functionality to receive and deliver messages via a specified connection. </p>
<p>The base of each instance is a separate thread receiving messages via specified connection. The user also specifies a method along with a parameter to be called upon reception of each message. This method is responsible for message delivery. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="de/d0f/structtcmi__comm" id="de/d0f/structtcmi__comm"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_comm</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Compound structure that holds reference to the connection and the user method. </p>

<p>Definition at line <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00058">58</a> of file <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html">tcmi_comm.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_comm:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/dde/structtcmi__comm__coll__graph.png" border="0" usemap="#tcmi__comm_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__comm_coll__map" id="tcmi__comm_coll__map">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket." alt="" coords="119,451,248,602"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="39,213,113,320"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="5,5,147,83"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="138,147,301,386"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a8063f276d088ab23b724c1eee52f8396"></a><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#gaa58ae753d6619eb8f90be0556f8c017e">deliver_method_t</a> *</td>
<td class="fieldname">
deliver</td>
<td class="fielddoc">
message delivery method </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a990fa154400a3cfb27c8e1b960d570e6"></a>int</td>
<td class="fieldname">
msg_group</td>
<td class="fielddoc">
preferred group of messages that will be received. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a21b99a5d5df4950eee7a5de1b34fe400"></a>void *</td>
<td class="fieldname">
obj</td>
<td class="fielddoc">
object whose method is to be called for message delivery. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2b6c69565a854987026ceb158d69d083"></a>atomic_t</td>
<td class="fieldname">
ref_count</td>
<td class="fielddoc">
reference counter </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a099ceddc2c786b7d170f8389cadf5145"></a>struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *</td>
<td class="fieldname">
sock</td>
<td class="fielddoc">
communication socket used for receiving </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2a449df4d3c574694cc5ab915af827fa"></a>struct task_struct *</td>
<td class="fieldname">
thread</td>
<td class="fielddoc">
message receiving thread </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga8cefd1921db426bb7cde4545441dd43a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_COMM</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a>*)c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a> instance. </p>

<p>Definition at line <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00080">80</a> of file <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html">tcmi_comm.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">tcmi_comm_new()</a>, and <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">tcmi_comm_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9db330620d4a0492584227e29697ae94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define wait_on_should_stop</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                            \</div>
<div class="line">    do {                        \</div>
<div class="line">        schedule();             \</div>
<div class="line">        set_current_state(TASK_UNINTERRUPTIBLE);\</div>
<div class="line">    } <span class="keywordflow">while</span>(!kthread_should_stop());        \</div>
<div class="line">    set_current_state(TASK_RUNNING);        \</div>
<div class="line">} <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>This macro implements atomic check for thread stop request and puts the task to sleep until such request arrives. </p>
<p>Note the order of operations, the change of the state must always be prior to checking if it should stop. Any other order is incorrect and might put the task to sleep indefinitely. Also, it is necessary to set the state to uninterruptible, so that the thread won't get woken up rightaway by a pending signal. </p>

<p>Definition at line <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00112">112</a> of file <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html">tcmi_comm.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">tcmi_comm_thread()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">tcmi_migman_msg_thread()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaa58ae753d6619eb8f90be0556f8c017e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int deliver_method_t(void *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message delivery callback method type. </p>

<p>Definition at line <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00054">54</a> of file <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html">tcmi_comm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gab87b5efee1ea8614a01f1ec4dec9d7a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a>* tcmi_comm_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this comm instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00096">96</a> of file <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html">tcmi_comm.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        atomic_inc(&amp;self-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2b6c69565a854987026ceb158d69d083" title="reference counter">ref_count</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga6dd2840fed12c1b41a99ec4cd0f3457c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a>* tcmi_comm_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#gaa58ae753d6619eb8f90be0556f8c017e">deliver_method_t</a> *&#160;</td>
          <td class="paramname"><em>deliver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msg_group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; TCMI communication component constructor. </p>
<ul>
<li>allocates the instance</li>
<li>starts a new message receiving thread thread</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sock</td><td>- pointer to the socket that is to be used for the communication </td></tr>
    <tr><td class="paramname">*deliver</td><td>- method to be called upon message delivery </td></tr>
    <tr><td class="paramname">*obj</td><td>- object whose method is to be called </td></tr>
    <tr><td class="paramname">msg_group</td><td>- preferred group of messages that are to be received - see tcmi_messages </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new communication component or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">56</a> of file <a class="el" href="../../de/df4/tcmi__comm_8c_source.html">tcmi_comm.c</a>.</p>

<p>References <a class="el" href="../../d6/db7/tcmi__ckpt_8h_source.html#l00098">comm</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00066">tcmi_comm::deliver</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00251">kkc_sock_get()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00269">kkc_sock_put()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00073">tcmi_comm::msg_group</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00070">tcmi_comm::obj</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00060">tcmi_comm::ref_count</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00063">tcmi_comm::sock</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00080">TCMI_COMM</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00186">tcmi_comm_counter</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">tcmi_comm_thread()</a>, and <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00076">tcmi_comm::thread</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a> *<a class="code" href="../../d6/db7/tcmi__ckpt_8h.html#a59d00a3d4123d24c34c7d6a461b26a48" title="Process executable name.">comm</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span> (!sock || !<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a8063f276d088ab23b724c1eee52f8396" title="message delivery method">deliver</a>) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing socket or delivery method&quot;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (!(comm = <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga8cefd1921db426bb7cde4545441dd43a" title="Casts to the tcmi_comm instance.">TCMI_COMM</a>(kmalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a>), GFP_KERNEL)))) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t allocate memory for communication component&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    atomic_set(&amp;comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2b6c69565a854987026ceb158d69d083" title="reference counter">ref_count</a>, 1);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a099ceddc2c786b7d170f8389cadf5145" title="communication socket used for receiving">sock</a> = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count.">kkc_sock_get</a>(sock);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a8063f276d088ab23b724c1eee52f8396" title="message delivery method">deliver</a> = <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a8063f276d088ab23b724c1eee52f8396" title="message delivery method">deliver</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a21b99a5d5df4950eee7a5de1b34fe400" title="object whose method is to be called for message delivery.">obj</a> = <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a21b99a5d5df4950eee7a5de1b34fe400" title="object whose method is to be called for message delivery.">obj</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a990fa154400a3cfb27c8e1b960d570e6" title="preferred group of messages that will be received.">msg_group</a> = <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a990fa154400a3cfb27c8e1b960d570e6" title="preferred group of messages that will be received.">msg_group</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2a449df4d3c574694cc5ab915af827fa" title="message receiving thread">thread</a> = kthread_run(<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#gaef03fa6d00b3c8a916625e2d17b961d0" title="&lt;&lt;private&gt;&gt; Messages receiving thread.">tcmi_comm_thread</a>, comm, </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                   <span class="stringliteral">&quot;tcmi_commd_%02d&quot;</span>, <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga9c2282ee3b7cfd3d410d86855f84e910" title="Thread counter - used for receiving thread naming.">tcmi_comm_counter</a>++);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2a449df4d3c574694cc5ab915af827fa" title="message receiving thread">thread</a>)) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR2, <span class="stringliteral">&quot;Failed to create a message receiving thread!&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Created TCMI comm, preferred message group %d, memory=%p&quot;</span>, </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;         comm-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a990fa154400a3cfb27c8e1b960d570e6" title="preferred group of messages that will be received.">msg_group</a>, comm);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/db7/tcmi__ckpt_8h.html#a59d00a3d4123d24c34c7d6a461b26a48" title="Process executable name.">comm</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; exit1:</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(sock);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    kfree(comm);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; exit0:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dfc/group__tcmi__comm__class_ga6dd2840fed12c1b41a99ec4cd0f3457c_cgraph.png" border="0" usemap="#d9/dfc/group__tcmi__comm__class_ga6dd2840fed12c1b41a99ec4cd0f3457c_cgraph" alt=""/></div>
<map name="d9/dfc/group__tcmi__comm__class_ga6dd2840fed12c1b41a99ec4cd0f3457c_cgraph" id="d9/dfc/group__tcmi__comm__class_ga6dd2840fed12c1b41a99ec4cd0f3457c_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="189,31,291,57"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="189,81,291,108"/><area shape="rect" id="node9" href="../../d9/dfc/group__tcmi__comm__class.html#gaef03fa6d00b3c8a916625e2d17b961d0" title="&lt;&lt;private&gt;&gt; Messages receiving thread." alt="" coords="173,157,307,184"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="390,5,490,32"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="357,107,523,133"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="355,56,525,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="597,107,757,133"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="596,56,759,83"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadafc7c835c7d6d94be66f61a050108b7" title="&lt;&lt;public&gt;&gt; Receives requested number of bytes of data." alt="" coords="623,208,731,235"/><area shape="rect" id="node12" href="../../de/dc6/group__tcmi__msg__factory__class.html#gad7b63f4c6657bcd0eaf759d79d344981" title="&lt;&lt;public&gt;&gt; Materializes the message." alt="" coords="377,335,503,361"/><area shape="rect" id="node14" href="../../d6/dc2/group__tcmi__msg__class.html#ga84688215ef9615fdc2699eea0dbb8031" title="&lt;&lt;public&gt;&gt; Receives a message via a specified connection." alt="" coords="385,259,495,285"/><area shape="rect" id="node17" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="388,157,492,184"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="830,259,973,285"/><area shape="rect" id="node13" href="../../d6/dc2/group__tcmi__msg__class.html#gacd1d8503b665439b2562b4ca8806ca12" title="&lt;&lt;public&gt;&gt; Class method &#45; creates a message based on a descriptor." alt="" coords="614,360,741,387"/><area shape="rect" id="node15" href="../../d6/d8e/group__kkc__sock__class.html#ga111890916880384e47495e8859f57c95" title="&lt;&lt;public&gt;&gt; Locks this socket instance for receiving, interruptible version, the process can be woken ..." alt="" coords="574,259,781,285"/><area shape="rect" id="node16" href="../../d6/d8e/group__kkc__sock__class.html#ga82295120b31f3818bbc9b9a462a22b56" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for receiving." alt="" coords="604,309,751,336"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="606,157,749,184"/><area shape="rect" id="node19" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="839,208,964,235"/><area shape="rect" id="node20" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="834,56,969,83"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="840,107,963,133"/><area shape="rect" id="node28" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="832,157,971,184"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1022,56,1159,83"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1037,107,1144,133"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1031,157,1151,184"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1230,31,1349,57"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1209,81,1370,108"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1419,81,1531,108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga89dc5a63295a65407cc93606c79ca314"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_comm_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Decrements the reference counter. </p>
<p>&lt;&lt;public&gt;&gt; Decrements the reference counter.</p>
<p>Decrements reference counter and if it reaches 0, it will:</p>
<ul>
<li>stop the receiving thread by sending it a forced signal. The signal interrupts any blocking receive operation. Then we wait till the thread terminates.</li>
<li>release the socket instance</li>
<li>free the <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a> instance</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00109">109</a> of file <a class="el" href="../../de/df4/tcmi__comm_8c_source.html">tcmi_comm.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00269">kkc_sock_put()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">tcmi_migman_free()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span> &amp;&amp; atomic_dec_and_test(&amp;self-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2b6c69565a854987026ceb158d69d083" title="reference counter">ref_count</a>)) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Destroying TCMI comm, preferred message group %d, memory=%p&quot;</span>, </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;             self-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a990fa154400a3cfb27c8e1b960d570e6" title="preferred group of messages that will be received.">msg_group</a>, <span class="keyword">self</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">/* stop the transaction thread */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        force_sig(SIGTERM, self-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2a449df4d3c574694cc5ab915af827fa" title="message receiving thread">thread</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="comment">/* ensures synchronous thread termination */</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        kthread_stop(self-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a2a449df4d3c574694cc5ab915af827fa" title="message receiving thread">thread</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(self-&gt;<a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#a099ceddc2c786b7d170f8389cadf5145" title="communication socket used for receiving">sock</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dfc/group__tcmi__comm__class_ga89dc5a63295a65407cc93606c79ca314_cgraph.png" border="0" usemap="#d9/dfc/group__tcmi__comm__class_ga89dc5a63295a65407cc93606c79ca314_cgraph" alt=""/></div>
<map name="d9/dfc/group__tcmi__comm__class_ga89dc5a63295a65407cc93606c79ca314_cgraph" id="d9/dfc/group__tcmi__comm__class_ga89dc5a63295a65407cc93606c79ca314_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="169,56,271,83"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="355,5,455,32"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="322,56,489,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="320,107,491,133"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="540,56,700,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="539,107,701,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaef03fa6d00b3c8a916625e2d17b961d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_comm_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>comm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Messages receiving thread. </p>
<ul>
<li>receives any messages on the connection that is part of the <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a> instance</li>
<li>as long as no invalid ID or other error occurs or the main thread signals to quit it will be delivering messages to the subscribed object via its delivery method.</li>
<li>messages that are not successfully delivered are discarded</li>
</ul>
<p>The thread is always stopped synchronously with the instance destruction, therefore there is no need to account an extra reference for the thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*comm</td><td>- pointer to this communication instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful termination. </dd></dl>

<p>Definition at line <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">145</a> of file <a class="el" href="../../de/df4/tcmi__comm_8c_source.html">tcmi_comm.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00064">KKC_SOCK_BLOCK</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00239">kkc_sock_getpeername2()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00224">kkc_sock_getsockname2()</a>, <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00162">kkc_sock_recv()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00105">tcmi_msg::msg_id</a>, <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00080">TCMI_COMM</a>, <a class="el" href="../../dd/d10/tcmi__msg__factory_8c_source.html#l00052">tcmi_msg_factory()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00237">tcmi_msg_recv()</a>, and <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00112">wait_on_should_stop</a>.</p>

<p>Referenced by <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">tcmi_comm_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method.">tcmi_comm</a> *<span class="keyword">self</span> = <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga8cefd1921db426bb7cde4545441dd43a" title="Casts to the tcmi_comm instance.">TCMI_COMM</a>(<a class="code" href="../../d6/db7/tcmi__ckpt_8h.html#a59d00a3d4123d24c34c7d6a461b26a48" title="Process executable name.">comm</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">/* make local copies instance attributes, this saves one</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">     * dereference for each */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket.">kkc_sock</a> *sock = <span class="keyword">self</span>-&gt;sock;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#gaa58ae753d6619eb8f90be0556f8c017e" title="Message delivery callback method type.">deliver_method_t</a> *deliver = <span class="keyword">self</span>-&gt;deliver;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">int</span> msg_group = <span class="keyword">self</span>-&gt;msg_group;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">void</span> *obj = <span class="keyword">self</span>-&gt;obj;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">/* pointer to the message received */</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *m; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    u_int32_t <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#a51693aab24a0678dbd8c46766c2855fe" title="message id">msg_id</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Receiving on socket local: &#39;%s&#39;, remote: &#39;%s&#39;&quot;</span>,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getsockname2</a>(sock), <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(sock));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">/* receive messages, checking for signals or stop request */</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">while</span> (!(kthread_should_stop() || signal_pending(current))) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gadafc7c835c7d6d94be66f61a050108b7" title="&lt;&lt;public&gt;&gt; Receives requested number of bytes of data.">kkc_sock_recv</a>(sock, &amp;msg_id, <span class="keyword">sizeof</span>(msg_id), <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa0766d1e1bec0bb50862530f5a53c9c70">KKC_SOCK_BLOCK</a>)) &lt; 0) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Error receiving message ID, error code: %d, terminating&quot;</span>, err);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (!(m = <a class="code" href="../../de/dc6/group__tcmi__msg__factory__class.html#gad7b63f4c6657bcd0eaf759d79d344981" title="&lt;&lt;public&gt;&gt; Materializes the message.">tcmi_msg_factory</a>(msg_id, msg_group))) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Error building message %x, terminating&quot;</span>, msg_id);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga84688215ef9615fdc2699eea0dbb8031" title="&lt;&lt;public&gt;&gt; Receives a message via a specified connection.">tcmi_msg_recv</a>(m, sock)) &lt; 0) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Error receiving message %x, error %d, terminating&quot;</span>, msg_id, err);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">/* try to deliver, if it fails destroy the message */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">if</span> (deliver(obj, m) &lt; 0)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(m);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">/* very important to sync with the the thread that is terminating us */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga9db330620d4a0492584227e29697ae94" title="This macro implements atomic check for thread stop request and puts the task to sleep until such requ...">wait_on_should_stop</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Message receiving thread terminating&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dfc/group__tcmi__comm__class_gaef03fa6d00b3c8a916625e2d17b961d0_cgraph.png" border="0" usemap="#d9/dfc/group__tcmi__comm__class_gaef03fa6d00b3c8a916625e2d17b961d0_cgraph" alt=""/></div>
<map name="d9/dfc/group__tcmi__comm__class_gaef03fa6d00b3c8a916625e2d17b961d0_cgraph" id="d9/dfc/group__tcmi__comm__class_gaef03fa6d00b3c8a916625e2d17b961d0_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="189,5,355,32"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="187,56,357,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gadafc7c835c7d6d94be66f61a050108b7" title="&lt;&lt;public&gt;&gt; Receives requested number of bytes of data." alt="" coords="455,107,563,133"/><area shape="rect" id="node8" href="../../de/dc6/group__tcmi__msg__factory__class.html#gad7b63f4c6657bcd0eaf759d79d344981" title="&lt;&lt;public&gt;&gt; Materializes the message." alt="" coords="209,220,335,247"/><area shape="rect" id="node10" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="220,296,324,323"/><area shape="rect" id="node22" href="../../d6/dc2/group__tcmi__msg__class.html#ga84688215ef9615fdc2699eea0dbb8031" title="&lt;&lt;public&gt;&gt; Receives a message via a specified connection." alt="" coords="217,157,327,184"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="429,5,589,32"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="428,56,591,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="662,107,805,133"/><area shape="rect" id="node9" href="../../d6/dc2/group__tcmi__msg__class.html#gacd1d8503b665439b2562b4ca8806ca12" title="&lt;&lt;public&gt;&gt; Class method &#45; creates a message based on a descriptor." alt="" coords="446,259,573,285"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="438,309,581,336"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="671,233,796,260"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="666,284,801,311"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="672,335,795,361"/><area shape="rect" id="node21" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="664,385,803,412"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="854,284,991,311"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="869,335,976,361"/><area shape="rect" id="node20" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="863,385,983,412"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1062,259,1181,285"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1041,309,1202,336"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1251,309,1363,336"/><area shape="rect" id="node23" href="../../d6/d8e/group__kkc__sock__class.html#ga111890916880384e47495e8859f57c95" title="&lt;&lt;public&gt;&gt; Locks this socket instance for receiving, interruptible version, the process can be woken ..." alt="" coords="406,157,613,184"/><area shape="rect" id="node24" href="../../d6/d8e/group__kkc__sock__class.html#ga82295120b31f3818bbc9b9a462a22b56" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for receiving." alt="" coords="436,208,583,235"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga9c2282ee3b7cfd3d410d86855f84e910"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_comm_counter = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread counter - used for receiving thread naming. </p>

<p>Definition at line <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00186">186</a> of file <a class="el" href="../../de/df4/tcmi__comm_8c_source.html">tcmi_comm.c</a>.</p>

<p>Referenced by <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">tcmi_comm_new()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 18:46:52 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
