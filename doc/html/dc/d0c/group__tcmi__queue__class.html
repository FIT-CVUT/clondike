<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_queue class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d0c/group__tcmi__queue__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_queue class<div class="ingroups"><a class="el" href="../../dc/d84/group__tcmi__lib__group.html">lib</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The queue is implemented using a doubly linked list - provided by kernel.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_queue class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../dc/d0c/group__tcmi__queue__class.png" border="0" alt="" usemap="#dc_2d0c_2group____tcmi____queue____class"/>
<map name="dc_2d0c_2group____tcmi____queue____class" id="dc_2d0c_2group____tcmi____queue____class">
<area shape="rect" id="node1" href="../../dc/d84/group__tcmi__lib__group.html" title="Classes in this group provide basic objects used commonly throughout the whole framework." alt="" coords="6,5,45,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d5/d9a/structtcmi__queue"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a></td></tr>
<tr class="memdesc:d5/d9a/structtcmi__queue"><td class="mdescLeft">&#160;</td><td class="mdescRight">compound structure  <a href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">More...</a><br/></td></tr>
<tr class="separator:d5/d9a/structtcmi__queue"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad1083b0f8850c7e9ff98175807920929"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gad1083b0f8850c7e9ff98175807920929">tcmi_queue_remove_entry</a>(<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, object, member)</td></tr>
<tr class="memdesc:gad1083b0f8850c7e9ff98175807920929"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.  <a href="#gad1083b0f8850c7e9ff98175807920929">More...</a><br/></td></tr>
<tr class="separator:gad1083b0f8850c7e9ff98175807920929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c8484afbdb969e18822e606b87df076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga6c8484afbdb969e18822e606b87df076">__tcmi_queue_remove_entry</a>(<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, object, member)</td></tr>
<tr class="memdesc:ga6c8484afbdb969e18822e606b87df076"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.  <a href="#ga6c8484afbdb969e18822e606b87df076">More...</a><br/></td></tr>
<tr class="separator:ga6c8484afbdb969e18822e606b87df076"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gab1e4933738a8c6b6b04338fc5d9f393e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gab1e4933738a8c6b6b04338fc5d9f393e">tcmi_queue_type_t</a> { <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393eae445c22372c26189d7056dff5a6d80ce">TCMI_QUEUE_STATIC</a>, 
<a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393ea0e2097b2ffc5b73fd39999c973411da3">TCMI_QUEUE_DYNAMIC</a>
 }</td></tr>
<tr class="memdesc:gab1e4933738a8c6b6b04338fc5d9f393e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Denotes whether the queue has been staticaly or dynamically created.  <a href="../../dc/d0c/group__tcmi__queue__class.html#gab1e4933738a8c6b6b04338fc5d9f393e">More...</a><br/></td></tr>
<tr class="separator:gab1e4933738a8c6b6b04338fc5d9f393e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga10c0b527cad2d814db860b28847ca543"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543">tcmi_queue_init</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga10c0b527cad2d814db860b28847ca543"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Queue initializer - for static allocation.  <a href="#ga10c0b527cad2d814db860b28847ca543">More...</a><br/></td></tr>
<tr class="separator:ga10c0b527cad2d814db860b28847ca543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5084a4948bff92e814743be6bcca075"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gaf5084a4948bff92e814743be6bcca075">tcmi_queue_new</a> (void)</td></tr>
<tr class="memdesc:gaf5084a4948bff92e814743be6bcca075"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Queue constructor.  <a href="#gaf5084a4948bff92e814743be6bcca075">More...</a><br/></td></tr>
<tr class="separator:gaf5084a4948bff92e814743be6bcca075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04bc9ffdf3dfba76be734472b45c2f83"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga04bc9ffdf3dfba76be734472b45c2f83">tcmi_queue_get</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga04bc9ffdf3dfba76be734472b45c2f83"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Queue instance accessor.  <a href="#ga04bc9ffdf3dfba76be734472b45c2f83">More...</a><br/></td></tr>
<tr class="separator:ga04bc9ffdf3dfba76be734472b45c2f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedb08d3b6c96b415696a8aa8dec1ae26"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gaedb08d3b6c96b415696a8aa8dec1ae26">tcmi_queue_put</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaedb08d3b6c96b415696a8aa8dec1ae26"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed.  <a href="#gaedb08d3b6c96b415696a8aa8dec1ae26">More...</a><br/></td></tr>
<tr class="separator:gaedb08d3b6c96b415696a8aa8dec1ae26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4">tcmi_queue_lock</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks the instance data.  <a href="#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4">More...</a><br/></td></tr>
<tr class="separator:ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e0e25eec1d5e4ea6e89dfde81ed43f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4">tcmi_queue_unlock</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga2e0e25eec1d5e4ea6e89dfde81ed43f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Unlocks the instance data  <a href="#ga2e0e25eec1d5e4ea6e89dfde81ed43f4">More...</a><br/></td></tr>
<tr class="separator:ga2e0e25eec1d5e4ea6e89dfde81ed43f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b0f1376bcd561196e77599cbc23090f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="separator:ga2b0f1376bcd561196e77599cbc23090f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40921ea3b077d55d70fb7b94ac666292"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292">__tcmi_queue_add</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct list_head *element)</td></tr>
<tr class="memdesc:ga40921ea3b077d55d70fb7b94ac666292"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Adds an element to the queue - lock free version, assumes the lock is already held.  <a href="#ga40921ea3b077d55d70fb7b94ac666292">More...</a><br/></td></tr>
<tr class="separator:ga40921ea3b077d55d70fb7b94ac666292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga640f6067e72f77558cac6c58ca898c46"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga640f6067e72f77558cac6c58ca898c46">tcmi_queue_add</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct list_head *element)</td></tr>
<tr class="memdesc:ga640f6067e72f77558cac6c58ca898c46"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks the queue and appends a new element to the tail.  <a href="#ga640f6067e72f77558cac6c58ca898c46">More...</a><br/></td></tr>
<tr class="separator:ga640f6067e72f77558cac6c58ca898c46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga844cb792b28e461d4ecf34ed47252b85"><td class="memItemLeft" align="right" valign="top">static struct list_head *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga844cb792b28e461d4ecf34ed47252b85">__tcmi_queue_remove</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga844cb792b28e461d4ecf34ed47252b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Removes an element in the head of the queue, assumes the lock is held already.  <a href="#ga844cb792b28e461d4ecf34ed47252b85">More...</a><br/></td></tr>
<tr class="separator:ga844cb792b28e461d4ecf34ed47252b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf7dde74f314a4bb28a2c589a39d7fb4"><td class="memItemLeft" align="right" valign="top">static struct list_head *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gacf7dde74f314a4bb28a2c589a39d7fb4">tcmi_queue_remove</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gacf7dde74f314a4bb28a2c589a39d7fb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks the queue and removes removes an element in the head of the queue, assumes the lock is held already.  <a href="#gacf7dde74f314a4bb28a2c589a39d7fb4">More...</a><br/></td></tr>
<tr class="separator:gacf7dde74f314a4bb28a2c589a39d7fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae749f14f4593f9b0b48cf31fc43eaa17"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17">tcmi_queue_wait_on_empty_interruptible</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gae749f14f4593f9b0b48cf31fc43eaa17"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty.  <a href="#gae749f14f4593f9b0b48cf31fc43eaa17">More...</a><br/></td></tr>
<tr class="separator:gae749f14f4593f9b0b48cf31fc43eaa17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cc3e7d5deff9a3b6e2cb9f3e802e146"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#ga3cc3e7d5deff9a3b6e2cb9f3e802e146">tcmi_queue_wait_on_empty_interruptible_timout</a> (struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int timeout)</td></tr>
<tr class="memdesc:ga3cc3e7d5deff9a3b6e2cb9f3e802e146"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty or the timeout expires.  <a href="#ga3cc3e7d5deff9a3b6e2cb9f3e802e146">More...</a><br/></td></tr>
<tr class="separator:ga3cc3e7d5deff9a3b6e2cb9f3e802e146"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The queue is implemented using a doubly linked list - provided by kernel. </p>
<p>In addition, it contains a wait queue for process that want to be notified upon addition of a new element. Basic methods:</p>
<ul>
<li>add - appends an element to the tail of the queue</li>
<li>empty - true if the queue is empty</li>
<li>remove_head - returns the element from the head of the queue and removes it - this operation is atomic.</li>
<li>wait_on_empty - the calling process is put a sleep, until the queue contains at least 1 element. </li>
</ul>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d5/d9a/structtcmi__queue" id="d5/d9a/structtcmi__queue"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_queue</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>compound structure </p>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00069">69</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_queue:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/dfe/structtcmi__queue__coll__graph.png" border="0" usemap="#tcmi__queue_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac50fa0283872adf3c7b836b2c910601f"></a>spinlock_t</td>
<td class="fieldname">
q_lock</td>
<td class="fielddoc">
spin lock - serializes access to the queue </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5fccaace4dd3ae7a7ab2eda4166a00d7"></a>struct list_head</td>
<td class="fieldname">
queue</td>
<td class="fielddoc">
The actual queue. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7948f7e71517d0058f3a8dd0ef982eb2"></a>atomic_t</td>
<td class="fieldname">
ref_count</td>
<td class="fielddoc">
reference counter for dynamically created queues </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac6535980a498313af0fa4ef9cfca87d3"></a><a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gab1e4933738a8c6b6b04338fc5d9f393e">tcmi_queue_type_t</a></td>
<td class="fieldname">
type</td>
<td class="fielddoc">
describes how the queue has been created </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a90cf31fb339bc00cfb47fa1ae7028f33"></a>wait_queue_head_t</td>
<td class="fieldname">
wq</td>
<td class="fielddoc">
Sleeping processes, that are to be notified upon addition of a new element. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga6c8484afbdb969e18822e606b87df076"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __tcmi_queue_remove_entry</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">member&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                    \</div>
<div class="line">    struct list_head *__q_entry;                    \</div>
<div class="line">    object = NULL;                          \</div>
<div class="line">    if ((__q_entry = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga844cb792b28e461d4ecf34ed47252b85" title="&lt;&lt;public&gt;&gt; Removes an element in the head of the queue, assumes the lock is held already.">__tcmi_queue_remove</a>(<span class="keyword">self</span>)))            \</div>
<div class="line">        object = list_entry(__q_entry, typeof(*<span class="keywordtype">object</span>), member);    \</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue. </p>
<p>Assumes the queue has already been locked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>- pointer to this queue instance </td></tr>
    <tr><td class="paramname">object</td><td>- pointer that will hold the head element </td></tr>
    <tr><td class="paramname">member</td><td>- name of the member within the object used for queueing </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00282">282</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00295">tcmi_task_flush_and_submit_method()</a>.</p>

</div>
</div>
<a class="anchor" id="gad1083b0f8850c7e9ff98175807920929"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define tcmi_queue_remove_entry</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">member&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                    \</div>
<div class="line">    struct list_head *__q_entry;                    \</div>
<div class="line">    object = NULL;                          \</div>
<div class="line">    if ((__q_entry = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gacf7dde74f314a4bb28a2c589a39d7fb4" title="&lt;&lt;public&gt;&gt; Locks the queue and removes removes an element in the head of the queue, assumes the lock is held already.">tcmi_queue_remove</a>(<span class="keyword">self</span>)))          \</div>
<div class="line">        object = list_entry(__q_entry, typeof(*<span class="keywordtype">object</span>), member);    \</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>- pointer to this queue instance </td></tr>
    <tr><td class="paramname">object</td><td>- pointer that will hold the head element </td></tr>
    <tr><td class="paramname">member</td><td>- name of the member within the object used for queueing </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00266">266</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">tcmi_migman_msg_thread()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00346">tcmi_task_process_methods()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00398">tcmi_task_process_msg()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00209">tcmi_task_put()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gab1e4933738a8c6b6b04338fc5d9f393e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#gab1e4933738a8c6b6b04338fc5d9f393e">tcmi_queue_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Denotes whether the queue has been staticaly or dynamically created. </p>
<p>This is needed if somebody issues a put on a static queue, so that no kfree is performed </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ggab1e4933738a8c6b6b04338fc5d9f393eae445c22372c26189d7056dff5a6d80ce"></a>TCMI_QUEUE_STATIC</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggab1e4933738a8c6b6b04338fc5d9f393ea0e2097b2ffc5b73fd39999c973411da3"></a>TCMI_QUEUE_DYNAMIC</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00063">63</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;             {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393eae445c22372c26189d7056dff5a6d80ce">TCMI_QUEUE_STATIC</a>,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393ea0e2097b2ffc5b73fd39999c973411da3">TCMI_QUEUE_DYNAMIC</a></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;} <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gab1e4933738a8c6b6b04338fc5d9f393e" title="Denotes whether the queue has been staticaly or dynamically created.">tcmi_queue_type_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga40921ea3b077d55d70fb7b94ac666292"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __tcmi_queue_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>element</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Adds an element to the queue - lock free version, assumes the lock is already held. </p>
<p>Wakes up a task from the wait queue, so that it can pickup the new element.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
    <tr><td class="paramname">*element</td><td>- element to be added to the queue </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00206">206</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00217">tcmi_queue_add()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00295">tcmi_task_flush_and_submit_method()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    list_add_tail(element, &amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a5fccaace4dd3ae7a7ab2eda4166a00d7" title="The actual queue.">queue</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    wake_up(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a90cf31fb339bc00cfb47fa1ae7028f33" title="Sleeping processes, that are to be notified upon addition of a new element.">wq</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga844cb792b28e461d4ecf34ed47252b85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct list_head* __tcmi_queue_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Removes an element in the head of the queue, assumes the lock is held already. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- element in the head of the queue </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00231">231</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00250">tcmi_queue_remove()</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">struct </span>list_head *element;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(<span class="keyword">self</span>))</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        element = <span class="keyword">self</span>-&gt;queue.next;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        list_del_init(element);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> (element);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d0c/group__tcmi__queue__class_ga844cb792b28e461d4ecf34ed47252b85_cgraph.png" border="0" usemap="#dc/d0c/group__tcmi__queue__class_ga844cb792b28e461d4ecf34ed47252b85_cgraph" alt=""/></div>
<map name="dc/d0c/group__tcmi__queue__class_ga844cb792b28e461d4ecf34ed47252b85_cgraph" id="dc/d0c/group__tcmi__queue__class_ga844cb792b28e461d4ecf34ed47252b85_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="206,5,338,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga640f6067e72f77558cac6c58ca898c46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_queue_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>element</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks the queue and appends a new element to the tail. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
    <tr><td class="paramname">*element</td><td>- element to be added to the queue </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00217">217</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00206">__tcmi_queue_add()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00175">tcmi_queue_lock()</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00185">tcmi_queue_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00297">tcmi_msg_deliver()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_queue_lock</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue - lock free version, assumes the lock is already held...">__tcmi_queue_add</a>(<span class="keyword">self</span>, element);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data">tcmi_queue_unlock</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d0c/group__tcmi__queue__class_ga640f6067e72f77558cac6c58ca898c46_cgraph.png" border="0" usemap="#dc/d0c/group__tcmi__queue__class_ga640f6067e72f77558cac6c58ca898c46_cgraph" alt=""/></div>
<map name="dc/d0c/group__tcmi__queue__class_ga640f6067e72f77558cac6c58ca898c46_cgraph" id="dc/d0c/group__tcmi__queue__class_ga640f6067e72f77558cac6c58ca898c46_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="173,5,304,32"/><area shape="rect" id="node3" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="179,56,299,83"/><area shape="rect" id="node4" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="171,107,306,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2b0f1376bcd561196e77599cbc23090f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_queue_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>1 when queue is empty </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">193</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00231">__tcmi_queue_remove()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00297">tcmi_queue_wait_on_empty_interruptible()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00312">tcmi_queue_wait_on_empty_interruptible_timout()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00904">tcmi_task_deliver_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00295">tcmi_task_flush_and_submit_method()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00346">tcmi_task_process_methods()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00398">tcmi_task_process_msg()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00209">tcmi_task_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> list_empty(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a5fccaace4dd3ae7a7ab2eda4166a00d7" title="The actual queue.">queue</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga04bc9ffdf3dfba76be734472b45c2f83"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a>* tcmi_queue_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Queue instance accessor. </p>
<p>Increments the reference counter</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- self </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00138">138</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    atomic_inc(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a7948f7e71517d0058f3a8dd0ef982eb2" title="reference counter for dynamically created queues">ref_count</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga10c0b527cad2d814db860b28847ca543"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_queue_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Queue initializer - for static allocation. </p>
<p>The reference counter is set to 1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00097">97</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00064">TCMI_QUEUE_STATIC</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00112">tcmi_queue_new()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00112">tcmi_task_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a7948f7e71517d0058f3a8dd0ef982eb2" title="reference counter for dynamically created queues">ref_count</a>, 1);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    spin_lock_init(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ac50fa0283872adf3c7b836b2c910601f" title="spin lock - serializes access to the queue">q_lock</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    INIT_LIST_HEAD(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a5fccaace4dd3ae7a7ab2eda4166a00d7" title="The actual queue.">queue</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">self</span>-&gt;type = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393eae445c22372c26189d7056dff5a6d80ce">TCMI_QUEUE_STATIC</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    init_waitqueue_head(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a90cf31fb339bc00cfb47fa1ae7028f33" title="Sleeping processes, that are to be notified upon addition of a new element.">wq</a>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_queue_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks the instance data. </p>
<p>Spin lock used - no sleeping allowed!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00175">175</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00217">tcmi_queue_add()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00250">tcmi_queue_remove()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00295">tcmi_task_flush_and_submit_method()</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    spin_lock(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ac50fa0283872adf3c7b836b2c910601f" title="spin lock - serializes access to the queue">q_lock</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf5084a4948bff92e814743be6bcca075"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a>* tcmi_queue_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Queue constructor. </p>
<dl class="section return"><dt>Returns</dt><dd>a new queue or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00112">112</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00065">TCMI_QUEUE_DYNAMIC</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00097">tcmi_queue_init()</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00080">tcmi_queue::type</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue" title="compound structure">tcmi_queue</a> *q;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    q = kmalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue" title="compound structure">tcmi_queue</a>), GFP_ATOMIC);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (!q) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t allocated memory for a queue&quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer - for static allocation.">tcmi_queue_init</a>(q);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">/* mark the queue dynamic, so that it is released on the last &#39;put&#39; */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    q-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ac6535980a498313af0fa4ef9cfca87d3" title="describes how the queue has been created">type</a> = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393ea0e2097b2ffc5b73fd39999c973411da3">TCMI_QUEUE_DYNAMIC</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Allocated new queue %p&quot;</span>, q);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> q;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; exit0:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d0c/group__tcmi__queue__class_gaf5084a4948bff92e814743be6bcca075_cgraph.png" border="0" usemap="#dc/d0c/group__tcmi__queue__class_gaf5084a4948bff92e814743be6bcca075_cgraph" alt=""/></div>
<map name="dc/d0c/group__tcmi__queue__class_gaf5084a4948bff92e814743be6bcca075_cgraph" id="dc/d0c/group__tcmi__queue__class_gaf5084a4948bff92e814743be6bcca075_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer &#45; for static allocation." alt="" coords="174,5,287,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaedb08d3b6c96b415696a8aa8dec1ae26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_queue_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00152">152</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00064">TCMI_QUEUE_STATIC</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (atomic_dec_and_test(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a7948f7e71517d0058f3a8dd0ef982eb2" title="reference counter for dynamically created queues">ref_count</a>)) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ac6535980a498313af0fa4ef9cfca87d3" title="describes how the queue has been created">type</a> == <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ggab1e4933738a8c6b6b04338fc5d9f393eae445c22372c26189d7056dff5a6d80ce">TCMI_QUEUE_STATIC</a>)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Released last reference to a static queue&quot;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Released last reference to a dynamic queue %p&quot;</span>, </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                 <span class="keyword">self</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gacf7dde74f314a4bb28a2c589a39d7fb4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct list_head* tcmi_queue_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks the queue and removes removes an element in the head of the queue, assumes the lock is held already. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- element in the head of the queue </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00250">250</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00231">__tcmi_queue_remove()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00175">tcmi_queue_lock()</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00185">tcmi_queue_unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">struct </span>list_head *element;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_queue_lock</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    element = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga844cb792b28e461d4ecf34ed47252b85" title="&lt;&lt;public&gt;&gt; Removes an element in the head of the queue, assumes the lock is held already.">__tcmi_queue_remove</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data">tcmi_queue_unlock</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> element;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d0c/group__tcmi__queue__class_gacf7dde74f314a4bb28a2c589a39d7fb4_cgraph.png" border="0" usemap="#dc/d0c/group__tcmi__queue__class_gacf7dde74f314a4bb28a2c589a39d7fb4_cgraph" alt=""/></div>
<map name="dc/d0c/group__tcmi__queue__class_gacf7dde74f314a4bb28a2c589a39d7fb4_cgraph" id="dc/d0c/group__tcmi__queue__class_gacf7dde74f314a4bb28a2c589a39d7fb4_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga844cb792b28e461d4ecf34ed47252b85" title="&lt;&lt;public&gt;&gt; Removes an element in the head of the queue, assumes the lock is held already." alt="" coords="193,5,343,32"/><area shape="rect" id="node4" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="208,56,328,83"/><area shape="rect" id="node5" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="201,107,335,133"/><area shape="rect" id="node3" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="393,5,525,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2e0e25eec1d5e4ea6e89dfde81ed43f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_queue_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Unlocks the instance data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00185">185</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00217">tcmi_queue_add()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00250">tcmi_queue_remove()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00295">tcmi_task_flush_and_submit_method()</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    spin_unlock(&amp;self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ac50fa0283872adf3c7b836b2c910601f" title="spin lock - serializes access to the queue">q_lock</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae749f14f4593f9b0b48cf31fc43eaa17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_queue_wait_on_empty_interruptible </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-ERESTARTSYS on signal arrival </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00297">297</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">tcmi_migman_msg_thread()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00398">tcmi_task_process_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">/* Sleep until the queue is non empty */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> wait_event_interruptible_exclusive(self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a90cf31fb339bc00cfb47fa1ae7028f33" title="Sleeping processes, that are to be notified upon addition of a new element.">wq</a>, (!<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(<span class="keyword">self</span>)));</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d0c/group__tcmi__queue__class_gae749f14f4593f9b0b48cf31fc43eaa17_cgraph.png" border="0" usemap="#dc/d0c/group__tcmi__queue__class_gae749f14f4593f9b0b48cf31fc43eaa17_cgraph" alt=""/></div>
<map name="dc/d0c/group__tcmi__queue__class_gae749f14f4593f9b0b48cf31fc43eaa17_cgraph" id="dc/d0c/group__tcmi__queue__class_gae749f14f4593f9b0b48cf31fc43eaa17_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="195,12,327,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3cc3e7d5deff9a3b6e2cb9f3e802e146"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_queue_wait_on_empty_interruptible_timout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty or the timeout expires. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this queue instance </td></tr>
    <tr><td class="paramname">timeout</td><td>- specified timeout </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-ERESTARTSYS on signal arrival or timeout (&gt;0) if the timer went off </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00312">312</a> of file <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html">tcmi_queue.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">/* Sleep until the queue is non empty */</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> wait_event_interruptible_timeout(self-&gt;<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#a90cf31fb339bc00cfb47fa1ae7028f33" title="Sleeping processes, that are to be notified upon addition of a new element.">wq</a>, (!<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(<span class="keyword">self</span>)), </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        timeout);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d0c/group__tcmi__queue__class_ga3cc3e7d5deff9a3b6e2cb9f3e802e146_cgraph.png" border="0" usemap="#dc/d0c/group__tcmi__queue__class_ga3cc3e7d5deff9a3b6e2cb9f3e802e146_cgraph" alt=""/></div>
<map name="dc/d0c/group__tcmi__queue__class_ga3cc3e7d5deff9a3b6e2cb9f3e802e146_cgraph" id="dc/d0c/group__tcmi__queue__class_ga3cc3e7d5deff9a3b6e2cb9f3e802e146_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="195,20,327,47"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Apr 7 2013 23:20:17 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
