<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: C:/CLONDIKE/clondike/sources/kernel_3.7.1/src/tcmi/manager/tcmi_man.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_man.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/types.h&gt;</code><br/>
<code>#include &lt;linux/random.h&gt;</code><br/>
<code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;tcmi/ctlfs/tcmi_ctlfs.h&gt;</code><br/>
<code>#include &lt;tcmi/lib/tcmi_sock.h&gt;</code><br/>
<code>#include &lt;tcmi/task/tcmi_task.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/de1/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8h_source.html">tcmi_ccnmigman.h</a>&quot;</code><br/>
<code>#include &lt;kkc/kkc.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="../../dd/d8f/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html">tcmi_man.h</a>&quot;</code><br/>
<code>#include &lt;dbg.h&gt;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for tcmi_man.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d1/d2c/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c__incl.png" border="0" usemap="#C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c" alt=""/></div>
<map name="C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c" id="C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c">
<area shape="rect" id="node8" href="../../d8/de1/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8h.html" title="tcmi_ccnmigman.h" alt="" coords="1413,109,1544,136"/><area shape="rect" id="node21" href="../../dd/d8f/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8h.html" title="tcmi_man.h" alt="" coords="599,184,689,211"/><area shape="rect" id="node10" href="../../de/de5/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__migman_8h.html" title="tcmi_migman.h" alt="" coords="1237,184,1347,211"/></map>
</div>
</div>
<p><a href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aebd4c1e27f3f49a7001f244f0dd7c3e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#aebd4c1e27f3f49a7001f244f0dd7c3e5">TCMI_MAN_PRIVATE</a></td></tr>
<tr class="separator:aebd4c1e27f3f49a7001f244f0dd7c3e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd2aacdca9cb2a1a30f3392256b96ea3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#abd2aacdca9cb2a1a30f3392256b96ea3">MAX_NODES</a>&#160;&#160;&#160;40</td></tr>
<tr class="memdesc:abd2aacdca9cb2a1a30f3392256b96ea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of connected nodes  <a href="#abd2aacdca9cb2a1a30f3392256b96ea3">More...</a><br/></td></tr>
<tr class="separator:abd2aacdca9cb2a1a30f3392256b96ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga97c9f7b7804700ac95d6a4b43c0173e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga97c9f7b7804700ac95d6a4b43c0173e0">tcmi_man_init</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">tcmi_man_ops</a> *ops, const char *man_dirname)</td></tr>
<tr class="memdesc:ga97c9f7b7804700ac95d6a4b43c0173e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Initializes the TCMI manager.  <a href="../../d6/de0/group__tcmi__man__class.html#ga97c9f7b7804700ac95d6a4b43c0173e0">More...</a><br/></td></tr>
<tr class="separator:ga97c9f7b7804700ac95d6a4b43c0173e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4665e9fa11405215f01c52355a5535"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#aed4665e9fa11405215f01c52355a5535">tcmi_man_wait_for_migmans_termination</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:aed4665e9fa11405215f01c52355a5535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for all migration managers to terminate.  <a href="#aed4665e9fa11405215f01c52355a5535">More...</a><br/></td></tr>
<tr class="separator:aed4665e9fa11405215f01c52355a5535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5255cad7e65c708e972344bab305e19a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga5255cad7e65c708e972344bab305e19a">tcmi_man_shutdown</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga5255cad7e65c708e972344bab305e19a"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:  <a href="../../d6/de0/group__tcmi__man__class.html#ga5255cad7e65c708e972344bab305e19a">More...</a><br/></td></tr>
<tr class="separator:ga5255cad7e65c708e972344bab305e19a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4a0be6edee0125b25b5c790ac563e5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#acb4a0be6edee0125b25b5c790ac563e5">tcmi_man_do_send_generic_user_message</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int target_slot_index, int user_data_size, char *user_data, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *migman)</td></tr>
<tr class="separator:acb4a0be6edee0125b25b5c790ac563e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff233e88cb97d1c5bf33f91c697529ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaff233e88cb97d1c5bf33f91c697529ed">tcmi_man_send_generic_user_message</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int target_slot_index, int user_data_size, char *user_data)</td></tr>
<tr class="memdesc:gaff233e88cb97d1c5bf33f91c697529ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Send generic user message  <a href="../../d6/de0/group__tcmi__man__class.html#gaff233e88cb97d1c5bf33f91c697529ed">More...</a><br/></td></tr>
<tr class="separator:gaff233e88cb97d1c5bf33f91c697529ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c0d48950792f18b6b7ea53c8b793c65"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga1c0d48950792f18b6b7ea53c8b793c65">tcmi_man_init_ctlfs_dirs</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, const char *man_dirname)</td></tr>
<tr class="memdesc:ga1c0d48950792f18b6b7ea53c8b793c65"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the directories as described in <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>.  <a href="#ga1c0d48950792f18b6b7ea53c8b793c65">More...</a><br/></td></tr>
<tr class="separator:ga1c0d48950792f18b6b7ea53c8b793c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb44b36975559e2bec9b46dfc8c24cf0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadb44b36975559e2bec9b46dfc8c24cf0">tcmi_man_init_ctlfs_files</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gadb44b36975559e2bec9b46dfc8c24cf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>.  <a href="#gadb44b36975559e2bec9b46dfc8c24cf0">More...</a><br/></td></tr>
<tr class="separator:gadb44b36975559e2bec9b46dfc8c24cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82d6e5a8909db33bd6c2aa607b83866e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga82d6e5a8909db33bd6c2aa607b83866e">tcmi_man_stop_ctlfs_dirs</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga82d6e5a8909db33bd6c2aa607b83866e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are destroyed  <a href="#ga82d6e5a8909db33bd6c2aa607b83866e">More...</a><br/></td></tr>
<tr class="separator:ga82d6e5a8909db33bd6c2aa607b83866e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d6f9c21e828c84de78f430ed236c8b7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga3d6f9c21e828c84de78f430ed236c8b7">tcmi_man_stop_ctlfs_files</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga3d6f9c21e828c84de78f430ed236c8b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Unregisters and releases all control files.  <a href="#ga3d6f9c21e828c84de78f430ed236c8b7">More...</a><br/></td></tr>
<tr class="separator:ga3d6f9c21e828c84de78f430ed236c8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7efd6ea1ef1cb953d940d7bd7b62e7b1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga7efd6ea1ef1cb953d940d7bd7b62e7b1">tcmi_man_init_migration</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga7efd6ea1ef1cb953d940d7bd7b62e7b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt;.  <a href="#ga7efd6ea1ef1cb953d940d7bd7b62e7b1">More...</a><br/></td></tr>
<tr class="separator:ga7efd6ea1ef1cb953d940d7bd7b62e7b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf4927acd8902d0de2729c2077792d60"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadf4927acd8902d0de2729c2077792d60">tcmi_man_get_non_shutdowning_migman</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gadf4927acd8902d0de2729c2077792d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state.  <a href="#gadf4927acd8902d0de2729c2077792d60">More...</a><br/></td></tr>
<tr class="separator:gadf4927acd8902d0de2729c2077792d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf83a1652b974eb8341a8af259054077a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gaf83a1652b974eb8341a8af259054077a">tcmi_man_stop_migration</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaf83a1652b974eb8341a8af259054077a"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Stops all migration components.  <a href="#gaf83a1652b974eb8341a8af259054077a">More...</a><br/></td></tr>
<tr class="separator:gaf83a1652b974eb8341a8af259054077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73bfcf08ed3c321b24ae41ae13c606a7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga73bfcf08ed3c321b24ae41ae13c606a7">tcmi_man_stop</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga73bfcf08ed3c321b24ae41ae13c606a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration framework.  <a href="#ga73bfcf08ed3c321b24ae41ae13c606a7">More...</a><br/></td></tr>
<tr class="separator:ga73bfcf08ed3c321b24ae41ae13c606a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98cff5cedf84c16ebac3d3f58c17e470"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga98cff5cedf84c16ebac3d3f58c17e470">tcmi_man_emig_ppm_p</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga98cff5cedf84c16ebac3d3f58c17e470"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; TCMI ctlfs write method - emigration PPM P What needs to be done:  <a href="#ga98cff5cedf84c16ebac3d3f58c17e470">More...</a><br/></td></tr>
<tr class="separator:ga98cff5cedf84c16ebac3d3f58c17e470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddba35e06a4eda99450d72288234ad14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaddba35e06a4eda99450d72288234ad14">tcmi_man_emig_npm</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, pid_t <a class="el" href="../../db/da0/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, u_int32_t migman_id, struct pt_regs *regs, struct <a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *npm_params)</td></tr>
<tr class="memdesc:gaddba35e06a4eda99450d72288234ad14"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Method that performs non-preemtive migration  <a href="../../d6/de0/group__tcmi__man__class.html#gaddba35e06a4eda99450d72288234ad14">More...</a><br/></td></tr>
<tr class="separator:gaddba35e06a4eda99450d72288234ad14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34c83e593357e4cf14838d2fca19b9d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga34c83e593357e4cf14838d2fca19b9d2">tcmi_man_fork</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct task_struct *parent, struct task_struct *child)</td></tr>
<tr class="memdesc:ga34c83e593357e4cf14838d2fca19b9d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Method that performs task fork  <a href="../../d6/de0/group__tcmi__man__class.html#ga34c83e593357e4cf14838d2fca19b9d2">More...</a><br/></td></tr>
<tr class="separator:ga34c83e593357e4cf14838d2fca19b9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga331687b0d8d4c916003d788eb126d566"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga331687b0d8d4c916003d788eb126d566">tcmi_man_mig_home_ppm_p</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga331687b0d8d4c916003d788eb126d566"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; TCMI ctlfs write method - migration home.  <a href="#ga331687b0d8d4c916003d788eb126d566">More...</a><br/></td></tr>
<tr class="separator:ga331687b0d8d4c916003d788eb126d566"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="abd2aacdca9cb2a1a30f3392256b96ea3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_NODES&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>maximum number of connected nodes </p>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00049">49</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aebd4c1e27f3f49a7001f244f0dd7c3e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_MAN_PRIVATE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00043">43</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="acb4a0be6edee0125b25b5c790ac563e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_do_send_generic_user_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target_slot_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>migman</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00155">155</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d97/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__generic__user__msg_8c_source.html#l00062">tcmi_generic_user_msg_new_tx()</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00307">tcmi_migman_sock()</a>, <a class="el" href="../../df/d27/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__msg_8h_source.html#l00159">TCMI_MSG</a>, <a class="el" href="../../df/d27/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, and <a class="el" href="../../dd/ddb/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__msg_8c_source.html#l00138">tcmi_msg_send_anonymous()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00173">tcmi_man_send_generic_user_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                                                                                                                                                       {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a>* msg;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// TODO: Node id is passed incorrectly, but on the other hand this node id is complete bullshit and should be likely removed, right?</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span> ( !( msg = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga91f3fd64c88d27100f1e4c7125a73a0e" title="Casts to the tcmi_msg instance.">TCMI_MSG</a>(<a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga2e21db4afa16f7805800919224711c94" title="&lt;&lt;public&gt;&gt; Message tx constructor.">tcmi_generic_user_msg_new_tx</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ab1fb5cb326aa6e23017514801f0f1058" title="Unique manager ID.">id</a>, user_data, user_data_size)) ) ) { </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error creating response message&quot;</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">return</span> - ENOMEM;        ;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection.">tcmi_msg_send_anonymous</a>(msg, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor.">tcmi_migman_sock</a>(migman)))) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error sending user message %d&quot;</span>, err);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        err = -EINVAL;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(msg);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_acb4a0be6edee0125b25b5c790ac563e5_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_acb4a0be6edee0125b25b5c790ac563e5_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_acb4a0be6edee0125b25b5c790ac563e5_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_acb4a0be6edee0125b25b5c790ac563e5_cgraph">
<area shape="rect" id="node2" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga2e21db4afa16f7805800919224711c94" title="&lt;&lt;public&gt;&gt; Message tx constructor." alt="" coords="252,5,412,46"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="265,71,399,97"/><area shape="rect" id="node5" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="280,121,384,148"/><area shape="rect" id="node7" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="238,172,426,199"/><area shape="rect" id="node4" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="475,71,645,97"/><area shape="rect" id="node6" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="489,121,631,148"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga98cff5cedf84c16ebac3d3f58c17e470"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_emig_ppm_p </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; TCMI ctlfs write method - emigration PPM P What needs to be done: </p>
<ul>
<li>find the requested migration manager</li>
<li>call instance specific emigration method.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to a particular TCMI manager singleton instance </td></tr>
    <tr><td class="paramname">*data</td><td>- an array of two integers first contains PID, second one contains the desired manager identifier as it appears in ctlfs. It is the name of its directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00455">455</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00096">tcmi_migman::node</a>, <a class="el" href="../../d2/d82/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__signal__msg_8h_source.html#l00069">pid</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00201">tcmi_migman_get()</a>, <a class="el" href="../../d6/d0b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00120">tcmi_slot_find_first</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, <a class="el" href="../../d1/da1/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    pid_t <a class="code" href="../../d2/d82/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a> = *((<span class="keywordtype">int</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    u_int32_t migman_id = *(((<span class="keywordtype">int</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>) + 1);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man" title="A compound structure that holds all current listenings and migration managers.">tcmi_man</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(obj);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Emigration request PID %d, migration manager %d&quot;</span>, </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;         pid, migman_id);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">/* lookup the migration manager first */</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans, migman_id))) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Invalid migration manager identifier %d&quot;</span>, migman_id);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">/* there is always only one mig man per slot */</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4035f12ea6373f91f7624ce2b209437d" title="&lt;&lt;public&gt;&gt; Returns the first object in the slot.">tcmi_slot_find_first</a>(migman, slot, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">/* Slot might exist, but it might still be empty*/</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.">tcmi_migman_get</a>(migman)) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;No migration manager in the slot(%d)&quot;</span>, <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot));</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;ops-&gt;emigrate_ppm_p)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        err = <span class="keyword">self</span>-&gt;ops-&gt;emigrate_ppm_p(pid, migman);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">/* release the migration manager */</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(migman);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; exit0:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="220,5,345,32"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="220,56,345,83"/><area shape="rect" id="node4" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="226,107,339,133"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="227,157,339,184"/><area shape="rect" id="node6" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="220,208,345,235"/><area shape="rect" id="node7" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="213,259,352,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadf4927acd8902d0de2729c2077792d60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>* tcmi_man_get_non_shutdowning_migman </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state. </p>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00372">372</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00081">TCMI_MIGMAN_INIT</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00071">tcmi_slot_entry</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00079">tcmi_slot_for_each</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00100">tcmi_slotvec_for_each_used_slot</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                                                                       {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897" title="A slot node is in fact a hlist node.">tcmi_slot_node_t</a>* node;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a> migman_state;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga49082f04567681a98c6d39eacbc1e4ed" title="Iterates through all used slots in the slot vector.">tcmi_slotvec_for_each_used_slot</a>(slot, self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga344314dfdafec96ad6d8398963749fa4" title="&lt;&lt;public&gt;&gt; Iterates through all nodes in the slot.">tcmi_slot_for_each</a>(node, slot) {            </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            migman = <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga25ff69a7b6d4ba8ef5b85079c0320872" title="&lt;&lt;public&gt;&gt; Extracts the actual entry from a slot node">tcmi_slot_entry</a>(node, <span class="keyword">struct</span> <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a>, node);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            migman_state = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(migman);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;           </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> ( migman_state == <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0e7ce596cac5174cf4406a849b27b845">TCMI_MIGMAN_INIT</a> || migman_state == <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a> ) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keywordflow">goto</span> found;         </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            }          </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            migman = NULL;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        };</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    };</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;found:    </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);   </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> migman;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadf4927acd8902d0de2729c2077792d60_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadf4927acd8902d0de2729c2077792d60_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadf4927acd8902d0de2729c2077792d60_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadf4927acd8902d0de2729c2077792d60_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="265,5,401,32"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="271,56,396,83"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="264,107,403,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1c0d48950792f18b6b7ea53c8b793c65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_init_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>man_dirname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the directories as described in <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>. </p>
<p>It is necessary to get the current root directory of the TCMI ctlfs first. So that it won't get unlinked under us.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
    <tr><td class="paramname">*root</td><td>- root directory of the filesystem, where all entries are to be created </td></tr>
    <tr><td class="paramname">*man_dirname</td><td>- name for the main directory of the manager (e.g. ccn or pen) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00227">227</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../de/d85/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__dir_8c_source.html#l00048">tcmi_ctlfs_dir_new()</a>, <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d5/da2/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs_8h_source.html#l00087">TCMI_PERMS_DIR</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating directories&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (!root)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a78bf73a842a40284a1d043ffd75793b2" title="root directory of CCN or PEN where all control files/directories reside">d_man</a> = <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(root, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, man_dirname)))</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae6a4db7c9852720f8f17a36fd2d00f01" title="directory where all registered nodes (CCN&#39;s or PEN&#39;s) reside">d_nodes</a> = </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a78bf73a842a40284a1d043ffd75793b2" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;nodes&quot;</span>)))</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#accb8bca4a643905802b9d5bb7784fd01" title="TCMI ctlfs - migration directory.">d_mig</a> = </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a78bf73a842a40284a1d043ffd75793b2" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;mig&quot;</span>)))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a5f7dca30ac2c1f981ed8927058a81c59" title="TCMI ctlfs - migproc directory for migrated processes.">d_migproc</a> = </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#accb8bca4a643905802b9d5bb7784fd01" title="TCMI ctlfs - migration directory.">d_mig</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;migproc&quot;</span>)))</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#adec0f740d7e745c7429aa5ab6e5bc947" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abb5606608faa2b2a90c0a4a031206574" title="Initializes TCMI ctlfs directories.">init_ctlfs_dirs</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#adec0f740d7e745c7429aa5ab6e5bc947" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abb5606608faa2b2a90c0a4a031206574" title="Initializes TCMI ctlfs directories.">init_ctlfs_dirs</a>()) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create specific ctlfs directories!&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">goto</span> exit4;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; exit4:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a5f7dca30ac2c1f981ed8927058a81c59" title="TCMI ctlfs - migproc directory for migrated processes.">d_migproc</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; exit3:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#accb8bca4a643905802b9d5bb7784fd01" title="TCMI ctlfs - migration directory.">d_mig</a>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; exit2:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae6a4db7c9852720f8f17a36fd2d00f01" title="directory where all registered nodes (CCN&#39;s or PEN&#39;s) reside">d_nodes</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; exit1:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a78bf73a842a40284a1d043ffd75793b2" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; exit0:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph">
<area shape="rect" id="node2" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="221,5,350,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="216,56,355,83"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="403,56,557,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadb44b36975559e2bec9b46dfc8c24cf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_init_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00276">276</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d0/def/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__file_8c_source.html#l00154">tcmi_ctlfs_file_unregister()</a>, <a class="el" href="../../d0/def/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__file_8c_source.html#l00062">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00455">tcmi_man_emig_ppm_p()</a>, <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00614">tcmi_man_mig_home_ppm_p()</a>, <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00428">tcmi_man_stop()</a>, and <a class="el" href="../../d5/da2/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs_8h_source.html#l00089">TCMI_PERMS_FILE_W</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating files&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abfc091c8551ecbb99bd7a1c8193bfae1" title="TCMI ctlfs - stop control file.">f_stop</a> = </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a78bf73a842a40284a1d043ffd75793b2" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga73bfcf08ed3c321b24ae41ae13c606a7" title="&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration f...">tcmi_man_stop</a>,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;stop&quot;</span>)))</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a3578da2fffb01ab8aac84de07f5f52d8" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a> = </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#accb8bca4a643905802b9d5bb7784fd01" title="TCMI ctlfs - migration directory.">d_mig</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga98cff5cedf84c16ebac3d3f58c17e470" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method - emigration PPM P What needs to be done:">tcmi_man_emig_ppm_p</a>,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 2, <span class="stringliteral">&quot;emigrate-ppm-p&quot;</span>)))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad10a55e49e20225641668e6fbe24fa90" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a> = </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#accb8bca4a643905802b9d5bb7784fd01" title="TCMI ctlfs - migration directory.">d_mig</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga331687b0d8d4c916003d788eb126d566" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method - migration home.">tcmi_man_mig_home_ppm_p</a>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;migrate-home&quot;</span>)))</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#adec0f740d7e745c7429aa5ab6e5bc947" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a67d168b7feb475064bfc9e6d49aa8bc6" title="Initializes TCMI ctlfs files.">init_ctlfs_files</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#adec0f740d7e745c7429aa5ab6e5bc947" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a67d168b7feb475064bfc9e6d49aa8bc6" title="Initializes TCMI ctlfs files.">init_ctlfs_files</a>()) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create specific ctlfs files!&quot;</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; exit3:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad10a55e49e20225641668e6fbe24fa90" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad10a55e49e20225641668e6fbe24fa90" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; exit2:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a3578da2fffb01ab8aac84de07f5f52d8" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a3578da2fffb01ab8aac84de07f5f52d8" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; exit1:</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abfc091c8551ecbb99bd7a1c8193bfae1" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abfc091c8551ecbb99bd7a1c8193bfae1" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; exit0:</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="216,5,355,32"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="203,56,368,83"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="213,107,358,133"/><area shape="rect" id="node6" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga98cff5cedf84c16ebac3d3f58c17e470" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method &#45; emigration PPM P What needs to be done:" alt="" coords="855,153,1015,180"/><area shape="rect" id="node13" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga331687b0d8d4c916003d788eb126d566" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method &#45; migration home." alt="" coords="189,259,381,285"/><area shape="rect" id="node14" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#ga73bfcf08ed3c321b24ae41ae13c606a7" title="&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration f..." alt="" coords="230,208,341,235"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="438,5,591,32"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="1109,5,1235,32"/><area shape="rect" id="node8" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1109,259,1235,285"/><area shape="rect" id="node9" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1342,220,1455,247"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1116,107,1228,133"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1109,157,1235,184"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1103,208,1241,235"/><area shape="rect" id="node15" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components." alt="" coords="429,212,600,239"/><area shape="rect" id="node16" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="829,205,1040,246"/><area shape="rect" id="node18" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="649,317,781,344"/><area shape="rect" id="node17" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="1104,309,1240,336"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="843,339,1026,365"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="1089,427,1255,453"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="1097,361,1247,402"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="1103,478,1241,519"/><area shape="rect" id="node23" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1324,562,1473,603"/><area shape="rect" id="node24" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="1305,409,1493,436"/><area shape="rect" id="node25" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="1331,460,1466,487"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1347,511,1451,537"/><area shape="rect" id="node26" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1541,460,1712,487"/><area shape="rect" id="node28" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1555,511,1698,537"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7efd6ea1ef1cb953d940d7bd7b62e7b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_init_migration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt;. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00364">364</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Initializing migration components&quot;</span>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga331687b0d8d4c916003d788eb126d566"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_mig_home_ppm_p </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; TCMI ctlfs write method - migration home. </p>
<p>Migration home requires delegating work to the instance specific method once we extract the requested PID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to a particular TCMI manager singleton instance </td></tr>
    <tr><td class="paramname">*data</td><td>- contains PID that is to be migrated home </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00614">614</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    pid_t <a class="code" href="../../d2/d82/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a> = *((<span class="keywordtype">int</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man" title="A compound structure that holds all current listenings and migration managers.">tcmi_man</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(obj);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Migration home request for PID %d&quot;</span>, pid);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;ops-&gt;migrate_home_ppm_p)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        err = <span class="keyword">self</span>-&gt;ops-&gt;migrate_home_ppm_p(pid);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga73bfcf08ed3c321b24ae41ae13c606a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_stop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration framework. </p>
<p>This results in migrating all processes back to CCN and terminating all migration managers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to a particular TCMI manager singleton instance </td></tr>
    <tr><td class="paramname">*data</td><td>- if the value that it points to is &gt;0, the action is taken </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always 0 (success)</dd></dl>
<p>NOTE: What is a purpose of this method? There is no inverse operation to stop, so is that essentially different from shutdown? ms </p>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00428">428</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, and <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{  </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">int</span> stop = *((<span class="keywordtype">int</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man" title="A compound structure that holds all current listenings and migration managers.">tcmi_man</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(obj);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;TCMI manager stop request, action = %d&quot;</span>, stop);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (stop) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">/* TODO: Stop operations are called just here, but shouldn&#39;t we call them as well on shutdown? */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;ops-&gt;stop) </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keyword">self</span>-&gt;ops-&gt;stop();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components.">tcmi_man_stop_migration</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph">
<area shape="rect" id="node2" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components." alt="" coords="165,80,336,107"/><area shape="rect" id="node3" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="384,38,595,79"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="423,115,555,141"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="891,5,1027,32"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="672,35,797,61"/><area shape="rect" id="node6" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="665,85,804,112"/><area shape="rect" id="node8" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="643,136,826,163"/><area shape="rect" id="node9" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="875,67,1042,93"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="884,118,1033,159"/><area shape="rect" id="node12" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="889,183,1028,225"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="896,249,1021,276"/><area shape="rect" id="node10" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1129,67,1242,93"/><area shape="rect" id="node13" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1111,121,1260,162"/><area shape="rect" id="node14" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="1091,187,1279,213"/><area shape="rect" id="node15" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="1118,237,1253,264"/><area shape="rect" id="node17" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1133,288,1237,315"/><area shape="rect" id="node16" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1328,237,1499,264"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1342,288,1485,315"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga82d6e5a8909db33bd6c2aa607b83866e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_stop_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are destroyed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00324">324</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>, and <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI manager ctlfs directories&quot;</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#adec0f740d7e745c7429aa5ab6e5bc947" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a86caa30cbe27f33afa47b66f3ee7aa94" title="Destroys all TCMI ctlfs directories.">stop_ctlfs_dirs</a>) </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop_ctlfs_dirs();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a5f7dca30ac2c1f981ed8927058a81c59" title="TCMI ctlfs - migproc directory for migrated processes.">d_migproc</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#accb8bca4a643905802b9d5bb7784fd01" title="TCMI ctlfs - migration directory.">d_mig</a>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae6a4db7c9852720f8f17a36fd2d00f01" title="directory where all registered nodes (CCN&#39;s or PEN&#39;s) reside">d_nodes</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a78bf73a842a40284a1d043ffd75793b2" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="224,5,363,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="411,5,565,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3d6f9c21e828c84de78f430ed236c8b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_stop_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Unregisters and releases all control files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00341">341</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d0/def/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__file_8c_source.html#l00154">tcmi_ctlfs_file_unregister()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI manager ctlfs files&quot;</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#adec0f740d7e745c7429aa5ab6e5bc947" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a06464097bed8cd4f9b216d749d77fd6b" title="Destroys all TCMI ctlfs files.">stop_ctlfs_files</a>) </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop_ctlfs_files();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abfc091c8551ecbb99bd7a1c8193bfae1" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abfc091c8551ecbb99bd7a1c8193bfae1" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a3578da2fffb01ab8aac84de07f5f52d8" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a3578da2fffb01ab8aac84de07f5f52d8" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad10a55e49e20225641668e6fbe24fa90" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad10a55e49e20225641668e6fbe24fa90" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="211,5,349,32"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="197,56,363,83"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="411,5,565,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf83a1652b974eb8341a8af259054077a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_stop_migration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Stops all migration components. </p>
<p>Terminates all migration managers, they are responsible for migrating all processes to the home node or a another execution node.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00404">404</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00372">tcmi_man_get_non_shutdowning_migman()</a>, and <a class="el" href="../../d6/d0b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8c_source.html#l00258">tcmi_migman_stop()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>, <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>, and <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00428">tcmi_man_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = <a class="code" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state...">tcmi_man_get_non_shutdowning_migman</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">while</span> (migman) {      </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Requesting migration manager shutdown.&quot;</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer.">tcmi_migman_stop</a>(migman);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        migman = <a class="code" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state...">tcmi_man_get_non_shutdowning_migman</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gaf83a1652b974eb8341a8af259054077a_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gaf83a1652b974eb8341a8af259054077a_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gaf83a1652b974eb8341a8af259054077a_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_gaf83a1652b974eb8341a8af259054077a_cgraph">
<area shape="rect" id="node2" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="224,38,435,79"/><area shape="rect" id="node6" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="263,115,395,141"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="731,5,867,32"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="512,35,637,61"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="505,85,644,112"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="483,136,666,163"/><area shape="rect" id="node8" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="715,67,882,93"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="724,118,873,159"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="729,183,868,225"/><area shape="rect" id="node18" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="736,249,861,276"/><area shape="rect" id="node9" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="969,67,1082,93"/><area shape="rect" id="node12" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="951,121,1100,162"/><area shape="rect" id="node13" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="931,187,1119,213"/><area shape="rect" id="node14" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="958,237,1093,264"/><area shape="rect" id="node16" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="973,288,1077,315"/><area shape="rect" id="node15" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1168,237,1339,264"/><area shape="rect" id="node17" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1182,288,1325,315"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aed4665e9fa11405215f01c52355a5535"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_wait_for_migmans_termination </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits for all migration managers to terminate. </p>
<p>Note: We perform wait by active polling of count of remaining migmas (100ms) interval. In case there were no remote processes running, there would be no wait as all migmans were terminated synchronously. In case there were remote processes, the waiting time for their migration back would be likely in order of seconds, so 100ms does not add much latency In case somebody volunteers, the code could be migrated to notify/wait patter to get rid of polling </p>

<p>Definition at line <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00113">113</a> of file <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00215">tcmi_slotvec_empty()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                                         {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">int</span> is_empty;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    is_empty = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness">tcmi_slotvec_empty</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">while</span> (!is_empty) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        set_current_state(TASK_INTERRUPTIBLE);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        schedule_timeout(msecs_to_jiffies(100));        </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        is_empty = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness">tcmi_slotvec_empty</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a26f75679c85ff2bba505412797b947a3" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_aed4665e9fa11405215f01c52355a5535_cgraph.png" border="0" usemap="#dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_aed4665e9fa11405215f01c52355a5535_cgraph" alt=""/></div>
<map name="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_aed4665e9fa11405215f01c52355a5535_cgraph" id="dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c_aed4665e9fa11405215f01c52355a5535_cgraph">
<area shape="rect" id="node2" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="246,5,383,32"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="252,56,377,83"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="245,107,384,133"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li><li class="navelem"><a class="el" href="../../dir_08cfbe165ea603e6d179ff1f702f26c2.html">kernel_3.7.1</a></li><li class="navelem"><a class="el" href="../../dir_54993795d38a4b0939659b8e486bb0f5.html">src</a></li><li class="navelem"><a class="el" href="../../dir_d6db29d45a6ebf6e3bfdbb75b7b3a396.html">tcmi</a></li><li class="navelem"><a class="el" href="../../dir_365e98d2a2e8336e64ee556e1a9b8657.html">manager</a></li><li class="navelem"><a class="el" href="../../dc/d8d/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8c.html">tcmi_man.c</a></li>
    <li class="footer">Generated on Mon Apr 1 2013 16:10:33 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
