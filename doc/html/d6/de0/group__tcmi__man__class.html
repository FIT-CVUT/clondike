<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_man class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/de0/group__tcmi__man__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_man class<div class="ingroups"><a class="el" href="../../db/d31/group__tcmi__managers__group.html">managers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This template &lt;&lt;singleton&gt;&gt; class implements a generic cluster node manager - TCMI manager.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_man class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d6/de0/group__tcmi__man__class.png" border="0" alt="" usemap="#d6_2de0_2group____tcmi____man____class"/>
<map name="d6_2de0_2group____tcmi____man____class" id="d6_2de0_2group____tcmi____man____class">
<area shape="rect" id="node2" href="../../db/d31/group__tcmi__managers__group.html" title="Classes in this group are responsible for various controlling tasks in the infrastructure." alt="" coords="6,5,85,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:da/d15/structtcmi__man"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a></td></tr>
<tr class="memdesc:da/d15/structtcmi__man"><td class="mdescLeft">&#160;</td><td class="mdescRight">A compound structure that holds all current listenings and migration managers.  <a href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">More...</a><br/></td></tr>
<tr class="separator:da/d15/structtcmi__man"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d7/d19/structtcmi__man__ops"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">tcmi_man_ops</a></td></tr>
<tr class="memdesc:d7/d19/structtcmi__man__ops"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migration manager operations that support polymorphism.  <a href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">More...</a><br/></td></tr>
<tr class="separator:d7/d19/structtcmi__man__ops"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa817e26a29c1f89a28677a955a0e66d0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0">TCMI_MAN</a>(man)&#160;&#160;&#160;((struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *)man)</td></tr>
<tr class="memdesc:gaa817e26a29c1f89a28677a955a0e66d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the TCMI manager.  <a href="#gaa817e26a29c1f89a28677a955a0e66d0">More...</a><br/></td></tr>
<tr class="separator:gaa817e26a29c1f89a28677a955a0e66d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1c0d48950792f18b6b7ea53c8b793c65"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga1c0d48950792f18b6b7ea53c8b793c65">tcmi_man_init_ctlfs_dirs</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, const char *man_dirname)</td></tr>
<tr class="memdesc:ga1c0d48950792f18b6b7ea53c8b793c65"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the directories as described in <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>.  <a href="#ga1c0d48950792f18b6b7ea53c8b793c65">More...</a><br/></td></tr>
<tr class="separator:ga1c0d48950792f18b6b7ea53c8b793c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb44b36975559e2bec9b46dfc8c24cf0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gadb44b36975559e2bec9b46dfc8c24cf0">tcmi_man_init_ctlfs_files</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gadb44b36975559e2bec9b46dfc8c24cf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>.  <a href="#gadb44b36975559e2bec9b46dfc8c24cf0">More...</a><br/></td></tr>
<tr class="separator:gadb44b36975559e2bec9b46dfc8c24cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82d6e5a8909db33bd6c2aa607b83866e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga82d6e5a8909db33bd6c2aa607b83866e">tcmi_man_stop_ctlfs_dirs</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga82d6e5a8909db33bd6c2aa607b83866e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are destroyed  <a href="#ga82d6e5a8909db33bd6c2aa607b83866e">More...</a><br/></td></tr>
<tr class="separator:ga82d6e5a8909db33bd6c2aa607b83866e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d6f9c21e828c84de78f430ed236c8b7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga3d6f9c21e828c84de78f430ed236c8b7">tcmi_man_stop_ctlfs_files</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga3d6f9c21e828c84de78f430ed236c8b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Unregisters and releases all control files.  <a href="#ga3d6f9c21e828c84de78f430ed236c8b7">More...</a><br/></td></tr>
<tr class="separator:ga3d6f9c21e828c84de78f430ed236c8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7efd6ea1ef1cb953d940d7bd7b62e7b1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga7efd6ea1ef1cb953d940d7bd7b62e7b1">tcmi_man_init_migration</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga7efd6ea1ef1cb953d940d7bd7b62e7b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt;.  <a href="#ga7efd6ea1ef1cb953d940d7bd7b62e7b1">More...</a><br/></td></tr>
<tr class="separator:ga7efd6ea1ef1cb953d940d7bd7b62e7b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf4927acd8902d0de2729c2077792d60"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60">tcmi_man_get_non_shutdowning_migman</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gadf4927acd8902d0de2729c2077792d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state.  <a href="#gadf4927acd8902d0de2729c2077792d60">More...</a><br/></td></tr>
<tr class="separator:gadf4927acd8902d0de2729c2077792d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf83a1652b974eb8341a8af259054077a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a">tcmi_man_stop_migration</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaf83a1652b974eb8341a8af259054077a"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Stops all migration components.  <a href="#gaf83a1652b974eb8341a8af259054077a">More...</a><br/></td></tr>
<tr class="separator:gaf83a1652b974eb8341a8af259054077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73bfcf08ed3c321b24ae41ae13c606a7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga73bfcf08ed3c321b24ae41ae13c606a7">tcmi_man_stop</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga73bfcf08ed3c321b24ae41ae13c606a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration framework.  <a href="#ga73bfcf08ed3c321b24ae41ae13c606a7">More...</a><br/></td></tr>
<tr class="separator:ga73bfcf08ed3c321b24ae41ae13c606a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98cff5cedf84c16ebac3d3f58c17e470"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga98cff5cedf84c16ebac3d3f58c17e470">tcmi_man_emig_ppm_p</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga98cff5cedf84c16ebac3d3f58c17e470"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; TCMI ctlfs write method - emigration PPM P What needs to be done:  <a href="#ga98cff5cedf84c16ebac3d3f58c17e470">More...</a><br/></td></tr>
<tr class="separator:ga98cff5cedf84c16ebac3d3f58c17e470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddba35e06a4eda99450d72288234ad14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaddba35e06a4eda99450d72288234ad14">tcmi_man_emig_npm</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, pid_t <a class="el" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, u_int32_t migman_id, struct pt_regs *regs, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *npm_params)</td></tr>
<tr class="memdesc:gaddba35e06a4eda99450d72288234ad14"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Method that performs non-preemtive migration  <a href="#gaddba35e06a4eda99450d72288234ad14">More...</a><br/></td></tr>
<tr class="separator:gaddba35e06a4eda99450d72288234ad14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34c83e593357e4cf14838d2fca19b9d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga34c83e593357e4cf14838d2fca19b9d2">tcmi_man_fork</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct task_struct *parent, struct task_struct *child)</td></tr>
<tr class="memdesc:ga34c83e593357e4cf14838d2fca19b9d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Method that performs task fork  <a href="#ga34c83e593357e4cf14838d2fca19b9d2">More...</a><br/></td></tr>
<tr class="separator:ga34c83e593357e4cf14838d2fca19b9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga331687b0d8d4c916003d788eb126d566"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga331687b0d8d4c916003d788eb126d566">tcmi_man_mig_home_ppm_p</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga331687b0d8d4c916003d788eb126d566"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; TCMI ctlfs write method - migration home.  <a href="#ga331687b0d8d4c916003d788eb126d566">More...</a><br/></td></tr>
<tr class="separator:ga331687b0d8d4c916003d788eb126d566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97c9f7b7804700ac95d6a4b43c0173e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga97c9f7b7804700ac95d6a4b43c0173e0">tcmi_man_init</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">tcmi_man_ops</a> *ops, const char *man_dirname)</td></tr>
<tr class="memdesc:ga97c9f7b7804700ac95d6a4b43c0173e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Initializes the TCMI manager  <a href="#ga97c9f7b7804700ac95d6a4b43c0173e0">More...</a><br/></td></tr>
<tr class="separator:ga97c9f7b7804700ac95d6a4b43c0173e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5255cad7e65c708e972344bab305e19a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga5255cad7e65c708e972344bab305e19a">tcmi_man_shutdown</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga5255cad7e65c708e972344bab305e19a"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Shuts down TCMI manager  <a href="#ga5255cad7e65c708e972344bab305e19a">More...</a><br/></td></tr>
<tr class="separator:ga5255cad7e65c708e972344bab305e19a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff233e88cb97d1c5bf33f91c697529ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaff233e88cb97d1c5bf33f91c697529ed">tcmi_man_send_generic_user_message</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int target_slot_index, int user_data_size, char *user_data)</td></tr>
<tr class="memdesc:gaff233e88cb97d1c5bf33f91c697529ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Send generic user message  <a href="#gaff233e88cb97d1c5bf33f91c697529ed">More...</a><br/></td></tr>
<tr class="separator:gaff233e88cb97d1c5bf33f91c697529ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c53520e91c6208d6f36505dcc70b3aa"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga3c53520e91c6208d6f36505dcc70b3aa">tcmi_man_reserve_migmanslot</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga3c53520e91c6208d6f36505dcc70b3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager.  <a href="#ga3c53520e91c6208d6f36505dcc70b3aa">More...</a><br/></td></tr>
<tr class="separator:ga3c53520e91c6208d6f36505dcc70b3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5cc7906c63f9356975b8d0a04546027"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gab5cc7906c63f9356975b8d0a04546027">tcmi_man_release_migmanslot</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *slot)</td></tr>
<tr class="memdesc:gab5cc7906c63f9356975b8d0a04546027"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved.  <a href="#gab5cc7906c63f9356975b8d0a04546027">More...</a><br/></td></tr>
<tr class="separator:gab5cc7906c63f9356975b8d0a04546027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b77b2f99bdb6e862e3fee0e65d6041e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e">tcmi_man_root</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga7b77b2f99bdb6e862e3fee0e65d6041e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager.  <a href="#ga7b77b2f99bdb6e862e3fee0e65d6041e">More...</a><br/></td></tr>
<tr class="separator:ga7b77b2f99bdb6e862e3fee0e65d6041e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76ff5984fc261d709fd37cf6ae76c282"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga76ff5984fc261d709fd37cf6ae76c282">tcmi_man_nodes_dir</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga76ff5984fc261d709fd37cf6ae76c282"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager.  <a href="#ga76ff5984fc261d709fd37cf6ae76c282">More...</a><br/></td></tr>
<tr class="separator:ga76ff5984fc261d709fd37cf6ae76c282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba05288b4c6ef833034fdcebc3f71671"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#gaba05288b4c6ef833034fdcebc3f71671">tcmi_man_migproc_dir</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaba05288b4c6ef833034fdcebc3f71671"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Accessor for migproc directory.  <a href="#gaba05288b4c6ef833034fdcebc3f71671">More...</a><br/></td></tr>
<tr class="separator:gaba05288b4c6ef833034fdcebc3f71671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06dbb24abb0020744929149e3c61cdb8"><td class="memItemLeft" align="right" valign="top">static u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#ga06dbb24abb0020744929149e3c61cdb8">tcmi_man_id</a> (struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga06dbb24abb0020744929149e3c61cdb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; TCMI manager ID accessor.  <a href="#ga06dbb24abb0020744929149e3c61cdb8">More...</a><br/></td></tr>
<tr class="separator:ga06dbb24abb0020744929149e3c61cdb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This template &lt;&lt;singleton&gt;&gt; class implements a generic cluster node manager - TCMI manager. </p>
<p>It provides generic functionality to control migration managers.</p>
<p>Each migration manager is associated with one registered PEN. The user controls the cluster node(PEN,CCN or both) by manipulating <a class="el" href="../../d0/d02/tcmi__ctlfs_8c.html">TCMI control file system </a>. The directory/file layout can be divided into three groups of files/directories based on their maintainers, which can be:</p>
<ul>
<li>TCMI manager</li>
<li>TCMI migration manager</li>
<li>TCMI preemptive migration component</li>
<li>TCMI non-preemtive migration component</li>
<li>TCMI tasks</li>
</ul>
<p>Description of a particular layout is detailed at <a class="el" href="../../df/db6/group__tcmi__ccnman__class.html">TCMI CCN manager </a> and <a class="el" href="../../db/d61/group__tcmi__penman__class.html">TCMI PEN manager </a></p>
<p>There is an upper bound on the number of registered nodes. This is a very common approach in UNIX design as it prevents problems with overloading the CCN. This parameter is currently set at compile time. but might be made configurable via ctlfs from user space.</p>
<p>The core datastructure for keeping track of migration managers(=registered cluster nodes) is <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html">a slot vector </a>.</p>
<p>The TCMI manager carries a unique identifier that is generated randomly upon initialization. This ID then identifies a node in cluster. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="da/d15/structtcmi__man" id="da/d15/structtcmi__man"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_man</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A compound structure that holds all current listenings and migration managers. </p>
<p>This is for internal use only. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00092">92</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_man:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../db/d9a/structtcmi__man__coll__graph.png" border="0" usemap="#tcmi__man_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__man_coll__map" id="tcmi__man_coll__map">
<area shape="rect" id="node2" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec" title="A slot vector compound structure." alt="" coords="5,249,115,415"/><area shape="rect" id="node3" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure." alt="" coords="5,5,115,171"/><area shape="rect" id="node4" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops" title="Migration manager operations that support polymorphism." alt="" coords="140,235,303,429"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure." alt="" coords="327,286,441,378"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops" title="entry operations that support polymorphism" alt="" coords="328,49,440,127"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac55eded2293a21deebb170b8df857372"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_man</td>
<td class="fielddoc">
root directory of CCN or PEN where all control files/directories reside </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad28d52e2001a5ed1af76897fdb3a355c"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_mig</td>
<td class="fielddoc">
TCMI ctlfs - migration directory. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a21d055e12cef78a26fcae6f9b4b872b0"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_migproc</td>
<td class="fielddoc">
TCMI ctlfs - migproc directory for migrated processes. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad3d495ecb7ec0311b99dbea7a7fded7c"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_nodes</td>
<td class="fielddoc">
directory where all registered nodes (CCN's or PEN's) reside </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af8be19c5d8265b638dde497498f00675"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_emig_ppm_p</td>
<td class="fielddoc">
TCMI ctlfs - migration control file (PPM physical ckpt.) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a324ff1346599443259778a9b21b2bc63"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_mig_home_ppm_p</td>
<td class="fielddoc">
TCMI ctlfs - migration control file (PPM physical ckpt.) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aac62d18ce7b3a3292e953527f6f459fe"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_stop</td>
<td class="fielddoc">
TCMI ctlfs - stop control file. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ab1fb5cb326aa6e23017514801f0f1058"></a>u_int32_t</td>
<td class="fieldname">
id</td>
<td class="fielddoc">
Unique manager ID. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae7d9ed143e1b48232230c1e00daf30ea"></a>struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *</td>
<td class="fieldname">
mig_mans</td>
<td class="fielddoc">
slot container for migration managers, 1 manager per slot </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad881d8fe17cf2f67e6b597e4cd603915"></a>struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">tcmi_man_ops</a> *</td>
<td class="fieldname">
ops</td>
<td class="fielddoc">
Operations specific to a CCN/PEN manager resp. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a86b604de1161f6f93fd27ec654c4f329"></a>atomic_t</td>
<td class="fieldname">
ready</td>
<td class="fielddoc">
indicates the manager is ready - used for proper shutdown </td></tr>
</table>

</div>
</div>
<a name="d7/d19/structtcmi__man__ops" id="d7/d19/structtcmi__man__ops"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_man_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Migration manager operations that support polymorphism. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00128">128</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_man_ops:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dc/d93/structtcmi__man__ops__coll__graph.png" border="0" usemap="#tcmi__man__ops_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:abb5606608faa2b2a90c0a4a031206574"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#abb5606608faa2b2a90c0a4a031206574">init_ctlfs_dirs</a> )(void)</td></tr>
<tr class="memdesc:abb5606608faa2b2a90c0a4a031206574"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes TCMI ctlfs directories.  <a href="#abb5606608faa2b2a90c0a4a031206574">More...</a><br/></td></tr>
<tr class="separator:abb5606608faa2b2a90c0a4a031206574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d168b7feb475064bfc9e6d49aa8bc6"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#a67d168b7feb475064bfc9e6d49aa8bc6">init_ctlfs_files</a> )(void)</td></tr>
<tr class="memdesc:a67d168b7feb475064bfc9e6d49aa8bc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes TCMI ctlfs files.  <a href="#a67d168b7feb475064bfc9e6d49aa8bc6">More...</a><br/></td></tr>
<tr class="separator:a67d168b7feb475064bfc9e6d49aa8bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86caa30cbe27f33afa47b66f3ee7aa94"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#a86caa30cbe27f33afa47b66f3ee7aa94">stop_ctlfs_dirs</a> )(void)</td></tr>
<tr class="memdesc:a86caa30cbe27f33afa47b66f3ee7aa94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys all TCMI ctlfs directories.  <a href="#a86caa30cbe27f33afa47b66f3ee7aa94">More...</a><br/></td></tr>
<tr class="separator:a86caa30cbe27f33afa47b66f3ee7aa94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06464097bed8cd4f9b216d749d77fd6b"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#a06464097bed8cd4f9b216d749d77fd6b">stop_ctlfs_files</a> )(void)</td></tr>
<tr class="memdesc:a06464097bed8cd4f9b216d749d77fd6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys all TCMI ctlfs files.  <a href="#a06464097bed8cd4f9b216d749d77fd6b">More...</a><br/></td></tr>
<tr class="separator:a06464097bed8cd4f9b216d749d77fd6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5e40cccb74dee3813d6a4d0d6673bee"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#aa5e40cccb74dee3813d6a4d0d6673bee">emigrate_ppm_p</a> )(pid_t, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:aa5e40cccb74dee3813d6a4d0d6673bee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preemptive emigration method.  <a href="#aa5e40cccb74dee3813d6a4d0d6673bee">More...</a><br/></td></tr>
<tr class="separator:aa5e40cccb74dee3813d6a4d0d6673bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e0de4730bbe586de68a7c5a45ee3a1"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#a51e0de4730bbe586de68a7c5a45ee3a1">emigrate_npm</a> )(pid_t, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, struct pt_regs *regs, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *)</td></tr>
<tr class="memdesc:a51e0de4730bbe586de68a7c5a45ee3a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-preemptive emigration method.  <a href="#a51e0de4730bbe586de68a7c5a45ee3a1">More...</a><br/></td></tr>
<tr class="separator:a51e0de4730bbe586de68a7c5a45ee3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2678de842531772e9d7ba3e6467bbe5b"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#a2678de842531772e9d7ba3e6467bbe5b">migrate_home_ppm_p</a> )(pid_t)</td></tr>
<tr class="memdesc:a2678de842531772e9d7ba3e6467bbe5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrate home method.  <a href="#a2678de842531772e9d7ba3e6467bbe5b">More...</a><br/></td></tr>
<tr class="separator:a2678de842531772e9d7ba3e6467bbe5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a288c7f784f6ab33075463fb51719e7b2"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#a288c7f784f6ab33075463fb51719e7b2">fork</a> )(struct task_struct *parent, struct task_struct *child, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:a288c7f784f6ab33075463fb51719e7b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms forked process to a same type of task as parent and assigns it with a same manager.  <a href="#a288c7f784f6ab33075463fb51719e7b2">More...</a><br/></td></tr>
<tr class="separator:a288c7f784f6ab33075463fb51719e7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcdfffb2806dd63c82f999fd7db14efa"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de0/group__tcmi__man__class.html#adcdfffb2806dd63c82f999fd7db14efa">stop</a> )(void)</td></tr>
<tr class="memdesc:adcdfffb2806dd63c82f999fd7db14efa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance specific stop method.  <a href="#adcdfffb2806dd63c82f999fd7db14efa">More...</a><br/></td></tr>
<tr class="separator:adcdfffb2806dd63c82f999fd7db14efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="a51e0de4730bbe586de68a7c5a45ee3a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_man_ops::emigrate_npm)(pid_t, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, struct pt_regs *regs, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Non-preemptive emigration method. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00140">140</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa5e40cccb74dee3813d6a4d0d6673bee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_man_ops::emigrate_ppm_p)(pid_t, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preemptive emigration method. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00138">138</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="a288c7f784f6ab33075463fb51719e7b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_man_ops::fork)(struct task_struct *parent, struct task_struct *child, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transforms forked process to a same type of task as parent and assigns it with a same manager. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00144">144</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb5606608faa2b2a90c0a4a031206574"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_man_ops::init_ctlfs_dirs)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes TCMI ctlfs directories. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00130">130</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="a67d168b7feb475064bfc9e6d49aa8bc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_man_ops::init_ctlfs_files)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes TCMI ctlfs files. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00132">132</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2678de842531772e9d7ba3e6467bbe5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_man_ops::migrate_home_ppm_p)(pid_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Migrate home method. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00142">142</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="adcdfffb2806dd63c82f999fd7db14efa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_man_ops::stop)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instance specific stop method. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00147">147</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="a86caa30cbe27f33afa47b66f3ee7aa94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_man_ops::stop_ctlfs_dirs)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys all TCMI ctlfs directories. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00134">134</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>
<a class="anchor" id="a06464097bed8cd4f9b216d749d77fd6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_man_ops::stop_ctlfs_files)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys all TCMI ctlfs files. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00136">136</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gaa817e26a29c1f89a28677a955a0e66d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_MAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">man</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *)man)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the TCMI manager. </p>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00151">151</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00134">check_duplicates()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00065">tcmi_ccnman_init()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00133">tcmi_ccnman_init_ctlfs_dirs()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00107">tcmi_ccnman_shutdown()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00455">tcmi_man_emig_ppm_p()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00614">tcmi_man_mig_home_ppm_p()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00428">tcmi_man_stop()</a>, <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00215">tcmi_mighooks_execve()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00059">tcmi_penman_init()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00103">tcmi_penman_init_ctlfs_files()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00083">tcmi_penman_shutdown()</a>, <a class="el" href="../../d0/d0f/tcmi__module_8c_source.html#l00097">tcmi_send_generic_user_message_handler()</a>, and <a class="el" href="../../db/d35/tcmi__syscallhooks__other_8c_source.html#l00112">tcmi_syscall_hooks_in_fork()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaddba35e06a4eda99450d72288234ad14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_man_emig_npm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>migman_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pt_regs *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *&#160;</td>
          <td class="paramname"><em>npm_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Method that performs non-preemtive migration </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>Pid of the process to be migrated </td></tr>
    <tr><td class="paramname">migman_id</td><td>Id of the migration manager to be used for the migration </td></tr>
    <tr><td class="paramname">npm_params</td><td>Params of the non-preemptive migration </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00504">504</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00096">tcmi_migman::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00201">tcmi_migman_get()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00120">tcmi_slot_find_first</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00177">tcmi_try_npm_on_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Non preemptive emigration request PID %d, migration manager %d&quot;</span>, </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;         <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a>, migman_id);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">/* lookup the migration manager first */</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>, migman_id))) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Invalid migration manager identifier %d&quot;</span>, migman_id);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">/* there is always only one mig man per slot */</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4035f12ea6373f91f7624ce2b209437d" title="&lt;&lt;public&gt;&gt; Returns the first object in the slot.">tcmi_slot_find_first</a>(migman, slot, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">/* Slot might exist, but it might still be empty*/</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.">tcmi_migman_get</a>(migman)) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;No migration manager in the slot(%d)&quot;</span>, <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot));</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a51e0de4730bbe586de68a7c5a45ee3a1" title="Non-preemptive emigration method.">emigrate_npm</a>)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        err = <span class="keyword">self</span>-&gt;ops-&gt;emigrate_npm(<a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a>, migman, regs, npm_params);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">/* release the migration manager */</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(migman);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; exit0:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_gaddba35e06a4eda99450d72288234ad14_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_gaddba35e06a4eda99450d72288234ad14_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_gaddba35e06a4eda99450d72288234ad14_cgraph" id="d6/de0/group__tcmi__man__class_gaddba35e06a4eda99450d72288234ad14_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="207,123,332,149"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="207,173,332,200"/><area shape="rect" id="node29" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="213,224,326,251"/><area shape="rect" id="node30" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="213,275,325,301"/><area shape="rect" id="node31" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="207,325,332,352"/><area shape="rect" id="node32" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="200,376,339,403"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="387,173,515,200"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="571,5,746,32"/><area shape="rect" id="node6" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="601,224,716,251"/><area shape="rect" id="node13" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="577,57,740,98"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="563,123,754,149"/><area shape="rect" id="node23" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="605,173,712,200"/><area shape="rect" id="node24" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="584,275,733,301"/><area shape="rect" id="node27" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="599,351,718,377"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="838,224,941,251"/><area shape="rect" id="node8" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1059,224,1159,251"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1026,275,1193,301"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1024,173,1195,200"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1252,275,1412,301"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1251,173,1413,200"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="803,21,975,48"/><area shape="rect" id="node20" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="820,123,959,149"/><area shape="rect" id="node17" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1027,72,1192,99"/><area shape="rect" id="node15" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1243,21,1421,48"/><area shape="rect" id="node16" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1469,14,1635,55"/><area shape="rect" id="node18" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1266,123,1398,149"/><area shape="rect" id="node19" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1259,72,1405,99"/><area shape="rect" id="node21" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1033,123,1186,149"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="836,275,943,301"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="829,325,949,352"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="830,376,949,403"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga98cff5cedf84c16ebac3d3f58c17e470"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_emig_ppm_p </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; TCMI ctlfs write method - emigration PPM P What needs to be done: </p>
<ul>
<li>find the requested migration manager</li>
<li>call instance specific emigration method.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to a particular TCMI manager singleton instance </td></tr>
    <tr><td class="paramname">*data</td><td>- an array of two integers first contains PID, second one contains the desired manager identifier as it appears in ctlfs. It is the name of its directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00455">455</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00096">tcmi_migman::node</a>, <a class="el" href="../../d6/d23/tcmi__signal__msg_8h_source.html#l00069">pid</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00201">tcmi_migman_get()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00120">tcmi_slot_find_first</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    pid_t <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a> = *((<span class="keywordtype">int</span> *)<a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    u_int32_t migman_id = *(((<span class="keywordtype">int</span> *)<a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>) + 1);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man" title="A compound structure that holds all current listenings and migration managers.">tcmi_man</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(obj);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Emigration request PID %d, migration manager %d&quot;</span>, </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;         pid, migman_id);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">/* lookup the migration manager first */</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans, migman_id))) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Invalid migration manager identifier %d&quot;</span>, migman_id);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">/* there is always only one mig man per slot */</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4035f12ea6373f91f7624ce2b209437d" title="&lt;&lt;public&gt;&gt; Returns the first object in the slot.">tcmi_slot_find_first</a>(migman, slot, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">/* Slot might exist, but it might still be empty*/</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.">tcmi_migman_get</a>(migman)) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;No migration manager in the slot(%d)&quot;</span>, <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot));</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;ops-&gt;emigrate_ppm_p)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        err = <span class="keyword">self</span>-&gt;ops-&gt;emigrate_ppm_p(pid, migman);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">/* release the migration manager */</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(migman);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; exit0:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;mig_mans);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph" id="d6/de0/group__tcmi__man__class_ga98cff5cedf84c16ebac3d3f58c17e470_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="220,123,345,149"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="220,173,345,200"/><area shape="rect" id="node29" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="226,224,339,251"/><area shape="rect" id="node30" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="227,275,339,301"/><area shape="rect" id="node31" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="220,325,345,352"/><area shape="rect" id="node32" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="213,376,352,403"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="400,173,528,200"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="585,5,759,32"/><area shape="rect" id="node6" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="615,224,729,251"/><area shape="rect" id="node13" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="591,57,753,98"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="577,123,767,149"/><area shape="rect" id="node23" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="619,173,725,200"/><area shape="rect" id="node24" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="597,275,747,301"/><area shape="rect" id="node27" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="613,351,731,377"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="851,224,954,251"/><area shape="rect" id="node8" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1073,224,1173,251"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1039,275,1206,301"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1037,173,1208,200"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1265,275,1425,301"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1264,173,1427,200"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="817,21,989,48"/><area shape="rect" id="node20" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="833,123,972,149"/><area shape="rect" id="node17" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1040,72,1205,99"/><area shape="rect" id="node15" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1256,21,1435,48"/><area shape="rect" id="node16" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1483,14,1648,55"/><area shape="rect" id="node18" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1279,123,1411,149"/><area shape="rect" id="node19" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1272,72,1419,99"/><area shape="rect" id="node21" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1046,123,1199,149"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="849,275,956,301"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="843,325,963,352"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="843,376,962,403"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga34c83e593357e4cf14838d2fca19b9d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_man_fork </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct task_struct *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct task_struct *&#160;</td>
          <td class="paramname"><em>child</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Method that performs task fork </p>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00542">542</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00104">tcmi_migman::ccn_id</a>, <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h_source.html#l00127">flags</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00155">tcmi_task::migman</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00141">tcmi_task::node</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00106">tcmi_migman::pen_id</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00201">tcmi_migman_get()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00120">tcmi_slot_find_first</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00942">tcmi_task_migman_slot_index()</a>.</p>

<p>Referenced by <a class="el" href="../../db/d35/tcmi__syscallhooks__other_8c_source.html#l00112">tcmi_syscall_hooks_in_fork()</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                                                                                                {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    u_int migman_slot_index;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>* tcmi_parent;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// We perform all manager fork operation with interrupts disabled to prevent possible lock inversion problems</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Not sure what the intention was, but it does not work well.. interfere with getinode on ccfs initialization </span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// (there are actually more interferences and we ideally need to get rid of getinode in this call chain altoghether)</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">//  raw_local_irq_save(flags);</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    tcmi_parent = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(parent-&gt;tcmi.tcmi_task);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    migman_slot_index = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga90412716287ffdaf54ba3f6f1e374a38" title="&lt;&lt;public&gt;&gt; Accessor of vector slot index of the migration manager associated with this task...">tcmi_task_migman_slot_index</a>(tcmi_parent);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    BUG_ON(parent-&gt;tcmi.task_type != shadow &amp;&amp; parent-&gt;tcmi.task_type != guest);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    BUG_ON(tcmi_parent-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8ad9bf518ba351fdb3a320d2050b35f6" title="CCN ID - supplied by the instantiator(for CCN mig manager) or sent by the CCN(for PEN mig manager)...">ccn_id</a> != self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ab1fb5cb326aa6e23017514801f0f1058" title="Unique manager ID.">id</a> &amp;&amp; tcmi_parent-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a236dceb40c3c4d7b66784df1f16c86ec" title="PEN ID - vica versa to how CCN ID is setup.">pen_id</a> != self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ab1fb5cb326aa6e23017514801f0f1058" title="Unique manager ID.">id</a>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Performing fork of task pid: %d to child: %d (mig manager %u)&quot;</span>, parent-&gt;pid, child-&gt;pid, migman_slot_index);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> ( child-&gt;tcmi.tcmi_task != parent-&gt;tcmi.tcmi_task ) { <span class="comment">// This should hold, since the task struts were simply copied      </span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Assertion error! Tasks after fork should have same tcmi task&quot;</span>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// We&#39;ve verified the task is really copied and now we need to prepare it to be attached.. for that we need to reset its TCMI structures first</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    child-&gt;tcmi.tcmi_task = NULL;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    child-&gt;tcmi.mig_mode_handler = NULL;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">/* lookup the migration manager first */</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>, migman_slot_index))) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Invalid migration manager identifier %lu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)migman_slot_index);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">/* there is always only one mig man per slot */</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4035f12ea6373f91f7624ce2b209437d" title="&lt;&lt;public&gt;&gt; Returns the first object in the slot.">tcmi_slot_find_first</a>(migman, slot, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#acfa8de59bfc98aedf6b8f76b59f9222c" title="node for storage in the migration slot of the migration manager">node</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">/* Slot might exist, but it might still be empty*/</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.">tcmi_migman_get</a>(migman)) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;No migration manager in the slot(%d)&quot;</span>, <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot));</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a288c7f784f6ab33075463fb51719e7b2" title="Transforms forked process to a same type of task as parent and assigns it with a same manager...">fork</a>)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        err = <span class="keyword">self</span>-&gt;ops-&gt;fork(parent, child, migman);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">//  raw_local_irq_restore(flags);</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">/* release the migration manager, task has now its own reference to it */</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(migman);    </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;exit0:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    raw_local_irq_restore(flags);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga34c83e593357e4cf14838d2fca19b9d2_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga34c83e593357e4cf14838d2fca19b9d2_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga34c83e593357e4cf14838d2fca19b9d2_cgraph" id="d6/de0/group__tcmi__man__class_ga34c83e593357e4cf14838d2fca19b9d2_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="177,267,303,293"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="177,317,303,344"/><area shape="rect" id="node29" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="623,427,737,453"/><area shape="rect" id="node30" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="184,485,296,512"/><area shape="rect" id="node31" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="177,536,303,563"/><area shape="rect" id="node32" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="171,587,309,613"/><area shape="rect" id="node33" href="../../de/d2f/group__tcmi__task__class.html#ga90412716287ffdaf54ba3f6f1e374a38" title="&lt;&lt;public&gt;&gt; Accessor of vector slot index of the migration manager associated with this task..." alt="" coords="160,419,320,461"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="388,233,516,260"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="593,157,767,184"/><area shape="rect" id="node6" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="623,208,737,235"/><area shape="rect" id="node13" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="599,361,761,402"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="585,309,775,336"/><area shape="rect" id="node23" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="627,259,733,285"/><area shape="rect" id="node24" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="605,56,755,83"/><area shape="rect" id="node27" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="621,107,739,133"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="859,208,962,235"/><area shape="rect" id="node8" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1081,157,1181,184"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1047,208,1214,235"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1045,259,1216,285"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1273,208,1433,235"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1272,259,1435,285"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="825,411,997,437"/><area shape="rect" id="node20" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="841,309,980,336"/><area shape="rect" id="node17" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1048,360,1213,387"/><area shape="rect" id="node15" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1264,411,1443,437"/><area shape="rect" id="node16" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1491,403,1656,445"/><area shape="rect" id="node18" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1287,309,1419,336"/><area shape="rect" id="node19" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1280,360,1427,387"/><area shape="rect" id="node21" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1054,309,1207,336"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="857,56,964,83"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="851,5,971,32"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="851,107,970,133"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="369,427,535,453"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadf4927acd8902d0de2729c2077792d60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>* tcmi_man_get_non_shutdowning_migman </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state. </p>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00372">372</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00081">TCMI_MIGMAN_INIT</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00071">tcmi_slot_entry</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00079">tcmi_slot_for_each</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00100">tcmi_slotvec_for_each_used_slot</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                                                                       {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897" title="A slot node is in fact a hlist node.">tcmi_slot_node_t</a>* node;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a> migman_state;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga49082f04567681a98c6d39eacbc1e4ed" title="Iterates through all used slots in the slot vector.">tcmi_slotvec_for_each_used_slot</a>(slot, self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga344314dfdafec96ad6d8398963749fa4" title="&lt;&lt;public&gt;&gt; Iterates through all nodes in the slot.">tcmi_slot_for_each</a>(node, slot) {            </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            migman = <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga25ff69a7b6d4ba8ef5b85079c0320872" title="&lt;&lt;public&gt;&gt; Extracts the actual entry from a slot node">tcmi_slot_entry</a>(node, <span class="keyword">struct</span> <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a>, node);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            migman_state = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(migman);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;           </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> ( migman_state == <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0e7ce596cac5174cf4406a849b27b845">TCMI_MIGMAN_INIT</a> || migman_state == <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a> ) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keywordflow">goto</span> found;         </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            }          </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            migman = NULL;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        };</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    };</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;found:    </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);   </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> migman;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_gadf4927acd8902d0de2729c2077792d60_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_gadf4927acd8902d0de2729c2077792d60_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_gadf4927acd8902d0de2729c2077792d60_cgraph" id="d6/de0/group__tcmi__man__class_gadf4927acd8902d0de2729c2077792d60_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="265,5,401,32"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="271,56,396,83"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="264,107,403,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga06dbb24abb0020744929149e3c61cdb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u_int32_t tcmi_man_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; TCMI manager ID accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>manager ID </dd></dl>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00234">234</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;id;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga97c9f7b7804700ac95d6a4b43c0173e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_man_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">tcmi_man_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>man_dirname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Initializes the TCMI manager </p>
<p>&lt;&lt;public&gt;&gt; Initializes the TCMI manager</p>
<p>This generic init method, initializes basic singleton instance items common for both TCMI managers (CCN and PEN). The initialization is done in this order:</p>
<ul>
<li>create a slot vector for migration managers</li>
<li>create TCMI ctlfs directories</li>
<li>create TCMI ctlfs control files</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular singleton instance to be initialized </td></tr>
    <tr><td class="paramname">*root</td><td>- root directory of the filesystem, where all entries are to be created </td></tr>
    <tr><td class="paramname">*ops</td><td>- instance specific operations </td></tr>
    <tr><td class="paramname">*man_dirname</td><td>- name for the main directory of the manager (e.g. ccn or pen) also represent connected nodes (e.g. all PEN's from CCN prospective) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00069">69</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00049">MAX_NODES</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00227">tcmi_man_init_ctlfs_dirs()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00364">tcmi_man_init_migration()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00324">tcmi_man_stop_ctlfs_dirs()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00050">tcmi_slotvec_new()</a>, and <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00065">tcmi_ccnman_init()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00059">tcmi_penman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (!ops) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing migration manager operations!&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a86b604de1161f6f93fd27ec654c4f329" title="indicates the manager is ready - used for proper shutdown">ready</a>, 0);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">self</span>-&gt;ops = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a> = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance.">tcmi_slotvec_new</a>(<a class="code" href="../../dd/dbd/tcmi__man_8c.html#abd2aacdca9cb2a1a30f3392256b96ea3" title="maximum number of connected nodes">MAX_NODES</a>)))</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga1c0d48950792f18b6b7ea53c8b793c65" title="&lt;&lt;private&gt;&gt; Creates the directories as described in here .">tcmi_man_init_ctlfs_dirs</a>(<span class="keyword">self</span>, root, man_dirname) &lt; 0)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga7efd6ea1ef1cb953d940d7bd7b62e7b1" title="&lt;&lt;private&gt;&gt;.">tcmi_man_init_migration</a>(<span class="keyword">self</span>) &lt; 0)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gadb44b36975559e2bec9b46dfc8c24cf0" title="&lt;&lt;private&gt;&gt; Creates the static files described here .">tcmi_man_init_ctlfs_files</a>(<span class="keyword">self</span>) &lt; 0)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a86b604de1161f6f93fd27ec654c4f329" title="indicates the manager is ready - used for proper shutdown">ready</a>, 1);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    get_random_bytes(&amp;self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ab1fb5cb326aa6e23017514801f0f1058" title="Unique manager ID.">id</a>, <span class="keyword">sizeof</span>(u_int32_t));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; exit3:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components.">tcmi_man_stop_migration</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; exit2:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga82d6e5a8909db33bd6c2aa607b83866e" title="&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are des...">tcmi_man_stop_ctlfs_dirs</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; exit1:</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; exit0:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga97c9f7b7804700ac95d6a4b43c0173e0_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga97c9f7b7804700ac95d6a4b43c0173e0_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga97c9f7b7804700ac95d6a4b43c0173e0_cgraph" id="d6/de0/group__tcmi__man__class_ga97c9f7b7804700ac95d6a4b43c0173e0_cgraph">
<area shape="rect" id="node2" href="../../d6/de0/group__tcmi__man__class.html#ga1c0d48950792f18b6b7ea53c8b793c65" title="&lt;&lt;private&gt;&gt; Creates the directories as described in here ." alt="" coords="157,226,320,253"/><area shape="rect" id="node12" href="../../d6/de0/group__tcmi__man__class.html#gadb44b36975559e2bec9b46dfc8c24cf0" title="&lt;&lt;private&gt;&gt; Creates the static files described here ." alt="" coords="171,471,306,512"/><area shape="rect" id="node47" href="../../d6/de0/group__tcmi__man__class.html#ga7efd6ea1ef1cb953d940d7bd7b62e7b1" title="&lt;&lt;private&gt;&gt;." alt="" coords="157,966,320,993"/><area shape="rect" id="node48" href="../../d6/de0/group__tcmi__man__class.html#ga82d6e5a8909db33bd6c2aa607b83866e" title="&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are des..." alt="" coords="609,24,780,50"/><area shape="rect" id="node16" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components." alt="" coords="609,578,780,605"/><area shape="rect" id="node49" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance." alt="" coords="177,1017,301,1044"/><area shape="rect" id="node41" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1725,916,1843,942"/><area shape="rect" id="node3" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="399,142,529,169"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1941,277,2080,304"/><area shape="rect" id="node4" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="627,125,762,152"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="829,125,968,152"/><area shape="rect" id="node10" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga71558bf14c4a13eed4e4b9ca240fd016" title="&lt;&lt;public&gt;&gt; Increments the number of links referencing this entry&#39;s inode." alt="" coords="829,59,968,100"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="2154,142,2307,169"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="1043,58,1199,85"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="1051,109,1192,136"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="1047,160,1195,202"/><area shape="rect" id="node13" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="391,277,537,304"/><area shape="rect" id="node15" href="../../d6/de0/group__tcmi__man__class.html#ga73bfcf08ed3c321b24ae41ae13c606a7" title="&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration f..." alt="" coords="409,529,519,556"/><area shape="rect" id="node43" href="../../d6/de0/group__tcmi__man__class.html#ga98cff5cedf84c16ebac3d3f58c17e470" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method &#45; emigration PPM P What needs to be done:" alt="" coords="1041,478,1201,505"/><area shape="rect" id="node46" href="../../d6/de0/group__tcmi__man__class.html#ga331687b0d8d4c916003d788eb126d566" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method &#45; migration home." alt="" coords="368,428,560,454"/><area shape="rect" id="node33" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1928,496,2093,522"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="608,277,781,304"/><area shape="rect" id="node17" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="1016,567,1227,608"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="833,656,965,682"/><area shape="rect" id="node18" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="1291,632,1427,658"/><area shape="rect" id="node19" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1296,530,1421,557"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1289,480,1428,506"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="1030,657,1213,684"/><area shape="rect" id="node23" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="1275,682,1442,709"/><area shape="rect" id="node25" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="1284,799,1433,840"/><area shape="rect" id="node26" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="1289,734,1428,775"/><area shape="rect" id="node28" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1296,581,1421,608"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1509,614,1622,641"/><area shape="rect" id="node27" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1491,734,1640,775"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1501,554,1629,581"/><area shape="rect" id="node30" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1697,546,1871,573"/><area shape="rect" id="node31" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1727,597,1841,624"/><area shape="rect" id="node32" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1703,430,1865,471"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1689,345,1879,372"/><area shape="rect" id="node39" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1731,496,1837,522"/><area shape="rect" id="node40" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1709,648,1859,674"/><area shape="rect" id="node34" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="2165,546,2297,573"/><area shape="rect" id="node35" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="2141,445,2320,472"/><area shape="rect" id="node37" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="2157,496,2304,522"/><area shape="rect" id="node36" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="2368,438,2533,479"/><area shape="rect" id="node42" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1951,916,2070,942"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="1296,328,1421,354"/><area shape="rect" id="node45" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1303,378,1415,405"/><area shape="rect" id="node50" href="../../da/d0c/group__tcmi__slot__class.html#ga347147be22f868eacdae39a2846c0e3f" title="Initializes a slot." alt="" coords="415,1017,513,1044"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1c0d48950792f18b6b7ea53c8b793c65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_init_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>man_dirname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the directories as described in <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>. </p>
<p>It is necessary to get the current root directory of the TCMI ctlfs first. So that it won't get unlinked under us.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
    <tr><td class="paramname">*root</td><td>- root directory of the filesystem, where all entries are to be created </td></tr>
    <tr><td class="paramname">*man_dirname</td><td>- name for the main directory of the manager (e.g. ccn or pen) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00227">227</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00048">tcmi_ctlfs_dir_new()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00087">TCMI_PERMS_DIR</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating directories&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (!root)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ac55eded2293a21deebb170b8df857372" title="root directory of CCN or PEN where all control files/directories reside">d_man</a> = <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(root, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, man_dirname)))</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad3d495ecb7ec0311b99dbea7a7fded7c" title="directory where all registered nodes (CCN&#39;s or PEN&#39;s) reside">d_nodes</a> = </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ac55eded2293a21deebb170b8df857372" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;nodes&quot;</span>)))</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad28d52e2001a5ed1af76897fdb3a355c" title="TCMI ctlfs - migration directory.">d_mig</a> = </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ac55eded2293a21deebb170b8df857372" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;mig&quot;</span>)))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a21d055e12cef78a26fcae6f9b4b872b0" title="TCMI ctlfs - migproc directory for migrated processes.">d_migproc</a> = </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad28d52e2001a5ed1af76897fdb3a355c" title="TCMI ctlfs - migration directory.">d_mig</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;migproc&quot;</span>)))</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abb5606608faa2b2a90c0a4a031206574" title="Initializes TCMI ctlfs directories.">init_ctlfs_dirs</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#abb5606608faa2b2a90c0a4a031206574" title="Initializes TCMI ctlfs directories.">init_ctlfs_dirs</a>()) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create specific ctlfs directories!&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">goto</span> exit4;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; exit4:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a21d055e12cef78a26fcae6f9b4b872b0" title="TCMI ctlfs - migproc directory for migrated processes.">d_migproc</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; exit3:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad28d52e2001a5ed1af76897fdb3a355c" title="TCMI ctlfs - migration directory.">d_mig</a>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; exit2:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad3d495ecb7ec0311b99dbea7a7fded7c" title="directory where all registered nodes (CCN&#39;s or PEN&#39;s) reside">d_nodes</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; exit1:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ac55eded2293a21deebb170b8df857372" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; exit0:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph" id="d6/de0/group__tcmi__man__class_ga1c0d48950792f18b6b7ea53c8b793c65_cgraph">
<area shape="rect" id="node2" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="217,116,346,143"/><area shape="rect" id="node10" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="395,172,533,199"/><area shape="rect" id="node3" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="397,115,531,141"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="581,56,720,83"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga71558bf14c4a13eed4e4b9ca240fd016" title="&lt;&lt;public&gt;&gt; Increments the number of links referencing this entry&#39;s inode." alt="" coords="581,107,720,149"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="770,173,923,200"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="769,5,925,32"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="776,56,917,83"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="773,107,921,149"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadb44b36975559e2bec9b46dfc8c24cf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_init_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d6/de0/group__tcmi__man__class.html">here </a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00276">276</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00154">tcmi_ctlfs_file_unregister()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00062">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00455">tcmi_man_emig_ppm_p()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00614">tcmi_man_mig_home_ppm_p()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00428">tcmi_man_stop()</a>, and <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00089">TCMI_PERMS_FILE_W</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating files&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#aac62d18ce7b3a3292e953527f6f459fe" title="TCMI ctlfs - stop control file.">f_stop</a> = </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ac55eded2293a21deebb170b8df857372" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga73bfcf08ed3c321b24ae41ae13c606a7" title="&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration f...">tcmi_man_stop</a>,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;stop&quot;</span>)))</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#af8be19c5d8265b638dde497498f00675" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a> = </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad28d52e2001a5ed1af76897fdb3a355c" title="TCMI ctlfs - migration directory.">d_mig</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga98cff5cedf84c16ebac3d3f58c17e470" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method - emigration PPM P What needs to be done:">tcmi_man_emig_ppm_p</a>,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 2, <span class="stringliteral">&quot;emigrate-ppm-p&quot;</span>)))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a324ff1346599443259778a9b21b2bc63" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a> = </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad28d52e2001a5ed1af76897fdb3a355c" title="TCMI ctlfs - migration directory.">d_mig</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga331687b0d8d4c916003d788eb126d566" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method - migration home.">tcmi_man_mig_home_ppm_p</a>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;migrate-home&quot;</span>)))</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a67d168b7feb475064bfc9e6d49aa8bc6" title="Initializes TCMI ctlfs files.">init_ctlfs_files</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a67d168b7feb475064bfc9e6d49aa8bc6" title="Initializes TCMI ctlfs files.">init_ctlfs_files</a>()) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create specific ctlfs files!&quot;</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; exit3:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a324ff1346599443259778a9b21b2bc63" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a324ff1346599443259778a9b21b2bc63" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; exit2:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#af8be19c5d8265b638dde497498f00675" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#af8be19c5d8265b638dde497498f00675" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; exit1:</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#aac62d18ce7b3a3292e953527f6f459fe" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#aac62d18ce7b3a3292e953527f6f459fe" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; exit0:</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph" id="d6/de0/group__tcmi__man__class_gadb44b36975559e2bec9b46dfc8c24cf0_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1807,463,1945,489"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2013,277,2179,304"/><area shape="rect" id="node9" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="213,631,358,657"/><area shape="rect" id="node15" href="../../d6/de0/group__tcmi__man__class.html#ga98cff5cedf84c16ebac3d3f58c17e470" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method &#45; emigration PPM P What needs to be done:" alt="" coords="863,195,1023,221"/><area shape="rect" id="node38" href="../../d6/de0/group__tcmi__man__class.html#ga331687b0d8d4c916003d788eb126d566" title="&lt;&lt;private&gt;&gt; TCMI ctlfs write method &#45; migration home." alt="" coords="189,681,381,708"/><area shape="rect" id="node39" href="../../d6/de0/group__tcmi__man__class.html#ga73bfcf08ed3c321b24ae41ae13c606a7" title="&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration f..." alt="" coords="230,464,341,491"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="2019,604,2173,631"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="2253,277,2385,304"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="2229,328,2408,355"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="2245,227,2392,253"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="2456,321,2621,362"/><area shape="rect" id="node10" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="429,683,603,709"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="651,712,789,739"/><area shape="rect" id="node12" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="865,771,1021,797"/><area shape="rect" id="node13" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="872,821,1013,848"/><area shape="rect" id="node14" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="869,705,1017,746"/><area shape="rect" id="node16" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="1117,93,1243,120"/><area shape="rect" id="node17" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1117,296,1243,323"/><area shape="rect" id="node34" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1350,353,1463,380"/><area shape="rect" id="node35" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1124,43,1236,69"/><area shape="rect" id="node36" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1117,195,1243,221"/><area shape="rect" id="node37" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1111,245,1249,272"/><area shape="rect" id="node18" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1343,303,1471,329"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1558,244,1733,271"/><area shape="rect" id="node20" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1588,361,1703,388"/><area shape="rect" id="node25" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1564,295,1727,337"/><area shape="rect" id="node27" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1550,463,1741,489"/><area shape="rect" id="node28" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1592,412,1699,439"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1571,184,1720,211"/><area shape="rect" id="node32" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1586,603,1705,629"/><area shape="rect" id="node21" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1825,412,1927,439"/><area shape="rect" id="node22" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="2046,429,2146,456"/><area shape="rect" id="node23" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="2013,480,2179,507"/><area shape="rect" id="node24" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="2011,379,2181,405"/><area shape="rect" id="node26" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="1790,336,1962,363"/><area shape="rect" id="node30" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1823,133,1929,160"/><area shape="rect" id="node31" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1816,184,1936,211"/><area shape="rect" id="node33" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1817,603,1935,629"/><area shape="rect" id="node40" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components." alt="" coords="431,397,601,424"/><area shape="rect" id="node41" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="837,307,1048,349"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="654,397,786,424"/><area shape="rect" id="node42" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="1112,347,1248,373"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="851,397,1034,424"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="1097,397,1263,424"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="1105,514,1255,555"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="1111,449,1249,490"/><area shape="rect" id="node48" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1332,405,1481,446"/><area shape="rect" id="node49" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="1313,471,1501,497"/><area shape="rect" id="node50" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="1339,521,1474,548"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7efd6ea1ef1cb953d940d7bd7b62e7b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_init_migration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt;. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00364">364</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Initializing migration components&quot;</span>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga331687b0d8d4c916003d788eb126d566"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_mig_home_ppm_p </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; TCMI ctlfs write method - migration home. </p>
<p>Migration home requires delegating work to the instance specific method once we extract the requested PID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to a particular TCMI manager singleton instance </td></tr>
    <tr><td class="paramname">*data</td><td>- contains PID that is to be migrated home </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00614">614</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d23/tcmi__signal__msg_8h_source.html#l00069">pid</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00151">TCMI_MAN</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    pid_t <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a> = *((<span class="keywordtype">int</span> *)<a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man" title="A compound structure that holds all current listenings and migration managers.">tcmi_man</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(obj);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Migration home request for PID %d&quot;</span>, pid);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;ops-&gt;migrate_home_ppm_p)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        err = <span class="keyword">self</span>-&gt;ops-&gt;migrate_home_ppm_p(pid);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaba05288b4c6ef833034fdcebc3f71671"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_man_migproc_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Accessor for migproc directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>migproc directory </dd></dl>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00223">223</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;d_migproc;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga76ff5984fc261d709fd37cf6ae76c282"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_man_nodes_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nodesdirectory </dd></dl>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00212">212</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;d_nodes;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gab5cc7906c63f9356975b8d0a04546027"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_release_migmanslot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved. </p>
<p>It is needed when new migration manager fails and won't inserted into the slot. The user that returns the slot back to the vector.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
    <tr><td class="paramname">*slot</td><td>thatis to be release back to the vector </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00187">187</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>References <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00306">tcmi_slot_move_unused()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots.">tcmi_slot_move_unused</a>(slot); </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_gab5cc7906c63f9356975b8d0a04546027_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_gab5cc7906c63f9356975b8d0a04546027_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_gab5cc7906c63f9356975b8d0a04546027_cgraph" id="d6/de0/group__tcmi__man__class_gab5cc7906c63f9356975b8d0a04546027_cgraph">
<area shape="rect" id="node2" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="257,5,418,32"/><area shape="rect" id="node3" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="467,5,579,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3c53520e91c6208d6f36505dcc70b3aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a>* tcmi_man_reserve_migmanslot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an empty slot(if available) or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00172">172</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00168">tcmi_slotvec_reserve_empty()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it.">tcmi_slotvec_reserve_empty</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga3c53520e91c6208d6f36505dcc70b3aa_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga3c53520e91c6208d6f36505dcc70b3aa_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga3c53520e91c6208d6f36505dcc70b3aa_cgraph" id="d6/de0/group__tcmi__man__class_ga3c53520e91c6208d6f36505dcc70b3aa_cgraph">
<area shape="rect" id="node2" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="257,23,399,65"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="455,5,580,32"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="448,56,587,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7b77b2f99bdb6e862e3fee0e65d6041e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_man_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>main manager directory </dd></dl>

<p>Definition at line <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00200">200</a> of file <a class="el" href="../../df/db0/tcmi__man_8h_source.html">tcmi_man.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00133">tcmi_ccnman_init_ctlfs_dirs()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00103">tcmi_penman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;d_man;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaff233e88cb97d1c5bf33f91c697529ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_man_send_generic_user_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target_slot_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Send generic user message </p>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00173">173</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00096">tcmi_migman::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00155">tcmi_man_do_send_generic_user_message()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00201">tcmi_migman_get()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00120">tcmi_slot_find_first</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, and <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d0f/tcmi__module_8c_source.html#l00097">tcmi_send_generic_user_message_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                                                                                                          {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = NULL;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">/* lookup the migration manager first */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>, target_slot_index))) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Invalid migration manager identifier %d&quot;</span>, target_slot_index);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        err = -ENOENT;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">/* there is always only one mig man per slot */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4035f12ea6373f91f7624ce2b209437d" title="&lt;&lt;public&gt;&gt; Returns the first object in the slot.">tcmi_slot_find_first</a>(migman, slot, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">/* Slot might exist, but it might still be empty*/</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.">tcmi_migman_get</a>(migman)) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;No migration manager in the slot(%d)&quot;</span>, <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        err = -ENOENT;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    err = <a class="code" href="../../dd/dbd/tcmi__man_8c.html#acb4a0be6edee0125b25b5c790ac563e5">tcmi_man_do_send_generic_user_message</a>(<span class="keyword">self</span>, target_slot_index, user_data_size, user_data, migman);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">/* release the migration manager */</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(migman);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; exit0:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_gaff233e88cb97d1c5bf33f91c697529ed_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_gaff233e88cb97d1c5bf33f91c697529ed_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_gaff233e88cb97d1c5bf33f91c697529ed_cgraph" id="d6/de0/group__tcmi__man__class_gaff233e88cb97d1c5bf33f91c697529ed_cgraph">
<area shape="rect" id="node2" href="../../dd/dbd/tcmi__man_8c.html#acb4a0be6edee0125b25b5c790ac563e5" title="tcmi_man_do_send_generic\l_user_message" alt="" coords="216,529,400,570"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="245,819,371,845"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="245,768,371,795"/><area shape="rect" id="node50" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="251,869,365,896"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1389,616,1501,643"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1599,152,1724,179"/><area shape="rect" id="node18" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1592,515,1731,541"/><area shape="rect" id="node3" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga2e21db4afa16f7805800919224711c94" title="&lt;&lt;public&gt;&gt; Message tx constructor." alt="" coords="463,437,623,478"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="475,536,610,563"/><area shape="rect" id="node23" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="719,612,823,639"/><area shape="rect" id="node24" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="449,253,637,280"/><area shape="rect" id="node4" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="710,439,831,465"/><area shape="rect" id="node5" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="935,413,1084,440"/><area shape="rect" id="node6" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="935,464,1083,491"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1594,363,1729,389"/><area shape="rect" id="node7" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1163,515,1325,541"/><area shape="rect" id="node8" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1163,413,1325,440"/><area shape="rect" id="node9" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1167,464,1321,491"/><area shape="rect" id="node19" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1169,565,1319,592"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1374,464,1517,491"/><area shape="rect" id="node13" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1600,464,1723,491"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1823,464,1961,491"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1839,565,1945,592"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1832,515,1952,541"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2050,540,2169,567"/><area shape="rect" id="node22" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="685,536,856,563"/><area shape="rect" id="node25" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="713,149,828,176"/><area shape="rect" id="node26" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="953,44,1066,71"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="904,99,1115,125"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="934,149,1085,176"/><area shape="rect" id="node30" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="934,200,1085,227"/><area shape="rect" id="node27" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1173,43,1315,69"/><area shape="rect" id="node31" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1169,93,1319,120"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="1173,144,1315,171"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="1173,195,1315,237"/><area shape="rect" id="node34" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1163,261,1325,288"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1381,768,1509,795"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1574,667,1749,693"/><area shape="rect" id="node39" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1604,717,1719,744"/><area shape="rect" id="node42" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1580,870,1743,911"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1566,819,1757,845"/><area shape="rect" id="node47" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1608,768,1715,795"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1587,565,1736,592"/><area shape="rect" id="node49" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1833,616,1951,643"/><area shape="rect" id="node40" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1841,717,1943,744"/><area shape="rect" id="node41" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="2059,717,2159,744"/><area shape="rect" id="node43" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="1806,869,1978,896"/><area shape="rect" id="node45" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1823,819,1961,845"/><area shape="rect" id="node44" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2027,869,2192,896"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5255cad7e65c708e972344bab305e19a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_man_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Shuts down TCMI manager </p>
<p>&lt;&lt;public&gt;&gt; Shuts down TCMI manager</p>
<ul>
<li>unregister all ctlfs files as we don't want anymore requests from users.</li>
</ul>
<ul>
<li>shutdown the migration framework. This requires terminating all migration managers(results in termination or migration back of all processes)</li>
<li>unregister all ctlfs directories</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance to be shutdown </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00142">142</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00324">tcmi_man_stop_ctlfs_dirs()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00341">tcmi_man_stop_ctlfs_files()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00113">tcmi_man_wait_for_migmans_termination()</a>, and <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00107">tcmi_ccnman_shutdown()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00083">tcmi_penman_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> ( atomic_cmpxchg(&amp;self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a86b604de1161f6f93fd27ec654c4f329" title="indicates the manager is ready - used for proper shutdown">ready</a>, 1, 0) == 1 ) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga3d6f9c21e828c84de78f430ed236c8b7" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files.">tcmi_man_stop_ctlfs_files</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga82d6e5a8909db33bd6c2aa607b83866e" title="&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are des...">tcmi_man_stop_ctlfs_dirs</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">/* Request async mig mans shutdown */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components.">tcmi_man_stop_migration</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">/* Wait for migmans to terminate */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../dd/dbd/tcmi__man_8c.html#aed4665e9fa11405215f01c52355a5535" title="Waits for all migration managers to terminate.">tcmi_man_wait_for_migmans_termination</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ae7d9ed143e1b48232230c1e00daf30ea" title="slot container for migration managers, 1 manager per slot">mig_mans</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga5255cad7e65c708e972344bab305e19a_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga5255cad7e65c708e972344bab305e19a_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga5255cad7e65c708e972344bab305e19a_cgraph" id="d6/de0/group__tcmi__man__class_ga5255cad7e65c708e972344bab305e19a_cgraph">
<area shape="rect" id="node2" href="../../d6/de0/group__tcmi__man__class.html#ga82d6e5a8909db33bd6c2aa607b83866e" title="&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are des..." alt="" coords="413,511,584,537"/><area shape="rect" id="node5" href="../../d6/de0/group__tcmi__man__class.html#ga3d6f9c21e828c84de78f430ed236c8b7" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1369,779,1511,821"/><area shape="rect" id="node11" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components." alt="" coords="195,351,365,377"/><area shape="rect" id="node49" href="../../dd/dbd/tcmi__man_8c.html#aed4665e9fa11405215f01c52355a5535" title="Waits for all migration managers to terminate." alt="" coords="1345,49,1535,90"/><area shape="rect" id="node47" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1381,947,1499,973"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1620,712,1759,739"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1855,707,2009,733"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1607,804,1772,831"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1866,808,1998,835"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1843,859,2021,885"/><area shape="rect" id="node10" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1859,757,2005,784"/><area shape="rect" id="node9" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="2069,851,2235,893"/><area shape="rect" id="node12" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="632,186,843,227"/><area shape="rect" id="node16" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="433,351,565,377"/><area shape="rect" id="node13" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="907,223,1043,249"/><area shape="rect" id="node14" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1627,107,1752,133"/><area shape="rect" id="node15" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1620,56,1759,83"/><area shape="rect" id="node17" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="646,351,829,377"/><area shape="rect" id="node18" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="891,409,1058,436"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="900,343,1049,385"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="905,278,1044,319"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="912,460,1037,487"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1145,437,1258,464"/><area shape="rect" id="node22" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1127,218,1276,259"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="1107,336,1295,363"/><area shape="rect" id="node33" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="1134,387,1269,413"/><area shape="rect" id="node35" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1149,285,1253,312"/><area shape="rect" id="node23" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="1379,220,1501,247"/><area shape="rect" id="node24" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1615,157,1764,184"/><area shape="rect" id="node25" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1615,259,1763,285"/><area shape="rect" id="node26" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1865,259,1999,285"/><area shape="rect" id="node28" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="1383,409,1497,436"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1633,411,1746,437"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1584,461,1795,488"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1614,512,1765,539"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1614,563,1765,589"/><area shape="rect" id="node34" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1355,460,1525,487"/><area shape="rect" id="node36" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1369,285,1511,312"/><area shape="rect" id="node37" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1628,360,1751,387"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1137,681,1265,708"/><area shape="rect" id="node40" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1353,663,1527,689"/><area shape="rect" id="node41" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1383,896,1497,923"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1359,714,1521,755"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1345,561,1535,588"/><area shape="rect" id="node45" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1387,845,1493,872"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1365,612,1515,639"/><area shape="rect" id="node42" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1638,876,1741,903"/><area shape="rect" id="node48" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1630,947,1749,973"/><area shape="rect" id="node50" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="1621,5,1758,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga73bfcf08ed3c321b24ae41ae13c606a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_stop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; If the user called this method with parameter &gt; 0, the TCMI manager stops the migration framework. </p>
<p>This results in migrating all processes back to CCN and terminating all migration managers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to a particular TCMI manager singleton instance </td></tr>
    <tr><td class="paramname">*data</td><td>- if the value that it points to is &gt;0, the action is taken </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always 0 (success)</dd></dl>
<p>NOTE: What is a purpose of this method? There is no inverse operation to stop, so is that essentially different from shutdown? ms </p>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00428">428</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/db0/tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, and <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00276">tcmi_man_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{  </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">int</span> stop = *((<span class="keywordtype">int</span> *)<a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man" title="A compound structure that holds all current listenings and migration managers.">tcmi_man</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(obj);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;TCMI manager stop request, action = %d&quot;</span>, stop);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (stop) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">/* TODO: Stop operations are called just here, but shouldn&#39;t we call them as well on shutdown? */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;ops-&gt;stop) </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keyword">self</span>-&gt;ops-&gt;stop();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components.">tcmi_man_stop_migration</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph" id="d6/de0/group__tcmi__man__class_ga73bfcf08ed3c321b24ae41ae13c606a7_cgraph">
<area shape="rect" id="node2" href="../../d6/de0/group__tcmi__man__class.html#gaf83a1652b974eb8341a8af259054077a" title="&lt;&lt;private&gt;&gt; Stops all migration components." alt="" coords="165,233,336,260"/><area shape="rect" id="node3" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="565,121,776,162"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="385,259,517,285"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="840,163,976,189"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="2191,81,2316,108"/><area shape="rect" id="node6" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="2184,12,2323,39"/><area shape="rect" id="node8" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="579,263,762,289"/><area shape="rect" id="node9" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="825,477,991,504"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="833,223,983,265"/><area shape="rect" id="node12" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="839,289,977,330"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1300,575,1425,601"/><area shape="rect" id="node10" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1078,477,1191,504"/><area shape="rect" id="node13" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1060,259,1209,301"/><area shape="rect" id="node26" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="1041,376,1229,403"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="1067,325,1202,352"/><area shape="rect" id="node36" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1311,115,1415,141"/><area shape="rect" id="node14" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="1302,271,1423,297"/><area shape="rect" id="node15" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1527,296,1676,323"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1527,245,1675,272"/><area shape="rect" id="node21" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="2186,347,2321,373"/><area shape="rect" id="node17" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1755,245,1917,272"/><area shape="rect" id="node18" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1755,296,1917,323"/><area shape="rect" id="node19" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1759,195,1913,221"/><area shape="rect" id="node25" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1761,144,1911,171"/><area shape="rect" id="node20" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1966,157,2109,184"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2192,296,2315,323"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="2431,385,2537,412"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="2424,309,2544,336"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="1305,473,1420,500"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1545,575,1658,601"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1496,423,1707,449"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1526,473,1677,500"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1526,524,1677,551"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1765,575,1907,601"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1761,524,1911,551"/><area shape="rect" id="node35" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1277,325,1448,352"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1973,625,2101,652"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="2166,651,2341,677"/><area shape="rect" id="node40" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="2196,701,2311,728"/><area shape="rect" id="node42" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="2172,483,2335,525"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="2158,549,2349,576"/><area shape="rect" id="node47" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="2200,600,2307,627"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="2179,397,2328,424"/><area shape="rect" id="node49" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="2194,752,2313,779"/><area shape="rect" id="node41" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="2433,676,2535,703"/><area shape="rect" id="node43" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="2398,499,2570,525"/><area shape="rect" id="node45" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="2415,549,2553,576"/><area shape="rect" id="node44" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2619,499,2784,525"/><area shape="rect" id="node50" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2425,752,2543,779"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga82d6e5a8909db33bd6c2aa607b83866e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_stop_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Destroys all ctlfs directories, first the singleton instance specific directories are destroyed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00324">324</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>, and <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI manager ctlfs directories&quot;</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a86caa30cbe27f33afa47b66f3ee7aa94" title="Destroys all TCMI ctlfs directories.">stop_ctlfs_dirs</a>) </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop_ctlfs_dirs();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a21d055e12cef78a26fcae6f9b4b872b0" title="TCMI ctlfs - migproc directory for migrated processes.">d_migproc</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad28d52e2001a5ed1af76897fdb3a355c" title="TCMI ctlfs - migration directory.">d_mig</a>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad3d495ecb7ec0311b99dbea7a7fded7c" title="directory where all registered nodes (CCN&#39;s or PEN&#39;s) reside">d_nodes</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ac55eded2293a21deebb170b8df857372" title="root directory of CCN or PEN where all control files/directories reside">d_man</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph" id="d6/de0/group__tcmi__man__class_ga82d6e5a8909db33bd6c2aa607b83866e_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="224,5,363,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="411,5,565,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3d6f9c21e828c84de78f430ed236c8b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_stop_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Unregisters and releases all control files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00341">341</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00154">tcmi_ctlfs_file_unregister()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI manager ctlfs files&quot;</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ad881d8fe17cf2f67e6b597e4cd603915" title="Operations specific to a CCN/PEN manager resp.">ops</a>-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a06464097bed8cd4f9b216d749d77fd6b" title="Destroys all TCMI ctlfs files.">stop_ctlfs_files</a>) </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop_ctlfs_files();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#aac62d18ce7b3a3292e953527f6f459fe" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#aac62d18ce7b3a3292e953527f6f459fe" title="TCMI ctlfs - stop control file.">f_stop</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#af8be19c5d8265b638dde497498f00675" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#af8be19c5d8265b638dde497498f00675" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_emig_ppm_p</a>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a324ff1346599443259778a9b21b2bc63" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/de0/group__tcmi__man__class.html#a324ff1346599443259778a9b21b2bc63" title="TCMI ctlfs - migration control file (PPM physical ckpt.)">f_mig_home_ppm_p</a>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph" id="d6/de0/group__tcmi__man__class_ga3d6f9c21e828c84de78f430ed236c8b7_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="211,19,349,45"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="197,95,363,121"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="423,5,577,32"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="434,56,566,83"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="411,107,589,133"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="427,157,573,184"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="637,99,803,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf83a1652b974eb8341a8af259054077a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_man_stop_migration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#da/d15/structtcmi__man">tcmi_man</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Stops all migration components. </p>
<p>Terminates all migration managers, they are responsible for migrating all processes to the home node or a another execution node.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- a particular manager singleton instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00404">404</a> of file <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html">tcmi_man.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00372">tcmi_man_get_non_shutdowning_migman()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00258">tcmi_migman_stop()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>, and <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00428">tcmi_man_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state...">tcmi_man_get_non_shutdowning_migman</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">while</span> (migman) {      </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Requesting migration manager shutdown.&quot;</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer.">tcmi_migman_stop</a>(migman);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        migman = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state...">tcmi_man_get_non_shutdowning_migman</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/de0/group__tcmi__man__class_gaf83a1652b974eb8341a8af259054077a_cgraph.png" border="0" usemap="#d6/de0/group__tcmi__man__class_gaf83a1652b974eb8341a8af259054077a_cgraph" alt=""/></div>
<map name="d6/de0/group__tcmi__man__class_gaf83a1652b974eb8341a8af259054077a_cgraph" id="d6/de0/group__tcmi__man__class_gaf83a1652b974eb8341a8af259054077a_cgraph">
<area shape="rect" id="node2" href="../../d6/de0/group__tcmi__man__class.html#gadf4927acd8902d0de2729c2077792d60" title="Finds and returns arbitrary migration manager that is either in INIT or CONNECTED state..." alt="" coords="405,59,616,101"/><area shape="rect" id="node6" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="225,293,357,320"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="680,160,816,187"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="2031,132,2156,159"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="2024,5,2163,32"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="419,297,602,324"/><area shape="rect" id="node8" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="665,507,831,533"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="673,258,823,299"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="679,323,817,365"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1140,596,1265,623"/><area shape="rect" id="node9" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="918,507,1031,533"/><area shape="rect" id="node12" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="900,289,1049,330"/><area shape="rect" id="node25" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="881,405,1069,432"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="907,355,1042,381"/><area shape="rect" id="node36" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1151,137,1255,164"/><area shape="rect" id="node13" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="1142,300,1263,327"/><area shape="rect" id="node14" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1367,309,1516,336"/><area shape="rect" id="node15" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1367,259,1515,285"/><area shape="rect" id="node20" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="2026,360,2161,387"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1595,259,1757,285"/><area shape="rect" id="node17" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1595,309,1757,336"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1599,208,1753,235"/><area shape="rect" id="node24" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1601,157,1751,184"/><area shape="rect" id="node19" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1806,171,1949,197"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2032,309,2155,336"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="2271,376,2377,403"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="2264,317,2384,344"/><area shape="rect" id="node26" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="1145,495,1260,521"/><area shape="rect" id="node27" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1385,596,1498,623"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1336,444,1547,471"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1366,495,1517,521"/><area shape="rect" id="node31" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1366,545,1517,572"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1605,596,1747,623"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1601,545,1751,572"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="1605,495,1747,521"/><area shape="rect" id="node35" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1117,355,1288,381"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1813,629,1941,656"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="2006,645,2181,672"/><area shape="rect" id="node40" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="2036,696,2151,723"/><area shape="rect" id="node42" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="2012,478,2175,519"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1998,544,2189,571"/><area shape="rect" id="node47" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="2040,595,2147,621"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="2019,411,2168,437"/><area shape="rect" id="node49" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="2034,747,2153,773"/><area shape="rect" id="node41" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="2273,671,2375,697"/><area shape="rect" id="node43" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="2238,493,2410,520"/><area shape="rect" id="node45" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="2255,544,2393,571"/><area shape="rect" id="node44" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2459,493,2624,520"/><area shape="rect" id="node50" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2265,747,2383,773"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Apr 7 2013 23:20:19 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
