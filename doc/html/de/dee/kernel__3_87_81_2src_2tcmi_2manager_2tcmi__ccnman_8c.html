<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: C:/CLONDIKE/clondike/sources/kernel_3.7.1/src/tcmi/manager/tcmi_ccnman.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_ccnman.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/spinlock_types.h&gt;</code><br/>
<code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;tcmi/migration/tcmi_migcom.h&gt;</code><br/>
<code>#include &lt;tcmi/ctlfs/tcmi_ctlfs.h&gt;</code><br/>
<code>#include &lt;tcmi/lib/tcmi_sock.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="../../d8/de1/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8h_source.html">tcmi_ccnmigman.h</a>&quot;</code><br/>
<code>#include &lt;kkc/kkc.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d9f/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8h_source.html">tcmi_ccnman.h</a>&quot;</code><br/>
<code>#include &lt;dbg.h&gt;</code><br/>
<code>#include &lt;director/director.h&gt;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for tcmi_ccnman.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dbc/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c__incl.png" border="0" usemap="#C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c" alt=""/></div>
<map name="C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c" id="C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c">
<area shape="rect" id="node7" href="../../d8/de1/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8h.html" title="tcmi_ccnmigman.h" alt="" coords="771,133,903,160"/><area shape="rect" id="node20" href="../../d5/d9f/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8h.html" title="tcmi_ccnman.h" alt="" coords="1263,133,1373,160"/><area shape="rect" id="node9" href="../../de/de5/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__migman_8h.html" title="tcmi_migman.h" alt="" coords="893,224,1003,251"/><area shape="rect" id="node22" href="../../dd/d8f/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__man_8h.html" title="tcmi_man.h" alt="" coords="1431,224,1521,251"/></map>
</div>
</div>
<p><a href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a322c58841a989b7a0c44837e7f8ba290"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#a322c58841a989b7a0c44837e7f8ba290">TCMI_CCNMAN_PRIVATE</a></td></tr>
<tr class="separator:a322c58841a989b7a0c44837e7f8ba290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934efb858409568e51362a2a7e5fe53c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#a934efb858409568e51362a2a7e5fe53c">MAX_LISTENINGS</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a934efb858409568e51362a2a7e5fe53c"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of listenings  <a href="#a934efb858409568e51362a2a7e5fe53c">More...</a><br/></td></tr>
<tr class="separator:a934efb858409568e51362a2a7e5fe53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af66ed5b4eaaed8835d44373102723f6a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#af66ed5b4eaaed8835d44373102723f6a">tcmi_ccnman_init</a> (struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root)</td></tr>
<tr class="memdesc:af66ed5b4eaaed8835d44373102723f6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Singleton instance initializer.  <a href="#af66ed5b4eaaed8835d44373102723f6a">More...</a><br/></td></tr>
<tr class="separator:af66ed5b4eaaed8835d44373102723f6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c8b782c2f77fb6dea92c9cc5a9810f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#a56c8b782c2f77fb6dea92c9cc5a9810f">tcmi_ccnman_shutdown</a> (void)</td></tr>
<tr class="memdesc:a56c8b782c2f77fb6dea92c9cc5a9810f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:  <a href="#a56c8b782c2f77fb6dea92c9cc5a9810f">More...</a><br/></td></tr>
<tr class="separator:a56c8b782c2f77fb6dea92c9cc5a9810f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdb3de218242f196cc95029bf953eef6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#gabdb3de218242f196cc95029bf953eef6">tcmi_ccnman_init_ctlfs_dirs</a> (void)</td></tr>
<tr class="memdesc:gabdb3de218242f196cc95029bf953eef6"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the additional directories as described in <a class="el" href="../../df/db6/group__tcmi__ccnman__class.html">here </a>.  <a href="#gabdb3de218242f196cc95029bf953eef6">More...</a><br/></td></tr>
<tr class="separator:gabdb3de218242f196cc95029bf953eef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ffc6db24701b66716c03927062b20e0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga3ffc6db24701b66716c03927062b20e0">tcmi_ccnman_init_ctlfs_files</a> (void)</td></tr>
<tr class="memdesc:ga3ffc6db24701b66716c03927062b20e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../df/db6/group__tcmi__ccnman__class.html">here </a>.  <a href="#ga3ffc6db24701b66716c03927062b20e0">More...</a><br/></td></tr>
<tr class="separator:ga3ffc6db24701b66716c03927062b20e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a33a23f51ffa3c322e785c5f5d3dece"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga5a33a23f51ffa3c322e785c5f5d3dece">tcmi_ccnman_add_sleeper</a> (struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *sleeper)</td></tr>
<tr class="memdesc:ga5a33a23f51ffa3c322e785c5f5d3dece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a sleeper that represents a wait queue element for a newly created socket into the internal sleepers list.  <a href="#ga5a33a23f51ffa3c322e785c5f5d3dece">More...</a><br/></td></tr>
<tr class="separator:ga5a33a23f51ffa3c322e785c5f5d3dece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9389c2be9797d585c46f8ac40373ab2c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c">tcmi_ccnman_remove_sleepers</a> (struct <a class="el" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock">tcmi_sock</a> *sock)</td></tr>
<tr class="memdesc:ga9389c2be9797d585c46f8ac40373ab2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches the list of socket sleepers and removes all sleepers that match the socket.  <a href="#ga9389c2be9797d585c46f8ac40373ab2c">More...</a><br/></td></tr>
<tr class="separator:ga9389c2be9797d585c46f8ac40373ab2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f0f5a98bd6386027a98678c3e1e07e4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9f0f5a98bd6386027a98678c3e1e07e4">tcmi_ccnman_stop_ctlfs_dirs</a> (void)</td></tr>
<tr class="memdesc:ga9f0f5a98bd6386027a98678c3e1e07e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Releases all directories - called back by generic TCMI manager  <a href="#ga9f0f5a98bd6386027a98678c3e1e07e4">More...</a><br/></td></tr>
<tr class="separator:ga9f0f5a98bd6386027a98678c3e1e07e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ea0760a59837e4ca72b1df585e1a446"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga3ea0760a59837e4ca72b1df585e1a446">tcmi_ccnman_stop_ctlfs_files</a> (void)</td></tr>
<tr class="memdesc:ga3ea0760a59837e4ca72b1df585e1a446"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Unregisters and releases all control files.  <a href="#ga3ea0760a59837e4ca72b1df585e1a446">More...</a><br/></td></tr>
<tr class="separator:ga3ea0760a59837e4ca72b1df585e1a446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cfac83316f5b8936fb37661a4e2f873"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga4cfac83316f5b8936fb37661a4e2f873">tcmi_ccnman_listen</a> (void *obj, void *str)</td></tr>
<tr class="memdesc:ga4cfac83316f5b8936fb37661a4e2f873"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Instantiates a new listening.  <a href="#ga4cfac83316f5b8936fb37661a4e2f873">More...</a><br/></td></tr>
<tr class="separator:ga4cfac83316f5b8936fb37661a4e2f873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23b30f7a09d98e541c636cbdbf2882c7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7">tcmi_ccnman_stop_listen_all</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga23b30f7a09d98e541c636cbdbf2882c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit.  <a href="#ga23b30f7a09d98e541c636cbdbf2882c7">More...</a><br/></td></tr>
<tr class="separator:ga23b30f7a09d98e541c636cbdbf2882c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13a666c0a6b07aa7378a1fccc82eac12"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga13a666c0a6b07aa7378a1fccc82eac12">tcmi_ccnman_stop_listen_one</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga13a666c0a6b07aa7378a1fccc82eac12"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Destroys a particular listening specified by the user.  <a href="#ga13a666c0a6b07aa7378a1fccc82eac12">More...</a><br/></td></tr>
<tr class="separator:ga13a666c0a6b07aa7378a1fccc82eac12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f647c17f57c73e230057b2941d992b5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1f647c17f57c73e230057b2941d992b5">tcmi_man_set_mount</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga1f647c17f57c73e230057b2941d992b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Write method to set fs mount type  <a href="#ga1f647c17f57c73e230057b2941d992b5">More...</a><br/></td></tr>
<tr class="separator:ga1f647c17f57c73e230057b2941d992b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1befdc4f74188027f5cd9db60af97c3e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1befdc4f74188027f5cd9db60af97c3e">tcmi_man_set_mount_device</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga1befdc4f74188027f5cd9db60af97c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Write method to set fs mount device  <a href="#ga1befdc4f74188027f5cd9db60af97c3e">More...</a><br/></td></tr>
<tr class="separator:ga1befdc4f74188027f5cd9db60af97c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga682f2d08a23f1b68a6c328a5d3cc6710"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga682f2d08a23f1b68a6c328a5d3cc6710">tcmi_man_set_mount_options</a> (void *obj, void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga682f2d08a23f1b68a6c328a5d3cc6710"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Write method to set fs mount options  <a href="#ga682f2d08a23f1b68a6c328a5d3cc6710">More...</a><br/></td></tr>
<tr class="separator:ga682f2d08a23f1b68a6c328a5d3cc6710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga918fddae425e9314af87a5f60c676398"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga918fddae425e9314af87a5f60c676398">tcmi_ccnman_stop</a> (void)</td></tr>
<tr class="memdesc:ga918fddae425e9314af87a5f60c676398"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; This method is called back by the generic TCMI manager.  <a href="#ga918fddae425e9314af87a5f60c676398">More...</a><br/></td></tr>
<tr class="separator:ga918fddae425e9314af87a5f60c676398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2fe277cb812ec620469249183a39758"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#gae2fe277cb812ec620469249183a39758">tcmi_ccnman_start_thread</a> (void)</td></tr>
<tr class="memdesc:gae2fe277cb812ec620469249183a39758"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Starts the listening thread.  <a href="#gae2fe277cb812ec620469249183a39758">More...</a><br/></td></tr>
<tr class="separator:gae2fe277cb812ec620469249183a39758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga448e27417c0ec683569f8c2e3ad4698b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga448e27417c0ec683569f8c2e3ad4698b">tcmi_ccnman_stop_thread</a> (void)</td></tr>
<tr class="memdesc:ga448e27417c0ec683569f8c2e3ad4698b"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; The TCMI CCN manager listening thread is terminated.  <a href="#ga448e27417c0ec683569f8c2e3ad4698b">More...</a><br/></td></tr>
<tr class="separator:ga448e27417c0ec683569f8c2e3ad4698b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53db4c399f6edd48565f08efe9fff294"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga53db4c399f6edd48565f08efe9fff294">tcmi_ccnman_thread</a> (void *<a class="el" href="../../df/d60/kernel__3_87_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga53db4c399f6edd48565f08efe9fff294"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; This is the actual listening thread.  <a href="#ga53db4c399f6edd48565f08efe9fff294">More...</a><br/></td></tr>
<tr class="separator:ga53db4c399f6edd48565f08efe9fff294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1269db611e110ae54137ce36ccb0ff96"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1269db611e110ae54137ce36ccb0ff96">tcmi_ccnman_process_sock</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock)</td></tr>
<tr class="memdesc:ga1269db611e110ae54137ce36ccb0ff96"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Processes a selected socket and checks for incoming connection.  <a href="#ga1269db611e110ae54137ce36ccb0ff96">More...</a><br/></td></tr>
<tr class="separator:ga1269db611e110ae54137ce36ccb0ff96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4e095285ea1264339af05e5ee96eba3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d45/kernel__3_87_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#d8/dce/structfs__mount__params">fs_mount_params</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db6/group__tcmi__ccnman__class.html#gab4e095285ea1264339af05e5ee96eba3">tcmi_ccnman_get_mount_params</a> (void)</td></tr>
<tr class="memdesc:gab4e095285ea1264339af05e5ee96eba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Getter of mount params structure.  <a href="../../df/db6/group__tcmi__ccnman__class.html#gab4e095285ea1264339af05e5ee96eba3">More...</a><br/></td></tr>
<tr class="separator:gab4e095285ea1264339af05e5ee96eba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaba5f0496e81f8e010718b194aa284f59"><td class="memItemLeft" align="right" valign="top">static struct tcmi_ccnman&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db6/group__tcmi__ccnman__class.html#gaba5f0496e81f8e010718b194aa284f59">self</a></td></tr>
<tr class="memdesc:gaba5f0496e81f8e010718b194aa284f59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance pre-initialization.  <a href="../../df/db6/group__tcmi__ccnman__class.html#gaba5f0496e81f8e010718b194aa284f59">More...</a><br/></td></tr>
<tr class="separator:gaba5f0496e81f8e010718b194aa284f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga773d73e380b1f4c5b6ea29fb5954cff6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/de0/group__tcmi__man__class.html#d7/d19/structtcmi__man__ops">tcmi_man_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db6/group__tcmi__ccnman__class.html#ga773d73e380b1f4c5b6ea29fb5954cff6">ccnman_ops</a></td></tr>
<tr class="memdesc:ga773d73e380b1f4c5b6ea29fb5954cff6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migration manager operations that support polymorphism.  <a href="../../df/db6/group__tcmi__ccnman__class.html#ga773d73e380b1f4c5b6ea29fb5954cff6">More...</a><br/></td></tr>
<tr class="separator:ga773d73e380b1f4c5b6ea29fb5954cff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a934efb858409568e51362a2a7e5fe53c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_LISTENINGS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>maximum number of listenings </p>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00052">52</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00065">tcmi_ccnman_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a322c58841a989b7a0c44837e7f8ba290"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_CCNMAN_PRIVATE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00043">43</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5a33a23f51ffa3c322e785c5f5d3dece"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_add_sleeper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *&#160;</td>
          <td class="paramname"><em>sleeper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a sleeper that represents a wait queue element for a newly created socket into the internal sleepers list. </p>
<p>The sleeper needs to be removed from the list prior to releasing the socket reference.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sleeper</td><td>- element to be added to the sleepers list </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00216">216</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../da/d7c/kernel__2_86_833_81_2src_2kkc_2kkc__sock__sleeper_8h_source.html#l00056">kkc_sock_sleeper::list</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00302">tcmi_ccnman_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    spin_lock(&amp;<span class="keyword">self</span>.sleepers_lock);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    list_add(&amp;sleeper-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#af502344553d4363b13272c141f090631" title="linking element for public use.">list</a>, &amp;<span class="keyword">self</span>.sleepers);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    spin_unlock(&amp;<span class="keyword">self</span>.sleepers_lock);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af66ed5b4eaaed8835d44373102723f6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_ccnman_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Singleton instance initializer. </p>
<p>The initialization is accomplished exactly in this order:</p>
<ul>
<li>allocate new slot vector for listenings</li>
<li>start listening thread</li>
<li>delegate rest of initialization to TCMI generic manager</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*root</td><td>- root directory of the filesystem, where all entries are to be created </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00065">65</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00687">ccnman_ops</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00052">MAX_LISTENINGS</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00496">tcmi_ccnman_start_thread()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00520">tcmi_ccnman_stop_thread()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../d1/df8/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00069">tcmi_man_init()</a>, <a class="el" href="../../d1/da1/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8c_source.html#l00050">tcmi_slotvec_new()</a>, and <a class="el" href="../../d1/da1/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">self</span>.mount_params.mount_type[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">self</span>.mount_params.mount_options[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">self</span>.mount_params.mount_device[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Initializing TCMI CCN manager&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.listenings = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance.">tcmi_slotvec_new</a>(<a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#a934efb858409568e51362a2a7e5fe53c" title="maximum number of listenings">MAX_LISTENINGS</a>))) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create listenings slot vector&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#gae2fe277cb812ec620469249183a39758" title="&lt;&lt;private&gt;&gt; Starts the listening thread.">tcmi_ccnman_start_thread</a>() &lt; 0) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to start listening thread&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">goto</span> exit1; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga97c9f7b7804700ac95d6a4b43c0173e0" title="&lt;&lt;public&gt;&gt; Initializes the TCMI manager.">tcmi_man_init</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>), root, &amp;<a class="code" href="../../df/db6/group__tcmi__ccnman__class.html#ga773d73e380b1f4c5b6ea29fb5954cff6" title="Migration manager operations that support polymorphism.">ccnman_ops</a>, <span class="stringliteral">&quot;ccn&quot;</span>) &lt; 0) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;TCMI CCN manager - generic init failed&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; exit2:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga448e27417c0ec683569f8c2e3ad4698b" title="&lt;&lt;private&gt;&gt; The TCMI CCN manager listening thread is terminated.">tcmi_ccnman_stop_thread</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; exit1:</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; exit0:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_af66ed5b4eaaed8835d44373102723f6a_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_af66ed5b4eaaed8835d44373102723f6a_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_af66ed5b4eaaed8835d44373102723f6a_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_af66ed5b4eaaed8835d44373102723f6a_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#gae2fe277cb812ec620469249183a39758" title="&lt;&lt;private&gt;&gt; Starts the listening thread." alt="" coords="179,411,355,437"/><area shape="rect" id="node34" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga448e27417c0ec683569f8c2e3ad4698b" title="&lt;&lt;private&gt;&gt; The TCMI CCN manager listening thread is terminated." alt="" coords="179,461,354,488"/><area shape="rect" id="node35" href="../../d6/de0/group__tcmi__man__class.html#ga97c9f7b7804700ac95d6a4b43c0173e0" title="&lt;&lt;public&gt;&gt; Initializes the TCMI manager." alt="" coords="215,512,318,539"/><area shape="rect" id="node36" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance." alt="" coords="205,563,329,589"/><area shape="rect" id="node37" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="207,613,326,640"/><area shape="rect" id="node3" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga53db4c399f6edd48565f08efe9fff294" title="&lt;&lt;private&gt;&gt; This is the actual listening thread." alt="" coords="403,411,546,437"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="627,208,752,235"/><area shape="rect" id="node5" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="636,259,743,285"/><area shape="rect" id="node6" href="../../d3/d7e/group__tcmi__sock__class.html#ga876afb36eb57904291d799899b7e01f2" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="636,309,743,336"/><area shape="rect" id="node7" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="620,360,759,387"/><area shape="rect" id="node8" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1269db611e110ae54137ce36ccb0ff96" title="&lt;&lt;private&gt;&gt; Processes a selected socket and checks for incoming connection." alt="" coords="595,411,783,437"/><area shape="rect" id="node32" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="604,461,775,488"/><area shape="rect" id="node33" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor." alt="" coords="631,512,748,539"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1083,765,1253,792"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1085,664,1251,691"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#gaec7594491d8ea6c92c974467bc66052e" title="&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming connection." alt="" coords="871,107,995,133"/><area shape="rect" id="node14" href="../../d6/de0/group__tcmi__man__class.html#ga3c53520e91c6208d6f36505dcc70b3aa" title="&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager." alt="" coords="833,157,1034,184"/><area shape="rect" id="node16" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga334cb136e4efb06bde762b3b6c3bc8c9" title="&lt;&lt;public&gt;&gt; TCMI CCN manager constructor." alt="" coords="858,309,1009,336"/><area shape="rect" id="node17" href="../../d6/de0/group__tcmi__man__class.html#ga06dbb24abb0020744929149e3c61cdb8" title="&lt;&lt;public&gt;&gt; TCMI manager ID accessor." alt="" coords="885,360,981,387"/><area shape="rect" id="node18" href="../../d6/de0/group__tcmi__man__class.html#ga76ff5984fc261d709fd37cf6ae76c282" title="&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager." alt="" coords="862,411,1005,437"/><area shape="rect" id="node19" href="../../d6/de0/group__tcmi__man__class.html#gaba05288b4c6ef833034fdcebc3f71671" title="&lt;&lt;public&gt;&gt; Accessor for migproc directory." alt="" coords="857,461,1010,488"/><area shape="rect" id="node20" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="877,512,990,539"/><area shape="rect" id="node21" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga76bef3c1b90b6ad2a8f103d2d92797ea" title="&lt;&lt;public&gt;&gt; Authenticates the connecting PEN expecting a registration message and processing it..." alt="" coords="843,563,1024,589"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="876,208,991,235"/><area shape="rect" id="node26" href="../../d6/da2/group__tcmi__migman__class.html#ga7aeac128b81747e7bf32016a800ce457" title="&lt;&lt;public&gt;&gt; Slot node accessor." alt="" coords="866,613,1001,640"/><area shape="rect" id="node27" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="882,715,985,741"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="871,5,996,32"/><area shape="rect" id="node30" href="../../d6/de0/group__tcmi__man__class.html#gab5cc7906c63f9356975b8d0a04546027" title="&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved." alt="" coords="832,56,1035,83"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1301,765,1464,792"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1303,664,1463,691"/><area shape="rect" id="node15" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="1097,107,1239,149"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1115,224,1221,251"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1327,165,1439,192"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1108,173,1228,200"/><area shape="rect" id="node28" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1118,715,1218,741"/><area shape="rect" id="node31" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1087,56,1249,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabdb3de218242f196cc95029bf953eef6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_init_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the additional directories as described in <a class="el" href="../../df/db6/group__tcmi__ccnman__class.html">here </a>. </p>
<p>This method is called back by the <a class="el" href="../../d6/de0/group__tcmi__man__class.html">TCMI manager generic class</a>.</p>
<p>Currently, there is only one additional directory that stores listenings. </p>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00133">133</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d85/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__dir_8c_source.html#l00048">tcmi_ctlfs_dir_new()</a>, <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00200">tcmi_man_root()</a>, and <a class="el" href="../../d5/da2/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs_8h_source.html#l00087">TCMI_PERMS_DIR</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.d_listening_on = </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager.">tcmi_man_root</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)), <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;listening-on&quot;</span>)))</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.d_mounter = </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager.">tcmi_man_root</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)), <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;mounter&quot;</span>)))</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; exit1:</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.d_listening_on);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; exit0:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gabdb3de218242f196cc95029bf953eef6_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gabdb3de218242f196cc95029bf953eef6_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gabdb3de218242f196cc95029bf953eef6_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gabdb3de218242f196cc95029bf953eef6_cgraph">
<area shape="rect" id="node2" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="242,5,371,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="237,56,376,83"/><area shape="rect" id="node5" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager." alt="" coords="253,107,361,133"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="425,56,578,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3ffc6db24701b66716c03927062b20e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_init_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../df/db6/group__tcmi__ccnman__class.html">here </a>. </p>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">159</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../d4/d21/kernel__2_86_833_81_2src_2kkc_2kkc_8h_source.html#l00064">KKC_MAX_WHERE_LENGTH</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00302">tcmi_ccnman_listen()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00258">tcmi_ccnman_stop_ctlfs_files()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00366">tcmi_ccnman_stop_listen_all()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00402">tcmi_ccnman_stop_listen_one()</a>, <a class="el" href="../../d0/def/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__file_8c_source.html#l00062">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../d0/def/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__file_8c_source.html#l00099">tcmi_ctlfs_strfile_new()</a>, <a class="el" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h_source.html#l00005">TCMI_FS_MOUNT_LENGTH</a>, <a class="el" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h_source.html#l00007">TCMI_FS_MOUNT_OPTIONS_LENGTH</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00200">tcmi_man_root()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00444">tcmi_man_set_mount()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00458">tcmi_man_set_mount_device()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00472">tcmi_man_set_mount_options()</a>, and <a class="el" href="../../d5/da2/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs_8h_source.html#l00089">TCMI_PERMS_FILE_W</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating files&quot;</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.f_stop_listen_all = </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager.">tcmi_man_root</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)), <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                     NULL, NULL, <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7" title="&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit.">tcmi_ccnman_stop_listen_all</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;stop-listen-all&quot;</span>)))</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.f_stop_listen_one = </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager.">tcmi_man_root</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)), <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                     NULL, NULL, <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga13a666c0a6b07aa7378a1fccc82eac12" title="&lt;&lt;private&gt;&gt; Destroys a particular listening specified by the user.">tcmi_ccnman_stop_listen_one</a>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;stop-listen-one&quot;</span>)))</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.f_listen = </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_strfile_new</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager.">tcmi_man_root</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)), <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                     NULL, NULL, <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga4cfac83316f5b8936fb37661a4e2f873" title="&lt;&lt;private&gt;&gt; Instantiates a new listening.">tcmi_ccnman_listen</a>,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                     <a class="code" href="../../de/d96/group__kkc__class.html#ga36f883edbbf112ba37bfa162b66b81f0" title="Maximum where string length.">KKC_MAX_WHERE_LENGTH</a>, <span class="stringliteral">&quot;listen&quot;</span>)))</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.f_mount = </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_strfile_new</a>(<span class="keyword">self</span>.d_mounter, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                     NULL, NULL, <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1f647c17f57c73e230057b2941d992b5" title="&lt;&lt;private&gt;&gt; Write method to set fs mount type">tcmi_man_set_mount</a>,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                     <a class="code" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#a1a0e5b2e78f83b15c3a850557610d5df" title="Max length of the mount type name.">TCMI_FS_MOUNT_LENGTH</a>, <span class="stringliteral">&quot;fs-mount&quot;</span>)))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.f_mount_device = </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_strfile_new</a>(<span class="keyword">self</span>.d_mounter, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                     NULL, NULL, <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1befdc4f74188027f5cd9db60af97c3e" title="&lt;&lt;private&gt;&gt; Write method to set fs mount device">tcmi_man_set_mount_device</a>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                     <a class="code" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#a1a0e5b2e78f83b15c3a850557610d5df" title="Max length of the mount type name.">TCMI_FS_MOUNT_LENGTH</a>, <span class="stringliteral">&quot;fs-mount-device&quot;</span>)))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (!(<span class="keyword">self</span>.f_mount_options = </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_strfile_new</a>(<span class="keyword">self</span>.d_mounter, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                     NULL, NULL, <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga682f2d08a23f1b68a6c328a5d3cc6710" title="&lt;&lt;private&gt;&gt; Write method to set fs mount options">tcmi_man_set_mount_options</a>,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                     <a class="code" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#a53ebaeacfe35100c20255669496be0f5" title="Max length of the mount options.">TCMI_FS_MOUNT_OPTIONS_LENGTH</a>, <span class="stringliteral">&quot;fs-mount-options&quot;</span>)))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; exit1:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga3ea0760a59837e4ca72b1df585e1a446" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files.">tcmi_ccnman_stop_ctlfs_files</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; exit0:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ffc6db24701b66716c03927062b20e0_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ffc6db24701b66716c03927062b20e0_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ffc6db24701b66716c03927062b20e0_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ffc6db24701b66716c03927062b20e0_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga4cfac83316f5b8936fb37661a4e2f873" title="&lt;&lt;private&gt;&gt; Instantiates a new listening." alt="" coords="688,249,827,276"/><area shape="rect" id="node24" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga3ea0760a59837e4ca72b1df585e1a446" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="227,343,389,385"/><area shape="rect" id="node28" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7" title="&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit." alt="" coords="213,477,403,504"/><area shape="rect" id="node36" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga13a666c0a6b07aa7378a1fccc82eac12" title="&lt;&lt;private&gt;&gt; Destroys a particular listening specified by the user." alt="" coords="209,528,407,555"/><area shape="rect" id="node38" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="235,579,381,605"/><area shape="rect" id="node39" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="235,629,381,656"/><area shape="rect" id="node40" href="../../d6/de0/group__tcmi__man__class.html#ga7b77b2f99bdb6e862e3fee0e65d6041e" title="&lt;&lt;public&gt;&gt; Accessor for a main(root) directory of a particular TCMI manager." alt="" coords="254,680,362,707"/><area shape="rect" id="node41" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1f647c17f57c73e230057b2941d992b5" title="&lt;&lt;private&gt;&gt; Write method to set fs mount type" alt="" coords="235,731,381,757"/><area shape="rect" id="node42" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1befdc4f74188027f5cd9db60af97c3e" title="&lt;&lt;private&gt;&gt; Write method to set fs mount device" alt="" coords="235,782,381,823"/><area shape="rect" id="node43" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga682f2d08a23f1b68a6c328a5d3cc6710" title="&lt;&lt;private&gt;&gt; Write method to set fs mount options" alt="" coords="235,847,381,889"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="911,158,1054,199"/><area shape="rect" id="node4" href="../../de/d96/group__kkc__class.html#gacf3eeb3137650f2008a9eda4dc69c99e" title="&lt;&lt;public&gt;&gt; Starts listening on a specified interface." alt="" coords="942,224,1023,251"/><area shape="rect" id="node5" href="../../d6/dfa/group__kkc__sock__sleeper.html#gaa27c523cccb9943a0e7227c038b2964c" title="&lt;&lt;public&gt;&gt; Creates a new sleeper element associated with a particular socket and task." alt="" coords="905,477,1060,504"/><area shape="rect" id="node11" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor." alt="" coords="927,325,1039,352"/><area shape="rect" id="node12" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="926,376,1039,403"/><area shape="rect" id="node13" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga5a33a23f51ffa3c322e785c5f5d3dece" title="Adds a sleeper that represents a wait queue element for a newly created socket into the internal slee..." alt="" coords="894,427,1071,453"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="925,107,1040,133"/><area shape="rect" id="node18" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor." alt="" coords="924,5,1041,32"/><area shape="rect" id="node19" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="931,275,1034,301"/><area shape="rect" id="node21" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="895,528,1070,555"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="902,56,1063,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga980a8df7e87a7e87c02cdae7bc221a53" title="&lt;&lt;public&gt;&gt; Adds a task to the queue of processes sleeping on the socket." alt="" coords="1120,452,1299,479"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1124,503,1295,529"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1126,401,1293,428"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1347,503,1509,529"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1348,401,1508,428"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1156,107,1263,133"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1153,56,1265,83"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1149,157,1269,184"/><area shape="rect" id="node20" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1159,275,1259,301"/><area shape="rect" id="node22" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="1131,554,1287,595"/><area shape="rect" id="node25" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="456,351,621,377"/><area shape="rect" id="node26" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="469,300,608,327"/><area shape="rect" id="node27" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="681,300,834,327"/><area shape="rect" id="node29" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="470,401,607,428"/><area shape="rect" id="node30" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="476,503,601,529"/><area shape="rect" id="node31" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="469,553,608,580"/><area shape="rect" id="node32" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket." alt="" coords="465,605,613,646"/><area shape="rect" id="node35" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="485,452,592,479"/><area shape="rect" id="node33" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="672,553,843,580"/><area shape="rect" id="node34" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper." alt="" coords="670,605,845,646"/><area shape="rect" id="node37" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="483,671,595,697"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4cfac83316f5b8936fb37661a4e2f873"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_listen </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Instantiates a new listening. </p>
<p>Following steps need to be done</p>
<ul>
<li>reserve an empty slot in the slot vector</li>
<li>create a new KKC socket, that listens on specified interface</li>
<li>create a new KKC socket sleeper associated with the listening thread and add it to the sleepers list.</li>
<li>create a new TCMI socket that will present the KKC socket in TCMI ctlfs</li>
<li>insert the TCMI socket into that reserved slot</li>
<li>release the KKC socket - it is not needed anymore as the TCMI socket retains its own reference.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to an object - NULL is expected as TCMI CCN manager is a singleton class. </td></tr>
    <tr><td class="paramname">*str</td><td>- listening string - encodes the interface on which the new listening is to be started. It is architecture dependent and passed further on KKC to parse it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00302">302</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d33/kernel__2_86_833_81_2src_2kkc_2kkc_8c_source.html#l00069">kkc_listen()</a>, <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00269">kkc_sock_put()</a>, <a class="el" href="../../da/d7c/kernel__2_86_833_81_2src_2kkc_2kkc__sock__sleeper_8h_source.html#l00072">kkc_sock_sleeper_add()</a>, <a class="el" href="../../da/d7c/kernel__2_86_833_81_2src_2kkc_2kkc__sock__sleeper_8h_source.html#l00105">kkc_sock_sleeper_remove()</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00216">tcmi_ccnman_add_sleeper()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00290">tcmi_slot_insert()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00306">tcmi_slot_move_unused()</a>, <a class="el" href="../../d1/da1/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8c_source.html#l00168">tcmi_slotvec_reserve_empty()</a>, <a class="el" href="../../d9/dec/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>, and <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00139">tcmi_sock_node()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket.">kkc_sock</a> *k_sock;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a> *t_sock;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">/* storage for the new socket sleeper element */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper" title="Compound structure allowing external linking socket sleepers.">kkc_sock_sleeper</a> *sleeper;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">char</span> *listen_str = (<span class="keywordtype">char</span> *) str;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">int</span> err = -EINVAL;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Listen request on %s&quot;</span>, listen_str);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">/* Reserve an empty slot */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it.">tcmi_slotvec_reserve_empty</a>(<span class="keyword">self</span>.listenings))) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed allocating an empty slot for listening &#39;%s&#39;&quot;</span>, </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;             listen_str);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">/* create KKC socket */</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../de/d96/group__kkc__class.html#gacf3eeb3137650f2008a9eda4dc69c99e" title="&lt;&lt;public&gt;&gt; Starts listening on a specified interface.">kkc_listen</a>(&amp;k_sock, listen_str))) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed creating KKC listening on &#39;%s&#39;&quot;</span>, listen_str);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (!(sleeper = <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#gaa27c523cccb9943a0e7227c038b2964c" title="&lt;&lt;public&gt;&gt; Creates a new sleeper element associated with a particular socket and task.">kkc_sock_sleeper_add</a>(k_sock, <span class="keyword">self</span>.thread))) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create a new socket sleeper&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (!(t_sock = <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor.">tcmi_sock_new</a>(<span class="keyword">self</span>.d_listening_on, k_sock, <span class="stringliteral">&quot;listen-%02d&quot;</span>, </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                     <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot)))) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed creating TCMI socket on &#39;%s&#39;&quot;</span>, listen_str);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">/* append the sleeper to the list */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga5a33a23f51ffa3c322e785c5f5d3dece" title="Adds a sleeper that represents a wait queue element for a newly created socket into the internal slee...">tcmi_ccnman_add_sleeper</a>(sleeper);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot.">tcmi_slot_insert</a>(slot, <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor.">tcmi_sock_node</a>(t_sock));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">/* KKC socket not needed anymore as it is stored internally by</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">     * TCMI socket */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(k_sock);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; exit3:</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it.">kkc_sock_sleeper_remove</a>(sleeper);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; exit2:</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(k_sock);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; exit1:</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots.">tcmi_slot_move_unused</a>(slot); </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; exit0:</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga4cfac83316f5b8936fb37661a4e2f873_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga4cfac83316f5b8936fb37661a4e2f873_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga4cfac83316f5b8936fb37661a4e2f873_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga4cfac83316f5b8936fb37661a4e2f873_cgraph">
<area shape="rect" id="node2" href="../../de/d96/group__kkc__class.html#gacf3eeb3137650f2008a9eda4dc69c99e" title="&lt;&lt;public&gt;&gt; Starts listening on a specified interface." alt="" coords="241,5,322,32"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="230,107,333,133"/><area shape="rect" id="node9" href="../../d6/dfa/group__kkc__sock__sleeper.html#gaa27c523cccb9943a0e7227c038b2964c" title="&lt;&lt;public&gt;&gt; Creates a new sleeper element associated with a particular socket and task." alt="" coords="204,56,359,83"/><area shape="rect" id="node11" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="194,157,369,184"/><area shape="rect" id="node13" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga5a33a23f51ffa3c322e785c5f5d3dece" title="Adds a sleeper that represents a wait queue element for a newly created socket into the internal slee..." alt="" coords="193,208,370,235"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="225,259,338,285"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="224,309,339,336"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="201,360,362,387"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="210,411,353,453"/><area shape="rect" id="node21" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor." alt="" coords="225,477,337,504"/><area shape="rect" id="node22" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor." alt="" coords="223,528,340,555"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="423,56,593,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="425,107,591,133"/><area shape="rect" id="node8" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="458,157,558,184"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="645,56,808,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="647,107,807,133"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#ga980a8df7e87a7e87c02cdae7bc221a53" title="&lt;&lt;public&gt;&gt; Adds a task to the queue of processes sleeping on the socket." alt="" coords="419,5,597,32"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="430,209,586,250"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="455,275,561,301"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="452,376,564,403"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="448,325,568,352"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1269db611e110ae54137ce36ccb0ff96"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_process_sock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Processes a selected socket and checks for incoming connection. </p>
<p>If an incoming connection is detected, spawns a new migration manager passing it the connected socket. A successfully created migration manager is added among other migration managers into the slot vector.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sock</td><td>- kkc socket that is to be processed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00613">613</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/db2/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8c_source.html#l00113">kkc_sock_accept()</a>, <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00239">kkc_sock_getpeername2()</a>, <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00224">kkc_sock_getsockname2()</a>, <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00066">KKC_SOCK_NONBLOCK</a>, <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00269">kkc_sock_put()</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../d8/d39/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8h_source.html#l00074">TCMI_CCNMIGMAN</a>, <a class="el" href="../../d9/d99/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8c_source.html#l00111">tcmi_ccnmigman_auth_pen()</a>, <a class="el" href="../../d9/d99/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__ccnmigman_8c_source.html#l00066">tcmi_ccnmigman_new()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00234">tcmi_man_id()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00223">tcmi_man_migproc_dir()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00212">tcmi_man_nodes_dir()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00187">tcmi_man_release_migmanslot()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00172">tcmi_man_reserve_migmanslot()</a>, <a class="el" href="../../df/d9b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8h_source.html#l00319">tcmi_migman_node()</a>, <a class="el" href="../../d6/d0b/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>, and <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00290">tcmi_slot_insert()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00552">tcmi_ccnman_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket.">kkc_sock</a> *new_sock;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *migman;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">/* check if there is incoming connection */</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gaec7594491d8ea6c92c974467bc66052e" title="&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming connection.">kkc_sock_accept</a>(sock, &amp;new_sock, </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                   <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa34e5e1c2017bb76800a1d3a894dae9d1">KKC_SOCK_NONBLOCK</a>)) &lt; 0) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;No connection, accept would block %d&quot;</span>, err);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Accepted incoming connection local: &#39;%s&#39;, remote: &#39;%s&#39;&quot;</span>, </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getsockname2</a>(new_sock), <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(new_sock));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">/* Reserve an empty slot */</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (!(slot = <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga3c53520e91c6208d6f36505dcc70b3aa" title="&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager.">tcmi_man_reserve_migmanslot</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)))) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed allocating an empty slot for CCN migman&quot;</span>); </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">/* Accept the first incoming connection */</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (!(migman = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga334cb136e4efb06bde762b3b6c3bc8c9" title="&lt;&lt;public&gt;&gt; TCMI CCN manager constructor.">tcmi_ccnmigman_new</a>(new_sock, </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                      <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga06dbb24abb0020744929149e3c61cdb8" title="&lt;&lt;public&gt;&gt; TCMI manager ID accessor.">tcmi_man_id</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)), </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                      slot,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                      <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga76ff5984fc261d709fd37cf6ae76c282" title="&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager.">tcmi_man_nodes_dir</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)),</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                      <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaba05288b4c6ef833034fdcebc3f71671" title="&lt;&lt;public&gt;&gt; Accessor for migproc directory.">tcmi_man_migproc_dir</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>)),</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                      <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(slot)))) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR1, <span class="stringliteral">&quot;Failed to instantiate the CCN migration manager&quot;</span>); </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga76bef3c1b90b6ad2a8f103d2d92797ea" title="&lt;&lt;public&gt;&gt; Authenticates the connecting PEN expecting a registration message and processing it...">tcmi_ccnmigman_auth_pen</a>(<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gaa99d33b37040b510d78a8c11666fc942" title="Casts to the CCN migration manager.">TCMI_CCNMIGMAN</a>(migman))) &lt; 0) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR1, <span class="stringliteral">&quot;Failed to authenticate the PEN! %d&quot;</span>, err); </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot.">tcmi_slot_insert</a>(slot, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga7aeac128b81747e7bf32016a800ce457" title="&lt;&lt;public&gt;&gt; Slot node accessor.">tcmi_migman_node</a>(migman));</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(new_sock);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; exit3:</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(migman);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; exit2:</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="../../d6/de0/group__tcmi__man__class.html#gab5cc7906c63f9356975b8d0a04546027" title="&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved.">tcmi_man_release_migmanslot</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>), slot); </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; exit1:</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(new_sock);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; exit0:</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga1269db611e110ae54137ce36ccb0ff96_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga1269db611e110ae54137ce36ccb0ff96_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga1269db611e110ae54137ce36ccb0ff96_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga1269db611e110ae54137ce36ccb0ff96_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gaec7594491d8ea6c92c974467bc66052e" title="&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming connection." alt="" coords="282,5,406,32"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="495,56,662,83"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="493,157,664,184"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="293,107,395,133"/><area shape="rect" id="node9" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga76bef3c1b90b6ad2a8f103d2d92797ea" title="&lt;&lt;public&gt;&gt; Authenticates the connecting PEN expecting a registration message and processing it..." alt="" coords="253,208,435,235"/><area shape="rect" id="node10" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga334cb136e4efb06bde762b3b6c3bc8c9" title="&lt;&lt;public&gt;&gt; TCMI CCN manager constructor." alt="" coords="269,259,419,285"/><area shape="rect" id="node11" href="../../d6/de0/group__tcmi__man__class.html#ga06dbb24abb0020744929149e3c61cdb8" title="&lt;&lt;public&gt;&gt; TCMI manager ID accessor." alt="" coords="296,309,392,336"/><area shape="rect" id="node12" href="../../d6/de0/group__tcmi__man__class.html#gaba05288b4c6ef833034fdcebc3f71671" title="&lt;&lt;public&gt;&gt; Accessor for migproc directory." alt="" coords="267,360,421,387"/><area shape="rect" id="node13" href="../../d6/de0/group__tcmi__man__class.html#ga76ff5984fc261d709fd37cf6ae76c282" title="&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager." alt="" coords="273,411,415,437"/><area shape="rect" id="node14" href="../../d6/de0/group__tcmi__man__class.html#gab5cc7906c63f9356975b8d0a04546027" title="&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved." alt="" coords="243,461,445,488"/><area shape="rect" id="node17" href="../../d6/de0/group__tcmi__man__class.html#ga3c53520e91c6208d6f36505dcc70b3aa" title="&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager." alt="" coords="243,512,445,539"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#ga7aeac128b81747e7bf32016a800ce457" title="&lt;&lt;public&gt;&gt; Slot node accessor." alt="" coords="277,563,411,589"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="281,613,407,640"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="287,664,401,691"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="287,715,401,741"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="713,56,873,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="712,157,875,184"/><area shape="rect" id="node8" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="529,107,629,133"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="498,461,659,488"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="737,528,849,555"/><area shape="rect" id="node18" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="507,513,650,554"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="525,740,632,767"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="519,689,639,716"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9389c2be9797d585c46f8ac40373ab2c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_remove_sleepers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock">tcmi_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches the list of socket sleepers and removes all sleepers that match the socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sock</td><td>- socket that is to be cleaned from all sleepers </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00229">229</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../da/d7c/kernel__2_86_833_81_2src_2kkc_2kkc__sock__sleeper_8h_source.html#l00124">kkc_sock_sleeper_remove_match()</a>, <a class="el" href="../../da/d7c/kernel__2_86_833_81_2src_2kkc_2kkc__sock__sleeper_8h_source.html#l00056">kkc_sock_sleeper::list</a>, and <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00104">tcmi_sock_kkc_sock_get()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00366">tcmi_ccnman_stop_listen_all()</a>, and <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00402">tcmi_ccnman_stop_listen_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket.">kkc_sock</a> *k_sock = <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor.">tcmi_sock_kkc_sock_get</a>(sock);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">/* backup element for traversing the list is needed since the</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">     * sleeper might get removed */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper" title="Compound structure allowing external linking socket sleepers.">kkc_sock_sleeper</a> *sleeper, *tmp;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    spin_lock(&amp;<span class="keyword">self</span>.sleepers_lock);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">/* Find all sleepers that match this socket */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    list_for_each_entry_safe(sleeper, tmp, &amp;<span class="keyword">self</span>.sleepers, <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#af502344553d4363b13272c141f090631" title="linking element for public use.">list</a>) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper.">kkc_sock_sleeper_remove_match</a>(sleeper, k_sock);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    spin_unlock(&amp;<span class="keyword">self</span>.sleepers_lock);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9389c2be9797d585c46f8ac40373ab2c_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9389c2be9797d585c46f8ac40373ab2c_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9389c2be9797d585c46f8ac40373ab2c_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9389c2be9797d585c46f8ac40373ab2c_cgraph">
<area shape="rect" id="node2" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper." alt="" coords="203,63,378,105"/><area shape="rect" id="node9" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="205,129,376,156"/><area shape="rect" id="node3" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="427,71,602,97"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="658,5,814,46"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="651,71,821,97"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="653,121,819,148"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="869,71,1032,97"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="871,121,1031,148"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a56c8b782c2f77fb6dea92c9cc5a9810f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_ccnman_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order: </p>
<ul>
<li>stop the listening thread, the thread doesn't need to worry about termination of any listenings-it will be done further</li>
<li>perform a generic shutdown (this destroys all files and stops migration etc.). This step preceeds stop listening as we need to be sure, that no control files are active (user might try adding a new listening interface)</li>
<li>stop listening on all interfaces</li>
<li>destroy the listenings slotvector (should be empty by now) </li>
</ul>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00107">107</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00366">tcmi_ccnman_stop_listen_all()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00520">tcmi_ccnman_stop_thread()</a>, <a class="el" href="../../de/db4/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8h_source.html#l00151">TCMI_MAN</a>, <a class="el" href="../../d1/df8/kernel__2_86_833_81_2src_2tcmi_2manager_2tcmi__man_8c_source.html#l00142">tcmi_man_shutdown()</a>, and <a class="el" href="../../d1/da1/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span> stop_listen = 1;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Shutting down the TCMI CCN manager&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga448e27417c0ec683569f8c2e3ad4698b" title="&lt;&lt;private&gt;&gt; The TCMI CCN manager listening thread is terminated.">tcmi_ccnman_stop_thread</a>();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../d6/de0/group__tcmi__man__class.html#ga5255cad7e65c708e972344bab305e19a" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_man_shutdown</a>(<a class="code" href="../../d6/de0/group__tcmi__man__class.html#gaa817e26a29c1f89a28677a955a0e66d0" title="Casts to the TCMI manager.">TCMI_MAN</a>(&amp;<span class="keyword">self</span>));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7" title="&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit.">tcmi_ccnman_stop_listen_all</a>(NULL, &amp;stop_listen);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_a56c8b782c2f77fb6dea92c9cc5a9810f_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_a56c8b782c2f77fb6dea92c9cc5a9810f_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_a56c8b782c2f77fb6dea92c9cc5a9810f_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_a56c8b782c2f77fb6dea92c9cc5a9810f_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7" title="&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit." alt="" coords="217,107,407,133"/><area shape="rect" id="node16" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga448e27417c0ec683569f8c2e3ad4698b" title="&lt;&lt;private&gt;&gt; The TCMI CCN manager listening thread is terminated." alt="" coords="225,157,399,184"/><area shape="rect" id="node17" href="../../d6/de0/group__tcmi__man__class.html#ga5255cad7e65c708e972344bab305e19a" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="241,208,383,235"/><area shape="rect" id="node18" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="253,259,371,285"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="462,5,599,32"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="468,56,593,83"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="461,107,600,133"/><area shape="rect" id="node6" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket." alt="" coords="457,158,605,199"/><area shape="rect" id="node15" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="477,224,584,251"/><area shape="rect" id="node7" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper." alt="" coords="654,129,829,170"/><area shape="rect" id="node14" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="656,195,827,221"/><area shape="rect" id="node8" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="878,136,1053,163"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="1109,70,1265,111"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1101,136,1272,163"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1103,187,1270,213"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1320,136,1483,163"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1321,187,1481,213"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gae2fe277cb812ec620469249183a39758"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_start_thread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Starts the listening thread. </p>
<p>The kernel thread is started by using kernel services. No additional actions are needed.</p>
<dl class="section return"><dt>Returns</dt><dd>0 upon sucessful thread creation </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00496">496</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, and <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00552">tcmi_ccnman_thread()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00065">tcmi_ccnman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Starting listening thread&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">self</span>.thread = kthread_run(<a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga53db4c399f6edd48565f08efe9fff294" title="&lt;&lt;private&gt;&gt; This is the actual listening thread.">tcmi_ccnman_thread</a>, NULL, <span class="stringliteral">&quot;tcmi_ccnmand&quot;</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(<span class="keyword">self</span>.thread)) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR2, <span class="stringliteral">&quot;Failed to create a listening thread!&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Created listening thread %p&quot;</span>, <span class="keyword">self</span>.thread);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; exit0:</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gae2fe277cb812ec620469249183a39758_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gae2fe277cb812ec620469249183a39758_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gae2fe277cb812ec620469249183a39758_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_gae2fe277cb812ec620469249183a39758_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga53db4c399f6edd48565f08efe9fff294" title="&lt;&lt;private&gt;&gt; This is the actual listening thread." alt="" coords="230,208,373,235"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="453,5,579,32"/><area shape="rect" id="node4" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="463,56,569,83"/><area shape="rect" id="node5" href="../../d3/d7e/group__tcmi__sock__class.html#ga876afb36eb57904291d799899b7e01f2" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="463,107,569,133"/><area shape="rect" id="node6" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="447,157,585,184"/><area shape="rect" id="node7" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1269db611e110ae54137ce36ccb0ff96" title="&lt;&lt;private&gt;&gt; Processes a selected socket and checks for incoming connection." alt="" coords="422,588,610,615"/><area shape="rect" id="node31" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="431,639,601,665"/><area shape="rect" id="node32" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor." alt="" coords="457,689,575,716"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="909,461,1080,488"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="911,309,1078,336"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gaec7594491d8ea6c92c974467bc66052e" title="&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming connection." alt="" coords="698,411,822,437"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="709,512,811,539"/><area shape="rect" id="node15" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga76bef3c1b90b6ad2a8f103d2d92797ea" title="&lt;&lt;public&gt;&gt; Authenticates the connecting PEN expecting a registration message and processing it..." alt="" coords="669,613,851,640"/><area shape="rect" id="node16" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga334cb136e4efb06bde762b3b6c3bc8c9" title="&lt;&lt;public&gt;&gt; TCMI CCN manager constructor." alt="" coords="685,664,835,691"/><area shape="rect" id="node17" href="../../d6/de0/group__tcmi__man__class.html#ga06dbb24abb0020744929149e3c61cdb8" title="&lt;&lt;public&gt;&gt; TCMI manager ID accessor." alt="" coords="712,715,808,741"/><area shape="rect" id="node18" href="../../d6/de0/group__tcmi__man__class.html#gaba05288b4c6ef833034fdcebc3f71671" title="&lt;&lt;public&gt;&gt; Accessor for migproc directory." alt="" coords="683,765,837,792"/><area shape="rect" id="node19" href="../../d6/de0/group__tcmi__man__class.html#ga76ff5984fc261d709fd37cf6ae76c282" title="&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager." alt="" coords="689,816,831,843"/><area shape="rect" id="node20" href="../../d6/de0/group__tcmi__man__class.html#gab5cc7906c63f9356975b8d0a04546027" title="&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved." alt="" coords="659,867,861,893"/><area shape="rect" id="node23" href="../../d6/de0/group__tcmi__man__class.html#ga3c53520e91c6208d6f36505dcc70b3aa" title="&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager." alt="" coords="659,968,861,995"/><area shape="rect" id="node25" href="../../d6/da2/group__tcmi__migman__class.html#ga7aeac128b81747e7bf32016a800ce457" title="&lt;&lt;public&gt;&gt; Slot node accessor." alt="" coords="693,1019,827,1045"/><area shape="rect" id="node26" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="697,360,823,387"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="703,563,817,589"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="703,917,817,944"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1129,309,1289,336"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1128,461,1291,488"/><area shape="rect" id="node14" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="945,512,1045,539"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="914,816,1075,843"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1153,892,1265,919"/><area shape="rect" id="node24" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="923,1019,1066,1061"/><area shape="rect" id="node29" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="941,867,1048,893"/><area shape="rect" id="node30" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="935,917,1055,944"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga918fddae425e9314af87a5f60c676398"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; This method is called back by the generic TCMI manager. </p>
<p>It stops listening on all interfaces. </p>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00484">484</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00366">tcmi_ccnman_stop_listen_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordtype">int</span> stop_listen = 1;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7" title="&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit.">tcmi_ccnman_stop_listen_all</a>(NULL, &amp;stop_listen);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga918fddae425e9314af87a5f60c676398_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga918fddae425e9314af87a5f60c676398_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga918fddae425e9314af87a5f60c676398_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga918fddae425e9314af87a5f60c676398_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga23b30f7a09d98e541c636cbdbf2882c7" title="&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit." alt="" coords="187,107,378,133"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="433,5,570,32"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="439,56,564,83"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="432,107,571,133"/><area shape="rect" id="node6" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket." alt="" coords="427,158,575,199"/><area shape="rect" id="node15" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="448,224,555,251"/><area shape="rect" id="node7" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper." alt="" coords="625,129,799,170"/><area shape="rect" id="node14" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="627,195,797,221"/><area shape="rect" id="node8" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="849,136,1023,163"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="1079,70,1235,111"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1072,136,1243,163"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1074,187,1241,213"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1291,136,1453,163"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1292,187,1452,213"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9f0f5a98bd6386027a98678c3e1e07e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_stop_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Releases all directories - called back by generic TCMI manager </p>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00248">248</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, and <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI CCN manager ctlfs directories&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.d_listening_on);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.d_mounter);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9f0f5a98bd6386027a98678c3e1e07e4_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9f0f5a98bd6386027a98678c3e1e07e4_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9f0f5a98bd6386027a98678c3e1e07e4_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga9f0f5a98bd6386027a98678c3e1e07e4_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="245,5,384,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="433,5,586,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3ea0760a59837e4ca72b1df585e1a446"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_stop_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Unregisters and releases all control files. </p>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00258">258</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d77/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d0/def/kernel__2_86_833_81_2src_2tcmi_2ctlfs_2tcmi__ctlfs__file_8c_source.html#l00154">tcmi_ctlfs_file_unregister()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI CCN manager ctlfs files&quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(<span class="keyword">self</span>.f_listen);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.f_listen);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(<span class="keyword">self</span>.f_stop_listen_one);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.f_stop_listen_one);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(<span class="keyword">self</span>.f_stop_listen_all);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.f_stop_listen_all);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(<span class="keyword">self</span>.f_mount);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.f_mount); </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(<span class="keyword">self</span>.f_mount_device);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.f_mount_device);  </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(<span class="keyword">self</span>.f_mount_options);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(<span class="keyword">self</span>.f_mount_options); </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ea0760a59837e4ca72b1df585e1a446_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ea0760a59837e4ca72b1df585e1a446_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ea0760a59837e4ca72b1df585e1a446_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga3ea0760a59837e4ca72b1df585e1a446_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="229,5,368,32"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="216,56,381,83"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="430,5,583,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga23b30f7a09d98e541c636cbdbf2882c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_stop_listen_all </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Iterates through all active listenings and notifies each instance to quit. </p>
<p>The slot vector needs to be locked while iterating through the listenings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to an object - NULL is expected as TCMI CCN manager is a singleton class. </td></tr>
    <tr><td class="paramname">*data</td><td>- if the value that it points to is &gt;0, the action is taken </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 - when all listenings have been terminated </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00366">366</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00069">tcmi_sock::node</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00229">tcmi_ccnman_remove_sleepers()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00215">tcmi_slotvec_empty()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00131">tcmi_slotvec_remove_one_entry</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>, and <a class="el" href="../../d9/dec/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00107">tcmi_ccnman_shutdown()</a>, and <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00484">tcmi_ccnman_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">int</span> stop = *((<span class="keywordtype">int</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">/* temporary storage for the slots while traversing the vector */</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a> *listening;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Stop listening - all interfaces, action = %d&quot;</span>, stop);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (stop) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness">tcmi_slotvec_empty</a>(<span class="keyword">self</span>.listenings)) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga988bdfe5beaa8839a8fbc788570a64a7" title="&lt;&lt;public&gt;&gt; Removes one entry from the slotvector and returns it.">tcmi_slotvec_remove_one_entry</a>(<span class="keyword">self</span>.listenings, listening, <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#a97a16420fd085452062d38e6aeed9d42" title="A slot node, used for insertion the listening into a slot.">node</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">if</span> (listening) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket.">tcmi_ccnman_remove_sleepers</a>(listening);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance.">tcmi_sock_put</a>(listening);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga23b30f7a09d98e541c636cbdbf2882c7_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga23b30f7a09d98e541c636cbdbf2882c7_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga23b30f7a09d98e541c636cbdbf2882c7_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga23b30f7a09d98e541c636cbdbf2882c7_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket." alt="" coords="246,93,394,134"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="251,159,389,185"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="257,209,383,236"/><area shape="rect" id="node13" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="251,260,389,287"/><area shape="rect" id="node14" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="267,311,373,337"/><area shape="rect" id="node3" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper." alt="" coords="443,63,618,105"/><area shape="rect" id="node10" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="445,129,616,156"/><area shape="rect" id="node4" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="667,71,842,97"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="898,5,1054,46"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="891,71,1061,97"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="893,121,1059,148"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1109,71,1272,97"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1111,121,1271,148"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga13a666c0a6b07aa7378a1fccc82eac12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_stop_listen_one </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Destroys a particular listening specified by the user. </p>
<p>The listening is first looked up in the slotvector and removed. After unlocking the slotvector we can destroy it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to an object - NULL is expected as TCMI CCN manager is a singleton class. </td></tr>
    <tr><td class="paramname">*data</td><td>- slot number where the listening that is to destroyed resides. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 - when all listenings have been terminated </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00402">402</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00069">tcmi_sock::node</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00229">tcmi_ccnman_remove_sleepers()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00135">tcmi_slot_remove_first</a>, <a class="el" href="../../d1/da1/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>, and <a class="el" href="../../d9/dec/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">int</span> slot_num = *((<span class="keywordtype">int</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">/* temporary storage for the slot where the listening resides */</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">/* temporary storage for the slots while traversing the vector */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a> *listening = NULL;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(<span class="keyword">self</span>.listenings, slot_num);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (!slot) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t stop listening - invalid number! %d&quot;</span>, slot_num);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">/* there is always only one listening per slot */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4e77d9cb5dbafc0fb6759fa09838d547" title="&lt;&lt;public&gt;&gt; Removes the first object in the slot.">tcmi_slot_remove_first</a>(listening, slot, <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#a97a16420fd085452062d38e6aeed9d42" title="A slot node, used for insertion the listening into a slot.">node</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">/* Slot might exist, but it might still be empty*/</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (!listening) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t stop listening - no such listening (%d)&quot;</span>, slot_num);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket.">tcmi_ccnman_remove_sleepers</a>(listening);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance.">tcmi_sock_put</a>(listening);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Stopped listening - %d&quot;</span>, slot_num);    </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; exit0:</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga13a666c0a6b07aa7378a1fccc82eac12_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga13a666c0a6b07aa7378a1fccc82eac12_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga13a666c0a6b07aa7378a1fccc82eac12_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga13a666c0a6b07aa7378a1fccc82eac12_cgraph">
<area shape="rect" id="node2" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga9389c2be9797d585c46f8ac40373ab2c" title="Searches the list of socket sleepers and removes all sleepers that match the socket." alt="" coords="254,93,402,134"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="272,159,384,185"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="265,209,391,236"/><area shape="rect" id="node13" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="259,260,397,287"/><area shape="rect" id="node14" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="275,311,381,337"/><area shape="rect" id="node3" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537" title="&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper." alt="" coords="451,63,626,105"/><area shape="rect" id="node10" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="453,129,624,156"/><area shape="rect" id="node4" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="675,71,850,97"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="906,5,1062,46"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="899,71,1069,97"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="901,121,1067,148"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1117,71,1280,97"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1119,121,1279,148"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga448e27417c0ec683569f8c2e3ad4698b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnman_stop_thread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; The TCMI CCN manager listening thread is terminated. </p>
<p>The thread state is changed to 'DONE', so that the thread notices, that the manager is about to be shutdown and terminates. </p>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00520">520</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00065">tcmi_ccnman_init()</a>, and <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00107">tcmi_ccnman_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;{</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>.thread) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Stopping listening thread&quot;</span>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        kthread_stop(<span class="keyword">self</span>.thread);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga53db4c399f6edd48565f08efe9fff294"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnman_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; This is the actual listening thread. </p>
<p>It performs an infinite loop which cycles through all listenings checking for an incoming connection. This task is not trivial as we are racing with other threads from user space, that add and remove listenings. Also it is highly desirable to process a listening and not hold the slot vector lock.</p>
<p>is equal to following pseudocode: </p>
<pre class="fragment">while(!signalled to quit) {
  for each slot (s) {
    take first listening (l) from (s)
    if (s) is empty -&gt; report serious error, break;
    obtain the KKC socket and process it.
    if (l) has been removed from (s) in the
      meantime (unhashed) -&gt; break;
}
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*data</td><td>- a mandatory parameter, not used by our thread as it can access all tcmi_ccnman related data from the singleton instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful thread termination. </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00552">552</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00239">kkc_sock_getpeername2()</a>, <a class="el" href="../../d4/d2c/kernel__2_86_833_81_2src_2kkc_2kkc__sock_8h_source.html#l00224">kkc_sock_getsockname2()</a>, <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00120">tcmi_slot_find_first</a>, <a class="el" href="../../de/dd2/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slot_8h_source.html#l00148">tcmi_slot_node_unhashed</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00100">tcmi_slotvec_for_each_used_slot</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, <a class="el" href="../../db/d21/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>, <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00119">tcmi_sock_get()</a>, <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00104">tcmi_sock_kkc_sock_get()</a>, <a class="el" href="../../d1/d3f/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8h_source.html#l00139">tcmi_sock_node()</a>, and <a class="el" href="../../d9/dec/kernel__2_86_833_81_2src_2tcmi_2lib_2tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00496">tcmi_ccnman_start_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a> *listening = NULL;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a> *tmp = NULL;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Listening thread up and running %p&quot;</span>, current);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">while</span> (!kthread_should_stop()) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">/* iterate safely through the slot vector */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga49082f04567681a98c6d39eacbc1e4ed" title="Iterates through all used slots in the slot vector.">tcmi_slotvec_for_each_used_slot</a>(slot, <span class="keyword">self</span>.listenings) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="comment">/* release the socket from previous iteration */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance.">tcmi_sock_put</a>(tmp);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="comment">/* retrieve the first object in the slot */</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4035f12ea6373f91f7624ce2b209437d" title="&lt;&lt;public&gt;&gt; Returns the first object in the slot.">tcmi_slot_find_first</a>(listening, slot, node);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga876afb36eb57904291d799899b7e01f2" title="&lt;&lt;public&gt;&gt; Instance accessor.">tcmi_sock_get</a>(listening)) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Slot vector inconsistency, empty slot in used list!!&quot;</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="comment">/* now the critical region is over, and we can</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">             * process the listening without any need to</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">             * lock the slot vector since we own */</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <a class="code" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1269db611e110ae54137ce36ccb0ff96" title="&lt;&lt;private&gt;&gt; Processes a selected socket and checks for incoming connection.">tcmi_ccnman_process_sock</a>(<a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor.">tcmi_sock_kkc_sock_get</a>(listening));</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            tmp = listening; <span class="comment">/* tmp is released in the next iteration */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="comment">/* set critical region for next iteration */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga096c99c25b450d849e11c5e7aa57bb09" title="Check for node being removed from the hlist.">tcmi_slot_node_unhashed</a>(<a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor.">tcmi_sock_node</a>(tmp))) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Socket has been unhashed in the meantime local: &#39;%s&#39;, remote: &#39;%s&#39;&quot;</span>, </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                     <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getsockname2</a>(<a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor.">tcmi_sock_kkc_sock_get</a>(tmp)), </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                     <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(<a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor.">tcmi_sock_kkc_sock_get</a>(tmp)));</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<span class="keyword">self</span>.listenings);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">/* release the socket from the last iteration and</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">         * reset tmp to prevent another put in next main loop</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">         * iteration */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance.">tcmi_sock_put</a>(tmp);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        tmp = NULL;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">/* for each listening if incoming create mig man */</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Listening thread going to sleep&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        schedule();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        set_current_state(TASK_INTERRUPTIBLE);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Listening thread woken up&quot;</span>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Listening thread terminating&quot;</span>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga53db4c399f6edd48565f08efe9fff294_cgraph.png" border="0" usemap="#de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga53db4c399f6edd48565f08efe9fff294_cgraph" alt=""/></div>
<map name="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga53db4c399f6edd48565f08efe9fff294_cgraph" id="de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_ga53db4c399f6edd48565f08efe9fff294_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="687,30,854,56"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="685,131,856,158"/><area shape="rect" id="node6" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html#ga1269db611e110ae54137ce36ccb0ff96" title="&lt;&lt;private&gt;&gt; Processes a selected socket and checks for incoming connection." alt="" coords="198,384,386,411"/><area shape="rect" id="node26" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="229,435,355,462"/><area shape="rect" id="node27" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="223,486,361,512"/><area shape="rect" id="node28" href="../../d3/d7e/group__tcmi__sock__class.html#ga876afb36eb57904291d799899b7e01f2" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="239,536,345,563"/><area shape="rect" id="node29" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="207,587,377,614"/><area shape="rect" id="node30" href="../../d3/d7e/group__tcmi__sock__class.html#gaf237e9aa6b0c62e2b152df0951226972" title="&lt;&lt;public&gt;&gt; Sock node accessor." alt="" coords="233,638,351,664"/><area shape="rect" id="node31" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="239,688,345,715"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="905,30,1065,56"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="904,131,1067,158"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gaec7594491d8ea6c92c974467bc66052e" title="&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming connection." alt="" coords="474,283,598,310"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="485,80,587,107"/><area shape="rect" id="node10" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga76bef3c1b90b6ad2a8f103d2d92797ea" title="&lt;&lt;public&gt;&gt; Authenticates the connecting PEN expecting a registration message and processing it..." alt="" coords="445,384,627,411"/><area shape="rect" id="node11" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga334cb136e4efb06bde762b3b6c3bc8c9" title="&lt;&lt;public&gt;&gt; TCMI CCN manager constructor." alt="" coords="461,435,611,462"/><area shape="rect" id="node12" href="../../d6/de0/group__tcmi__man__class.html#ga06dbb24abb0020744929149e3c61cdb8" title="&lt;&lt;public&gt;&gt; TCMI manager ID accessor." alt="" coords="488,486,584,512"/><area shape="rect" id="node13" href="../../d6/de0/group__tcmi__man__class.html#gaba05288b4c6ef833034fdcebc3f71671" title="&lt;&lt;public&gt;&gt; Accessor for migproc directory." alt="" coords="459,536,613,563"/><area shape="rect" id="node14" href="../../d6/de0/group__tcmi__man__class.html#ga76ff5984fc261d709fd37cf6ae76c282" title="&lt;&lt;public&gt;&gt; Accessor for a cluster nodes directory of a particular TCMI manager." alt="" coords="465,587,607,614"/><area shape="rect" id="node15" href="../../d6/de0/group__tcmi__man__class.html#gab5cc7906c63f9356975b8d0a04546027" title="&lt;&lt;public&gt;&gt; Releases a migration slot that has been previously reserved." alt="" coords="435,638,637,664"/><area shape="rect" id="node18" href="../../d6/de0/group__tcmi__man__class.html#ga3c53520e91c6208d6f36505dcc70b3aa" title="&lt;&lt;public&gt;&gt; Reserves an empty slot for a new migration manager." alt="" coords="435,739,637,766"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#ga7aeac128b81747e7bf32016a800ce457" title="&lt;&lt;public&gt;&gt; Slot node accessor." alt="" coords="469,790,603,816"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="473,182,599,208"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="479,232,593,259"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="479,688,593,715"/><area shape="rect" id="node9" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="721,80,821,107"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="690,587,851,614"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="929,663,1041,690"/><area shape="rect" id="node19" href="../../d0/db7/group__tcmi__slotvec__class.html#gabd12f97cda4c9b4b4142f6de475645d9" title="&lt;&lt;public&gt;&gt; Finds the first empty slot and reserves it." alt="" coords="699,790,842,832"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="717,638,824,664"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="711,688,831,715"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1f647c17f57c73e230057b2941d992b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_set_mount </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Write method to set fs mount type </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- string with name of the mount type </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00444">444</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h_source.html#l00005">TCMI_FS_MOUNT_LENGTH</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordtype">char</span> *type_str = (<span class="keywordtype">char</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    strncpy(<span class="keyword">self</span>.mount_params.mount_type, type_str, <a class="code" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#a1a0e5b2e78f83b15c3a850557610d5df" title="Max length of the mount type name.">TCMI_FS_MOUNT_LENGTH</a>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1befdc4f74188027f5cd9db60af97c3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_set_mount_device </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Write method to set fs mount device </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- string with the mount device name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00458">458</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h_source.html#l00009">TCMI_FS_MOUNT_DEVICE_LENGTH</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;{</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">char</span> *device_str = (<span class="keywordtype">char</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    strncpy(<span class="keyword">self</span>.mount_params.mount_device, device_str, <a class="code" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#a3039c917998f73403a303033b199964a" title="Max length of the mount device.">TCMI_FS_MOUNT_DEVICE_LENGTH</a>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga682f2d08a23f1b68a6c328a5d3cc6710"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_man_set_mount_options </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Write method to set fs mount options </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- string with the mount options </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00472">472</a> of file <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html">tcmi_ccnman.c</a>.</p>

<p>References <a class="el" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h_source.html#l00007">TCMI_FS_MOUNT_OPTIONS_LENGTH</a>.</p>

<p>Referenced by <a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">char</span> *options_str = (<span class="keywordtype">char</span> *)<a class="code" href="../../da/d3b/kernel__2_86_833_81_2src_2tcmi_2migration_2tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    strncpy(<span class="keyword">self</span>.mount_params.mount_options, options_str, <a class="code" href="../../dc/d4d/kernel__2_86_833_81_2src_2tcmi_2migration_2fs_2fs__mount__params_8h.html#a53ebaeacfe35100c20255669496be0f5" title="Max length of the mount options.">TCMI_FS_MOUNT_OPTIONS_LENGTH</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li><li class="navelem"><a class="el" href="../../dir_08cfbe165ea603e6d179ff1f702f26c2.html">kernel_3.7.1</a></li><li class="navelem"><a class="el" href="../../dir_54993795d38a4b0939659b8e486bb0f5.html">src</a></li><li class="navelem"><a class="el" href="../../dir_d6db29d45a6ebf6e3bfdbb75b7b3a396.html">tcmi</a></li><li class="navelem"><a class="el" href="../../dir_365e98d2a2e8336e64ee556e1a9b8657.html">manager</a></li><li class="navelem"><a class="el" href="../../de/dee/kernel__3_87_81_2src_2tcmi_2manager_2tcmi__ccnman_8c.html">tcmi_ccnman.c</a></li>
    <li class="footer">Generated on Mon Apr 1 2013 16:10:32 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
