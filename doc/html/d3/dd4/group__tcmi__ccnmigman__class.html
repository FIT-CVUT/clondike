<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_ccnmigman class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/dd4/group__tcmi__ccnmigman__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_ccnmigman class<div class="ingroups"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html">tcmi_migman class</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>TCMI CCN migration manager controls migrating tasks for a particular CCN-PEN pair and resides as the name describes - on a CCN.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_ccnmigman class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d3/dd4/group__tcmi__ccnmigman__class.png" border="0" alt="" usemap="#d3_2dd4_2group____tcmi____ccnmigman____class"/>
<map name="d3_2dd4_2group____tcmi____ccnmigman____class" id="d3_2dd4_2group____tcmi____ccnmigman____class">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html" title="TCMI migration manager controls migrating tasks for a particular CCN&#45;PEN pair." alt="" coords="6,5,141,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d9/dc4/structtcmi__ccnmigman"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman">tcmi_ccnmigman</a></td></tr>
<tr class="memdesc:d9/dc4/structtcmi__ccnmigman"><td class="mdescLeft">&#160;</td><td class="mdescRight">A compound structure that holds all current shadow processes and other migration related data.  <a href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman">More...</a><br/></td></tr>
<tr class="separator:d9/dc4/structtcmi__ccnmigman"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa99d33b37040b510d78a8c11666fc942"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gaa99d33b37040b510d78a8c11666fc942">TCMI_CCNMIGMAN</a>(migman)&#160;&#160;&#160;((struct <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman">tcmi_ccnmigman</a> *)migman)</td></tr>
<tr class="memdesc:gaa99d33b37040b510d78a8c11666fc942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the CCN migration manager.  <a href="#gaa99d33b37040b510d78a8c11666fc942">More...</a><br/></td></tr>
<tr class="separator:gaa99d33b37040b510d78a8c11666fc942"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2efc5d15da6ce6198ffa36b5a7b55c06"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga2efc5d15da6ce6198ffa36b5a7b55c06">tcmi_ccnmigman_init_ctlfs_files</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga2efc5d15da6ce6198ffa36b5a7b55c06"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html">here </a>.  <a href="#ga2efc5d15da6ce6198ffa36b5a7b55c06">More...</a><br/></td></tr>
<tr class="separator:ga2efc5d15da6ce6198ffa36b5a7b55c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac36370dd94cc6627faa274daee17c660"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gac36370dd94cc6627faa274daee17c660">tcmi_ccnmigman_stop_ctlfs_files</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gac36370dd94cc6627faa274daee17c660"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Unregisters and releases all control files.  <a href="#gac36370dd94cc6627faa274daee17c660">More...</a><br/></td></tr>
<tr class="separator:gac36370dd94cc6627faa274daee17c660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f0b8105727e4488dfdac8a85e8b7a03"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga1f0b8105727e4488dfdac8a85e8b7a03">tcmi_ccnmigman_stop</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int remote_requested)</td></tr>
<tr class="memdesc:ga1f0b8105727e4488dfdac8a85e8b7a03"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Called on stop request  <a href="#ga1f0b8105727e4488dfdac8a85e8b7a03">More...</a><br/></td></tr>
<tr class="separator:ga1f0b8105727e4488dfdac8a85e8b7a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga450c150dd8b92021f13fc678c5a7c5b9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga450c150dd8b92021f13fc678c5a7c5b9">tcmi_ccnmigman_load</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga450c150dd8b92021f13fc678c5a7c5b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports current PEN load.  <a href="#ga450c150dd8b92021f13fc678c5a7c5b9">More...</a><br/></td></tr>
<tr class="separator:ga450c150dd8b92021f13fc678c5a7c5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad14202bb85e3e54bf199068e99685ec8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gad14202bb85e3e54bf199068e99685ec8">tcmi_ccnmigman_free</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad14202bb85e3e54bf199068e99685ec8"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Called upon migman destruction.  <a href="#gad14202bb85e3e54bf199068e99685ec8">More...</a><br/></td></tr>
<tr class="separator:gad14202bb85e3e54bf199068e99685ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga441c630e16042ba029e670ce173ddbca"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga441c630e16042ba029e670ce173ddbca">tcmi_ccnmigman_process_msg</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *m)</td></tr>
<tr class="memdesc:ga441c630e16042ba029e670ce173ddbca"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Processes a TCMI message m.  <a href="#ga441c630e16042ba029e670ce173ddbca">More...</a><br/></td></tr>
<tr class="separator:ga441c630e16042ba029e670ce173ddbca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga334cb136e4efb06bde762b3b6c3bc8c9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga334cb136e4efb06bde762b3b6c3bc8c9">tcmi_ccnmigman_new</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock, u_int32_t ccn_id, struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *manager_slot, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *migproc, const char namefmt[],...)</td></tr>
<tr class="memdesc:ga334cb136e4efb06bde762b3b6c3bc8c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; TCMI CCN migration manager constructor.  <a href="#ga334cb136e4efb06bde762b3b6c3bc8c9">More...</a><br/></td></tr>
<tr class="separator:ga334cb136e4efb06bde762b3b6c3bc8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76bef3c1b90b6ad2a8f103d2d92797ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga76bef3c1b90b6ad2a8f103d2d92797ea">tcmi_ccnmigman_auth_pen</a> (struct <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman">tcmi_ccnmigman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga76bef3c1b90b6ad2a8f103d2d92797ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Tries authenticating a PEN.  <a href="#ga76bef3c1b90b6ad2a8f103d2d92797ea">More...</a><br/></td></tr>
<tr class="separator:ga76bef3c1b90b6ad2a8f103d2d92797ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gabcc1c030f0681988828e1a833cf9e122"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gabcc1c030f0681988828e1a833cf9e122">ccnmigman_ops</a></td></tr>
<tr class="memdesc:gabcc1c030f0681988828e1a833cf9e122"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migration manager operations that support polymorphism.  <a href="#gabcc1c030f0681988828e1a833cf9e122">More...</a><br/></td></tr>
<tr class="separator:gabcc1c030f0681988828e1a833cf9e122"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>TCMI CCN migration manager controls migrating tasks for a particular CCN-PEN pair and resides as the name describes - on a CCN. </p>
<p>Basic message handling capabilities are used from the <a class="el" href="../../d6/da2/group__tcmi__migman__class.html">generic migration manager </a>.</p>
<p>There are specific tasks that needs to be accomplished:</p>
<ul>
<li>authenticate a connecting PEN</li>
</ul>
<p>It provides an additional entry in the TCMI ctlfs. This file reports an average load of a PEN that is connected to this migration manager. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d9/dc4/structtcmi__ccnmigman" id="d9/dc4/structtcmi__ccnmigman"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_ccnmigman</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A compound structure that holds all current shadow processes and other migration related data. </p>

<p>Definition at line <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00061">61</a> of file <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html">tcmi_ccnmigman.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_ccnmigman:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d2/dbe/structtcmi__ccnmigman__coll__graph.png" border="0" usemap="#tcmi__ccnmigman_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__ccnmigman_coll__map" id="tcmi__ccnmigman_coll__map">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data..." alt="" coords="324,966,447,1146"/><area shape="rect" id="node3" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening." alt="" coords="161,759,247,851"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket." alt="" coords="287,458,416,609"/><area shape="rect" id="node14" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method." alt="" coords="424,737,523,873"/><area shape="rect" id="node5" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="343,213,417,320"/><area shape="rect" id="node6" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="309,5,451,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="154,147,317,386"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure." alt="" coords="5,487,120,579"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops" title="entry operations that support polymorphism" alt="" coords="7,228,119,305"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops" title="Migration manager operations that support polymorphism." alt="" coords="272,723,400,888"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec" title="A slot vector compound structure." alt="" coords="799,723,909,888"/><area shape="rect" id="node12" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure." alt="" coords="597,451,707,616"/><area shape="rect" id="node13" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue" title="compound structure" alt="" coords="686,737,775,873"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad9aca34c81b5fc9e97a9184fb5f9af4a"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_load</td>
<td class="fielddoc">
TCMI ctlfs - reports current load of the remote PEN. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ada6dc1bd3677d3047e27646838025c63"></a>struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a></td>
<td class="fieldname">
super</td>
<td class="fielddoc">
parent class instance. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ab73081614525a8738612b765e8a938b9"></a>wait_queue_head_t</td>
<td class="fieldname">
wq</td>
<td class="fielddoc">
General purpose wait queue, e.g. <p>used when syncing the context performing authentication with authentication processing method </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gaa99d33b37040b510d78a8c11666fc942"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_CCNMIGMAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">migman</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman">tcmi_ccnmigman</a> *)migman)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the CCN migration manager. </p>

<p>Definition at line <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00074">74</a> of file <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html">tcmi_ccnmigman.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00137">tcmi_ccnmigman_init_ctlfs_files()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00066">tcmi_ccnmigman_new()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00214">tcmi_ccnmigman_process_msg()</a>, and <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00161">tcmi_ccnmigman_stop_ctlfs_files()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga76bef3c1b90b6ad2a8f103d2d92797ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_ccnmigman_auth_pen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman">tcmi_ccnmigman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Tries authenticating a PEN. </p>
<p>&lt;&lt;public&gt;&gt; Tries authenticating a PEN.</p>
<p>Authentication is considered successful if after processing the message the new manager state is 'CONNECTED'. The check is fully left upto the message processing framework. All that needs to be done is wait for a given time if the state changes. Of course, the connection message processing wakes us up earlier when needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successfully, -EINVAL otherwise </dd></dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00111">111</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, and <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Waiting for connection authentication.. %p&quot;</span>, <span class="keyword">self</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    ret = wait_event_interruptible_timeout(self-&gt;<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ab73081614525a8738612b765e8a938b9" title="General purpose wait queue, e.g.">wq</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                           (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>)) == </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>), 5*HZ); </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;woke up after %d, checking authentication result&quot;</span>, ret);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>)) == <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a> ? </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        0 : -EINVAL); </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/dd4/group__tcmi__ccnmigman__class_ga76bef3c1b90b6ad2a8f103d2d92797ea_cgraph.png" border="0" usemap="#d3/dd4/group__tcmi__ccnmigman__class_ga76bef3c1b90b6ad2a8f103d2d92797ea_cgraph" alt=""/></div>
<map name="d3/dd4/group__tcmi__ccnmigman__class_ga76bef3c1b90b6ad2a8f103d2d92797ea_cgraph" id="d3/dd4/group__tcmi__ccnmigman__class_ga76bef3c1b90b6ad2a8f103d2d92797ea_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="235,5,371,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad14202bb85e3e54bf199068e99685ec8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnmigman_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Called upon migman destruction. </p>
<ul>
<li><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00200">200</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* struct tcmi_ccnmigman *self_ccn  = TCMI_CCNMIGMAN(self); */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">/* nothing to do */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2efc5d15da6ce6198ffa36b5a7b55c06"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnmigman_init_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html">here </a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00137">137</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>References <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00066">tcmi_ccnmigman::f_load</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00074">TCMI_CCNMIGMAN</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00188">tcmi_ccnmigman_load()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00062">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00271">tcmi_migman_root()</a>, and <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00091">TCMI_PERMS_FILE_R</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_ccnmigman</a> *self_ccn = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gaa99d33b37040b510d78a8c11666fc942" title="Casts to the CCN migration manager.">TCMI_CCNMIGMAN</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating files&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (!(self_ccn-&gt;<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ad9aca34c81b5fc9e97a9184fb5f9af4a" title="TCMI ctlfs - reports current load of the remote PEN.">f_load</a> = </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gaaf118703c98a458bdf83eb1058de1347" title="&lt;&lt;public&gt;&gt; Migration manager root directory accessor.">tcmi_migman_root</a>(<span class="keyword">self</span>), <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#ga84907a0ffd1393cf8b462e14c9b4140a" title="Preferred read file rights.">TCMI_PERMS_FILE_R</a>,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga450c150dd8b92021f13fc678c5a7c5b9" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports current PEN load.">tcmi_ccnmigman_load</a>,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;load&quot;</span>)))</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">goto</span> exit0; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; exit0:</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/dd4/group__tcmi__ccnmigman__class_ga2efc5d15da6ce6198ffa36b5a7b55c06_cgraph.png" border="0" usemap="#d3/dd4/group__tcmi__ccnmigman__class_ga2efc5d15da6ce6198ffa36b5a7b55c06_cgraph" alt=""/></div>
<map name="d3/dd4/group__tcmi__ccnmigman__class_ga2efc5d15da6ce6198ffa36b5a7b55c06_cgraph" id="d3/dd4/group__tcmi__ccnmigman__class_ga2efc5d15da6ce6198ffa36b5a7b55c06_cgraph">
<area shape="rect" id="node2" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga450c150dd8b92021f13fc678c5a7c5b9" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs &#45; reports current PEN load." alt="" coords="200,31,352,57"/><area shape="rect" id="node3" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="203,81,349,108"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#gaaf118703c98a458bdf83eb1058de1347" title="&lt;&lt;public&gt;&gt; Migration manager root directory accessor." alt="" coords="211,132,341,159"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="400,81,573,108"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="621,81,760,108"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="810,5,963,32"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="809,56,965,83"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="816,107,957,133"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="813,158,961,199"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga450c150dd8b92021f13fc678c5a7c5b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_ccnmigman_load </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports current PEN load. </p>
<p>Load is reported based on the last sent info from PEN</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this CCN manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00188">188</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00137">tcmi_ccnmigman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga334cb136e4efb06bde762b3b6c3bc8c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>* tcmi_ccnmigman_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>ccn_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *&#160;</td>
          <td class="paramname"><em>manager_slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>migproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>namefmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; TCMI CCN migration manager constructor. </p>
<p>&lt;&lt;public&gt;&gt; TCMI CCN migration manager constructor.</p>
<p>The initialization is accomplished exactly in this order:</p>
<ul>
<li>create new instance</li>
<li>allocate new slot vector for shadow processes.</li>
<li>delegates all remaining intialization work to the generic manager.</li>
<li>authenticate the connecting PEN</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sock</td><td>- socket where the new PEN is registering </td></tr>
    <tr><td class="paramname">ccn_id</td><td>- CCN identifier </td></tr>
    <tr><td class="paramname">*root</td><td>- directory where the migration manager should create its files and directories </td></tr>
    <tr><td class="paramname">*migproc</td><td>- directory where the migrated process will have their info </td></tr>
    <tr><td class="paramname">namefmt</td><td>- nameformat string for the main manager directory name (printf style) </td></tr>
    <tr><td class="paramname">...</td><td>- variable arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new TCMI CCN manager instance or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00066">66</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>References <a class="el" href="../../d9/d10/tcmi__npm__params_8h_source.html#l00052">args</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00277">ccnmigman_ops</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00074">TCMI_CCNMIGMAN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>, <a class="el" href="../../d2/def/arch__ids_8h_source.html#l00006">UNKNOWN</a>, and <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00071">tcmi_ccnmigman::wq</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_ccnmigman</a> *migman;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    va_list <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496" title="Arrays of args and envps.">args</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO2, <span class="stringliteral">&quot;Creating new TCMI CCN migration manager&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (!(migman = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gaa99d33b37040b510d78a8c11666fc942" title="Casts to the CCN migration manager.">TCMI_CCNMIGMAN</a>(kmalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_ccnmigman</a>), </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                          GFP_KERNEL)))) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t allocate memory for CCM migration manager&quot;</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    init_waitqueue_head(&amp;migman-&gt;<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ab73081614525a8738612b765e8a938b9" title="General purpose wait queue, e.g.">wq</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    va_start(args, namefmt);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga9bdb189ca17e989ab59c89c2dc912600" title="TCMI migration manager initializer.">tcmi_migman_init</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(migman), sock, ccn_id, 0, <a class="code" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9a6ce26a62afab55d7606ad4e92428b30c">UNKNOWN</a>, manager_slot, root, migproc,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                 &amp;<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gabcc1c030f0681988828e1a833cf9e122" title="Migration manager operations that support polymorphism.">ccnmigman_ops</a>, namefmt, args) &lt; 0) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;TCMI CCN migman initialization failed!&quot;</span>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        va_end(args);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    va_end(args);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(migman);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; exit1:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    kfree(migman);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; exit0:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/dd4/group__tcmi__ccnmigman__class_ga334cb136e4efb06bde762b3b6c3bc8c9_cgraph.png" border="0" usemap="#d3/dd4/group__tcmi__ccnmigman__class_ga334cb136e4efb06bde762b3b6c3bc8c9_cgraph" alt=""/></div>
<map name="d3/dd4/group__tcmi__ccnmigman__class_ga334cb136e4efb06bde762b3b6c3bc8c9_cgraph" id="d3/dd4/group__tcmi__ccnmigman__class_ga334cb136e4efb06bde762b3b6c3bc8c9_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga9bdb189ca17e989ab59c89c2dc912600" title="TCMI migration manager initializer." alt="" coords="206,551,330,577"/><area shape="rect" id="node3" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer &#45; for static allocation." alt="" coords="418,145,531,172"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$." alt="" coords="409,196,540,223"/><area shape="rect" id="node7" href="../../d9/dfc/group__tcmi__comm__class.html#ga6dd2840fed12c1b41a99ec4cd0f3457c" title="&lt;&lt;public&gt;&gt; TCMI communication component constructor." alt="" coords="647,132,767,159"/><area shape="rect" id="node14" href="../../d6/da2/group__tcmi__migman__class.html#gafa1e34536a26378cc123baadbde5452e" title="&lt;&lt;private&gt;&gt; Message delivering method that is called back from the receiving thread of TCMI comm comp..." alt="" coords="387,1177,562,1204"/><area shape="rect" id="node28" href="../../d6/da2/group__tcmi__migman__class.html#gaf3923f508f4f54440732f33c4f0356dc" title="&lt;&lt;private&gt;&gt; Creates the directories as described in here ." alt="" coords="383,512,566,539"/><area shape="rect" id="node32" href="../../d6/da2/group__tcmi__migman__class.html#gaa481ed8e2b5db852737e1591af2d3202" title="tcmi_migman_create\l_symlink" alt="" coords="403,399,546,441"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#ga0f519d477e445de52505689f56c968e6" title="&lt;&lt;private&gt;&gt; Creates the static files described here ." alt="" coords="629,766,784,807"/><area shape="rect" id="node40" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor." alt="" coords="651,259,763,285"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#gad4006fee98cc9ef9bba73a33dc28bc66" title="&lt;&lt;private&gt;&gt; Starts the listening thread." alt="" coords="387,903,563,929"/><area shape="rect" id="node46" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="653,613,760,640"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="393,806,556,847"/><area shape="rect" id="node49" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="379,651,570,677"/><area shape="rect" id="node50" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="417,297,532,324"/><area shape="rect" id="node26" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="875,1253,994,1280"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance." alt="" coords="645,44,769,71"/><area shape="rect" id="node6" href="../../da/d0c/group__tcmi__slot__class.html#ga347147be22f868eacdae39a2846c0e3f" title="Initializes a slot." alt="" coords="885,5,984,32"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="883,107,986,133"/><area shape="rect" id="node9" href="../../d9/dfc/group__tcmi__comm__class.html#gaef03fa6d00b3c8a916625e2d17b961d0" title="&lt;&lt;private&gt;&gt; Messages receiving thread." alt="" coords="868,56,1001,83"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="883,208,986,235"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1077,183,1243,209"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1075,233,1245,260"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1293,309,1453,336"/><area shape="rect" id="node15" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="887,1068,983,1095"/><area shape="rect" id="node16" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga00174c2d363b1861e4c14e1804602df8" title="&lt;&lt;public&gt;&gt; Destination PID accessor." alt="" coords="630,1035,783,1061"/><area shape="rect" id="node17" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="636,1086,777,1127"/><area shape="rect" id="node18" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c" title="&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task." alt="" coords="632,1405,781,1432"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor." alt="" coords="876,1380,993,1407"/><area shape="rect" id="node20" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="866,1203,1003,1229"/><area shape="rect" id="node21" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881" title="&lt;&lt;public&gt;&gt; Delivers a specified message." alt="" coords="629,1203,784,1229"/><area shape="rect" id="node23" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="655,984,759,1011"/><area shape="rect" id="node22" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself." alt="" coords="873,1304,996,1331"/><area shape="rect" id="node24" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="852,875,1017,901"/><area shape="rect" id="node25" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="865,621,1004,648"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1101,1253,1219,1280"/><area shape="rect" id="node29" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="867,461,1002,488"/><area shape="rect" id="node30" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="642,461,771,488"/><area shape="rect" id="node31" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="865,512,1004,539"/><area shape="rect" id="node33" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry." alt="" coords="627,360,787,387"/><area shape="rect" id="node35" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="861,567,1008,593"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#gac71618221f842f2032e6141c21eed095" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs &#45; reports migration manager state." alt="" coords="848,723,1021,749"/><area shape="rect" id="node37" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="862,773,1007,800"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga4bcd1bc07e002ed4bc6fafcd44215749" title="&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager" alt="" coords="843,824,1026,851"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga7250c98a0358cb6c95dfbe5fd427c09c" title="&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager" alt="" coords="848,672,1021,699"/><area shape="rect" id="node41" href="../../d3/d7e/group__tcmi__sock__class.html#gad1f976e6e2c20c9f97fa0977cf7c00a8" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its localname." alt="" coords="851,157,1018,184"/><area shape="rect" id="node42" href="../../d3/d7e/group__tcmi__sock__class.html#ga2febb49f11f25c34307c57b735c6307b" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its peername." alt="" coords="1078,309,1242,336"/><area shape="rect" id="node43" href="../../d3/d7e/group__tcmi__sock__class.html#ga4772df777dec4418da664b5428b6039a" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its peername." alt="" coords="853,360,1017,387"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#ga698d639006881752225f808c1d345b1b" title="&lt;&lt;private&gt;&gt; Message processing thread." alt="" coords="619,933,794,960"/><area shape="rect" id="node48" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="621,883,793,909"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga441c630e16042ba029e670ce173ddbca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnmigman_process_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Processes a TCMI message m. </p>
<p>The message is desposed afterwords.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
    <tr><td class="paramname">*m</td><td>- pointer to a message to be processed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00214">214</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>References <a class="el" href="../../d8/d87/director_8c_source.html#l00084">director_generic_user_message_recv()</a>, <a class="el" href="../../d8/d87/director_8c_source.html#l00070">director_node_connected()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00239">kkc_sock_getpeername2()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00221">minfo</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00116">resp</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d5/dac/tcmi__authenticate__msg_8h_source.html#l00051">TCMI_AUTHENTICATE_MSG</a>, <a class="el" href="../../d5/dac/tcmi__authenticate__msg_8h_source.html#l00070">tcmi_authenticate_msg_arch()</a>, <a class="el" href="../../d5/dac/tcmi__authenticate__msg_8h_source.html#l00092">tcmi_authenticate_msg_auth_data()</a>, <a class="el" href="../../d5/dac/tcmi__authenticate__msg_8h_source.html#l00081">tcmi_authenticate_msg_auth_data_size()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00119">TCMI_AUTHENTICATE_MSG_ID</a>, <a class="el" href="../../d5/dac/tcmi__authenticate__msg_8h_source.html#l00059">tcmi_authenticate_msg_pen_id()</a>, <a class="el" href="../../d8/d37/tcmi__authenticate__resp__msg_8c_source.html#l00065">tcmi_authenticate_resp_msg_new_tx()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00666">tcmi_ccnman_get_mount_params()</a>, <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00074">TCMI_CCNMIGMAN</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00047">TCMI_GENERIC_USER_MSG</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00124">TCMI_GENERIC_USER_MSG_ID</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00055">tcmi_generic_user_msg_node_id()</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00077">tcmi_generic_user_msg_user_data()</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00066">tcmi_generic_user_msg_user_data_size()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00221">tcmi_migman_set_state()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00307">tcmi_migman_sock()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00255">tcmi_msg_req_id()</a>, and <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00138">tcmi_msg_send_anonymous()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *<a class="code" href="../../d1/d6d/tcmi__msg_8h.html#adb26817b6c4a9eeb3f68c832f24d5471" title="response transaction ID">resp</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">int</span> result_code = 0;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">int</span> accepted;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#df/dc2/structtcmi__authenticate__msg" title="Authentication message structure.">tcmi_authenticate_msg</a> *auth_msg;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#d3/de1/structtcmi__generic__user__msg" title="Generic user message structure.">tcmi_generic_user_msg</a> *user_msg;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">/* struct tcmi_ccnmigman *self_ccn = TCMI_CCNMIGMAN(self); */</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Processing message ID&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m)) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06cac280e8716e2541ac7099c11f0049e8bf">TCMI_AUTHENTICATE_MSG_ID</a>:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        auth_msg = <a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#gaf5a71bb4f9344b49e53fe4bfdbd7737f" title="Casts to the tcmi_authenticate_msg instance.">TCMI_AUTHENTICATE_MSG</a>(m);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Authentication message arrived.&quot;</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// Inform director that the node was connected </span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        err = <a class="code" href="../../d8/d87/director_8c.html#aeee3d2309ac01e0bca136b0ece62fb0c" title="Called, when a detached node connects to the core node.">director_node_connected</a>(<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor.">tcmi_migman_sock</a>(<span class="keyword">self</span>)), <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>), <a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga335adeaf099503285463a3e0676281d3" title="&lt;&lt;public&gt;&gt; PEN authentication data length getter">tcmi_authenticate_msg_auth_data_size</a>(auth_msg), <a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga3a6a076472862335c1f5386d9ec9a565" title="&lt;&lt;public&gt;&gt; PEN authentication data getter">tcmi_authenticate_msg_auth_data</a>(auth_msg), &amp;accepted);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">// The check for accept is performed only if the director responded, otherwise the call is ignored</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> ( !err &amp;&amp; !accepted ) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR1, <span class="stringliteral">&quot;Director rejected peer connection&quot;</span>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keyword">self</span>-&gt;pen_id = <a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga1ca157e54c52f3829daee3141d3032f3" title="&lt;&lt;public&gt;&gt; PEN id getter">tcmi_authenticate_msg_pen_id</a>(auth_msg);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keyword">self</span>-&gt;peer_arch_type = <a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga6d2403c7ed2cb03ee09fc84a10aaf197" title="&lt;&lt;public&gt;&gt; PEN architecture getter">tcmi_authenticate_msg_arch</a>(auth_msg);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> ( !( resp = <a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gafe2ec3410cb77e36ad388885f7bef710" title="&lt;&lt;public&gt;&gt; Authenticate response message tx constructor.">tcmi_authenticate_resp_msg_new_tx</a>(<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga5a09e9d377637eba6c3df1236fc97926" title="&lt;&lt;public&gt;&gt; Request transaction ID accessor.">tcmi_msg_req_id</a>(m), self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8ad9bf518ba351fdb3a320d2050b35f6" title="CCN ID - supplied by the instantiator(for CCN mig manager) or sent by the CCN(for PEN mig manager)...">ccn_id</a>, ARCH_CURRENT, result_code, <a class="code" href="../../df/db6/group__tcmi__ccnman__class.html#ga2ca277353e6b9c12a7fd1fe275a6ae6b" title="&lt;&lt;public&gt;&gt; Getter of mount params structure.">tcmi_ccnman_get_mount_params</a>()) ) ) { </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error creating response message&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection.">tcmi_msg_send_anonymous</a>(resp, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor.">tcmi_migman_sock</a>(<span class="keyword">self</span>)))) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error sending response message %d&quot;</span>, err);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(resp);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga1826451d879f914f53f0717f363aa914" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager.">tcmi_migman_set_state</a>(<span class="keyword">self</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        wake_up(&amp;(<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gaa99d33b37040b510d78a8c11666fc942" title="Casts to the CCN migration manager.">TCMI_CCNMIGMAN</a>(<span class="keyword">self</span>)-&gt;wq));</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06ca0573d290a5baa0461010cca329e9f7de">TCMI_GENERIC_USER_MSG_ID</a>:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        user_msg = <a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#gaf01d78e69ce5a8dafea3b986c1ef5485" title="Casts to the tcmi_generic_user_msg instance.">TCMI_GENERIC_USER_MSG</a>(m);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;User message arrived.&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        err = <a class="code" href="../../d8/d87/director_8c.html#ad03eefeffc228336be26ea451c990a8b" title="Called, when a generic user message arrives.">director_generic_user_message_recv</a>(<a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#gac4823fe4153e1c15518c1a4837abd1da" title="&lt;&lt;public&gt;&gt; Node id getter">tcmi_generic_user_msg_node_id</a>(user_msg), 1, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>), <a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga5c50da2fa82cf7efcc7e2673a71b5952" title="&lt;&lt;public&gt;&gt; User data length getter">tcmi_generic_user_msg_user_data_size</a>(user_msg), <a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#gad7a3e40e415de6dafa25c1d914a1ec56" title="&lt;&lt;public&gt;&gt; User data data getter">tcmi_generic_user_msg_user_data</a>(user_msg));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> ( err ) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error in processing user message %d&quot;</span>, err);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Unexpected message ID %x, no handler available.&quot;</span>, </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;              <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m));</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">/* release the message */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(m);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/dd4/group__tcmi__ccnmigman__class_ga441c630e16042ba029e670ce173ddbca_cgraph.png" border="0" usemap="#d3/dd4/group__tcmi__ccnmigman__class_ga441c630e16042ba029e670ce173ddbca_cgraph" alt=""/></div>
<map name="d3/dd4/group__tcmi__ccnmigman__class_ga441c630e16042ba029e670ce173ddbca_cgraph" id="d3/dd4/group__tcmi__ccnmigman__class_ga441c630e16042ba029e670ce173ddbca_cgraph">
<area shape="rect" id="node2" href="../../d8/d87/director_8c.html#ad03eefeffc228336be26ea451c990a8b" title="Called, when a generic user message arrives." alt="" coords="283,5,429,46"/><area shape="rect" id="node7" href="../../d8/d87/director_8c.html#aeee3d2309ac01e0bca136b0ece62fb0c" title="Called, when a detached node connects to the core node." alt="" coords="273,71,439,97"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="273,121,439,148"/><area shape="rect" id="node11" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga6d2403c7ed2cb03ee09fc84a10aaf197" title="&lt;&lt;public&gt;&gt; PEN architecture getter" alt="" coords="261,172,451,199"/><area shape="rect" id="node12" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga3a6a076472862335c1f5386d9ec9a565" title="&lt;&lt;public&gt;&gt; PEN authentication data getter" alt="" coords="277,223,435,265"/><area shape="rect" id="node13" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga335adeaf099503285463a3e0676281d3" title="&lt;&lt;public&gt;&gt; PEN authentication data length getter" alt="" coords="277,289,435,330"/><area shape="rect" id="node14" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga1ca157e54c52f3829daee3141d3032f3" title="&lt;&lt;public&gt;&gt; PEN id getter" alt="" coords="277,354,435,395"/><area shape="rect" id="node15" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gafe2ec3410cb77e36ad388885f7bef710" title="&lt;&lt;public&gt;&gt; Authenticate response message tx constructor." alt="" coords="277,419,435,461"/><area shape="rect" id="node31" href="../../df/db6/group__tcmi__ccnman__class.html#ga2ca277353e6b9c12a7fd1fe275a6ae6b" title="&lt;&lt;public&gt;&gt; Getter of mount params structure." alt="" coords="272,485,440,526"/><area shape="rect" id="node32" href="../../d4/dbe/group__tcmi__generic__user__class.html#gac4823fe4153e1c15518c1a4837abd1da" title="&lt;&lt;public&gt;&gt; Node id getter" alt="" coords="276,550,436,591"/><area shape="rect" id="node33" href="../../d4/dbe/group__tcmi__generic__user__class.html#gad7a3e40e415de6dafa25c1d914a1ec56" title="&lt;&lt;public&gt;&gt; User data data getter" alt="" coords="276,615,436,657"/><area shape="rect" id="node34" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga5c50da2fa82cf7efcc7e2673a71b5952" title="&lt;&lt;public&gt;&gt; User data length getter" alt="" coords="276,681,436,722"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#ga1826451d879f914f53f0717f363aa914" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager." alt="" coords="275,747,437,773"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="273,797,439,824"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="289,848,423,875"/><area shape="rect" id="node40" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="308,899,404,925"/><area shape="rect" id="node41" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="540,924,644,951"/><area shape="rect" id="node42" href="../../d6/dc2/group__tcmi__msg__class.html#ga5a09e9d377637eba6c3df1236fc97926" title="&lt;&lt;public&gt;&gt; Request transaction ID accessor." alt="" coords="295,1000,417,1027"/><area shape="rect" id="node43" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="262,1051,450,1077"/><area shape="rect" id="node3" href="../../d5/d32/generic__user__message__recv__msg_8c.html#a54f0c552eaa74acbea3d366f9f940989" title="Called, when a generic user message arrives." alt="" coords="499,15,685,41"/><area shape="rect" id="node4" href="../../d9/df4/comm_8c.html#af68cf85dec3fb86013cb79568bb30026" title="Performs a netlink transaction." alt="" coords="769,40,908,67"/><area shape="rect" id="node5" href="../../d9/df4/comm_8c.html#ab708cd00ae28bb68e7a53b6784f6f937" title="Helper method to create&amp;send request." alt="" coords="997,65,1165,92"/><area shape="rect" id="node6" href="../../d9/df4/comm_8c.html#a66ea56ce29053fb1d9ab6d337429652d" title="msg_transaction_response" alt="" coords="992,15,1171,41"/><area shape="rect" id="node8" href="../../d9/de3/node__connected__msg_8c.html#a45e600d75097425f8ca44f26b6aabf19" title="Called, when a detached node connects to the core node." alt="" coords="533,67,651,93"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="512,121,672,148"/><area shape="rect" id="node16" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="531,511,653,537"/><area shape="rect" id="node17" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="764,481,913,508"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="765,659,913,685"/><area shape="rect" id="node24" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1413,684,1547,711"/><area shape="rect" id="node19" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1000,583,1163,609"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1001,633,1162,660"/><area shape="rect" id="node21" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1004,785,1159,812"/><area shape="rect" id="node30" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1006,735,1157,761"/><area shape="rect" id="node22" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1219,785,1362,812"/><area shape="rect" id="node23" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1417,735,1543,761"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1419,785,1541,812"/><area shape="rect" id="node29" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1411,836,1549,863"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1598,735,1735,761"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1613,785,1720,812"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1607,836,1727,863"/><area shape="rect" id="node37" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="535,797,649,824"/><area shape="rect" id="node39" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="507,848,677,875"/><area shape="rect" id="node44" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="535,1051,649,1077"/><area shape="rect" id="node45" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="782,1025,895,1052"/><area shape="rect" id="node47" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="733,1076,944,1103"/><area shape="rect" id="node48" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="763,1127,914,1153"/><area shape="rect" id="node49" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="763,975,914,1001"/><area shape="rect" id="node46" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1010,1025,1153,1052"/><area shape="rect" id="node50" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1007,975,1156,1001"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1f0b8105727e4488dfdac8a85e8b7a03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnmigman_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>remote_requested</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Called on stop request </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00174">174</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>References <a class="el" href="../../d8/d87/director_8c_source.html#l00076">director_node_disconnected()</a>, and <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                                                                {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="../../d8/d87/director_8c.html#ad59c56c478f3a91729eded5d6da33615" title="Called, when a peer node disconnets.">director_node_disconnected</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>), 1, remote_requested);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/dd4/group__tcmi__ccnmigman__class_ga1f0b8105727e4488dfdac8a85e8b7a03_cgraph.png" border="0" usemap="#d3/dd4/group__tcmi__ccnmigman__class_ga1f0b8105727e4488dfdac8a85e8b7a03_cgraph" alt=""/></div>
<map name="d3/dd4/group__tcmi__ccnmigman__class_ga1f0b8105727e4488dfdac8a85e8b7a03_cgraph" id="d3/dd4/group__tcmi__ccnmigman__class_ga1f0b8105727e4488dfdac8a85e8b7a03_cgraph">
<area shape="rect" id="node2" href="../../d8/d87/director_8c.html#ad59c56c478f3a91729eded5d6da33615" title="Called, when a peer node disconnets." alt="" coords="208,81,392,108"/><area shape="rect" id="node15" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="217,132,383,159"/><area shape="rect" id="node3" href="../../de/dc6/node__disconnected__msg_8c.html#a2c31538ce071b19f0700dff2d5df37ce" title="Called, when a peer node disconnets." alt="" coords="441,81,575,108"/><area shape="rect" id="node4" href="../../d9/df4/comm_8c.html#af68cf85dec3fb86013cb79568bb30026" title="Performs a netlink transaction." alt="" coords="624,81,763,108"/><area shape="rect" id="node5" href="../../d9/df4/comm_8c.html#ab708cd00ae28bb68e7a53b6784f6f937" title="Helper method to create&amp;send request." alt="" coords="816,132,984,159"/><area shape="rect" id="node11" href="../../d9/df4/comm_8c.html#a66ea56ce29053fb1d9ab6d337429652d" title="msg_transaction_response" alt="" coords="811,56,989,83"/><area shape="rect" id="node6" href="../../d8/d7c/genl__ext_8c.html#ac461d0210fcfe8dde0588f23aebf9aab" title="genlmsg_unicast_tx &#45; wrapper around generic netlink unicast." alt="" coords="1049,107,1188,133"/><area shape="rect" id="node9" href="../../d9/df4/comm_8c.html#a4559dadd35469f8de48ab278303e40a0" title="Returns unique sequence number for transaction." alt="" coords="1062,157,1175,184"/><area shape="rect" id="node10" href="../../d9/df4/comm_8c.html#a5f190e32af9d5c630100bee151c00717" title="Returns pid of director process if there is user&#45;space director connected, 0 otherwise." alt="" coords="1044,208,1193,235"/><area shape="rect" id="node7" href="../../d8/d7c/genl__ext_8c.html#ad7afbee4ce89bce50e383aa7b2cce80c" title="genl_ext_lock" alt="" coords="1255,107,1358,133"/><area shape="rect" id="node8" href="../../d8/d7c/genl__ext_8c.html#a9ea9dfe0b2ad73e1306c736e66755b1d" title="genl_ext_unlock" alt="" coords="1249,56,1365,83"/><area shape="rect" id="node12" href="../../d9/df4/comm_8c.html#ae2479089f7107aec24a9c89a13101d0d" title="Checks, if the transaction returned an error." alt="" coords="1063,5,1174,32"/><area shape="rect" id="node13" href="../../d8/d7c/genl__ext_8c.html#a98fc505709c73b6933abbacd5a656cb9" title="Blocking read call that will read netlink response for the specified transaction." alt="" coords="1037,56,1200,83"/><area shape="rect" id="node14" href="../../d8/d7c/genl__ext_8c.html#a96c79abdde8010527de40d4806b4942c" title="__find_itx" alt="" coords="1268,5,1345,32"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="451,132,565,159"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac36370dd94cc6627faa274daee17c660"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_ccnmigman_stop_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Unregisters and releases all control files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00161">161</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>References <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00066">tcmi_ccnmigman::f_load</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d2/dc4/tcmi__ccnmigman_8h_source.html#l00074">TCMI_CCNMIGMAN</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00214">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00154">tcmi_ctlfs_file_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#d9/dc4/structtcmi__ccnmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_ccnmigman</a> *self_ccn = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gaa99d33b37040b510d78a8c11666fc942" title="Casts to the CCN migration manager.">TCMI_CCNMIGMAN</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI ctlfs files - CCN migman&quot;</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self_ccn-&gt;<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ad9aca34c81b5fc9e97a9184fb5f9af4a" title="TCMI ctlfs - reports current load of the remote PEN.">f_load</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self_ccn-&gt;<a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ad9aca34c81b5fc9e97a9184fb5f9af4a" title="TCMI ctlfs - reports current load of the remote PEN.">f_load</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/dd4/group__tcmi__ccnmigman__class_gac36370dd94cc6627faa274daee17c660_cgraph.png" border="0" usemap="#d3/dd4/group__tcmi__ccnmigman__class_gac36370dd94cc6627faa274daee17c660_cgraph" alt=""/></div>
<map name="d3/dd4/group__tcmi__ccnmigman__class_gac36370dd94cc6627faa274daee17c660_cgraph" id="d3/dd4/group__tcmi__ccnmigman__class_gac36370dd94cc6627faa274daee17c660_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="221,19,360,45"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="208,95,373,121"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="434,5,587,32"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="445,56,577,83"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="421,107,600,133"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="437,157,584,184"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="648,99,813,141"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gabcc1c030f0681988828e1a833cf9e122"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a> ccnmigman_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .init_ctlfs_files = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga2efc5d15da6ce6198ffa36b5a7b55c06" title="&lt;&lt;private&gt;&gt; Creates the static files described here .">tcmi_ccnmigman_init_ctlfs_files</a>, </div>
<div class="line">    .stop_ctlfs_files = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gac36370dd94cc6627faa274daee17c660" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files.">tcmi_ccnmigman_stop_ctlfs_files</a>,</div>
<div class="line">    .stop = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga1f0b8105727e4488dfdac8a85e8b7a03" title="&lt;&lt;private&gt;&gt; Called on stop request">tcmi_ccnmigman_stop</a>,</div>
<div class="line">    .free = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#gad14202bb85e3e54bf199068e99685ec8" title="&lt;&lt;private&gt;&gt; Called upon migman destruction.">tcmi_ccnmigman_free</a>,</div>
<div class="line">    .process_msg = <a class="code" href="../../d3/dd4/group__tcmi__ccnmigman__class.html#ga441c630e16042ba029e670ce173ddbca" title="&lt;&lt;private&gt;&gt; Processes a TCMI message m.">tcmi_ccnmigman_process_msg</a>,</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Migration manager operations that support polymorphism. </p>

<p>Definition at line <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00277">277</a> of file <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html">tcmi_ccnmigman.c</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00066">tcmi_ccnmigman_new()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Apr 7 2013 23:20:18 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
