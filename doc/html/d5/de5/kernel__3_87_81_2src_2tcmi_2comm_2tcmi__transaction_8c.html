<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: C:/CLONDIKE/clondike/sources/kernel_3.7.1/src/tcmi/comm/tcmi_transaction.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_transaction.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/types.h&gt;</code><br/>
<code>#include &lt;linux/random.h&gt;</code><br/>
<code>#include &lt;linux/jiffies.h&gt;</code><br/>
<code>#include &lt;linux/slab.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="../../df/d19/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8h_source.html">tcmi_transaction.h</a>&quot;</code><br/>
<code>#include &lt;dbg.h&gt;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for tcmi_transaction.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d0/df2/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c__incl.png" border="0" usemap="#C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c" alt=""/></div>
<map name="C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c" id="C_1_2CLONDIKE_2clondike_2sources_2kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c">
<area shape="rect" id="node6" href="../../df/d19/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8h.html" title="tcmi_transaction.h" alt="" coords="403,109,532,136"/></map>
</div>
</div>
<p><a href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0467515c137d9f642a15f017f5c1b7f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c.html#a0467515c137d9f642a15f017f5c1b7f0">TCMI_TRANSACTION_PRIVATE</a></td></tr>
<tr class="separator:a0467515c137d9f642a15f017f5c1b7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gada9d9436def8919a10997233cd6b5ea1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1">tcmi_transaction_new</a> (struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *transactions, u_int32_t resp_id, unsigned long timeout)</td></tr>
<tr class="memdesc:gada9d9436def8919a10997233cd6b5ea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Creates a new transaction.  <a href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1">More...</a><br/></td></tr>
<tr class="separator:gada9d9436def8919a10997233cd6b5ea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga653b1761a1b6e9fef415196c54e00768"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768">tcmi_transaction_start</a> (struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int <a class="el" href="../../d3/d32/kernel__3_87_81_2src_2tcmi_2ckpt_2tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97">flags</a>)</td></tr>
<tr class="memdesc:ga653b1761a1b6e9fef415196c54e00768"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Starts a transaction.  <a href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768">More...</a><br/></td></tr>
<tr class="separator:ga653b1761a1b6e9fef415196c54e00768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec110b630e8c0935ddddfb0529a03368"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#gaec110b630e8c0935ddddfb0529a03368">tcmi_transaction_abort</a> (struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaec110b630e8c0935ddddfb0529a03368"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Aborting the transaction requires:  <a href="../../d4/d8c/group__tcmi__transaction__class.html#gaec110b630e8c0935ddddfb0529a03368">More...</a><br/></td></tr>
<tr class="separator:gaec110b630e8c0935ddddfb0529a03368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga283a3e7e1414ff2eb5a49300c4af3208"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#ga283a3e7e1414ff2eb5a49300c4af3208">tcmi_transaction_complete</a> (struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *context, u_int32_t resp_id)</td></tr>
<tr class="memdesc:ga283a3e7e1414ff2eb5a49300c4af3208"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Completes a transaction and wakes up the processing thread.  <a href="../../d4/d8c/group__tcmi__transaction__class.html#ga283a3e7e1414ff2eb5a49300c4af3208">More...</a><br/></td></tr>
<tr class="separator:ga283a3e7e1414ff2eb5a49300c4af3208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb04fbb3689a2fffdef88873aa6cda62"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#gacb04fbb3689a2fffdef88873aa6cda62">tcmi_transaction_lookup</a> (struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *transactions, u_int32_t trans_id)</td></tr>
<tr class="memdesc:gacb04fbb3689a2fffdef88873aa6cda62"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Tries to find a transaction based on its ID.  <a href="../../d4/d8c/group__tcmi__transaction__class.html#gacb04fbb3689a2fffdef88873aa6cda62">More...</a><br/></td></tr>
<tr class="separator:gacb04fbb3689a2fffdef88873aa6cda62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2748d267a8fddd1ced86e73ba8efd079"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079">tcmi_transaction_put</a> (struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga2748d267a8fddd1ced86e73ba8efd079"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Releases the instance.  <a href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079">More...</a><br/></td></tr>
<tr class="separator:ga2748d267a8fddd1ced86e73ba8efd079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad66082869d71dbe73b9a0b60cb2f437c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c.html#gad66082869d71dbe73b9a0b60cb2f437c">tcmi_transaction_gen_id</a> (struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad66082869d71dbe73b9a0b60cb2f437c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Generates a transaction ID.  <a href="#gad66082869d71dbe73b9a0b60cb2f437c">More...</a><br/></td></tr>
<tr class="separator:gad66082869d71dbe73b9a0b60cb2f437c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga244e6188e1c4f9e1faba20d0892f5441"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c.html#ga244e6188e1c4f9e1faba20d0892f5441">tcmi_transaction_timer</a> (unsigned long trans)</td></tr>
<tr class="memdesc:ga244e6188e1c4f9e1faba20d0892f5441"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts.  <a href="#ga244e6188e1c4f9e1faba20d0892f5441">More...</a><br/></td></tr>
<tr class="separator:ga244e6188e1c4f9e1faba20d0892f5441"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a0467515c137d9f642a15f017f5c1b7f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_TRANSACTION_PRIVATE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html#l00037">37</a> of file <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html">tcmi_transaction.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad66082869d71dbe73b9a0b60cb2f437c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_transaction_gen_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction">tcmi_transaction</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Generates a transaction ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- this transaction instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html#l00361">361</a> of file <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html">tcmi_transaction.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, and <a class="el" href="../../d9/d7f/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__transaction_8h_source.html#l00099">TCMI_TRANSACTION_INVAL_ID</a>.</p>

<p>Referenced by <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html#l00068">tcmi_transaction_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    u_int32_t <span class="keywordtype">id</span> = <a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#gac546d01fab4d43f08caecc3f4fd7a90f" title="denotes an invalid transaction ID">TCMI_TRANSACTION_INVAL_ID</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">while</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#gac546d01fab4d43f08caecc3f4fd7a90f" title="denotes an invalid transaction ID">TCMI_TRANSACTION_INVAL_ID</a>) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        get_random_bytes(&amp;<span class="keywordtype">id</span>, <span class="keyword">sizeof</span>(u_int32_t));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keyword">self</span>-&gt;id = id;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Generated new transaction ID: %x&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga244e6188e1c4f9e1faba20d0892f5441"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_transaction_timer </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>trans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts. </p>
<p>This method is called upon timer expiration and means that no response has arrived so far, the transaction needs to be aborted. Expired flag is set to indicate that the timer has executed. This means that the 'complete' or 'abort' operations won't try to release the timer reference.</p>
<p>Also, the thread that handles the transaction is woken up.</p>
<p>Other transaction operations (complete, abort) are serialized with this method by means of del_timer_sync() - they cannot proceed any further until this method finishes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trans</td><td>- pointer to the transaction instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html#l00388">388</a> of file <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html">tcmi_transaction.c</a>.</p>

<p>References <a class="el" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h_source.html#l00220">mdbg</a>, <a class="el" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d9/d7f/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__transaction_8h_source.html#l00123">tcmi_transaction::state</a>, <a class="el" href="../../d9/d7f/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__transaction_8h_source.html#l00095">TCMI_TRANSACTION_ABORTED</a>, and <a class="el" href="../../dd/d1a/kernel__2_86_833_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html#l00328">tcmi_transaction_put()</a>.</p>

<p>Referenced by <a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_source.html#l00068">tcmi_transaction_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction" title="Compound structure holding transaction attributes.">tcmi_transaction</a> *<span class="keyword">self</span> = (<span class="keyword">struct </span><a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#d7/d6e/structtcmi__transaction" title="Compound structure holding transaction attributes.">tcmi_transaction</a>*) trans;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">self</span>-&gt;<a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#ad49e750d7fd796aaa8acf00a2d80d5da" title="transaction state.">state</a> = <a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#ggad5b94b8d233636d6d4f48b82ae08e59da390b6a98474b9960141360353fd0ac98">TCMI_TRANSACTION_ABORTED</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="../../de/d8f/kernel__2_86_833_81_2src_2dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Transaction ID %x expired, aborting..&quot;</span>, <a class="code" href="../../d9/d03/kernel__2_86_833_81_2src_2proxyfs_2proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;id);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    tcmi_transaction_set_expired(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    tcmi_transaction_notify_owner(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance.">tcmi_transaction_put</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_ga244e6188e1c4f9e1faba20d0892f5441_cgraph.png" border="0" usemap="#d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_ga244e6188e1c4f9e1faba20d0892f5441_cgraph" alt=""/></div>
<map name="d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_ga244e6188e1c4f9e1faba20d0892f5441_cgraph" id="d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c_ga244e6188e1c4f9e1faba20d0892f5441_cgraph">
<area shape="rect" id="node2" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="209,5,351,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li><li class="navelem"><a class="el" href="../../dir_08cfbe165ea603e6d179ff1f702f26c2.html">kernel_3.7.1</a></li><li class="navelem"><a class="el" href="../../dir_54993795d38a4b0939659b8e486bb0f5.html">src</a></li><li class="navelem"><a class="el" href="../../dir_d6db29d45a6ebf6e3bfdbb75b7b3a396.html">tcmi</a></li><li class="navelem"><a class="el" href="../../dir_7079c87ae415c5fed024c04b47a6fc98.html">comm</a></li><li class="navelem"><a class="el" href="../../d5/de5/kernel__3_87_81_2src_2tcmi_2comm_2tcmi__transaction_8c.html">tcmi_transaction.c</a></li>
    <li class="footer">Generated on Mon Apr 1 2013 16:10:29 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
