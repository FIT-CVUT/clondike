<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: kkc_sock class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported to Linux kernel 3.6.11</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/d8e/group__kkc__sock__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">kkc_sock class<div class="ingroups"><a class="el" href="../../de/d96/group__kkc__class.html">KKC</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a generic KKC socket.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for kkc_sock class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d6/d8e/group__kkc__sock__class.png" border="0" alt="" usemap="#d6_2d8e_2group____kkc____sock____class"/>
<map name="d6_2d8e_2group____kkc____sock____class" id="d6_2d8e_2group____kkc____sock____class">
<area shape="rect" id="node3" href="../../de/db6/group__kkc__sock__tcp__class.html" title="This class is a TCP socket." alt="" coords="267,5,405,32"/><area shape="rect" id="node2" href="../../de/d96/group__kkc__class.html" title="KKC is a &lt;&lt;singleton&gt;&gt; class that provides interkernel communication facility." alt="" coords="6,5,55,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:de/db6/group__kkc__sock__tcp__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/db6/group__kkc__sock__tcp__class.html">kkc_sock_tcp class</a></td></tr>
<tr class="memdesc:de/db6/group__kkc__sock__tcp__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is a TCP socket. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:da/d0d/structkkc__sock"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a></td></tr>
<tr class="memdesc:da/d0d/structkkc__sock"><td class="mdescLeft">&#160;</td><td class="mdescRight">A coumpound structure that contains generic information about a KKC socket.  <a href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">More...</a><br/></td></tr>
<tr class="separator:da/d0d/structkkc__sock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d9/db1/structkkc__sock__ops"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops">kkc_sock_ops</a></td></tr>
<tr class="memdesc:d9/db1/structkkc__sock__ops"><td class="mdescLeft">&#160;</td><td class="mdescRight">Socket operations that support polymorphism.  <a href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops">More...</a><br/></td></tr>
<tr class="separator:d9/db1/structkkc__sock__ops"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga22cf4745e4dd8b649e6b3fb4eb96ed66"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66">KKC_SOCK_MAX_ADDR_LENGTH</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:ga22cf4745e4dd8b649e6b3fb4eb96ed66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum address length.  <a href="#ga22cf4745e4dd8b649e6b3fb4eb96ed66">More...</a><br/></td></tr>
<tr class="separator:ga22cf4745e4dd8b649e6b3fb4eb96ed66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5dca00ea3136d4d6d01c26dc134443b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gad5dca00ea3136d4d6d01c26dc134443b">KKC_SOCK</a>(s)&#160;&#160;&#160;((struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a>*)s)</td></tr>
<tr class="memdesc:gad5dca00ea3136d4d6d01c26dc134443b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket.">kkc_sock</a> instance.  <a href="#gad5dca00ea3136d4d6d01c26dc134443b">More...</a><br/></td></tr>
<tr class="separator:gad5dca00ea3136d4d6d01c26dc134443b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaa586ee02e04fd3fdde1940337426caf3"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaa586ee02e04fd3fdde1940337426caf3">kkc_data_ready</a> )(void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>, int bytes)</td></tr>
<tr class="memdesc:gaa586ee02e04fd3fdde1940337426caf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function prototype, that can be registered to be notified about in case there are some data ready to be read on a socket.  <a href="#gaa586ee02e04fd3fdde1940337426caf3">More...</a><br/></td></tr>
<tr class="separator:gaa586ee02e04fd3fdde1940337426caf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga285317c87701990317a59884b3db40da"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a> { <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa0766d1e1bec0bb50862530f5a53c9c70">KKC_SOCK_BLOCK</a>, 
<a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa34e5e1c2017bb76800a1d3a894dae9d1">KKC_SOCK_NONBLOCK</a>
 }</td></tr>
<tr class="memdesc:ga285317c87701990317a59884b3db40da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags for receive and accept operations.  <a href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">More...</a><br/></td></tr>
<tr class="separator:ga285317c87701990317a59884b3db40da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaff5e8804c93f0cb2a4b5e2e12f64e743"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743">kkc_sock_send_recv</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *buf, int buflen, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a> <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97">flags</a>, int(*kkc_sock_method)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, void *, int, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>))</td></tr>
<tr class="memdesc:gaff5e8804c93f0cb2a4b5e2e12f64e743"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Transfers a required number of bytes.  <a href="#gaff5e8804c93f0cb2a4b5e2e12f64e743">More...</a><br/></td></tr>
<tr class="separator:gaff5e8804c93f0cb2a4b5e2e12f64e743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga112d3dd5b05f7fad91087869eee741d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga112d3dd5b05f7fad91087869eee741d9">kkc_sock_init</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch">kkc_arch</a> *arch, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops">kkc_sock_ops</a> *sock_ops)</td></tr>
<tr class="memdesc:ga112d3dd5b05f7fad91087869eee741d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Initializes generic socket.  <a href="#ga112d3dd5b05f7fad91087869eee741d9">More...</a><br/></td></tr>
<tr class="separator:ga112d3dd5b05f7fad91087869eee741d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb00f44a4d56997c5c04ed3ceb26c15b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gabb00f44a4d56997c5c04ed3ceb26c15b">kkc_sock_connect</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *addr)</td></tr>
<tr class="memdesc:gabb00f44a4d56997c5c04ed3ceb26c15b"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Connects to the given address  <a href="#gabb00f44a4d56997c5c04ed3ceb26c15b">More...</a><br/></td></tr>
<tr class="separator:gabb00f44a4d56997c5c04ed3ceb26c15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77e4c63fcf522765937e3b985c124ebc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga77e4c63fcf522765937e3b985c124ebc">kkc_sock_listen</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *addr)</td></tr>
<tr class="memdesc:ga77e4c63fcf522765937e3b985c124ebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Starts listening on a specified address  <a href="#ga77e4c63fcf522765937e3b985c124ebc">More...</a><br/></td></tr>
<tr class="separator:ga77e4c63fcf522765937e3b985c124ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec7594491d8ea6c92c974467bc66052e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaec7594491d8ea6c92c974467bc66052e">kkc_sock_accept</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **new_kkc_sock, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a> <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97">flags</a>)</td></tr>
<tr class="memdesc:gaec7594491d8ea6c92c974467bc66052e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming socket.  <a href="#gaec7594491d8ea6c92c974467bc66052e">More...</a><br/></td></tr>
<tr class="separator:gaec7594491d8ea6c92c974467bc66052e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad734b131e2ab00e8d7fa30737fc2f5ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad">kkc_sock_send</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *buf, int buflen, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a> <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97">flags</a>)</td></tr>
<tr class="memdesc:gad734b131e2ab00e8d7fa30737fc2f5ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Sends out specified data.  <a href="#gad734b131e2ab00e8d7fa30737fc2f5ad">More...</a><br/></td></tr>
<tr class="separator:gad734b131e2ab00e8d7fa30737fc2f5ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadafc7c835c7d6d94be66f61a050108b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gadafc7c835c7d6d94be66f61a050108b7">kkc_sock_recv</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *buf, int buflen, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a> <a class="el" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97">flags</a>)</td></tr>
<tr class="memdesc:gadafc7c835c7d6d94be66f61a050108b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Receives requested number of bytes of data.  <a href="#gadafc7c835c7d6d94be66f61a050108b7">More...</a><br/></td></tr>
<tr class="separator:gadafc7c835c7d6d94be66f61a050108b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77b3979c63c1671de3cd3cd077fe72d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga77b3979c63c1671de3cd3cd077fe72d3">kkc_sock_shutdown</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga77b3979c63c1671de3cd3cd077fe72d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Disconnects the socket.  <a href="#ga77b3979c63c1671de3cd3cd077fe72d3">More...</a><br/></td></tr>
<tr class="separator:ga77b3979c63c1671de3cd3cd077fe72d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga980a8df7e87a7e87c02cdae7bc221a53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga980a8df7e87a7e87c02cdae7bc221a53">kkc_sock_add_wait_queue</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, wait_queue_t *wait)</td></tr>
<tr class="memdesc:ga980a8df7e87a7e87c02cdae7bc221a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Adds a task to the queue of processes sleeping on the socket.  <a href="#ga980a8df7e87a7e87c02cdae7bc221a53">More...</a><br/></td></tr>
<tr class="separator:ga980a8df7e87a7e87c02cdae7bc221a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaea15a738e84235d0594ad65af7f4505"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505">kkc_sock_remove_wait_queue</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, wait_queue_t *wait)</td></tr>
<tr class="memdesc:gaaea15a738e84235d0594ad65af7f4505"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket.  <a href="#gaaea15a738e84235d0594ad65af7f4505">More...</a><br/></td></tr>
<tr class="separator:gaaea15a738e84235d0594ad65af7f4505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae3f9fa27f3adcdbfaca7fab91f0c879"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaae3f9fa27f3adcdbfaca7fab91f0c879">kkc_sock_register_read_callback</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaa586ee02e04fd3fdde1940337426caf3">kkc_data_ready</a> <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435">callback</a>, void *callback_data)</td></tr>
<tr class="memdesc:gaae3f9fa27f3adcdbfaca7fab91f0c879"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Registers data_ready callback function, that should be called when there are some data read to be read on the socket  <a href="#gaae3f9fa27f3adcdbfaca7fab91f0c879">More...</a><br/></td></tr>
<tr class="separator:gaae3f9fa27f3adcdbfaca7fab91f0c879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac08d05e2be11ce3c48c57f9babcd597e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gac08d05e2be11ce3c48c57f9babcd597e">kkc_sock_is_address_equal_to</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, const char *addr, int addr_length, int local)</td></tr>
<tr class="memdesc:gac08d05e2be11ce3c48c57f9babcd597e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Checks, whether an address passed as string is equal to this socket local/peer port.  <a href="#gac08d05e2be11ce3c48c57f9babcd597e">More...</a><br/></td></tr>
<tr class="separator:gac08d05e2be11ce3c48c57f9babcd597e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cae649f56c8f5fa18f755f6c7d53597"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597">kkc_sock_getsockname</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *sockname, int <a class="el" href="../../d8/d08/tcmi__ppm__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f">size</a>)</td></tr>
<tr class="memdesc:ga3cae649f56c8f5fa18f755f6c7d53597"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Local socket name accessor.  <a href="#ga3cae649f56c8f5fa18f755f6c7d53597">More...</a><br/></td></tr>
<tr class="separator:ga3cae649f56c8f5fa18f755f6c7d53597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf1b231c727891d5ac2d32646d574931"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931">kkc_sock_getpeername</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *sockname, int <a class="el" href="../../d8/d08/tcmi__ppm__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f">size</a>)</td></tr>
<tr class="memdesc:gadf1b231c727891d5ac2d32646d574931"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Peer socket name accessor.  <a href="#gadf1b231c727891d5ac2d32646d574931">More...</a><br/></td></tr>
<tr class="separator:gadf1b231c727891d5ac2d32646d574931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga705b6d499116fcd74f3d5bdfcbf7564d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga705b6d499116fcd74f3d5bdfcbf7564d">kkc_sock_getarchname</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *archname, int <a class="el" href="../../d8/d08/tcmi__ppm__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f">size</a>)</td></tr>
<tr class="memdesc:ga705b6d499116fcd74f3d5bdfcbf7564d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Architecture name accessor.  <a href="#ga705b6d499116fcd74f3d5bdfcbf7564d">More...</a><br/></td></tr>
<tr class="separator:ga705b6d499116fcd74f3d5bdfcbf7564d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8e64f52015e75cb76a34c4b7e9ef176"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176">kkc_sock_getsockname2</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gac8e64f52015e75cb76a34c4b7e9ef176"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Socket name accessor.  <a href="#gac8e64f52015e75cb76a34c4b7e9ef176">More...</a><br/></td></tr>
<tr class="separator:gac8e64f52015e75cb76a34c4b7e9ef176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00d8b033d3e1118303e7b4c54c6aafe6"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6">kkc_sock_getpeername2</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga00d8b033d3e1118303e7b4c54c6aafe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Socket name accessor.  <a href="#ga00d8b033d3e1118303e7b4c54c6aafe6">More...</a><br/></td></tr>
<tr class="separator:ga00d8b033d3e1118303e7b4c54c6aafe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabada9f8c5976a6aff07529239acdf727"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727">kkc_sock_get</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gabada9f8c5976a6aff07529239acdf727"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count.  <a href="#gabada9f8c5976a6aff07529239acdf727">More...</a><br/></td></tr>
<tr class="separator:gabada9f8c5976a6aff07529239acdf727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f980056fbf3436596c4cfdf3913e85c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c">kkc_sock_put</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga9f980056fbf3436596c4cfdf3913e85c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined.  <a href="#ga9f980056fbf3436596c4cfdf3913e85c">More...</a><br/></td></tr>
<tr class="separator:ga9f980056fbf3436596c4cfdf3913e85c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga141590d302ece9990e5c8cdd82a3c3d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8">kkc_sock_snd_lock_interruptible</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga141590d302ece9990e5c8cdd82a3c3d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up by a signal.  <a href="#ga141590d302ece9990e5c8cdd82a3c3d8">More...</a><br/></td></tr>
<tr class="separator:ga141590d302ece9990e5c8cdd82a3c3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9c8a5fafeb097a15269d70bd686c885"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaf9c8a5fafeb097a15269d70bd686c885">kkc_sock_snd_lock</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaf9c8a5fafeb097a15269d70bd686c885"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks this socket instance for sending.  <a href="#gaf9c8a5fafeb097a15269d70bd686c885">More...</a><br/></td></tr>
<tr class="separator:gaf9c8a5fafeb097a15269d70bd686c885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga841d6dff84842f19540eae27c37fcb4c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c">kkc_sock_snd_unlock</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga841d6dff84842f19540eae27c37fcb4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending.  <a href="#ga841d6dff84842f19540eae27c37fcb4c">More...</a><br/></td></tr>
<tr class="separator:ga841d6dff84842f19540eae27c37fcb4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga111890916880384e47495e8859f57c95"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga111890916880384e47495e8859f57c95">kkc_sock_rcv_lock_interruptible</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga111890916880384e47495e8859f57c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks this socket instance for receiving, interruptible version, the process can be woken up by a signal.  <a href="#ga111890916880384e47495e8859f57c95">More...</a><br/></td></tr>
<tr class="separator:ga111890916880384e47495e8859f57c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f0fff54291df68d7dbb12358517d679"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga2f0fff54291df68d7dbb12358517d679">kkc_sock_rcv_lock</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga2f0fff54291df68d7dbb12358517d679"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Locks this socket instance for receiving.  <a href="#ga2f0fff54291df68d7dbb12358517d679">More...</a><br/></td></tr>
<tr class="separator:ga2f0fff54291df68d7dbb12358517d679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82295120b31f3818bbc9b9a462a22b56"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga82295120b31f3818bbc9b9a462a22b56">kkc_sock_rcv_unlock</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga82295120b31f3818bbc9b9a462a22b56"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Unlocks this socket instance for receiving.  <a href="#ga82295120b31f3818bbc9b9a462a22b56">More...</a><br/></td></tr>
<tr class="separator:ga82295120b31f3818bbc9b9a462a22b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is a generic KKC socket. </p>
<p>It handles basic administration of the generic socket, initialization of common socket parameters, and releasing the socket instance. It is questionable if a regular BSD socket should be included into the compound structure or not. Currently, there is no other communication abstraction in Linux other than sockets. For now, the BSD socket handling functionality will be in child classes (e.g. <a class="el" href="../../de/db6/group__kkc__sock__tcp__class.html#dc/d76/structkkc__sock__tcp" title="A coumpound structure that contains TCP socket specific information.">kkc_sock_tcp</a>). For the common part for all network architectures, we will keep only the address in string form in the kkc_socket super class.</p>
<p>KKC socket is meant for full duplex communication. In addition, it provides locking mechanism that allows separate serialization of send and receive requests. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="da/d0d/structkkc__sock" id="da/d0d/structkkc__sock"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kkc_sock</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A coumpound structure that contains generic information about a KKC socket. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00073">73</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for kkc_sock:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/dec/structkkc__sock__coll__graph.png" border="0" usemap="#kkc__sock_coll__map" alt="Collaboration graph"/></div>
<map name="kkc__sock_coll__map" id="kkc__sock_coll__map">
<area shape="rect" id="node2" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="39,213,113,320"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="5,5,147,83"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="138,147,301,386"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7eb41a1c2bdccfc1cf986062f859af8f"></a>struct <a class="el" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch">kkc_arch</a> *</td>
<td class="fieldname">
arch</td>
<td class="fielddoc">
architecture for this socket - the reason why we keep the reference is the release the reference to the architecture, if the socket has been created based on user string. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1c29c880ba1fe696ed776932c6056373"></a>char</td>
<td class="fieldname">
peername[100]</td>
<td class="fielddoc">
remote address ('name') of the socket object - temporary storage. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a355c007ff93f7b99e10f25efccbdb7d8"></a>struct list_head</td>
<td class="fieldname">
pub_list</td>
<td class="fielddoc">
general purpose list entry for storing sockets </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aea08ff0599264f82f11bd7223deba341"></a>atomic_t</td>
<td class="fieldname">
ref_count</td>
<td class="fielddoc">
reference counter </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5b03cea3c6e3d438b838cffd5f1f4769"></a>struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops">kkc_sock_ops</a> *</td>
<td class="fieldname">
sock_ops</td>
<td class="fielddoc">
message operations </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a80d4d40ca4b1f9bc4413fea4bd03c649"></a>struct semaphore</td>
<td class="fieldname">
sock_recv_sem</td>
<td class="fielddoc">
mutex semaphore to serialize receiving from the socket. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a80d1656e21603867377941ef2d618b1d"></a>struct semaphore</td>
<td class="fieldname">
sock_send_sem</td>
<td class="fielddoc">
mutex semaphore to serialize sending via the socket. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2a1d3e64013fde46b2ad4762a520ea96"></a>char</td>
<td class="fieldname">
sockname[100]</td>
<td class="fielddoc">
local address ('name') of the socket object - temporary storage. </td></tr>
</table>

</div>
</div>
<a name="d9/db1/structkkc__sock__ops" id="d9/db1/structkkc__sock__ops"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kkc_sock_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Socket operations that support polymorphism. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00106">106</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for kkc_sock_ops:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d0/d65/structkkc__sock__ops__coll__graph.png" border="0" usemap="#kkc__sock__ops_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:aeb4b1d89ab17fd30b32e8ab3bb50e301"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#aeb4b1d89ab17fd30b32e8ab3bb50e301">connect</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *)</td></tr>
<tr class="memdesc:aeb4b1d89ab17fd30b32e8ab3bb50e301"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the given address.  <a href="#aeb4b1d89ab17fd30b32e8ab3bb50e301">More...</a><br/></td></tr>
<tr class="separator:aeb4b1d89ab17fd30b32e8ab3bb50e301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4363563761ab7cde2e3e06cf59849cd"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ac4363563761ab7cde2e3e06cf59849cd">listen</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *)</td></tr>
<tr class="memdesc:ac4363563761ab7cde2e3e06cf59849cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the given address.  <a href="#ac4363563761ab7cde2e3e06cf59849cd">More...</a><br/></td></tr>
<tr class="separator:ac4363563761ab7cde2e3e06cf59849cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa31a1b14e344034a9d2aac8ee4c6b590"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#aa31a1b14e344034a9d2aac8ee4c6b590">accept</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)</td></tr>
<tr class="memdesc:aa31a1b14e344034a9d2aac8ee4c6b590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accepts an incoming socket.  <a href="#aa31a1b14e344034a9d2aac8ee4c6b590">More...</a><br/></td></tr>
<tr class="separator:aa31a1b14e344034a9d2aac8ee4c6b590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb20cb86c96d332747a9ce413eda76b7"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#abb20cb86c96d332747a9ce413eda76b7">send</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, void *, int, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)</td></tr>
<tr class="memdesc:abb20cb86c96d332747a9ce413eda76b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends out specified data.  <a href="#abb20cb86c96d332747a9ce413eda76b7">More...</a><br/></td></tr>
<tr class="separator:abb20cb86c96d332747a9ce413eda76b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8201793c05dab335c81e98949a11b0c0"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#a8201793c05dab335c81e98949a11b0c0">recv</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, void *, int, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)</td></tr>
<tr class="memdesc:a8201793c05dab335c81e98949a11b0c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives requested number of bytes of data.  <a href="#a8201793c05dab335c81e98949a11b0c0">More...</a><br/></td></tr>
<tr class="separator:a8201793c05dab335c81e98949a11b0c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007b41a2bdaa7b17892c29a448b5d914"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#a007b41a2bdaa7b17892c29a448b5d914">add_wait_queue</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, wait_queue_t *)</td></tr>
<tr class="memdesc:a007b41a2bdaa7b17892c29a448b5d914"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a task to the queue of processes waiting on incoming data.  <a href="#a007b41a2bdaa7b17892c29a448b5d914">More...</a><br/></td></tr>
<tr class="separator:a007b41a2bdaa7b17892c29a448b5d914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a341f974a3ed758f4980a4b2489122"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#a51a341f974a3ed758f4980a4b2489122">remove_wait_queue</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, wait_queue_t *)</td></tr>
<tr class="memdesc:a51a341f974a3ed758f4980a4b2489122"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a task from the queue of processes waiting on incoming data.  <a href="#a51a341f974a3ed758f4980a4b2489122">More...</a><br/></td></tr>
<tr class="separator:a51a341f974a3ed758f4980a4b2489122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09bad5f9238d9dd42b58e62e9bc97996"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#a09bad5f9238d9dd42b58e62e9bc97996">register_read_callback</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaa586ee02e04fd3fdde1940337426caf3">kkc_data_ready</a> <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435">callback</a>, void *callback_data)</td></tr>
<tr class="memdesc:a09bad5f9238d9dd42b58e62e9bc97996"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers read callback.  <a href="#a09bad5f9238d9dd42b58e62e9bc97996">More...</a><br/></td></tr>
<tr class="separator:a09bad5f9238d9dd42b58e62e9bc97996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa964d9f886773dcc0fb654812bf9b533"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#aa964d9f886773dcc0fb654812bf9b533">shutdown</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *)</td></tr>
<tr class="memdesc:aa964d9f886773dcc0fb654812bf9b533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects the socket.  <a href="#aa964d9f886773dcc0fb654812bf9b533">More...</a><br/></td></tr>
<tr class="separator:aa964d9f886773dcc0fb654812bf9b533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf41417598ec77246ce74d452e0e405"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#afcf41417598ec77246ce74d452e0e405">free</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *)</td></tr>
<tr class="memdesc:afcf41417598ec77246ce74d452e0e405"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees socket architecture specific resources.  <a href="#afcf41417598ec77246ce74d452e0e405">More...</a><br/></td></tr>
<tr class="separator:afcf41417598ec77246ce74d452e0e405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dea3413c43886fd25d778608a97acbe"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#a5dea3413c43886fd25d778608a97acbe">getname</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *, int, int)</td></tr>
<tr class="memdesc:a5dea3413c43886fd25d778608a97acbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Socket name/peer name accessor.  <a href="#a5dea3413c43886fd25d778608a97acbe">More...</a><br/></td></tr>
<tr class="separator:a5dea3413c43886fd25d778608a97acbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb69cd6bc6c27711ee15ef27ac643fe5"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#afb69cd6bc6c27711ee15ef27ac643fe5">is_address_equal_to</a> )(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, const char *, int, int)</td></tr>
<tr class="memdesc:afb69cd6bc6c27711ee15ef27ac643fe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare addresses.  <a href="#afb69cd6bc6c27711ee15ef27ac643fe5">More...</a><br/></td></tr>
<tr class="separator:afb69cd6bc6c27711ee15ef27ac643fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="aa31a1b14e344034a9d2aac8ee4c6b590"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::accept)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accepts an incoming socket. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00112">112</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="a007b41a2bdaa7b17892c29a448b5d914"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::add_wait_queue)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, wait_queue_t *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a task to the queue of processes waiting on incoming data. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00118">118</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="aeb4b1d89ab17fd30b32e8ab3bb50e301"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::connect)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connects to the given address. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00108">108</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="afcf41417598ec77246ce74d452e0e405"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* kkc_sock_ops::free)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees socket architecture specific resources. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00126">126</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5dea3413c43886fd25d778608a97acbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::getname)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *, int, int)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Socket name/peer name accessor. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00128">128</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="afb69cd6bc6c27711ee15ef27ac643fe5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::is_address_equal_to)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, const char *, int, int)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare addresses. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00130">130</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac4363563761ab7cde2e3e06cf59849cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::listen)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connects to the given address. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00110">110</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8201793c05dab335c81e98949a11b0c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::recv)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, void *, int, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives requested number of bytes of data. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00116">116</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="a09bad5f9238d9dd42b58e62e9bc97996"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::register_read_callback)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaa586ee02e04fd3fdde1940337426caf3">kkc_data_ready</a> <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435">callback</a>, void *callback_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers read callback. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00122">122</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="a51a341f974a3ed758f4980a4b2489122"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::remove_wait_queue)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, wait_queue_t *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a task from the queue of processes waiting on incoming data. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00120">120</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb20cb86c96d332747a9ce413eda76b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::send)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, void *, int, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends out specified data. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00114">114</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa964d9f886773dcc0fb654812bf9b533"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* kkc_sock_ops::shutdown)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnects the socket. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00124">124</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gad5dca00ea3136d4d6d01c26dc134443b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KKC_SOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a>*)s)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket.">kkc_sock</a> instance. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00353">353</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">kkc_establish()</a>, <a class="el" href="../../d9/d75/kkc__sock__tcp_8c_source.html#l00192">kkc_sock_tcp_accept()</a>, and <a class="el" href="../../d9/d75/kkc__sock__tcp_8c_source.html#l00066">kkc_sock_tcp_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga22cf4745e4dd8b649e6b3fb4eb96ed66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KKC_SOCK_MAX_ADDR_LENGTH&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum address length. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00060">60</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">kkc_establish()</a>, <a class="el" href="../../d0/d94/kkc_8c_source.html#l00148">kkc_get_architecture()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00241">kkc_sock_getpeername2()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00226">kkc_sock_getsockname2()</a>, <a class="el" href="../../d9/d75/kkc__sock__tcp_8c_source.html#l00479">kkc_sock_tcp_is_address_equal_to()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00048">mount_proxyfs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00751">tcmi_migman_create_symlink()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00175">tcmi_sock_getpeername()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00160">tcmi_sock_getsockname()</a>, and <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaa586ee02e04fd3fdde1940337426caf3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* kkc_data_ready)(void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>, int bytes)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function prototype, that can be registered to be notified about in case there are some data ready to be read on a socket. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00103">103</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga285317c87701990317a59884b3db40da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags for receive and accept operations. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga285317c87701990317a59884b3db40daa0766d1e1bec0bb50862530f5a53c9c70"></a>KKC_SOCK_BLOCK</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga285317c87701990317a59884b3db40daa34e5e1c2017bb76800a1d3a894dae9d1"></a>KKC_SOCK_NONBLOCK</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00064">64</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;             {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">/* blocking mode operation */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa0766d1e1bec0bb50862530f5a53c9c70">KKC_SOCK_BLOCK</a>,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">/* non-blocking mode operation */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa34e5e1c2017bb76800a1d3a894dae9d1">KKC_SOCK_NONBLOCK</a></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;} <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da" title="Flags for receive and accept operations.">kkc_sock_flags_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaec7594491d8ea6c92c974467bc66052e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_accept </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **&#160;</td>
          <td class="paramname"><em>new_kkc_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming socket. </p>
<p>&lt;&lt;public&gt;&gt; Creates a new socket by accepting the incoming socket.</p>
<p>Delegates work to the architecture specific class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">**new_kkc_sock</td><td>- storage for the new socket created for the incoming connection. </td></tr>
    <tr><td class="paramname">flags</td><td>- specify blocking/nonblocking mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful connection </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00113">113</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00108">proxyfs_server_accept()</a>, and <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Accepting connection..&quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#aa31a1b14e344034a9d2aac8ee4c6b590" title="Accepts an incoming socket.">accept</a>)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;accept(<span class="keyword">self</span>, new_kkc_sock, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga980a8df7e87a7e87c02cdae7bc221a53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_add_wait_queue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wait_queue_t *&#160;</td>
          <td class="paramname"><em>wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Adds a task to the queue of processes sleeping on the socket. </p>
<p>Delegates work to the specific socket class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*wait</td><td>- pointer to the waitqueue element with the task that wants to sleep on this socket. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00207">207</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00072">kkc_sock_sleeper_add()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00233">proxyfs_peer_wait()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00092">proxyfs_server_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a007b41a2bdaa7b17892c29a448b5d914" title="Adds a task to the queue of processes waiting on incoming data.">add_wait_queue</a>)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;add_wait_queue(<span class="keyword">self</span>, wait);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gabb00f44a4d56997c5c04ed3ceb26c15b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Connects to the given address </p>
<p>&lt;&lt;public&gt;&gt; Connects to the given address</p>
<p>Delegates all work to the architecture specific socket operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*addr</td><td>- address where to connect to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful connection </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00074">74</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00050">kkc_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Connecting to &#39;%s&#39; ..&quot;</span>, addr);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#aeb4b1d89ab17fd30b32e8ab3bb50e301" title="Connects to the given address.">connect</a>)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;connect(<span class="keyword">self</span>, addr);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gabada9f8c5976a6aff07529239acdf727"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a>* kkc_sock_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this message instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00253">253</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">tcmi_comm_new()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">tcmi_task_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;{</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        atomic_inc(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#aea08ff0599264f82f11bd7223deba341" title="reference counter">ref_count</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga705b6d499116fcd74f3d5bdfcbf7564d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_getarchname </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>archname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Architecture name accessor. </p>
<p>Asks the architecture to fill in its name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*archname</td><td>- pointer to the buffer where the architecture name is to be stored </td></tr>
    <tr><td class="paramname">size</td><td>- maximum string length that fits into the sockname buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00212">212</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/d6e/kkc__arch_8h_source.html#l00125">kkc_arch_name()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00048">mount_proxyfs()</a>, and <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00190">tcmi_sock_getarchname()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    strncpy(archname, <a class="code" href="../../d5/ddf/group__kkc__arch__class.html#ga84a8539c1971651af4a8ad753c7853e5" title="&lt;&lt;public&gt;&gt; Architecture name accessor.">kkc_arch_name</a>(self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a7eb41a1c2bdccfc1cf986062f859af8f" title="architecture for this socket - the reason why we keep the reference is the release the reference to t...">arch</a>), <a class="code" href="../../d5/d20/tcmi__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f" title="size of the checkpoint name in bytes (including trailing zero)">size</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d8e/group__kkc__sock__class_ga705b6d499116fcd74f3d5bdfcbf7564d_cgraph.png" border="0" usemap="#d6/d8e/group__kkc__sock__class_ga705b6d499116fcd74f3d5bdfcbf7564d_cgraph" alt=""/></div>
<map name="d6/d8e/group__kkc__sock__class_ga705b6d499116fcd74f3d5bdfcbf7564d_cgraph" id="d6/d8e/group__kkc__sock__class_ga705b6d499116fcd74f3d5bdfcbf7564d_cgraph">
<area shape="rect" id="node2" href="../../d5/ddf/group__kkc__arch__class.html#ga84a8539c1971651af4a8ad753c7853e5" title="&lt;&lt;public&gt;&gt; Architecture name accessor." alt="" coords="213,5,328,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadf1b231c727891d5ac2d32646d574931"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_getpeername </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sockname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Peer socket name accessor. </p>
<p>Asks the architecture specific socket to fill in its remote name (destination address). The generic socket operation getname() is used, passing 1 selects the peer name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*sockname</td><td>- pointer to the buffer where the sockname is to be stored </td></tr>
    <tr><td class="paramname">size</td><td>- maximum string length that fits into the sockname buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00196">196</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00241">kkc_sock_getpeername2()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00048">mount_proxyfs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00751">tcmi_migman_create_symlink()</a>, and <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00175">tcmi_sock_getpeername()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5dea3413c43886fd25d778608a97acbe" title="Socket name/peer name accessor.">getname</a>)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        err = <span class="keyword">self</span>-&gt;sock_ops-&gt;getname(<span class="keyword">self</span>, sockname, <a class="code" href="../../d5/d20/tcmi__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f" title="size of the checkpoint name in bytes (including trailing zero)">size</a>, 1);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga00d8b033d3e1118303e7b4c54c6aafe6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* kkc_sock_getpeername2 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Socket name accessor. </p>
<p>Unlike the previous version, returns pointer to the socket local name. The socket local name is stored inside the instance. Having this method makes it easier to use it inside print statements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>to the local socket name </dd></dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00241">241</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00196">kkc_sock_getpeername()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00060">KKC_SOCK_MAX_ADDR_LENGTH</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00271">kkc_sock_put()</a>, <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00072">kkc_sock_sleeper_add()</a>, <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00105">kkc_sock_sleeper_remove()</a>, <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00151">proxyfs_msg_real_send()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00087">proxyfs_peer_put()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00149">proxyfs_peer_real_recv()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00116">proxyfs_peer_real_send()</a>, <a class="el" href="../../d5/dc9/proxyfs__task_8c_source.html#l00262">proxyfs_task_handle_dead_peers()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00552">tcmi_ccnman_thread()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00214">tcmi_ccnmigman_process_msg()</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">tcmi_comm_thread()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    memset(self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a1c29c880ba1fe696ed776932c6056373" title="remote address (&#39;name&#39;) of the socket object - temporary storage.">peername</a>, 0, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor.">kkc_sock_getpeername</a>(<span class="keyword">self</span>, self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a1c29c880ba1fe696ed776932c6056373" title="remote address (&#39;name&#39;) of the socket object - temporary storage.">peername</a>, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;peername;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d8e/group__kkc__sock__class_ga00d8b033d3e1118303e7b4c54c6aafe6_cgraph.png" border="0" usemap="#d6/d8e/group__kkc__sock__class_ga00d8b033d3e1118303e7b4c54c6aafe6_cgraph" alt=""/></div>
<map name="d6/d8e/group__kkc__sock__class_ga00d8b033d3e1118303e7b4c54c6aafe6_cgraph" id="d6/d8e/group__kkc__sock__class_ga00d8b033d3e1118303e7b4c54c6aafe6_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="221,5,381,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3cae649f56c8f5fa18f755f6c7d53597"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_getsockname </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sockname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Local socket name accessor. </p>
<p>Asks the architecture specific socket to fill in its local name (address). The generic socket operation getname() is used, passing 0 selects the local name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*sockname</td><td>- pointer to the buffer where the sockname is to be stored </td></tr>
    <tr><td class="paramname">size</td><td>- maximum string length that fits into the sockname buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00178">178</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00226">kkc_sock_getsockname2()</a>, and <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00160">tcmi_sock_getsockname()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5dea3413c43886fd25d778608a97acbe" title="Socket name/peer name accessor.">getname</a>)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        err = <span class="keyword">self</span>-&gt;sock_ops-&gt;getname(<span class="keyword">self</span>, sockname, <a class="code" href="../../d5/d20/tcmi__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f" title="size of the checkpoint name in bytes (including trailing zero)">size</a>, 0);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gac8e64f52015e75cb76a34c4b7e9ef176"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* kkc_sock_getsockname2 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Socket name accessor. </p>
<p>Unlike the previous version, returns pointer to the socket local name. The socket local name is stored inside the instance. Having this method makes it easier to use it inside print statements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>to the local socket name </dd></dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00226">226</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00178">kkc_sock_getsockname()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00060">KKC_SOCK_MAX_ADDR_LENGTH</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00271">kkc_sock_put()</a>, <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00072">kkc_sock_sleeper_add()</a>, <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00105">kkc_sock_sleeper_remove()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00552">tcmi_ccnman_thread()</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">tcmi_comm_thread()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>, and <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    memset(self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a2a1d3e64013fde46b2ad4762a520ea96" title="local address (&#39;name&#39;) of the socket object - temporary storage.">sockname</a>, 0, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor.">kkc_sock_getsockname</a>(<span class="keyword">self</span>, self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a2a1d3e64013fde46b2ad4762a520ea96" title="local address (&#39;name&#39;) of the socket object - temporary storage.">sockname</a>, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;sockname;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d8e/group__kkc__sock__class_gac8e64f52015e75cb76a34c4b7e9ef176_cgraph.png" border="0" usemap="#d6/d8e/group__kkc__sock__class_gac8e64f52015e75cb76a34c4b7e9ef176_cgraph" alt=""/></div>
<map name="d6/d8e/group__kkc__sock__class_gac8e64f52015e75cb76a34c4b7e9ef176_cgraph" id="d6/d8e/group__kkc__sock__class_gac8e64f52015e75cb76a34c4b7e9ef176_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="224,5,387,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga112d3dd5b05f7fad91087869eee741d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch">kkc_arch</a> *&#160;</td>
          <td class="paramname"><em>arch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops">kkc_sock_ops</a> *&#160;</td>
          <td class="paramname"><em>sock_ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Initializes generic socket. </p>
<p>This method should be called back from the architecture specific constructor to initialize common socket fields. Architecture is set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*sock_ops</td><td>- operations vector of the architecture specific socket </td></tr>
    <tr><td class="paramname">*arch</td><td>- socket specific architecture. This allows the user to read architecture name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful connection </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00047">47</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d75/kkc__sock__tcp_8c_source.html#l00066">kkc_sock_tcp_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span> (!arch) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;No architecture specified, can&#39;t init socket&quot;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">self</span>-&gt;arch = arch;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">self</span>-&gt;sock_ops = sock_ops;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#aea08ff0599264f82f11bd7223deba341" title="reference counter">ref_count</a>, 1);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    sema_init(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d1656e21603867377941ef2d618b1d" title="mutex semaphore to serialize sending via the socket.">sock_send_sem</a>, 1);     <span class="comment">// Change macro init_MUTEX to contain of original macro sema_init(sem,1) for kernel 3.x.x by Jiri Rakosnik</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    sema_init(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d4d40ca4b1f9bc4413fea4bd03c649" title="mutex semaphore to serialize receiving from the socket.">sock_recv_sem</a>, 1);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    INIT_LIST_HEAD(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a355c007ff93f7b99e10f25efccbdb7d8" title="general purpose list entry for storing sockets">pub_list</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Initialized KKC socket: %p&quot;</span>, <span class="keyword">self</span>); </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gac08d05e2be11ce3c48c57f9babcd597e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_is_address_equal_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addr_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>local</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Checks, whether an address passed as string is equal to this socket local/peer port. </p>
<p>Can return true only if current socket is connected. </p>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00160">160</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00134">check_duplicates()</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                                                                                    {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#afb69cd6bc6c27711ee15ef27ac643fe5" title="Compare addresses.">is_address_equal_to</a>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        err = <span class="keyword">self</span>-&gt;sock_ops-&gt;is_address_equal_to(<span class="keyword">self</span>, addr, addr_length, local);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> err;  </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga77e4c63fcf522765937e3b985c124ebc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_listen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Starts listening on a specified address </p>
<p>&lt;&lt;public&gt;&gt; Starts listening on a specified address</p>
<p>Delegates all work to the architecture specific socket operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*addr</td><td>- address where to connect to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successfully establishing the listening </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00093">93</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00069">kkc_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Listening on &#39;%s&#39; ..&quot;</span>, addr);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ac4363563761ab7cde2e3e06cf59849cd" title="Connects to the given address.">listen</a>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;listen(<span class="keyword">self</span>, addr);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9f980056fbf3436596c4cfdf3913e85c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined. </p>
<p>Also the architecture is released.</p>
<p>The user is responsible for taking the socket out of any lists where he had stored it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00271">271</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/d6e/kkc__arch_8h_source.html#l00171">kkc_arch_put()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00241">kkc_sock_getpeername2()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00226">kkc_sock_getsockname2()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">kkc_establish()</a>, <a class="el" href="../../d9/d75/kkc__sock__tcp_8c_source.html#l00192">kkc_sock_tcp_accept()</a>, <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00087">proxyfs_peer_put()</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00531">proxyfs_server_free()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00302">tcmi_ccnman_listen()</a>, <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">tcmi_comm_new()</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00109">tcmi_comm_put()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">tcmi_task_init()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">tcmi_task_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (atomic_dec_and_test(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#aea08ff0599264f82f11bd7223deba341" title="reference counter">ref_count</a>)) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Destroying KKC socket local: &#39;%s&#39;, remote: &#39;%s&#39;, %p&quot;</span>, </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;             <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getsockname2</a>(<span class="keyword">self</span>), </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;             <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(<span class="keyword">self</span>), <span class="keyword">self</span>); </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#afcf41417598ec77246ce74d452e0e405" title="Frees socket architecture specific resources.">free</a>) </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keyword">self</span>-&gt;sock_ops-&gt;free(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">/* release the architecture */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture.">kkc_arch_put</a>(self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a7eb41a1c2bdccfc1cf986062f859af8f" title="architecture for this socket - the reason why we keep the reference is the release the reference to t...">arch</a>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d8e/group__kkc__sock__class_ga9f980056fbf3436596c4cfdf3913e85c_cgraph.png" border="0" usemap="#d6/d8e/group__kkc__sock__class_ga9f980056fbf3436596c4cfdf3913e85c_cgraph" alt=""/></div>
<map name="d6/d8e/group__kkc__sock__class_ga9f980056fbf3436596c4cfdf3913e85c_cgraph" id="d6/d8e/group__kkc__sock__class_ga9f980056fbf3436596c4cfdf3913e85c_cgraph">
<area shape="rect" id="node2" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="193,5,293,32"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="159,56,326,83"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="157,107,328,133"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="377,56,537,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="376,107,539,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2f0fff54291df68d7dbb12358517d679"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_rcv_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks this socket instance for receiving. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00337">337</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        down(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d4d40ca4b1f9bc4413fea4bd03c649" title="mutex semaphore to serialize receiving from the socket.">sock_recv_sem</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga111890916880384e47495e8859f57c95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_rcv_lock_interruptible </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks this socket instance for receiving, interruptible version, the process can be woken up by a signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this file instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00327">327</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00237">tcmi_msg_recv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;{</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> (down_interruptible(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d4d40ca4b1f9bc4413fea4bd03c649" title="mutex semaphore to serialize receiving from the socket.">sock_recv_sem</a>));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga82295120b31f3818bbc9b9a462a22b56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_rcv_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Unlocks this socket instance for receiving. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00347">347</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00237">tcmi_msg_recv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;{</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        up(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d4d40ca4b1f9bc4413fea4bd03c649" title="mutex semaphore to serialize receiving from the socket.">sock_recv_sem</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gadafc7c835c7d6d94be66f61a050108b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_recv </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Receives requested number of bytes of data. </p>
<p>The behavior of the function depends on the mode. In blocking mode, it will try to receive all buflen bytes via <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes.">kkc_sock_send_recv()</a>. In non-blocking mode it will perform only 1 attempt to receive data, using the receive operation of the socket instance directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*buf</td><td>- buffer where to store received data. </td></tr>
    <tr><td class="paramname">buflen</td><td>- length of the buffer to be sent </td></tr>
    <tr><td class="paramname">flags</td><td>- specify blocking or non-blocking mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes actually received or error when &lt; 0 </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00162">162</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00066">KKC_SOCK_BLOCK</a>, <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00264">kkc_sock_send_recv()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00149">proxyfs_peer_real_recv()</a>, <a class="el" href="../../d0/d99/tcmi__authenticate__msg_8c_source.html#l00120">tcmi_authenticate_msg_recv()</a>, <a class="el" href="../../d8/d37/tcmi__authenticate__resp__msg_8c_source.html#l00110">tcmi_authenticate_resp_msg_recv()</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00145">tcmi_comm_thread()</a>, <a class="el" href="../../d4/d08/tcmi__err__msg_8c_source.html#l00140">tcmi_err_msg_recv()</a>, <a class="el" href="../../d9/dc1/tcmi__err__procmsg_8c_source.html#l00141">tcmi_err_procmsg_recv()</a>, <a class="el" href="../../d3/dbc/tcmi__exit__procmsg_8c_source.html#l00136">tcmi_exit_procmsg_recv()</a>, <a class="el" href="../../d3/d3d/tcmi__generic__user__msg_8c_source.html#l00116">tcmi_generic_user_msg_recv()</a>, <a class="el" href="../../da/dc4/tcmi__generic__user__procmsg_8c_source.html#l00116">tcmi_generic_user_procmsg_recv()</a>, <a class="el" href="../../d3/dce/tcmi__guest__started__procmsg_8c_source.html#l00139">tcmi_guest_started_procmsg_recv()</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00237">tcmi_msg_recv()</a>, <a class="el" href="../../d3/d1b/tcmi__p__emigrate__msg_8c_source.html#l00168">tcmi_p_emigrate_msg_recv()</a>, <a class="el" href="../../d9/d25/tcmi__ppm__p__emigrate__msg_8c_source.html#l00154">tcmi_ppm_p_emigrate_msg_recv()</a>, <a class="el" href="../../d2/dd7/tcmi__ppm__p__migr__back__guestreq__procmsg_8c_source.html#l00151">tcmi_ppm_p_migr_back_guestreq_procmsg_recv()</a>, <a class="el" href="../../d5/d1c/tcmi__procmsg_8c_source.html#l00113">tcmi_procmsg_recv()</a>, <a class="el" href="../../d2/d95/tcmi__rpc__procmsg_8c_source.html#l00135">tcmi_rpc_procmsg_recv()</a>, <a class="el" href="../../df/d9d/tcmi__rpcresp__procmsg_8c_source.html#l00254">tcmi_rpcresp_procmsg_recv()</a>, and <a class="el" href="../../d3/d5b/tcmi__signal__msg_8c_source.html#l00134">tcmi_signal_msg_recv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Receiving into buffer %p length: %d bytes&quot;</span>, buf, buflen);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a8201793c05dab335c81e98949a11b0c0" title="Receives requested number of bytes of data.">recv</a>) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a> == <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gga285317c87701990317a59884b3db40daa0766d1e1bec0bb50862530f5a53c9c70">KKC_SOCK_BLOCK</a>)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            result = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes.">kkc_sock_send_recv</a>(<span class="keyword">self</span>, buf, buflen, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                            self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a8201793c05dab335c81e98949a11b0c0" title="Receives requested number of bytes of data.">recv</a>); </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            result = <span class="keyword">self</span>-&gt;sock_ops-&gt;recv(<span class="keyword">self</span>, buf, buflen, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d8e/group__kkc__sock__class_gadafc7c835c7d6d94be66f61a050108b7_cgraph.png" border="0" usemap="#d6/d8e/group__kkc__sock__class_gadafc7c835c7d6d94be66f61a050108b7_cgraph" alt=""/></div>
<map name="d6/d8e/group__kkc__sock__class_gadafc7c835c7d6d94be66f61a050108b7_cgraph" id="d6/d8e/group__kkc__sock__class_gadafc7c835c7d6d94be66f61a050108b7_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="163,5,306,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaae3f9fa27f3adcdbfaca7fab91f0c879"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_register_read_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#gaa586ee02e04fd3fdde1940337426caf3">kkc_data_ready</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callback_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Registers data_ready callback function, that should be called when there are some data read to be read on the socket </p>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00237">237</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d9d/proxyfs__client_8c_source.html#l00072">proxyfs_client_thread()</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00108">proxyfs_server_accept()</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00092">proxyfs_server_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                                                                         {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;sock_ops &amp;&amp; <a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;sock_ops-&gt;register_read_callback)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;register_read_callback(<span class="keyword">self</span>, <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaed2ff1a579396261139d8f277f901435" title="Callback method of an object when traversing through predecessors.">callback</a>, callback_data);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;};</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaaea15a738e84235d0594ad65af7f4505"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_remove_wait_queue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wait_queue_t *&#160;</td>
          <td class="paramname"><em>wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket. </p>
<p>Delegates work to the specific socket class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*wait</td><td>- pointer to the waitqueue element with the task that wants to sleep on this socket. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00225">225</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00105">kkc_sock_sleeper_remove()</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a51a341f974a3ed758f4980a4b2489122" title="Removes a task from the queue of processes waiting on incoming data.">remove_wait_queue</a>)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;remove_wait_queue(<span class="keyword">self</span>, wait);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad734b131e2ab00e8d7fa30737fc2f5ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Sends out specified data. </p>
<p>Sends the entire content of the specified buffer. This might require multiple iterations - the method will try until all data is sent or an error occurs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*buf</td><td>- buffer with the data to be sent </td></tr>
    <tr><td class="paramname">buflen</td><td>- length of the buffer to be sent </td></tr>
    <tr><td class="paramname">*buflen</td><td>- number of bytes actually sent </td></tr>
    <tr><td class="paramname">flags</td><td>- specify blocking or non-blocking mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes actually sent or error when &lt; 0 </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00135">135</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00264">kkc_sock_send_recv()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../db/dbe/proxyfs__msg_8c_source.html#l00151">proxyfs_msg_real_send()</a>, <a class="el" href="../../d0/d99/tcmi__authenticate__msg_8c_source.html#l00175">tcmi_authenticate_msg_send()</a>, <a class="el" href="../../d8/d37/tcmi__authenticate__resp__msg_8c_source.html#l00152">tcmi_authenticate_resp_msg_send()</a>, <a class="el" href="../../d4/d08/tcmi__err__msg_8c_source.html#l00159">tcmi_err_msg_send()</a>, <a class="el" href="../../d9/dc1/tcmi__err__procmsg_8c_source.html#l00160">tcmi_err_procmsg_send()</a>, <a class="el" href="../../d3/dbc/tcmi__exit__procmsg_8c_source.html#l00155">tcmi_exit_procmsg_send()</a>, <a class="el" href="../../d3/d3d/tcmi__generic__user__msg_8c_source.html#l00165">tcmi_generic_user_msg_send()</a>, <a class="el" href="../../da/dc4/tcmi__generic__user__procmsg_8c_source.html#l00165">tcmi_generic_user_procmsg_send()</a>, <a class="el" href="../../d3/dce/tcmi__guest__started__procmsg_8c_source.html#l00159">tcmi_guest_started_procmsg_send()</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00413">tcmi_msg_send()</a>, <a class="el" href="../../d3/d1b/tcmi__p__emigrate__msg_8c_source.html#l00221">tcmi_p_emigrate_msg_send()</a>, <a class="el" href="../../d9/d25/tcmi__ppm__p__emigrate__msg_8c_source.html#l00194">tcmi_ppm_p_emigrate_msg_send()</a>, <a class="el" href="../../d2/dd7/tcmi__ppm__p__migr__back__guestreq__procmsg_8c_source.html#l00191">tcmi_ppm_p_migr_back_guestreq_procmsg_send()</a>, <a class="el" href="../../d5/d1c/tcmi__procmsg_8c_source.html#l00149">tcmi_procmsg_send()</a>, <a class="el" href="../../d2/d95/tcmi__rpc__procmsg_8c_source.html#l00190">tcmi_rpc_procmsg_send()</a>, <a class="el" href="../../df/d9d/tcmi__rpcresp__procmsg_8c_source.html#l00317">tcmi_rpcresp_procmsg_send()</a>, and <a class="el" href="../../d3/d5b/tcmi__signal__msg_8c_source.html#l00154">tcmi_signal_msg_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Sending buffer %p length: %d bytes&quot;</span>, buf, buflen);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#abb20cb86c96d332747a9ce413eda76b7" title="Sends out specified data.">send</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        result = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes.">kkc_sock_send_recv</a>(<span class="keyword">self</span>, buf, buflen, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a>, </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#abb20cb86c96d332747a9ce413eda76b7" title="Sends out specified data.">send</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d8e/group__kkc__sock__class_gad734b131e2ab00e8d7fa30737fc2f5ad_cgraph.png" border="0" usemap="#d6/d8e/group__kkc__sock__class_gad734b131e2ab00e8d7fa30737fc2f5ad_cgraph" alt=""/></div>
<map name="d6/d8e/group__kkc__sock__class_gad734b131e2ab00e8d7fa30737fc2f5ad_cgraph" id="d6/d8e/group__kkc__sock__class_gad734b131e2ab00e8d7fa30737fc2f5ad_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="169,5,311,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaff5e8804c93f0cb2a4b5e2e12f64e743"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_send_recv </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, void *, int, <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga285317c87701990317a59884b3db40da">kkc_sock_flags_t</a>)&#160;</td>
          <td class="paramname"><em>kkc_sock_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Transfers a required number of bytes. </p>
<p>This method is intended for receiving and sending in blocking mode. The caller specifies only which method should be used. The method tries to transfer all the requested bytes until an error occurs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
    <tr><td class="paramname">*buf</td><td>- buffer for transferred data (received or sent) </td></tr>
    <tr><td class="paramname">buflen</td><td>- length of the buffer to be sent/received </td></tr>
    <tr><td class="paramname">flags</td><td>- specify blocking or non-blocking mode. </td></tr>
    <tr><td class="paramname">*kkc_sock_method</td><td>- send or receive method to be executed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes actually sent or received or error when &lt; 0 </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00264">264</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00162">kkc_sock_recv()</a>, and <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00135">kkc_sock_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;{</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">int</span> total = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">while</span> ((buflen &gt; 0) &amp;&amp; (error &gt;= 0)) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        error = kkc_sock_method(<span class="keyword">self</span>, buf, buflen, <a class="code" href="../../d4/d83/tcmi__ckpt__openfile_8h.html#a38a8a1678784eecc1ffcc0685dbcce97" title="flags specified by the user when opening the file">flags</a>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Buffer starting at %p, xferred %d bytes&quot;</span>, buf, error);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        buf += error;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        buflen -= error;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        total += error;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">/* When error occured, return error code, otherwise the total */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span>  ((error &gt;= 0) ? total : error);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga77b3979c63c1671de3cd3cd077fe72d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_sock_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Disconnects the socket. </p>
<p>Delegates work to the specific socket class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00187">187</a> of file <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html">kkc_sock.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00218">proxyfs_peer_disconnect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a5b03cea3c6e3d438b838cffd5f1f4769" title="message operations">sock_ops</a>-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#aa964d9f886773dcc0fb654812bf9b533" title="Disconnects the socket.">shutdown</a>) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        error = <span class="keyword">self</span>-&gt;sock_ops-&gt;shutdown(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf9c8a5fafeb097a15269d70bd686c885"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_snd_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks this socket instance for sending. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00306">306</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        down(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d1656e21603867377941ef2d618b1d" title="mutex semaphore to serialize sending via the socket.">sock_send_sem</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga141590d302ece9990e5c8cdd82a3c3d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_snd_lock_interruptible </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up by a signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this file instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00296">296</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00413">tcmi_msg_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> (down_interruptible(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d1656e21603867377941ef2d618b1d" title="mutex semaphore to serialize sending via the socket.">sock_send_sem</a>));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga841d6dff84842f19540eae27c37fcb4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_snd_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this socket instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00316">316</a> of file <a class="el" href="../../df/dfa/kkc__sock_8h_source.html">kkc_sock.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00413">tcmi_msg_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        up(&amp;self-&gt;<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#a80d1656e21603867377941ef2d618b1d" title="mutex semaphore to serialize sending via the socket.">sock_send_sem</a>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 19:06:03 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
