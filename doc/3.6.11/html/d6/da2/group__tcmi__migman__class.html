<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_migman class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported to Linux kernel 3.6.11</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/da2/group__tcmi__migman__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_migman class<div class="ingroups"><a class="el" href="../../db/d31/group__tcmi__managers__group.html">managers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>TCMI migration manager controls migrating tasks for a particular CCN-PEN pair.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_migman class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d6/da2/group__tcmi__migman__class.png" border="0" alt="" usemap="#d6_2da2_2group____tcmi____migman____class"/>
<map name="d6_2da2_2group____tcmi____migman____class" id="d6_2da2_2group____tcmi____migman____class">
<area shape="rect" id="node1" href="../../d3/dd4/group__tcmi__ccnmigman__class.html" title="TCMI CCN migration manager controls migrating tasks for a particular CCN&#45;PEN pair and resides as the ..." alt="" coords="318,5,474,32"/><area shape="rect" id="node2" href="../../d5/d6f/group__tcmi__penmigman__class.html" title="TCMI PEN migration manager controls migrating tasks for a particular CCN&#45;PEN pair and resides as the ..." alt="" coords="318,56,474,83"/><area shape="rect" id="node3" href="../../db/d31/group__tcmi__managers__group.html" title="Classes in this group are responsible for various controlling tasks in the infrastructure." alt="" coords="6,31,85,57"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:d3/dd4/group__tcmi__ccnmigman__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html">tcmi_ccnmigman class</a></td></tr>
<tr class="memdesc:d3/dd4/group__tcmi__ccnmigman__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">TCMI CCN migration manager controls migrating tasks for a particular CCN-PEN pair and resides as the name describes - on a CCN. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d5/d6f/group__tcmi__penmigman__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html">tcmi_penmigman class</a></td></tr>
<tr class="memdesc:d5/d6f/group__tcmi__penmigman__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">TCMI PEN migration manager controls migrating tasks for a particular CCN-PEN pair and resides as the name describes - on a PEN. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d2/d8c/structtcmi__migman"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a></td></tr>
<tr class="memdesc:d2/d8c/structtcmi__migman"><td class="mdescLeft">&#160;</td><td class="mdescRight">A compound structure that holds all current shadow processes and other migration related data.  <a href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">More...</a><br/></td></tr>
<tr class="separator:d2/d8c/structtcmi__migman"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d6/d88/structtcmi__migman__ops"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a></td></tr>
<tr class="memdesc:d6/d88/structtcmi__migman__ops"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migration manager operations that support polymorphism.  <a href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">More...</a><br/></td></tr>
<tr class="separator:d6/d88/structtcmi__migman__ops"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6e53ef2488c50427056d3a56e9b6c045"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045">TCMI_MIGMAN</a>(migman)&#160;&#160;&#160;((struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>*)migman)</td></tr>
<tr class="memdesc:ga6e53ef2488c50427056d3a56e9b6c045"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the migration manager.  <a href="#ga6e53ef2488c50427056d3a56e9b6c045">More...</a><br/></td></tr>
<tr class="separator:ga6e53ef2488c50427056d3a56e9b6c045"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga9cb8f073f000f6904ba204f01c95a044"><td class="memItemLeft" align="right" valign="top">typedef void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga9cb8f073f000f6904ba204f01c95a044">process_msg_t</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td></tr>
<tr class="memdesc:ga9cb8f073f000f6904ba204f01c95a044"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message processing method type for the message processing thread.  <a href="#ga9cb8f073f000f6904ba204f01c95a044">More...</a><br/></td></tr>
<tr class="separator:ga9cb8f073f000f6904ba204f01c95a044"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga94094c5c702e25dbb12be0bb63b32875"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a> { <br/>
&#160;&#160;<a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0e7ce596cac5174cf4406a849b27b845">TCMI_MIGMAN_INIT</a>, 
<a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>, 
<a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a98a50e72214094b8fdc3a790cd8e2ad8">TCMI_MIGMAN_SHUTTING_DOWN</a>, 
<a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875ad130e60fd7d6fb0709eb4c0510c9e9b9">TCMI_MIGMAN_SHUT_DOWN</a>, 
<br/>
&#160;&#160;<a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0ecc4ea08c917e6a65f2b18c999f03c1">TCMI_MIGMAN_STATE_COUNT</a>
<br/>
 }</td></tr>
<tr class="memdesc:ga94094c5c702e25dbb12be0bb63b32875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes the current state of the TCMI migration manager.  <a href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">More...</a><br/></td></tr>
<tr class="separator:ga94094c5c702e25dbb12be0bb63b32875"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga71f49cd0661e81a859daab82ae7676de"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de">tcmi_migman_unhash</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga71f49cd0661e81a859daab82ae7676de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes migman from a list of migration managers of the associated manager.  <a href="#ga71f49cd0661e81a859daab82ae7676de">More...</a><br/></td></tr>
<tr class="separator:ga71f49cd0661e81a859daab82ae7676de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94df994d6d2ad3dd9aa6543ee67bf934"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934">tcmi_migman_free</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga94df994d6d2ad3dd9aa6543ee67bf934"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Free method is has two purposes:</p>
<ol type="1">
<li>when the last reference is released, it will free all instance resources, except for the instance itself. </li>
</ol>
 <a href="#ga94df994d6d2ad3dd9aa6543ee67bf934">More...</a><br/></td></tr>
<tr class="separator:ga94df994d6d2ad3dd9aa6543ee67bf934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad131e3ab84c0ce68226c297b508dfcc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4">tcmi_migman_stop</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad131e3ab84c0ce68226c297b508dfcc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests asynchronous shutdown of connection with peer.  <a href="#gad131e3ab84c0ce68226c297b508dfcc4">More...</a><br/></td></tr>
<tr class="separator:gad131e3ab84c0ce68226c297b508dfcc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga510ce89add226478847ff0bbeb56a6c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4">tcmi_migman_notify_peer_disconnect</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="separator:ga510ce89add226478847ff0bbeb56a6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42cc54b16a70368b84405761bf8780d5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5">tcmi_migman_stop_perform</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int remote_requested)</td></tr>
<tr class="memdesc:ga42cc54b16a70368b84405761bf8780d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual implementation of stop, see tcmi_migman_stop.  <a href="#ga42cc54b16a70368b84405761bf8780d5">More...</a><br/></td></tr>
<tr class="separator:ga42cc54b16a70368b84405761bf8780d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade0457c5e0d6da06f17c62636ff17fe8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gade0457c5e0d6da06f17c62636ff17fe8">kill_all_tasks</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gade0457c5e0d6da06f17c62636ff17fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a kill signal to all tasks managed by this manager.  <a href="#gade0457c5e0d6da06f17c62636ff17fe8">More...</a><br/></td></tr>
<tr class="separator:gade0457c5e0d6da06f17c62636ff17fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga246a095eba1258bb860f9ade10506cd7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga246a095eba1258bb860f9ade10506cd7">tcmi_migman_kill</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga246a095eba1258bb860f9ade10506cd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kills all tasks associated with this migman and drops reference to the migman (in case it was not already shutting down).  <a href="#ga246a095eba1258bb860f9ade10506cd7">More...</a><br/></td></tr>
<tr class="separator:ga246a095eba1258bb860f9ade10506cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3923f508f4f54440732f33c4f0356dc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gaf3923f508f4f54440732f33c4f0356dc">tcmi_migman_init_ctlfs_dirs</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *migproc, const char namefmt[], va_list <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496">args</a>)</td></tr>
<tr class="memdesc:gaf3923f508f4f54440732f33c4f0356dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the directories as described in <a class="el" href="../../d6/da2/group__tcmi__migman__class.html">here </a>.  <a href="#gaf3923f508f4f54440732f33c4f0356dc">More...</a><br/></td></tr>
<tr class="separator:gaf3923f508f4f54440732f33c4f0356dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f519d477e445de52505689f56c968e6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga0f519d477e445de52505689f56c968e6">tcmi_migman_init_ctlfs_files</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga0f519d477e445de52505689f56c968e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d6/da2/group__tcmi__migman__class.html">here </a>.  <a href="#ga0f519d477e445de52505689f56c968e6">More...</a><br/></td></tr>
<tr class="separator:ga0f519d477e445de52505689f56c968e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39c491f49b4e5b3cc533c816d27135a3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3">tcmi_migman_stop_ctlfs_dirs</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga39c491f49b4e5b3cc533c816d27135a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories  <a href="#ga39c491f49b4e5b3cc533c816d27135a3">More...</a><br/></td></tr>
<tr class="separator:ga39c491f49b4e5b3cc533c816d27135a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b56a5213e9dbcba9973b9530692fd27"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27">tcmi_migman_stop_ctlfs_files</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga5b56a5213e9dbcba9973b9530692fd27"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Unregisters and releases all control files.  <a href="#ga5b56a5213e9dbcba9973b9530692fd27">More...</a><br/></td></tr>
<tr class="separator:ga5b56a5213e9dbcba9973b9530692fd27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4bcd1bc07e002ed4bc6fafcd44215749"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga4bcd1bc07e002ed4bc6fafcd44215749">tcmi_migman_stop_request</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga4bcd1bc07e002ed4bc6fafcd44215749"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager  <a href="#ga4bcd1bc07e002ed4bc6fafcd44215749">More...</a><br/></td></tr>
<tr class="separator:ga4bcd1bc07e002ed4bc6fafcd44215749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7250c98a0358cb6c95dfbe5fd427c09c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga7250c98a0358cb6c95dfbe5fd427c09c">tcmi_migman_kill_request</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga7250c98a0358cb6c95dfbe5fd427c09c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager  <a href="#ga7250c98a0358cb6c95dfbe5fd427c09c">More...</a><br/></td></tr>
<tr class="separator:ga7250c98a0358cb6c95dfbe5fd427c09c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac71618221f842f2032e6141c21eed095"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gac71618221f842f2032e6141c21eed095">tcmi_migman_show_state</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:gac71618221f842f2032e6141c21eed095"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports migration manager state.  <a href="#gac71618221f842f2032e6141c21eed095">More...</a><br/></td></tr>
<tr class="separator:gac71618221f842f2032e6141c21eed095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4006fee98cc9ef9bba73a33dc28bc66"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gad4006fee98cc9ef9bba73a33dc28bc66">tcmi_migman_start_thread</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad4006fee98cc9ef9bba73a33dc28bc66"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Starts the listening thread.  <a href="#gad4006fee98cc9ef9bba73a33dc28bc66">More...</a><br/></td></tr>
<tr class="separator:gad4006fee98cc9ef9bba73a33dc28bc66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4ad418d705edeca23e38eb383343978"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978">tcmi_migman_stop_thread</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gae4ad418d705edeca23e38eb383343978"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for it to terminate.  <a href="#gae4ad418d705edeca23e38eb383343978">More...</a><br/></td></tr>
<tr class="separator:gae4ad418d705edeca23e38eb383343978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa1e34536a26378cc123baadbde5452e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gafa1e34536a26378cc123baadbde5452e">tcmi_migman_deliver_msg</a> (void *obj, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *m)</td></tr>
<tr class="memdesc:gafa1e34536a26378cc123baadbde5452e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Message delivering method that is called back from the receiving thread of TCMI comm component instance.  <a href="#gafa1e34536a26378cc123baadbde5452e">More...</a><br/></td></tr>
<tr class="separator:gafa1e34536a26378cc123baadbde5452e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga698d639006881752225f808c1d345b1b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga698d639006881752225f808c1d345b1b">tcmi_migman_msg_thread</a> (void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga698d639006881752225f808c1d345b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Message processing thread.  <a href="#ga698d639006881752225f808c1d345b1b">More...</a><br/></td></tr>
<tr class="separator:ga698d639006881752225f808c1d345b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga936802da41af02ca6c660e18ade52dbb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga936802da41af02ca6c660e18ade52dbb">tcmi_migman_add_task</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *task)</td></tr>
<tr class="memdesc:ga936802da41af02ca6c660e18ade52dbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Registers tcmi task into the migration manager tasks slotvec  <a href="#ga936802da41af02ca6c660e18ade52dbb">More...</a><br/></td></tr>
<tr class="separator:ga936802da41af02ca6c660e18ade52dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73763ae6fc849730aa1346f16208908f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f">tcmi_migman_remove_task</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *task)</td></tr>
<tr class="memdesc:ga73763ae6fc849730aa1346f16208908f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec  <a href="#ga73763ae6fc849730aa1346f16208908f">More...</a><br/></td></tr>
<tr class="separator:ga73763ae6fc849730aa1346f16208908f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa481ed8e2b5db852737e1591af2d3202"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gaa481ed8e2b5db852737e1591af2d3202">tcmi_migman_create_symlink</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock)</td></tr>
<tr class="separator:gaa481ed8e2b5db852737e1591af2d3202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bdb189ca17e989ab59c89c2dc912600"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga9bdb189ca17e989ab59c89c2dc912600">tcmi_migman_init</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock, u_int32_t ccn_id, u_int32_t pen_id, enum <a class="el" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9">arch_ids</a> peer_arch_type, struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *manager_slot, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *migproc, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a> *ops, const char namefmt[], va_list <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496">args</a>)</td></tr>
<tr class="memdesc:ga9bdb189ca17e989ab59c89c2dc912600"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; TCMI migration manager initializer.  <a href="#ga9bdb189ca17e989ab59c89c2dc912600">More...</a><br/></td></tr>
<tr class="separator:ga9bdb189ca17e989ab59c89c2dc912600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd13117046ccc1fa12ac743b893fcfca"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca">tcmi_migman_get</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gacd13117046ccc1fa12ac743b893fcfca"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.  <a href="#gacd13117046ccc1fa12ac743b893fcfca">More...</a><br/></td></tr>
<tr class="separator:gacd13117046ccc1fa12ac743b893fcfca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab536c262c24d8fc76cdbdfa8d6d65b81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81">tcmi_migman_put</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gab536c262c24d8fc76cdbdfa8d6d65b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the instance.  <a href="#gab536c262c24d8fc76cdbdfa8d6d65b81">More...</a><br/></td></tr>
<tr class="separator:gab536c262c24d8fc76cdbdfa8d6d65b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1826451d879f914f53f0717f363aa914"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga1826451d879f914f53f0717f363aa914">tcmi_migman_set_state</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a> state)</td></tr>
<tr class="memdesc:ga1826451d879f914f53f0717f363aa914"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager.  <a href="#ga1826451d879f914f53f0717f363aa914">More...</a><br/></td></tr>
<tr class="separator:ga1826451d879f914f53f0717f363aa914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9115d78a679e54cf4bf78cf051d6782e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e">tcmi_migman_change_state</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a> old_state, <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a> state)</td></tr>
<tr class="memdesc:ga9115d78a679e54cf4bf78cf051d6782e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state  <a href="#ga9115d78a679e54cf4bf78cf051d6782e">More...</a><br/></td></tr>
<tr class="separator:ga9115d78a679e54cf4bf78cf051d6782e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga828da1bb7df2ccb80dd93c62f1b0731c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c">tcmi_migman_state</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga828da1bb7df2ccb80dd93c62f1b0731c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migration manager state accessor.  <a href="#ga828da1bb7df2ccb80dd93c62f1b0731c">More...</a><br/></td></tr>
<tr class="separator:ga828da1bb7df2ccb80dd93c62f1b0731c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafca6221a82ff480ee067fcfa39745719"><td class="memItemLeft" align="right" valign="top">static u_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719">tcmi_migman_slot_index</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gafca6221a82ff480ee067fcfa39745719"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migration manager slot index getter  <a href="#gafca6221a82ff480ee067fcfa39745719">More...</a><br/></td></tr>
<tr class="separator:gafca6221a82ff480ee067fcfa39745719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf118703c98a458bdf83eb1058de1347"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gaaf118703c98a458bdf83eb1058de1347">tcmi_migman_root</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaaf118703c98a458bdf83eb1058de1347"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migration manager root directory accessor.  <a href="#gaaf118703c98a458bdf83eb1058de1347">More...</a><br/></td></tr>
<tr class="separator:gaaf118703c98a458bdf83eb1058de1347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf569bbc03999b4c4e6b9c3814f67ebb5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gaf569bbc03999b4c4e6b9c3814f67ebb5">tcmi_migman_transactions</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaf569bbc03999b4c4e6b9c3814f67ebb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Transactions accessor.  <a href="#gaf569bbc03999b4c4e6b9c3814f67ebb5">More...</a><br/></td></tr>
<tr class="separator:gaf569bbc03999b4c4e6b9c3814f67ebb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9d51a6717b090d6bd2fb4b9d7dbed07"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gaf9d51a6717b090d6bd2fb4b9d7dbed07">tcmi_migman_msg_queue</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaf9d51a6717b090d6bd2fb4b9d7dbed07"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Message queue accesor.  <a href="#gaf9d51a6717b090d6bd2fb4b9d7dbed07">More...</a><br/></td></tr>
<tr class="separator:gaf9d51a6717b090d6bd2fb4b9d7dbed07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91bf5b41a1d4faa3eab11e6867ec34e4"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4">tcmi_migman_sock</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga91bf5b41a1d4faa3eab11e6867ec34e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Communication socket accesor.  <a href="#ga91bf5b41a1d4faa3eab11e6867ec34e4">More...</a><br/></td></tr>
<tr class="separator:ga91bf5b41a1d4faa3eab11e6867ec34e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7aeac128b81747e7bf32016a800ce457"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897">tcmi_slot_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga7aeac128b81747e7bf32016a800ce457">tcmi_migman_node</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga7aeac128b81747e7bf32016a800ce457"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Slot node accessor.  <a href="#ga7aeac128b81747e7bf32016a800ce457">More...</a><br/></td></tr>
<tr class="separator:ga7aeac128b81747e7bf32016a800ce457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d70369a7eb27d7aac550ce6a2ca12e2"><td class="memItemLeft" align="right" valign="top">static u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2">tcmi_migman_id</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga5d70369a7eb27d7aac550ce6a2ca12e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migration manager ID accessor.  <a href="#ga5d70369a7eb27d7aac550ce6a2ca12e2">More...</a><br/></td></tr>
<tr class="separator:ga5d70369a7eb27d7aac550ce6a2ca12e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2ddb2c11349588bc43f2dd8f8b04fa7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#gab2ddb2c11349588bc43f2dd8f8b04fa7">tcmi_migman_migproc_dir</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gab2ddb2c11349588bc43f2dd8f8b04fa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migproc directory accessor.  <a href="#gab2ddb2c11349588bc43f2dd8f8b04fa7">More...</a><br/></td></tr>
<tr class="separator:gab2ddb2c11349588bc43f2dd8f8b04fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14fedf6a8cf9ea39c42951da16d1d351"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9">arch_ids</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga14fedf6a8cf9ea39c42951da16d1d351">tcmi_migman_peer_arch</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga14fedf6a8cf9ea39c42951da16d1d351"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Getter of peer architecture type  <a href="#ga14fedf6a8cf9ea39c42951da16d1d351">More...</a><br/></td></tr>
<tr class="separator:ga14fedf6a8cf9ea39c42951da16d1d351"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga5ed214ca4e27ad66cf1cb1eefd650e77"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga5ed214ca4e27ad66cf1cb1eefd650e77">tcmi_migman_states</a> []</td></tr>
<tr class="memdesc:ga5ed214ca4e27ad66cf1cb1eefd650e77"><td class="mdescLeft">&#160;</td><td class="mdescRight">String descriptor for the states of migration manager.  <a href="#ga5ed214ca4e27ad66cf1cb1eefd650e77">More...</a><br/></td></tr>
<tr class="separator:ga5ed214ca4e27ad66cf1cb1eefd650e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>TCMI migration manager controls migrating tasks for a particular CCN-PEN pair. </p>
<p>This is abstract class that gathers all common functionality required for CCN and PEN resp. Node specific implementation is carried out in <a class="el" href="../../d3/dd4/group__tcmi__ccnmigman__class.html">CCN migration manager </a> and <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html">PEN migration manager </a></p>
<p>Node specific migration manager supplies only methods to:</p>
<ul>
<li>release all its resources</li>
<li>initialize and destroy TCMI ctlfs directories</li>
<li>initialize and destroy TCMI ctlfs files</li>
<li>process an incoming message from the message queue</li>
<li>deliver a message to the message queue. </li>
</ul>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d2/d8c/structtcmi__migman" id="d2/d8c/structtcmi__migman"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_migman</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A compound structure that holds all current shadow processes and other migration related data. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00094">94</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_migman:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d5a/structtcmi__migman__coll__graph.png" border="0" usemap="#tcmi__migman_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__migman_coll__map" id="tcmi__migman_coll__map">
<area shape="rect" id="node2" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening." alt="" coords="273,759,359,851"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket." alt="" coords="143,458,272,609"/><area shape="rect" id="node13" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method." alt="" coords="136,737,235,873"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="39,213,113,320"/><area shape="rect" id="node5" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="5,5,147,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="138,147,301,386"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure." alt="" coords="336,487,451,579"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops" title="entry operations that support polymorphism" alt="" coords="337,228,449,305"/><area shape="rect" id="node9" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops" title="Migration manager operations that support polymorphism." alt="" coords="513,723,641,888"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec" title="A slot vector compound structure." alt="" coords="666,723,776,888"/><area shape="rect" id="node11" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure." alt="" coords="729,451,839,616"/><area shape="rect" id="node12" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue" title="compound structure" alt="" coords="941,737,1029,873"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a8ad9bf518ba351fdb3a320d2050b35f6"></a>u_int32_t</td>
<td class="fieldname">
ccn_id</td>
<td class="fielddoc">
CCN ID - supplied by the instantiator(for CCN mig manager) or sent by the CCN(for PEN mig manager) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0b330796431a0c307c7cffc3a3346380"></a>struct <a class="el" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm">tcmi_comm</a> *</td>
<td class="fieldname">
comm</td>
<td class="fielddoc">
Communication component used for message receiving and delivery. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2323e802e7ef7080a9ec8b201fa9753b"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_conns</td>
<td class="fielddoc">
TCMI ctlfs - directory for active connections. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac6d3015a5cfa5173000b3edc26719883"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_migman</td>
<td class="fielddoc">
TCMI ctlfs - directory where all migration control files/directories reside. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7f982a5bcda94e88ccc5ba8888f73af9"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_migproc</td>
<td class="fielddoc">
TCMI ctlfs - reference to the migproc directory - needed when immigrating a process. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a8dff923f962afb87c0d712a1762ece35"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_kill</td>
<td class="fielddoc">
TCMI ctlfs - request kill of this migration manager. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac34f5543920d4e795d663e4bbea0db11"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_state</td>
<td class="fielddoc">
TCMI ctlfs - reports current state of the manager. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae5c04e6a281b59180d7970a490f7bb92"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_stop</td>
<td class="fielddoc">
TCMI ctlfs - request shutdown of this migration manager. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a379a010dfbbb2bd81ae60678303d1127"></a>u_int32_t</td>
<td class="fieldname">
id</td>
<td class="fielddoc">
Unique, randomly generated ID. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a56d41f26626952cef2aeb4a31c5d7c3e"></a>struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *</td>
<td class="fieldname">
manager_slot</td>
<td class="fielddoc">
Reference to slot in an associated manager migmans vector. <p>Required when performing dequeueing. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a18b6566fc50754fc12e2f57f918da8ea"></a>struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a></td>
<td class="fieldname">
msg_queue</td>
<td class="fielddoc">
Message queue for transaction-less messages. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0f3e9793b2c5e39b988fb2d9d2f3b336"></a>struct task_struct *</td>
<td class="fieldname">
msg_thread</td>
<td class="fielddoc">
Message processing thread. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ab8cd47809d251779626127f751048f3e"></a><a class="el" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897">tcmi_slot_node_t</a></td>
<td class="fieldname">
node</td>
<td class="fielddoc">
A slot node, used for insertion of the manager into a slot. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5fe255101d8fed7457ff91ff4b0934d2"></a>struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a> *</td>
<td class="fieldname">
ops</td>
<td class="fielddoc">
Operations specific to CCN/PEN migration manager resp. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af1266c9a0cb5e9939429154963a6ace4"></a>enum <a class="el" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9">arch_ids</a></td>
<td class="fieldname">
peer_arch_type</td>
<td class="fielddoc">
Architecture of corresponding migration manager peer (communicated on registration) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a236dceb40c3c4d7b66784df1f16c86ec"></a>u_int32_t</td>
<td class="fieldname">
pen_id</td>
<td class="fielddoc">
PEN ID - vica versa to how CCN ID is setup. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad7246d62296a931b57677531541f0be0"></a>atomic_t</td>
<td class="fieldname">
ref_count</td>
<td class="fielddoc">
Instance reference counter. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="afe93b7e5095e938b0fa54acaf5735451"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
s_migman</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a11b686ed0d6552eaf7abe63fd6dd5378"></a>struct <a class="el" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock">tcmi_sock</a> *</td>
<td class="fieldname">
sock</td>
<td class="fielddoc">
TCMI socket that represents an active connection to the PEN. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7934e69c38adfb695fc2a3d95da021b1"></a>atomic_t</td>
<td class="fieldname">
state</td>
<td class="fielddoc">
Denotes the current state of the manager. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae733833f45ed99afd3592770af1675ce"></a>struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *</td>
<td class="fieldname">
tasks</td>
<td class="fielddoc">
slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a4acd12d41cd5baddc4b8c330313e3648"></a>struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *</td>
<td class="fieldname">
transactions</td>
<td class="fielddoc">
Message transactions. </td></tr>
</table>

</div>
</div>
<a name="d6/d88/structtcmi__migman__ops" id="d6/d88/structtcmi__migman__ops"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_migman_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Migration manager operations that support polymorphism. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00158">158</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_migman_ops:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d1/d31/structtcmi__migman__ops__coll__graph.png" border="0" usemap="#tcmi__migman__ops_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a3adf20fa1a2a4618eb50783e54b2978c"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#a3adf20fa1a2a4618eb50783e54b2978c">init_ctlfs_dirs</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:a3adf20fa1a2a4618eb50783e54b2978c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes TCMI ctlfs directories.  <a href="#a3adf20fa1a2a4618eb50783e54b2978c">More...</a><br/></td></tr>
<tr class="separator:a3adf20fa1a2a4618eb50783e54b2978c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f5a49addfd9139ba2f3e29bc1f9633f"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#a2f5a49addfd9139ba2f3e29bc1f9633f">init_ctlfs_files</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:a2f5a49addfd9139ba2f3e29bc1f9633f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes TCMI ctlfs files.  <a href="#a2f5a49addfd9139ba2f3e29bc1f9633f">More...</a><br/></td></tr>
<tr class="separator:a2f5a49addfd9139ba2f3e29bc1f9633f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8608ffcfb58f28b9bc12225171a58da7"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#a8608ffcfb58f28b9bc12225171a58da7">stop_ctlfs_dirs</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:a8608ffcfb58f28b9bc12225171a58da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys all TCMI ctlfs directories.  <a href="#a8608ffcfb58f28b9bc12225171a58da7">More...</a><br/></td></tr>
<tr class="separator:a8608ffcfb58f28b9bc12225171a58da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3251113e40f96baeeeb22a9d0d5a1699"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#a3251113e40f96baeeeb22a9d0d5a1699">stop_ctlfs_files</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:a3251113e40f96baeeeb22a9d0d5a1699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys all TCMI ctlfs files.  <a href="#a3251113e40f96baeeeb22a9d0d5a1699">More...</a><br/></td></tr>
<tr class="separator:a3251113e40f96baeeeb22a9d0d5a1699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4365d06985fa2f073a3ba98b4802b82d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#a4365d06985fa2f073a3ba98b4802b82d">free</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td></tr>
<tr class="memdesc:a4365d06985fa2f073a3ba98b4802b82d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the instance specific resources.  <a href="#a4365d06985fa2f073a3ba98b4802b82d">More...</a><br/></td></tr>
<tr class="separator:a4365d06985fa2f073a3ba98b4802b82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97bf662d2c720edb0689b2078a6d8ad"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#aa97bf662d2c720edb0689b2078a6d8ad">process_msg</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td></tr>
<tr class="memdesc:aa97bf662d2c720edb0689b2078a6d8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a TCMI message m.  <a href="#aa97bf662d2c720edb0689b2078a6d8ad">More...</a><br/></td></tr>
<tr class="separator:aa97bf662d2c720edb0689b2078a6d8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fc30157e38606e90a001be732ab1c64"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#a8fc30157e38606e90a001be732ab1c64">stop</a> )(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, int)</td></tr>
<tr class="memdesc:a8fc30157e38606e90a001be732ab1c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to stop this migration manager and terminate its connection with peer.  <a href="#a8fc30157e38606e90a001be732ab1c64">More...</a><br/></td></tr>
<tr class="separator:a8fc30157e38606e90a001be732ab1c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="a4365d06985fa2f073a3ba98b4802b82d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_migman_ops::free)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the instance specific resources. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00168">168</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3adf20fa1a2a4618eb50783e54b2978c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_migman_ops::init_ctlfs_dirs)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes TCMI ctlfs directories. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00160">160</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2f5a49addfd9139ba2f3e29bc1f9633f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_migman_ops::init_ctlfs_files)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes TCMI ctlfs files. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00162">162</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa97bf662d2c720edb0689b2078a6d8ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_migman_ops::process_msg)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a TCMI message m. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00170">170</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fc30157e38606e90a001be732ab1c64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_migman_ops::stop)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, int)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request to stop this migration manager and terminate its connection with peer. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00173">173</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8608ffcfb58f28b9bc12225171a58da7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_migman_ops::stop_ctlfs_dirs)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys all TCMI ctlfs directories. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00164">164</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3251113e40f96baeeeb22a9d0d5a1699"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_migman_ops::stop_ctlfs_files)(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys all TCMI ctlfs files. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00166">166</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga6e53ef2488c50427056d3a56e9b6c045"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_MIGMAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">migman</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>*)migman)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the migration manager. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">180</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00111">tcmi_ccnmigman_auth_pen()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00066">tcmi_ccnmigman_new()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00511">tcmi_migman_kill_request()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">tcmi_migman_msg_thread()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00526">tcmi_migman_show_state()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00497">tcmi_migman_stop_request()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00108">tcmi_penmigman_auth_ccn()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00195">tcmi_penmigman_migrate_all_home()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00067">tcmi_penmigman_new()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga9cb8f073f000f6904ba204f01c95a044"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void process_msg_t(struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message processing method type for the message processing thread. </p>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00178">178</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga94094c5c702e25dbb12be0bb63b32875"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Describes the current state of the TCMI migration manager. </p>
<p>The states have following meaning:</p>
<ul>
<li>INIT - the system is being brought up</li>
<li>CONNECTED - PEN has been succesfully authenticated and is now connected</li>
<li>SHUTTING_DOWN - no more migration requests will be accepted, migrated should be moved back or to other PEN</li>
<li>SHUT_DOWN - all connections are closed, component is ready for destruction. </li>
</ul>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga94094c5c702e25dbb12be0bb63b32875a0e7ce596cac5174cf4406a849b27b845"></a>TCMI_MIGMAN_INIT</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919"></a>TCMI_MIGMAN_CONNECTED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga94094c5c702e25dbb12be0bb63b32875a98a50e72214094b8fdc3a790cd8e2ad8"></a>TCMI_MIGMAN_SHUTTING_DOWN</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga94094c5c702e25dbb12be0bb63b32875ad130e60fd7d6fb0709eb4c0510c9e9b9"></a>TCMI_MIGMAN_SHUT_DOWN</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga94094c5c702e25dbb12be0bb63b32875a0ecc4ea08c917e6a65f2b18c999f03c1"></a>TCMI_MIGMAN_STATE_COUNT</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00080">80</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;             {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0e7ce596cac5174cf4406a849b27b845">TCMI_MIGMAN_INIT</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a98a50e72214094b8fdc3a790cd8e2ad8">TCMI_MIGMAN_SHUTTING_DOWN</a>,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875ad130e60fd7d6fb0709eb4c0510c9e9b9">TCMI_MIGMAN_SHUT_DOWN</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">/* number of states, not a special state */</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0ecc4ea08c917e6a65f2b18c999f03c1">TCMI_MIGMAN_STATE_COUNT</a> </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;} <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gade0457c5e0d6da06f17c62636ff17fe8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kill_all_tasks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a kill signal to all tasks managed by this manager. </p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00307">307</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00071">tcmi_slot_entry</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00079">tcmi_slot_for_each</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00100">tcmi_slotvec_for_each_used_slot</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00577">tcmi_task_signal_peer_lost()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">tcmi_migman_kill()</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                                     {  </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>* task;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897" title="A slot node is in fact a hlist node.">tcmi_slot_node_t</a>* node;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">/* Iterate over all managed tasks */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga49082f04567681a98c6d39eacbc1e4ed" title="Iterates through all used slots in the slot vector.">tcmi_slotvec_for_each_used_slot</a>(slot, self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga344314dfdafec96ad6d8398963749fa4" title="&lt;&lt;public&gt;&gt; Iterates through all nodes in the slot.">tcmi_slot_for_each</a>(node, slot) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            task = <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga25ff69a7b6d4ba8ef5b85079c0320872" title="&lt;&lt;public&gt;&gt; Extracts the actual entry from a slot node">tcmi_slot_entry</a>(node, <span class="keyword">struct</span> <a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>, node);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Killing task: local_pid=%d&quot;</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task));           </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task.">tcmi_task_signal_peer_lost</a>(task);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        };</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    };</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>);  </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gade0457c5e0d6da06f17c62636ff17fe8_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gade0457c5e0d6da06f17c62636ff17fe8_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gade0457c5e0d6da06f17c62636ff17fe8_cgraph" id="d6/da2/group__tcmi__migman__class_gade0457c5e0d6da06f17c62636ff17fe8_cgraph">
<area shape="rect" id="node2" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="180,5,305,32"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="173,56,312,83"/><area shape="rect" id="node4" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="601,107,738,133"/><area shape="rect" id="node5" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task." alt="" coords="153,157,333,184"/><area shape="rect" id="node6" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="382,157,551,184"/><area shape="rect" id="node7" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="610,157,729,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga936802da41af02ca6c660e18ade52dbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_migman_add_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Registers tcmi task into the migration manager tasks slotvec </p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00709">709</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00141">tcmi_task::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00250">tcmi_slotvec_hashmask()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00199">tcmi_slotvec_insert_at()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00638">tcmi_task_hash()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">tcmi_task_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                                                           {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    u_int hash;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    hash = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)">tcmi_task_hash</a>(<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task), <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor.">tcmi_slotvec_hashmask</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>));</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">//tcmi_slotvec_lock(self-&gt;tasks);</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot.">tcmi_slotvec_insert_at</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>, hash, &amp;task-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#acfa8de59bfc98aedf6b8f76b59f9222c" title="node for storage in the migration slot of the migration manager">node</a>) ) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="comment">//tcmi_slotvec_unlock(self-&gt;tasks);</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t insert task into a migration manager slot vector!&quot;</span>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">//tcmi_slotvec_unlock(self-&gt;tasks);</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Inserted task PID=%d into slot with hash %d&quot;</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task), hash);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga936802da41af02ca6c660e18ade52dbb_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga936802da41af02ca6c660e18ade52dbb_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga936802da41af02ca6c660e18ade52dbb_cgraph" id="d6/da2/group__tcmi__migman__class_ga936802da41af02ca6c660e18ade52dbb_cgraph">
<area shape="rect" id="node2" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="214,5,375,32"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="219,56,370,83"/><area shape="rect" id="node9" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)" alt="" coords="237,107,352,133"/><area shape="rect" id="node10" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="226,157,363,184"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="425,31,537,57"/><area shape="rect" id="node5" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="424,81,539,108"/><area shape="rect" id="node6" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="593,31,700,57"/><area shape="rect" id="node7" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="591,81,703,108"/><area shape="rect" id="node8" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="587,132,707,159"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9115d78a679e54cf4bf78cf051d6782e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_change_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a>&#160;</td>
          <td class="paramname"><em>old_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">old_state</td><td>- old state, that must hold in order to succeed in change </td></tr>
    <tr><td class="paramname">state</td><td>- new state to be set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Non zero, in case change was performed </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00235">235</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">tcmi_migman_kill()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a> current_state = (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a>)atomic_cmpxchg(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7934e69c38adfb695fc2a3d95da021b1" title="Denotes the current state of the manager.">state</a>, (<span class="keywordtype">int</span>)old_state, (int)state);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> current_state == old_state;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaa481ed8e2b5db852737e1591af2d3202"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_migman_create_symlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00751">751</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00196">kkc_sock_getpeername()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00060">KKC_SOCK_MAX_ADDR_LENGTH</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00054">tcmi_ctlfs_symlink_new()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;{</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordtype">char</span> n[<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>];</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="comment">//char * n = kmalloc(KKC_SOCK_MAX_ADDR_LENGTH,GFP_KERNEL);</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordtype">int</span> i = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4,<span class="stringliteral">&quot;tcmi_migman_create_symlink&quot;</span>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor.">kkc_sock_getpeername</a>(sock,n,<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">while</span>(i&gt;-1 &amp;&amp; n[i]!=<span class="charliteral">&#39;:&#39;</span>)i--;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">if</span>(i&gt;-1 &amp;&amp; n[i] == <span class="charliteral">&#39;:&#39;</span>)n[i]=0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span>(!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#afe93b7e5095e938b0fa54acaf5735451">s_migman</a>=<a class="code" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry.">tcmi_ctlfs_symlink_new</a>(root,self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>,n))){</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gaa481ed8e2b5db852737e1591af2d3202_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gaa481ed8e2b5db852737e1591af2d3202_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gaa481ed8e2b5db852737e1591af2d3202_cgraph" id="d6/da2/group__tcmi__migman__class_gaa481ed8e2b5db852737e1591af2d3202_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="197,5,357,32"/><area shape="rect" id="node3" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry." alt="" coords="197,56,357,83"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="405,81,544,108"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="405,31,544,57"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="594,31,747,57"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="593,81,749,108"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="600,132,741,159"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="597,183,745,225"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gafa1e34536a26378cc123baadbde5452e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_deliver_msg </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Message delivering method that is called back from the receiving thread of TCMI comm component instance. </p>
<p>This method is reponsible for delivering the message reliably to its destination which can be:</p>
<ul>
<li>local migration manager message queue</li>
<li>local migration manager transaction slot vector</li>
<li>TCMI task message queue</li>
<li>TCMI task transaction slot vector</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to the migration manager instance. passed to the TCMI comm component upon creation </td></tr>
    <tr><td class="paramname">*m</td><td>- points to the message that is to be delivered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful delivery </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">604</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d23/tcmi__signal__msg_8h_source.html#l00069">pid</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00332">tcmi_migman_id()</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00297">tcmi_msg_deliver()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00083">TCMI_MSG_GROUP</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00108">TCMI_MSG_GROUP_PROC</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d5/d2b/tcmi__procmsg_8h_source.html#l00115">TCMI_PROCMSG</a>, <a class="el" href="../../d5/d2b/tcmi__procmsg_8h_source.html#l00097">tcmi_procmsg_dst_pid()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00906">tcmi_task_deliver_msg()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00936">tcmi_task_migman_id()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">tcmi_task_put()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00128">tcmi_taskhelper_find_by_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(obj);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *task;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ga9526a29f88aecae5da9f8c28be9bea4f" title="Extracts group number.">TCMI_MSG_GROUP</a>(<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m)) == <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggabc6126af1d45847bc59afa0aa3216b04a6725f18f4d3a5f445b6917c9a22a3f16">TCMI_MSG_GROUP_PROC</a>) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="comment">/* try finding the task based on PID  in the message */</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        pid_t <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a> = <a class="code" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga00174c2d363b1861e4c14e1804602df8" title="&lt;&lt;public&gt;&gt; Destination PID accessor.">tcmi_procmsg_dst_pid</a>(<a class="code" href="../../d7/dc8/group__tcmi__procmsg__class.html#gaba00344eba012e8234726bd601b06aaf" title="Casts to the tcmi_procmsg instance.">TCMI_PROCMSG</a>(m));</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Process message %08x arrived as expected for PID=%d&quot;</span>, </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;             <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m), pid);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">/* find task by PID */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">if</span> (!(task = <a class="code" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ...">tcmi_taskhelper_find_by_pid</a>(pid))) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR2, <span class="stringliteral">&quot;Can&#39;t find dest. task for msg ID=%08x&quot;</span>, </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                 <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="comment">/* Verify it belongs to us */</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c" title="&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task.">tcmi_task_migman_id</a>(task) != <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor.">tcmi_migman_id</a>(<span class="keyword">self</span>)) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR2, <span class="stringliteral">&quot;Task(PID=%d, migman ID=%08x) doesn&#39;t belong&quot;</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                 <span class="stringliteral">&quot;to migration manager ID=%08x&quot;</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task),</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                 <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c" title="&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task.">tcmi_task_migman_id</a>(task), <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor.">tcmi_migman_id</a>(<span class="keyword">self</span>));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        err = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881" title="&lt;&lt;public&gt;&gt; Delivers a specified message.">tcmi_task_deliver_msg</a>(task, m);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance.">tcmi_task_put</a>(task);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Delivering regular migration message %08x&quot;</span>,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;             <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m));</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        err = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself.">tcmi_msg_deliver</a>(m, &amp;<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;msg_queue, <a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;transactions);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; exit1:</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance.">tcmi_task_put</a>(task);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; exit0:</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gafa1e34536a26378cc123baadbde5452e_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gafa1e34536a26378cc123baadbde5452e_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gafa1e34536a26378cc123baadbde5452e_cgraph" id="d6/da2/group__tcmi__migman__class_gafa1e34536a26378cc123baadbde5452e_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor." alt="" coords="461,376,579,403"/><area shape="rect" id="node3" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself." alt="" coords="459,427,581,453"/><area shape="rect" id="node22" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="699,528,795,555"/><area shape="rect" id="node23" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga00174c2d363b1861e4c14e1804602df8" title="&lt;&lt;public&gt;&gt; Destination PID accessor." alt="" coords="230,1712,383,1739"/><area shape="rect" id="node24" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881" title="&lt;&lt;public&gt;&gt; Delivers a specified message." alt="" coords="229,703,384,729"/><area shape="rect" id="node26" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="898,1261,1035,1288"/><area shape="rect" id="node38" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c" title="&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task." alt="" coords="232,380,381,407"/><area shape="rect" id="node39" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="468,1127,572,1153"/><area shape="rect" id="node49" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="236,1646,377,1687"/><area shape="rect" id="node4" href="../../dc/d0c/group__tcmi__queue__class.html#ga640f6067e72f77558cac6c58ca898c46" title="&lt;&lt;public&gt;&gt; Locks the queue and appends a new element to the tail." alt="" coords="688,107,805,133"/><area shape="rect" id="node8" href="../../d4/d8c/group__tcmi__transaction__class.html#gacb04fbb3689a2fffdef88873aa6cda62" title="&lt;&lt;public&gt;&gt; Tries to find a transaction based on its ID." alt="" coords="665,427,828,453"/><area shape="rect" id="node15" href="../../d4/d8c/group__tcmi__transaction__class.html#ga283a3e7e1414ff2eb5a49300c4af3208" title="&lt;&lt;public&gt;&gt; Completes a transaction and wakes up the processing thread." alt="" coords="657,351,836,377"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1098,477,1233,504"/><area shape="rect" id="node21" href="../../d4/d8c/group__tcmi__transaction__class.html#ga96d22d09c9571b01fee1eacf0b0c0b6b" title="&lt;&lt;public&gt;&gt; Checks on an anonymous transaction." alt="" coords="661,56,832,83"/><area shape="rect" id="node5" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="901,5,1032,32"/><area shape="rect" id="node6" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="907,56,1027,83"/><area shape="rect" id="node7" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="899,107,1034,133"/><area shape="rect" id="node9" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="886,731,1047,757"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1103,617,1228,644"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="911,680,1023,707"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="895,427,1038,453"/><area shape="rect" id="node14" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1096,541,1235,568"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="892,325,1041,352"/><area shape="rect" id="node17" href="../../d4/d8c/group__tcmi__transaction__class.html#ga01baf770d7a3fdaa6931024d50f9d039" title="&lt;&lt;public&gt;&gt; Transaction state accessor." alt="" coords="889,376,1044,403"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#gaf09ca8b38517289edf0bdb43ec06360d" title="&lt;&lt;public&gt;&gt; Checks on a running transaction." alt="" coords="899,209,1034,250"/><area shape="rect" id="node19" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="885,275,1048,301"/><area shape="rect" id="node20" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="895,579,1038,605"/><area shape="rect" id="node25" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga460e4aa5dcb20680794c04a07712e59f" title="&lt;&lt;public&gt;&gt; Getter of flag idicating whether we should switch to migmode or not" alt="" coords="443,725,597,766"/><area shape="rect" id="node27" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="901,869,1033,896"/><area shape="rect" id="node28" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="433,489,607,516"/><area shape="rect" id="node30" href="../../de/d2f/group__tcmi__task__class.html#ga491523e65c3fb2f665013a2f15899cb8" title="&lt;&lt;public&gt;&gt; Called from method queue &#45; Processes one message from the message queue." alt="" coords="438,673,602,700"/><area shape="rect" id="node35" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga9dbb48f23b9ec6a00498db53f026ef4b" title="&lt;&lt;public&gt;&gt; Switches the task into migration mode." alt="" coords="445,1507,595,1549"/><area shape="rect" id="node29" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="657,477,836,504"/><area shape="rect" id="node31" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="656,579,837,605"/><area shape="rect" id="node32" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty." alt="" coords="677,833,817,874"/><area shape="rect" id="node33" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="695,680,799,707"/><area shape="rect" id="node34" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaf0a8913b9f40f66641ad7076e023dd58" title="&lt;&lt;public&gt;&gt; Method wrapper accessor." alt="" coords="659,629,834,656"/><area shape="rect" id="node36" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="662,1624,831,1651"/><area shape="rect" id="node37" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="907,1649,1026,1676"/><area shape="rect" id="node40" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="695,1320,798,1347"/><area shape="rect" id="node41" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="664,1371,829,1397"/><area shape="rect" id="node42" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="677,1421,816,1448"/><area shape="rect" id="node43" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="678,1472,815,1499"/><area shape="rect" id="node44" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="687,1101,806,1128"/><area shape="rect" id="node45" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="659,1152,834,1179"/><area shape="rect" id="node46" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca..." alt="" coords="659,1254,834,1295"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f" title="&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec" alt="" coords="657,731,837,757"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="684,1203,809,1229"/><area shape="rect" id="node50" href="../../de/d2f/group__tcmi__task__class.html#gafb7d2e6227e173c0bdc6fb99ff12bcbc" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="468,1725,572,1752"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga94df994d6d2ad3dd9aa6543ee67bf934"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_migman_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Free method is has two purposes:</p>
<ol type="1">
<li>when the last reference is released, it will free all instance resources, except for the instance itself. </li>
</ol>
</p>
<ol type="1">
<li>calls the child class free method if defined</li>
</ol>
<p>Note: It is important to free communication channels first, i.e. communication socket, processing thread and files. This ensures, that no new messages that may require reference to migman for processing will arrive. File operations are synchronized with releasing so it may be possible that some file works with the migman during the free method, but only until the file is ''synchronously'' released. </p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">228</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00109">tcmi_comm_put()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00454">tcmi_migman_stop_ctlfs_dirs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00472">tcmi_migman_stop_ctlfs_files()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00572">tcmi_migman_stop_thread()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00208">tcmi_migman_unhash()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>, and <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{ </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">/* terminate the processing thread first to prevent any</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">     * message processing */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for...">tcmi_migman_stop_thread</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">/* also stop receiving all messages */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance.">tcmi_comm_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0b330796431a0c307c7cffc3a3346380" title="Communication component used for message receiving and delivery.">comm</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files.">tcmi_migman_stop_ctlfs_files</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories">tcmi_migman_stop_ctlfs_dirs</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance.">tcmi_sock_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a11b686ed0d6552eaf7abe63fd6dd5378" title="TCMI socket that represents an active connection to the PEN.">sock</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager.">tcmi_migman_unhash</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* now we are safe and we can start cleaning the rest */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a4365d06985fa2f073a3ba98b4802b82d" title="Releases the instance specific resources.">free</a>)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;free(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">/* TODO: check for stale transactions.. */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a4acd12d41cd5baddc4b8c330313e3648" title="Message transactions.">transactions</a>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">/* Note: Assumes, all tasks are already migrated back. */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga94df994d6d2ad3dd9aa6543ee67bf934_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga94df994d6d2ad3dd9aa6543ee67bf934_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga94df994d6d2ad3dd9aa6543ee67bf934_cgraph" id="d6/da2/group__tcmi__migman__class_ga94df994d6d2ad3dd9aa6543ee67bf934_cgraph">
<area shape="rect" id="node2" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="220,116,335,143"/><area shape="rect" id="node9" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="182,309,373,336"/><area shape="rect" id="node12" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="196,243,359,285"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="190,360,365,387"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="203,411,352,437"/><area shape="rect" id="node23" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="218,461,337,488"/><area shape="rect" id="node25" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="224,175,331,201"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="457,107,559,133"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="678,5,778,32"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="645,56,811,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="643,107,813,133"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="871,56,1031,83"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="869,107,1032,133"/><area shape="rect" id="node10" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="439,309,577,336"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="651,309,805,336"/><area shape="rect" id="node13" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="422,259,594,285"/><area shape="rect" id="node16" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="645,208,811,235"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="861,259,1040,285"/><area shape="rect" id="node15" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1088,251,1253,293"/><area shape="rect" id="node17" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="885,208,1017,235"/><area shape="rect" id="node18" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="877,157,1024,184"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="455,360,561,387"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="448,411,568,437"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="449,461,567,488"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gacd13117046ccc1fa12ac743b893fcfca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>* tcmi_migman_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> instance </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00201">201</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00504">tcmi_man_emig_npm()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00455">tcmi_man_emig_ppm_p()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00542">tcmi_man_fork()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00173">tcmi_man_send_generic_user_message()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">tcmi_task_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        atomic_inc(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ad7246d62296a931b57677531541f0be0" title="Instance reference counter.">ref_count</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga5d70369a7eb27d7aac550ce6a2ca12e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u_int32_t tcmi_migman_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migration manager ID accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tcmi_slot_node </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00332">332</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00936">tcmi_task_migman_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;id;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9bdb189ca17e989ab59c89c2dc912600"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_migman_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>ccn_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>pen_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9">arch_ids</a>&#160;</td>
          <td class="paramname"><em>peer_arch_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *&#160;</td>
          <td class="paramname"><em>manager_slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>migproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>namefmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; TCMI migration manager initializer. </p>
<p>&lt;&lt;public&gt;&gt; TCMI migration manager initializer.</p>
<p>&lt;&lt;public&gt;&gt; TCMI migration manager initializer. The initialization is accomplished exactly in this order:</p>
<ul>
<li>set ID's and initial state</li>
<li>initialize message queue and the transaction vector</li>
<li>choose a unique ID for the manager.</li>
<li>store a reference to a mig proc directory - it's required when immigrating a process.</li>
<li>start TCMI communication component</li>
<li>create TCMI ctlfs directories</li>
<li>create TCMI ctlfs control files</li>
<li>create a TCMI socket to represent the connection in filesystem</li>
<li>run the message processing thread.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- this migration manager instance </td></tr>
    <tr><td class="paramname">*sock</td><td>- socket where the control connection between CCN/PEN is running </td></tr>
    <tr><td class="paramname">ccn_id</td><td>- CCN identifier - valid when initializing a CCN mig. manager </td></tr>
    <tr><td class="paramname">pen_id</td><td>- PEN identifier - valid when initializing a PEN mig. manager </td></tr>
    <tr><td class="paramname">peer_arch_type</td><td>- Architecture of the peer node </td></tr>
    <tr><td class="paramname">*root</td><td>- directory where the migration manager should create its files and directories </td></tr>
    <tr><td class="paramname">*migproc</td><td>- directory where the migrated process will have their info </td></tr>
    <tr><td class="paramname">*ops</td><td>- instance specific operations </td></tr>
    <tr><td class="paramname">namefmt</td><td>- nameformat string for the main manager directory name (printf style) </td></tr>
    <tr><td class="paramname">args</td><td>- variable arguments list </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">81</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00170">tcmi_migman_ops::process_msg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00049">TASK_ORDER</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00056">tcmi_comm_new()</a>, <a class="el" href="../../de/df4/tcmi__comm_8c_source.html#l00109">tcmi_comm_put()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00751">tcmi_migman_create_symlink()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00081">TCMI_MIGMAN_INIT</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00358">tcmi_migman_init_ctlfs_dirs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00404">tcmi_migman_init_ctlfs_files()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00547">tcmi_migman_start_thread()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00454">tcmi_migman_stop_ctlfs_dirs()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00472">tcmi_migman_stop_ctlfs_files()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00110">TCMI_MSG_GROUP_ANY</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00097">tcmi_queue_init()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00095">tcmi_slotvec_hnew()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00058">tcmi_sock_new()</a>, <a class="el" href="../../da/d37/tcmi__sock_8c_source.html#l00128">tcmi_sock_put()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00047">TRANSACTION_ORDER</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00066">tcmi_ccnmigman_new()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00067">tcmi_penmigman_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">int</span> err = -EINVAL;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO2, <span class="stringliteral">&quot;Creating new TCMI migration manager&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7934e69c38adfb695fc2a3d95da021b1" title="Denotes the current state of the manager.">state</a>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0e7ce596cac5174cf4406a849b27b845">TCMI_MIGMAN_INIT</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keyword">self</span>-&gt;ccn_id = ccn_id;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keyword">self</span>-&gt;pen_id = pen_id;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">self</span>-&gt;manager_slot = manager_slot;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">self</span>-&gt;peer_arch_type = peer_arch_type;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ad7246d62296a931b57677531541f0be0" title="Instance reference counter.">ref_count</a>, 1);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer - for static allocation.">tcmi_queue_init</a>(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a18b6566fc50754fc12e2f57f918da8ea" title="Message queue for transaction-less messages.">msg_queue</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    get_random_bytes(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a379a010dfbbb2bd81ae60678303d1127" title="Unique, randomly generated ID.">id</a>, <span class="keyword">sizeof</span>(u_int32_t));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">self</span>-&gt;ops = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (!ops) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing migration manager operations!&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (!ops-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#aa97bf662d2c720edb0689b2078a6d8ad" title="Processes a TCMI message m.">process_msg</a>) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing process message operation!&quot;</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a4acd12d41cd5baddc4b8c330313e3648" title="Message transactions.">transactions</a> = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$.">tcmi_slotvec_hnew</a>(<a class="code" href="../../d6/d82/tcmi__migman_8c.html#a7e2213bf1ab2d8a6210c3e58e363a2ae" title="2^8 elements in the transaction process hash">TRANSACTION_ORDER</a>))) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create transactions slotvector!&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a> = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$.">tcmi_slotvec_hnew</a>(<a class="code" href="../../d6/d82/tcmi__migman_8c.html#a308d7744efb6fa9fc9d41f4f2ec84afe" title="2^9 elements in the process hash">TASK_ORDER</a>))) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create tasks slotvector!&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    } </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">/* TCMI comm that accepts all types of messages */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0b330796431a0c307c7cffc3a3346380" title="Communication component used for message receiving and delivery.">comm</a> = <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga6dd2840fed12c1b41a99ec4cd0f3457c" title="&lt;&lt;public&gt;&gt; TCMI communication component constructor.">tcmi_comm_new</a>(sock, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafa1e34536a26378cc123baadbde5452e" title="&lt;&lt;private&gt;&gt; Message delivering method that is called back from the receiving thread of TCMI comm comp...">tcmi_migman_deliver_msg</a>, <span class="keyword">self</span>, </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                     <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggabc6126af1d45847bc59afa0aa3216b04aea71d1682a4618000736e8320f36f3a1">TCMI_MSG_GROUP_ANY</a>))) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create TCMI comm component!&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gaf3923f508f4f54440732f33c4f0356dc" title="&lt;&lt;private&gt;&gt; Creates the directories as described in here .">tcmi_migman_init_ctlfs_dirs</a>(<span class="keyword">self</span>, root, migproc, namefmt, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496" title="Arrays of args and envps.">args</a>) &lt; 0) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create ctlfs directories!&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating symlink: self: %p root: %p sock %p&quot;</span>,<span class="keyword">self</span>, root, sock);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gaa481ed8e2b5db852737e1591af2d3202">tcmi_migman_create_symlink</a>(<span class="keyword">self</span>, root, sock) &lt; 0){</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create ctlfs symlink!&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <span class="keywordflow">goto</span> exit4;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga0f519d477e445de52505689f56c968e6" title="&lt;&lt;private&gt;&gt; Creates the static files described here .">tcmi_migman_init_ctlfs_files</a>(<span class="keyword">self</span>) &lt; 0) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create ctlfs files!&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">goto</span> exit4;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a11b686ed0d6552eaf7abe63fd6dd5378" title="TCMI socket that represents an active connection to the PEN.">sock</a> = <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor.">tcmi_sock_new</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a2323e802e7ef7080a9ec8b201fa9753b" title="TCMI ctlfs - directory for active connections.">d_conns</a>, sock, <span class="stringliteral">&quot;ctrlconn&quot;</span>))) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create a TCMI socket!&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">goto</span> exit5;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gad4006fee98cc9ef9bba73a33dc28bc66" title="&lt;&lt;private&gt;&gt; Starts the listening thread.">tcmi_migman_start_thread</a>(<span class="keyword">self</span>) &lt; 0) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create message processing thread!&quot;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">goto</span> exit6;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; exit6:</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance.">tcmi_sock_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a11b686ed0d6552eaf7abe63fd6dd5378" title="TCMI socket that represents an active connection to the PEN.">sock</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; exit5:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files.">tcmi_migman_stop_ctlfs_files</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; exit4:</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories">tcmi_migman_stop_ctlfs_dirs</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; exit3:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance.">tcmi_comm_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0b330796431a0c307c7cffc3a3346380" title="Communication component used for message receiving and delivery.">comm</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; exit2:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; exit1:</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a4acd12d41cd5baddc4b8c330313e3648" title="Message transactions.">transactions</a>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; exit0:</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga9bdb189ca17e989ab59c89c2dc912600_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga9bdb189ca17e989ab59c89c2dc912600_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga9bdb189ca17e989ab59c89c2dc912600_cgraph" id="d6/da2/group__tcmi__migman__class_ga9bdb189ca17e989ab59c89c2dc912600_cgraph">
<area shape="rect" id="node2" href="../../d9/dfc/group__tcmi__comm__class.html#ga6dd2840fed12c1b41a99ec4cd0f3457c" title="&lt;&lt;public&gt;&gt; TCMI communication component constructor." alt="" coords="447,93,567,120"/><area shape="rect" id="node11" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="217,205,332,232"/><area shape="rect" id="node12" href="../../d6/da2/group__tcmi__migman__class.html#gaa481ed8e2b5db852737e1591af2d3202" title="tcmi_migman_create\l_symlink" alt="" coords="203,390,346,431"/><area shape="rect" id="node15" href="../../d6/da2/group__tcmi__migman__class.html#gafa1e34536a26378cc123baadbde5452e" title="&lt;&lt;private&gt;&gt; Message delivering method that is called back from the receiving thread of TCMI comm comp..." alt="" coords="187,1164,362,1191"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#gaf3923f508f4f54440732f33c4f0356dc" title="&lt;&lt;private&gt;&gt; Creates the directories as described in here ." alt="" coords="183,549,366,576"/><area shape="rect" id="node32" href="../../d6/da2/group__tcmi__migman__class.html#ga0f519d477e445de52505689f56c968e6" title="&lt;&lt;private&gt;&gt; Creates the static files described here ." alt="" coords="429,803,584,845"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#gad4006fee98cc9ef9bba73a33dc28bc66" title="&lt;&lt;private&gt;&gt; Starts the listening thread." alt="" coords="187,1341,363,1368"/><area shape="rect" id="node40" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="179,716,370,743"/><area shape="rect" id="node41" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="193,855,356,897"/><area shape="rect" id="node43" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer &#45; for static allocation." alt="" coords="218,1392,331,1419"/><area shape="rect" id="node44" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$." alt="" coords="209,1493,340,1520"/><area shape="rect" id="node26" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="675,1189,794,1216"/><area shape="rect" id="node46" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor." alt="" coords="451,296,563,323"/><area shape="rect" id="node50" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="453,651,560,677"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="683,93,786,120"/><area shape="rect" id="node4" href="../../d9/dfc/group__tcmi__comm__class.html#gaef03fa6d00b3c8a916625e2d17b961d0" title="&lt;&lt;private&gt;&gt; Messages receiving thread." alt="" coords="668,43,801,69"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="683,144,786,171"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="877,132,1043,159"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="875,183,1045,209"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gadafc7c835c7d6d94be66f61a050108b7" title="&lt;&lt;public&gt;&gt; Receives requested number of bytes of data." alt="" coords="906,56,1014,83"/><area shape="rect" id="node9" href="../../de/dc6/group__tcmi__msg__factory__class.html#gad7b63f4c6657bcd0eaf759d79d344981" title="&lt;&lt;public&gt;&gt; Materializes the message." alt="" coords="897,5,1023,32"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1093,347,1253,373"/><area shape="rect" id="node13" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry." alt="" coords="427,397,587,424"/><area shape="rect" id="node14" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="665,549,804,576"/><area shape="rect" id="node16" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor." alt="" coords="676,1063,793,1089"/><area shape="rect" id="node17" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself." alt="" coords="673,1341,796,1368"/><area shape="rect" id="node18" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="687,1417,783,1444"/><area shape="rect" id="node19" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga00174c2d363b1861e4c14e1804602df8" title="&lt;&lt;public&gt;&gt; Destination PID accessor." alt="" coords="430,1139,583,1165"/><area shape="rect" id="node20" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881" title="&lt;&lt;public&gt;&gt; Delivers a specified message." alt="" coords="429,1392,584,1419"/><area shape="rect" id="node21" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="666,1240,803,1267"/><area shape="rect" id="node22" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c" title="&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task." alt="" coords="432,1088,581,1115"/><area shape="rect" id="node23" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="455,1189,559,1216"/><area shape="rect" id="node28" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="436,971,577,1013"/><area shape="rect" id="node24" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="652,912,817,939"/><area shape="rect" id="node25" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="665,659,804,685"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="901,1189,1019,1216"/><area shape="rect" id="node30" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="667,448,802,475"/><area shape="rect" id="node31" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="442,448,571,475"/><area shape="rect" id="node33" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="661,499,808,525"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#gac71618221f842f2032e6141c21eed095" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs &#45; reports migration manager state." alt="" coords="648,811,821,837"/><area shape="rect" id="node35" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="662,861,807,888"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#ga4bcd1bc07e002ed4bc6fafcd44215749" title="&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager" alt="" coords="643,709,826,736"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#ga7250c98a0358cb6c95dfbe5fd427c09c" title="&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager" alt="" coords="648,760,821,787"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga698d639006881752225f808c1d345b1b" title="&lt;&lt;private&gt;&gt; Message processing thread." alt="" coords="419,1493,594,1520"/><area shape="rect" id="node42" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="421,869,593,896"/><area shape="rect" id="node45" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance." alt="" coords="445,1544,569,1571"/><area shape="rect" id="node47" href="../../d3/d7e/group__tcmi__sock__class.html#gad1f976e6e2c20c9f97fa0977cf7c00a8" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its localname." alt="" coords="651,296,818,323"/><area shape="rect" id="node48" href="../../d3/d7e/group__tcmi__sock__class.html#ga2febb49f11f25c34307c57b735c6307b" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its peername." alt="" coords="878,347,1042,373"/><area shape="rect" id="node49" href="../../d3/d7e/group__tcmi__sock__class.html#ga4772df777dec4418da664b5428b6039a" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its peername." alt="" coords="653,195,817,221"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf3923f508f4f54440732f33c4f0356dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_init_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>migproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>namefmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the directories as described in <a class="el" href="../../d6/da2/group__tcmi__migman__class.html">here </a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
    <tr><td class="paramname">*root</td><td>- root directory where to create TCMI ctlfs entries </td></tr>
    <tr><td class="paramname">*migproc</td><td>- directory where the migrated process will have their info </td></tr>
    <tr><td class="paramname">namefmt</td><td>- nameformat string for the main manager directory name (printf style) </td></tr>
    <tr><td class="paramname">args</td><td>- arguments to the format string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00358">358</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00049">tcmi_ctlfs_dir_new()</a>, <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00073">tcmi_ctlfs_dir_vnew()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00178">tcmi_ctlfs_entry_get()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>, and <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00087">TCMI_PERMS_DIR</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating directories&quot;</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a> = <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_vnew</a>(root, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, namefmt, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496" title="Arrays of args and envps.">args</a>)))</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a2323e802e7ef7080a9ec8b201fa9753b" title="TCMI ctlfs - directory for active connections.">d_conns</a> = </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;connections&quot;</span>)))</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7f982a5bcda94e88ccc5ba8888f73af9" title="TCMI ctlfs - reference to the migproc directory - needed when immigrating a process.">d_migproc</a> = <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter...">tcmi_ctlfs_entry_get</a>(migproc))) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing migproc directory for migration manager!&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a3adf20fa1a2a4618eb50783e54b2978c" title="Initializes TCMI ctlfs directories.">init_ctlfs_dirs</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a3adf20fa1a2a4618eb50783e54b2978c" title="Initializes TCMI ctlfs directories.">init_ctlfs_dirs</a>(<span class="keyword">self</span>)) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create specific ctlfs directories!&quot;</span>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; exit3:</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7f982a5bcda94e88ccc5ba8888f73af9" title="TCMI ctlfs - reference to the migproc directory - needed when immigrating a process.">d_migproc</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; exit2:</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a2323e802e7ef7080a9ec8b201fa9753b" title="TCMI ctlfs - directory for active connections.">d_conns</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; exit1:</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; exit0:</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gaf3923f508f4f54440732f33c4f0356dc_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gaf3923f508f4f54440732f33c4f0356dc_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gaf3923f508f4f54440732f33c4f0356dc_cgraph" id="d6/da2/group__tcmi__migman__class_gaf3923f508f4f54440732f33c4f0356dc_cgraph">
<area shape="rect" id="node2" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="242,72,371,99"/><area shape="rect" id="node3" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="426,93,561,120"/><area shape="rect" id="node10" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="424,173,563,200"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="237,224,376,251"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="611,56,749,83"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga71558bf14c4a13eed4e4b9ca240fd016" title="&lt;&lt;public&gt;&gt; Increments the number of links referencing this entry&#39;s inode." alt="" coords="611,107,749,149"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="799,173,953,200"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="798,5,954,32"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="805,56,947,83"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="802,107,950,149"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0f519d477e445de52505689f56c968e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_init_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d6/da2/group__tcmi__migman__class.html">here </a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00404">404</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00155">tcmi_ctlfs_file_unregister()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00063">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00100">tcmi_ctlfs_strfile_new()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00511">tcmi_migman_kill_request()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00526">tcmi_migman_show_state()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00051">TCMI_MIGMAN_STATE_LENGTH</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00497">tcmi_migman_stop_request()</a>, <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00091">TCMI_PERMS_FILE_R</a>, and <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00089">TCMI_PERMS_FILE_W</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating files&quot;</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac34f5543920d4e795d663e4bbea0db11" title="TCMI ctlfs - reports current state of the manager.">f_state</a> = </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_strfile_new</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#ga84907a0ffd1393cf8b462e14c9b4140a" title="Preferred read file rights.">TCMI_PERMS_FILE_R</a>,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                     <span class="keyword">self</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gac71618221f842f2032e6141c21eed095" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports migration manager state.">tcmi_migman_show_state</a>, NULL,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                     <a class="code" href="../../d6/d82/tcmi__migman_8c.html#af23ef88a7f5ee038746a70d12d73ecac" title="Max length of the state description.">TCMI_MIGMAN_STATE_LENGTH</a>, <span class="stringliteral">&quot;state&quot;</span>)))</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae5c04e6a281b59180d7970a490f7bb92" title="TCMI ctlfs - request shutdown of this migration manager.">f_stop</a> = </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga4bcd1bc07e002ed4bc6fafcd44215749" title="&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager">tcmi_migman_stop_request</a>,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;stop&quot;</span>)))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8dff923f962afb87c0d712a1762ece35" title="TCMI ctlfs - request kill of this migration manager.">f_kill</a> = </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga7250c98a0358cb6c95dfbe5fd427c09c" title="&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager">tcmi_migman_kill_request</a>,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                     <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="stringliteral">&quot;kill&quot;</span>)))</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a2f5a49addfd9139ba2f3e29bc1f9633f" title="Initializes TCMI ctlfs files.">init_ctlfs_files</a> &amp;&amp; self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a2f5a49addfd9139ba2f3e29bc1f9633f" title="Initializes TCMI ctlfs files.">init_ctlfs_files</a>(<span class="keyword">self</span>)) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to create specific ctlfs files!&quot;</span>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; exit3:</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8dff923f962afb87c0d712a1762ece35" title="TCMI ctlfs - request kill of this migration manager.">f_kill</a>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8dff923f962afb87c0d712a1762ece35" title="TCMI ctlfs - request kill of this migration manager.">f_kill</a>);     </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; exit2:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae5c04e6a281b59180d7970a490f7bb92" title="TCMI ctlfs - request shutdown of this migration manager.">f_stop</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae5c04e6a281b59180d7970a490f7bb92" title="TCMI ctlfs - request shutdown of this migration manager.">f_stop</a>); </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; exit1:</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac34f5543920d4e795d663e4bbea0db11" title="TCMI ctlfs - reports current state of the manager.">f_state</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac34f5543920d4e795d663e4bbea0db11" title="TCMI ctlfs - reports current state of the manager.">f_state</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; exit0:</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga0f519d477e445de52505689f56c968e6_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga0f519d477e445de52505689f56c968e6_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga0f519d477e445de52505689f56c968e6_cgraph" id="d6/da2/group__tcmi__migman__class_ga0f519d477e445de52505689f56c968e6_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1604,471,1743,498"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1808,310,1973,337"/><area shape="rect" id="node9" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="227,657,373,683"/><area shape="rect" id="node15" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="227,606,373,633"/><area shape="rect" id="node16" href="../../d6/da2/group__tcmi__migman__class.html#ga7250c98a0358cb6c95dfbe5fd427c09c" title="&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager" alt="" coords="213,370,387,397"/><area shape="rect" id="node42" href="../../d6/da2/group__tcmi__migman__class.html#gac71618221f842f2032e6141c21eed095" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs &#45; reports migration manager state." alt="" coords="440,487,613,514"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#ga4bcd1bc07e002ed4bc6fafcd44215749" title="&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager" alt="" coords="209,426,391,453"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1814,622,1967,649"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="2045,259,2177,286"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="2021,361,2200,387"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="2037,310,2184,337"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="2248,353,2413,395"/><area shape="rect" id="node10" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="440,657,613,683"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="684,665,823,691"/><area shape="rect" id="node12" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="899,723,1055,750"/><area shape="rect" id="node13" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="907,606,1048,633"/><area shape="rect" id="node14" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="903,657,1051,699"/><area shape="rect" id="node17" href="../../d6/da2/group__tcmi__migman__class.html#ga246a095eba1258bb860f9ade10506cd7" title="Kills all tasks associated with this migman and drops reference to the migman (in case it was not alr..." alt="" coords="692,321,815,347"/><area shape="rect" id="node18" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="894,253,1061,279"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#gade0457c5e0d6da06f17c62636ff17fe8" title="Sends a kill signal to all tasks managed by this manager." alt="" coords="929,151,1026,178"/><area shape="rect" id="node27" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="903,304,1052,345"/><area shape="rect" id="node28" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="915,370,1040,397"/><area shape="rect" id="node41" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="909,487,1045,514"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="1147,253,1261,279"/><area shape="rect" id="node21" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1141,101,1267,127"/><area shape="rect" id="node22" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1135,202,1273,229"/><area shape="rect" id="node23" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="1605,139,1742,166"/><area shape="rect" id="node24" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task." alt="" coords="1114,50,1294,77"/><area shape="rect" id="node25" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="1358,75,1527,102"/><area shape="rect" id="node26" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="1614,75,1733,102"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1140,303,1268,330"/><area shape="rect" id="node30" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1385,202,1500,229"/><area shape="rect" id="node32" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1347,471,1538,498"/><area shape="rect" id="node33" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1361,355,1524,396"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1355,303,1530,330"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1368,623,1517,650"/><area shape="rect" id="node39" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1383,421,1502,447"/><area shape="rect" id="node40" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1389,253,1496,279"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1622,203,1725,230"/><area shape="rect" id="node34" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="1587,361,1759,387"/><area shape="rect" id="node37" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1620,598,1727,625"/><area shape="rect" id="node38" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1613,649,1733,675"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="461,410,593,437"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="662,375,845,402"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="908,421,1047,463"/><area shape="rect" id="node47" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="1129,507,1279,548"/><area shape="rect" id="node48" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="1110,354,1298,381"/><area shape="rect" id="node49" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="1137,405,1271,431"/><area shape="rect" id="node50" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1152,455,1256,482"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga246a095eba1258bb860f9ade10506cd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_migman_kill </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kills all tasks associated with this migman and drops reference to the migman (in case it was not already shutting down). </p>
<p>The method is useful in case peer died without cleaning up its own tasks, because we need to clean them up before we can release reference to peer.</p>
<dl class="section return"><dt>Returns</dt><dd>1, if the migman instance was destroyed in context of this method </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">330</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00307">kill_all_tasks()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00235">tcmi_migman_change_state()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00083">TCMI_MIGMAN_SHUTTING_DOWN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>, and <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00511">tcmi_migman_kill_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                               {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;     <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Requesting kill of migration manager: %d&quot;</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;     <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gade0457c5e0d6da06f17c62636ff17fe8" title="Sends a kill signal to all tasks managed by this manager.">kill_all_tasks</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;     <span class="keywordflow">if</span> ( <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state...">tcmi_migman_change_state</a>(<span class="keyword">self</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a98a50e72214094b8fdc3a790cd8e2ad8">TCMI_MIGMAN_SHUTTING_DOWN</a>) ) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">/* Stop operation was not yet requested -&gt; request it. */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;     } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Migration manager stop was already requested -&gt; Do not perform release this call. Manager state is: %d&quot;</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<span class="keyword">self</span>));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;     }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga246a095eba1258bb860f9ade10506cd7_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga246a095eba1258bb860f9ade10506cd7_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga246a095eba1258bb860f9ade10506cd7_cgraph" id="d6/da2/group__tcmi__migman__class_ga246a095eba1258bb860f9ade10506cd7_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gade0457c5e0d6da06f17c62636ff17fe8" title="Sends a kill signal to all tasks managed by this manager." alt="" coords="211,108,309,134"/><area shape="rect" id="node9" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="185,219,335,260"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="197,285,323,312"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="177,336,343,362"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="192,386,328,413"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="420,108,545,134"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="413,158,552,185"/><area shape="rect" id="node5" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="879,6,1017,33"/><area shape="rect" id="node6" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task." alt="" coords="393,57,573,84"/><area shape="rect" id="node7" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="633,57,802,84"/><area shape="rect" id="node8" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="889,57,1007,84"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="419,285,547,312"/><area shape="rect" id="node12" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="660,260,775,286"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="622,361,813,388"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="636,412,799,454"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="630,478,805,505"/><area shape="rect" id="node30" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="643,158,792,185"/><area shape="rect" id="node33" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="658,209,777,236"/><area shape="rect" id="node35" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="664,310,771,337"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="897,260,999,286"/><area shape="rect" id="node14" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1118,209,1218,236"/><area shape="rect" id="node15" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1085,260,1251,286"/><area shape="rect" id="node17" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1083,310,1253,337"/><area shape="rect" id="node16" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1311,260,1471,286"/><area shape="rect" id="node18" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1309,310,1472,337"/><area shape="rect" id="node20" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="879,361,1017,388"/><area shape="rect" id="node21" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1091,361,1245,388"/><area shape="rect" id="node23" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="862,462,1034,489"/><area shape="rect" id="node26" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1085,412,1251,438"/><area shape="rect" id="node24" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1301,462,1480,489"/><area shape="rect" id="node25" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1528,455,1693,496"/><area shape="rect" id="node27" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1325,412,1457,438"/><area shape="rect" id="node28" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1317,361,1464,388"/><area shape="rect" id="node31" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="895,108,1001,134"/><area shape="rect" id="node32" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="888,158,1008,185"/><area shape="rect" id="node34" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="889,209,1007,236"/><area shape="rect" id="node37" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="426,336,539,362"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7250c98a0358cb6c95dfbe5fd427c09c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_kill_request </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this migration manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- ignored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00511">511</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">tcmi_migman_kill()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00404">tcmi_migman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                                           {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(obj);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga246a095eba1258bb860f9ade10506cd7" title="Kills all tasks associated with this migman and drops reference to the migman (in case it was not alr...">tcmi_migman_kill</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga7250c98a0358cb6c95dfbe5fd427c09c_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga7250c98a0358cb6c95dfbe5fd427c09c_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga7250c98a0358cb6c95dfbe5fd427c09c_cgraph" id="d6/da2/group__tcmi__migman__class_ga7250c98a0358cb6c95dfbe5fd427c09c_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga246a095eba1258bb860f9ade10506cd7" title="Kills all tasks associated with this migman and drops reference to the migman (in case it was not alr..." alt="" coords="227,285,349,312"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gade0457c5e0d6da06f17c62636ff17fe8" title="Sends a kill signal to all tasks managed by this manager." alt="" coords="433,108,530,134"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="407,219,556,260"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="419,285,544,312"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="398,336,565,362"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="413,386,549,413"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="641,108,767,134"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="635,158,773,185"/><area shape="rect" id="node6" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="1101,6,1238,33"/><area shape="rect" id="node7" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task." alt="" coords="614,57,794,84"/><area shape="rect" id="node8" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="854,57,1023,84"/><area shape="rect" id="node9" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="1110,57,1229,84"/><area shape="rect" id="node12" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="640,285,768,312"/><area shape="rect" id="node13" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="881,260,996,286"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="843,361,1034,388"/><area shape="rect" id="node23" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="857,412,1020,454"/><area shape="rect" id="node30" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="851,478,1026,505"/><area shape="rect" id="node31" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="864,158,1013,185"/><area shape="rect" id="node34" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="879,209,998,236"/><area shape="rect" id="node36" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="885,310,992,337"/><area shape="rect" id="node14" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1118,260,1221,286"/><area shape="rect" id="node15" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1339,209,1439,236"/><area shape="rect" id="node16" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1306,260,1473,286"/><area shape="rect" id="node18" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1304,310,1475,337"/><area shape="rect" id="node17" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1532,260,1692,286"/><area shape="rect" id="node19" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1531,310,1693,337"/><area shape="rect" id="node21" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1100,361,1239,388"/><area shape="rect" id="node22" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1313,361,1466,388"/><area shape="rect" id="node24" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="1083,462,1255,489"/><area shape="rect" id="node27" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1307,412,1472,438"/><area shape="rect" id="node25" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1523,462,1701,489"/><area shape="rect" id="node26" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1749,455,1915,496"/><area shape="rect" id="node28" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1546,412,1678,438"/><area shape="rect" id="node29" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1539,361,1685,388"/><area shape="rect" id="node32" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1116,108,1223,134"/><area shape="rect" id="node33" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1109,158,1229,185"/><area shape="rect" id="node35" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1110,209,1229,236"/><area shape="rect" id="node38" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="647,336,761,362"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab2ddb2c11349588bc43f2dd8f8b04fa7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_migman_migproc_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migproc directory accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>migproc directory where the migrated process publishes its info </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00344">344</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00533">tcmi_migcom_guest_fork()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, and <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;d_migproc;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf9d51a6717b090d6bd2fb4b9d7dbed07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a>* tcmi_migman_msg_queue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Message queue accesor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>message queue reference </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00293">293</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> &amp;<span class="keyword">self</span>-&gt;msg_queue;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga698d639006881752225f808c1d345b1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_msg_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Message processing thread. </p>
<p>Sleeps on the message queue and notifies the migration manager instance to process each incoming message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*data</td><td>- migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon successful thread termination. </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">654</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00096">tcmi_migman::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00121">TCMI_DISCONNECT_MSG_ID</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00266">tcmi_queue_remove_entry</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00297">tcmi_queue_wait_on_empty_interruptible()</a>, and <a class="el" href="../../d0/db1/tcmi__comm_8h_source.html#l00112">wait_on_should_stop</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00547">tcmi_migman_start_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordtype">int</span> migman_freed = 0;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *m;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">/* saves 2 derefences when calling the process msg method */</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga9cb8f073f000f6904ba204f01c95a044" title="Message processing method type for the message processing thread.">process_msg_t</a> *process_msg = <span class="keyword">self</span>-&gt;ops-&gt;process_msg;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (!process_msg) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing method to process messages!&quot;</span>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Message processing thread up and running %p&quot;</span>, current);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">while</span> (!(kthread_should_stop() || signal_pending(current))) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty.">tcmi_queue_wait_on_empty_interruptible</a>(&amp;<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;msg_queue)) &lt; 0) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Signal arrived %d&quot;</span>, err);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gad1083b0f8850c7e9ff98175807920929" title="&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.">tcmi_queue_remove_entry</a>(&amp;<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;msg_queue, m, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">if</span> (m) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Processing message..&quot;</span>);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">switch</span>(<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m)) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                process_msg(<span class="keyword">self</span>, m);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06caca0bd17acecf4909d29a12200341045e">TCMI_DISCONNECT_MSG_ID</a>:</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Received disconnect message&quot;</span>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="comment">/* </span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">                  Initiate shutdown upon reception of disconnect message </span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">                  Note: It is important not to touch self after this call and before should_stop is checked again, because self reference may be already invalid!</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">                */</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                migman_freed = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop.">tcmi_migman_stop_perform</a>(<span class="keyword">self</span>, 1);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Processing thread woken up, queue is still empty..&quot;</span>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; exit0:</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="comment">/* In case the migman was freed by this thread, no should_stop sync is performed */</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> ( !migman_freed ) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">/* We have to wait for thread terminating us as it is going to call stop at some tim */</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="../../d9/dfc/group__tcmi__comm__class.html#ga9db330620d4a0492584227e29697ae94" title="This macro implements atomic check for thread stop request and puts the task to sleep until such requ...">wait_on_should_stop</a>();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Message processing thread terminating&quot;</span>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga698d639006881752225f808c1d345b1b_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga698d639006881752225f808c1d345b1b_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga698d639006881752225f808c1d345b1b_cgraph" id="d6/da2/group__tcmi__migman__class_ga698d639006881752225f808c1d345b1b_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="230,282,413,309"/><area shape="rect" id="node48" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="273,345,369,371"/><area shape="rect" id="node49" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty." alt="" coords="251,421,391,463"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="462,190,629,217"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="471,241,620,283"/><area shape="rect" id="node6" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="476,307,615,348"/><area shape="rect" id="node33" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="937,538,1063,565"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="477,139,613,166"/><area shape="rect" id="node4" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="715,154,829,181"/><area shape="rect" id="node7" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="697,307,847,348"/><area shape="rect" id="node22" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="678,373,866,399"/><area shape="rect" id="node30" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="705,205,839,231"/><area shape="rect" id="node32" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="948,255,1052,282"/><area shape="rect" id="node8" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="939,310,1061,337"/><area shape="rect" id="node9" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1164,335,1313,362"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1165,158,1313,185"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1823,183,1958,210"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1392,234,1555,261"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1393,31,1554,58"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1396,82,1551,109"/><area shape="rect" id="node21" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1398,133,1549,159"/><area shape="rect" id="node14" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1603,82,1746,109"/><area shape="rect" id="node15" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1828,133,1953,159"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1829,31,1952,58"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1821,82,1960,109"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="2068,82,2175,109"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="2061,183,2181,210"/><area shape="rect" id="node23" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="943,437,1057,463"/><area shape="rect" id="node24" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1182,386,1295,413"/><area shape="rect" id="node26" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1133,437,1344,463"/><area shape="rect" id="node27" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1163,487,1314,514"/><area shape="rect" id="node28" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1163,538,1314,565"/><area shape="rect" id="node25" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1402,386,1545,413"/><area shape="rect" id="node29" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1399,538,1548,565"/><area shape="rect" id="node31" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="915,205,1085,231"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1611,411,1739,438"/><area shape="rect" id="node35" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1833,437,1948,463"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1795,487,1986,514"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1809,539,1972,580"/><area shape="rect" id="node42" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1803,234,1978,261"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1816,285,1965,311"/><area shape="rect" id="node44" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1831,335,1950,362"/><area shape="rect" id="node46" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1837,386,1944,413"/><area shape="rect" id="node36" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="2070,437,2173,463"/><area shape="rect" id="node38" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="2052,487,2191,514"/><area shape="rect" id="node40" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="2035,538,2207,565"/><area shape="rect" id="node41" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2256,538,2421,565"/><area shape="rect" id="node45" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2062,335,2181,362"/><area shape="rect" id="node50" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="479,474,611,501"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7aeac128b81747e7bf32016a800ce457"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897">tcmi_slot_node_t</a>* tcmi_migman_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Slot node accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tcmi_slot_node </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00319">319</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> &amp;<span class="keyword">self</span>-&gt;node;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga510ce89add226478847ff0bbeb56a6c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_migman_notify_peer_disconnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00262">262</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d4/dbc/tcmi__disconnect__msg_8c_source.html#l00061">tcmi_disconnect_msg_new_tx()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00307">tcmi_migman_sock()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00159">TCMI_MSG</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, and <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00138">tcmi_msg_send_anonymous()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                                         {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a>* msg;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> ( !( msg = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga91f3fd64c88d27100f1e4c7125a73a0e" title="Casts to the tcmi_msg instance.">TCMI_MSG</a>(<a class="code" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor.">tcmi_disconnect_msg_new_tx</a>()) ) ) { </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Error creating disconnect message&quot;</span>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection.">tcmi_msg_send_anonymous</a>(msg, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor.">tcmi_migman_sock</a>(<span class="keyword">self</span>)))) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Error sending disconnect message %d&quot;</span>, err);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(msg);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }       </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga510ce89add226478847ff0bbeb56a6c4_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga510ce89add226478847ff0bbeb56a6c4_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga510ce89add226478847ff0bbeb56a6c4_cgraph" id="d6/da2/group__tcmi__migman__class_ga510ce89add226478847ff0bbeb56a6c4_cgraph">
<area shape="rect" id="node2" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="212,221,361,262"/><area shape="rect" id="node23" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="219,360,354,387"/><area shape="rect" id="node25" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="463,309,567,336"/><area shape="rect" id="node26" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="193,411,381,437"/><area shape="rect" id="node3" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="454,181,575,208"/><area shape="rect" id="node4" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="679,107,828,133"/><area shape="rect" id="node5" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="679,157,827,184"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1319,208,1454,235"/><area shape="rect" id="node6" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="907,5,1069,32"/><area shape="rect" id="node7" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="907,56,1069,83"/><area shape="rect" id="node8" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="911,208,1065,235"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1118,107,1269,133"/><area shape="rect" id="node9" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1122,309,1265,336"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1324,259,1449,285"/><area shape="rect" id="node12" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1325,360,1448,387"/><area shape="rect" id="node19" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1317,309,1456,336"/><area shape="rect" id="node13" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1505,335,1642,361"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1520,272,1627,299"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1513,215,1633,241"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1713,335,1831,361"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1691,248,1853,275"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1901,205,2013,232"/><area shape="rect" id="node21" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1331,107,1443,133"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="1329,157,1444,184"/><area shape="rect" id="node24" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="429,360,600,387"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="457,411,572,437"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="697,360,810,387"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="648,411,859,437"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="678,461,829,488"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="678,512,829,539"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="917,360,1059,387"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="913,436,1063,463"/><area shape="rect" id="node34" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="917,487,1059,513"/><area shape="rect" id="node35" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="917,538,1059,579"/><area shape="rect" id="node36" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="907,604,1069,631"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga14fedf6a8cf9ea39c42951da16d1d351"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9">arch_ids</a> tcmi_migman_peer_arch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Getter of peer architecture type </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>architecture of peer computer </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00355">355</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;{</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;peer_arch_type;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gab536c262c24d8fc76cdbdfa8d6d65b81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_migman_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the instance. </p>
<p>Releases the instance.</p>
<ul>
<li>calls the free method specific to a particular migration manager</li>
<li>stop message receiving thread</li>
<li>destroy TCMI socket</li>
<li>unregister all ctlfs files as we don't want anymore requests from users.</li>
<li>unregister all ctlfs directories</li>
<li>release the communication component</li>
<li>release the transaction slot vector - check for stale transactions</li>
<li>release the shadows slot vector</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1, if the instance was destroyed as a result of this call </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">189</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">tcmi_migman_free()</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00613">tcmi_ccnman_process_sock()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00504">tcmi_man_emig_npm()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00455">tcmi_man_emig_ppm_p()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00542">tcmi_man_fork()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00173">tcmi_man_send_generic_user_message()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">tcmi_migman_kill()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">tcmi_task_init()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">tcmi_task_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span> &amp;&amp; atomic_dec_and_test(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ad7246d62296a931b57677531541f0be0" title="Instance reference counter.">ref_count</a>)) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Shutting down the TCMI migration manager %p&quot;</span>, <span class="keyword">self</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins...">tcmi_migman_free</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gab536c262c24d8fc76cdbdfa8d6d65b81_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gab536c262c24d8fc76cdbdfa8d6d65b81_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gab536c262c24d8fc76cdbdfa8d6d65b81_cgraph" id="d6/da2/group__tcmi__migman__class_gab536c262c24d8fc76cdbdfa8d6d65b81_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="179,309,307,336"/><area shape="rect" id="node3" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="393,116,508,143"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="355,309,546,336"/><area shape="rect" id="node13" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="369,243,532,285"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="363,360,538,387"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="376,411,525,437"/><area shape="rect" id="node24" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="391,461,510,488"/><area shape="rect" id="node26" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="397,175,504,201"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="630,107,733,133"/><area shape="rect" id="node5" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="851,5,951,32"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="818,56,985,83"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="816,107,987,133"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1044,56,1204,83"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1043,107,1205,133"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="612,309,751,336"/><area shape="rect" id="node12" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="825,309,978,336"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="595,259,767,285"/><area shape="rect" id="node17" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="819,208,984,235"/><area shape="rect" id="node15" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1035,259,1213,285"/><area shape="rect" id="node16" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1261,251,1427,293"/><area shape="rect" id="node18" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1058,208,1190,235"/><area shape="rect" id="node19" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1051,157,1197,184"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="628,360,735,387"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="621,411,741,437"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="622,461,741,488"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga73763ae6fc849730aa1346f16208908f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_migman_remove_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec </p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00728">728</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00141">tcmi_task::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00339">tcmi_slot_remove()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00148">tcmi_slotvec_at()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00250">tcmi_slotvec_hashmask()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00638">tcmi_task_hash()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">tcmi_task_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                                                              {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    u_int hash;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a>* slot;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    hash = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)">tcmi_task_hash</a>(<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task), <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor.">tcmi_slotvec_hashmask</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>));</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">//tcmi_slotvec_lock(self-&gt;tasks);</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    slot = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index.">tcmi_slotvec_at</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae733833f45ed99afd3592770af1675ce" title="slot container for TCMI tasks(shadows on CCN /guests on PEN) that it controls.">tasks</a>, hash);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span> ( !slot ) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">//tcmi_slotvec_unlock(self-&gt;tasks);</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Failed to remove task slotvec in migman tasks&quot;</span>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot.">tcmi_slot_remove</a>(slot, &amp;task-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#acfa8de59bfc98aedf6b8f76b59f9222c" title="node for storage in the migration slot of the migration manager">node</a>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">//tcmi_slotvec_unlock(self-&gt;tasks);</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Removed task PID=%d from slot with hash %d&quot;</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task), hash);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga73763ae6fc849730aa1346f16208908f_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga73763ae6fc849730aa1346f16208908f_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga73763ae6fc849730aa1346f16208908f_cgraph" id="d6/da2/group__tcmi__migman__class_ga73763ae6fc849730aa1346f16208908f_cgraph">
<area shape="rect" id="node2" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="255,81,377,108"/><area shape="rect" id="node9" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="260,132,372,159"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="235,183,397,209"/><area shape="rect" id="node11" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)" alt="" coords="259,233,373,260"/><area shape="rect" id="node12" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="247,284,385,311"/><area shape="rect" id="node3" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="446,31,583,57"/><area shape="rect" id="node7" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="461,81,568,108"/><area shape="rect" id="node8" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="455,132,575,159"/><area shape="rect" id="node4" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="654,5,773,32"/><area shape="rect" id="node5" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="633,56,794,83"/><area shape="rect" id="node6" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="843,56,955,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaaf118703c98a458bdf83eb1058de1347"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a>* tcmi_migman_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migration manager root directory accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current state of the manager </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00271">271</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00137">tcmi_ccnmigman_init_ctlfs_files()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00533">tcmi_migcom_guest_fork()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, and <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;d_migman;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1826451d879f914f53f0717f363aa914"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a> tcmi_migman_set_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
    <tr><td class="paramname">state</td><td>- new state to be set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Last state, i.e. state before the state change was performed </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00221">221</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00214">tcmi_ccnmigman_process_msg()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">tcmi_penmigman_process_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a>)atomic_xchg(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7934e69c38adfb695fc2a3d95da021b1" title="Denotes the current state of the manager.">state</a>, (<span class="keywordtype">int</span>)state);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gac71618221f842f2032e6141c21eed095"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_show_state </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports migration manager state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this migration manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00526">526</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00086">TCMI_MIGMAN_STATE_COUNT</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00051">TCMI_MIGMAN_STATE_LENGTH</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00768">tcmi_migman_states</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00404">tcmi_migman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(obj);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;state %d, maxcount %d&quot;</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<span class="keyword">self</span>), <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0ecc4ea08c917e6a65f2b18c999f03c1">TCMI_MIGMAN_STATE_COUNT</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<span class="keyword">self</span>) &lt; <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a0ecc4ea08c917e6a65f2b18c999f03c1">TCMI_MIGMAN_STATE_COUNT</a>) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        strncpy((<span class="keywordtype">char</span>*)<a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>, </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5ed214ca4e27ad66cf1cb1eefd650e77" title="String descriptor for the states of migration manager.">tcmi_migman_states</a>[<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<span class="keyword">self</span>)], </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <a class="code" href="../../d6/d82/tcmi__migman_8c.html#af23ef88a7f5ee038746a70d12d73ecac" title="Max length of the state description.">TCMI_MIGMAN_STATE_LENGTH</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Displaying state %s&quot;</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5ed214ca4e27ad66cf1cb1eefd650e77" title="String descriptor for the states of migration manager.">tcmi_migman_states</a>[<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<span class="keyword">self</span>)]);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gac71618221f842f2032e6141c21eed095_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gac71618221f842f2032e6141c21eed095_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gac71618221f842f2032e6141c21eed095_cgraph" id="d6/da2/group__tcmi__migman__class_gac71618221f842f2032e6141c21eed095_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="227,5,363,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gafca6221a82ff480ee067fcfa39745719"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u_int tcmi_migman_slot_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migration manager slot index getter </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Index of slot in manager migmans vector </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">259</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00228">tcmi_slot_index()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00214">tcmi_ccnmigman_process_msg()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00174">tcmi_ccnmigman_stop()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">tcmi_migman_kill()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">tcmi_penmigman_process_msg()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00238">tcmi_penmigman_stop()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00944">tcmi_task_migman_slot_index()</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor.">tcmi_slot_index</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a56d41f26626952cef2aeb4a31c5d7c3e" title="Reference to slot in an associated manager migmans vector.">manager_slot</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gafca6221a82ff480ee067fcfa39745719_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gafca6221a82ff480ee067fcfa39745719_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gafca6221a82ff480ee067fcfa39745719_cgraph" id="d6/da2/group__tcmi__migman__class_gafca6221a82ff480ee067fcfa39745719_cgraph">
<area shape="rect" id="node2" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="222,5,335,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga91bf5b41a1d4faa3eab11e6867ec34e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a>* tcmi_migman_sock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Communication socket accesor. </p>
<p>Reference counter is not adjusted as the socket is part of the <a class="el" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a> instance. The caller is expected to have a valid reference to the <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> which in turn guarantees a reference to <a class="el" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening.">tcmi_sock</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to KKC socket. </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00307">307</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d9/d2c/tcmi__sock_8h_source.html#l00104">tcmi_sock_kkc_sock_get()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00134">check_duplicates()</a>, <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00214">tcmi_ccnmigman_process_msg()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00155">tcmi_man_do_send_generic_user_message()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00533">tcmi_migcom_guest_fork()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00262">tcmi_migman_notify_peer_disconnect()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00108">tcmi_penmigman_auth_ccn()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">tcmi_penmigman_process_msg()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00384">tcmi_shadowtask_do_signal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor.">tcmi_sock_kkc_sock_get</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a11b686ed0d6552eaf7abe63fd6dd5378" title="TCMI socket that represents an active connection to the PEN.">sock</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga91bf5b41a1d4faa3eab11e6867ec34e4_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga91bf5b41a1d4faa3eab11e6867ec34e4_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga91bf5b41a1d4faa3eab11e6867ec34e4_cgraph" id="d6/da2/group__tcmi__migman__class_ga91bf5b41a1d4faa3eab11e6867ec34e4_cgraph">
<area shape="rect" id="node2" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="189,5,360,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad4006fee98cc9ef9bba73a33dc28bc66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_start_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Starts the listening thread. </p>
<p>The kernel thread is started by using kernel services. No additional actions are needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon sucessful thread creation </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00547">547</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">tcmi_migman_msg_thread()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;{</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keyword">self</span>-&gt;msg_thread = kthread_run(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga698d639006881752225f808c1d345b1b" title="&lt;&lt;private&gt;&gt; Message processing thread.">tcmi_migman_msg_thread</a>, <span class="keyword">self</span>, </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                       <span class="stringliteral">&quot;tcmi_migmsgd&quot;</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0f3e9793b2c5e39b988fb2d9d2f3b336" title="Message processing thread.">msg_thread</a>)) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        err = -EINVAL;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Created message processing thread %p&quot;</span>, self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0f3e9793b2c5e39b988fb2d9d2f3b336" title="Message processing thread.">msg_thread</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">/* error hanlding */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; exit0:</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gad4006fee98cc9ef9bba73a33dc28bc66_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gad4006fee98cc9ef9bba73a33dc28bc66_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gad4006fee98cc9ef9bba73a33dc28bc66_cgraph" id="d6/da2/group__tcmi__migman__class_gad4006fee98cc9ef9bba73a33dc28bc66_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga698d639006881752225f808c1d345b1b" title="&lt;&lt;private&gt;&gt; Message processing thread." alt="" coords="230,711,405,737"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="454,659,637,685"/><area shape="rect" id="node48" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="497,711,593,737"/><area shape="rect" id="node49" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty." alt="" coords="475,766,615,807"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="686,684,853,711"/><area shape="rect" id="node6" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="695,735,844,777"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="700,474,839,515"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1161,601,1287,628"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="701,633,837,660"/><area shape="rect" id="node5" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="939,684,1053,711"/><area shape="rect" id="node8" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="921,397,1071,438"/><area shape="rect" id="node25" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="929,532,1063,559"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1172,481,1276,508"/><area shape="rect" id="node28" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="902,201,1090,228"/><area shape="rect" id="node9" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="1163,307,1285,333"/><area shape="rect" id="node10" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1388,208,1537,235"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1389,385,1537,412"/><area shape="rect" id="node17" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="2047,411,2182,437"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1616,360,1779,387"/><area shape="rect" id="node13" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1617,411,1778,437"/><area shape="rect" id="node14" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1620,512,1775,539"/><area shape="rect" id="node24" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1622,309,1773,336"/><area shape="rect" id="node15" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1827,512,1970,539"/><area shape="rect" id="node16" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="2052,461,2177,488"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2053,563,2176,589"/><area shape="rect" id="node23" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="2045,512,2184,539"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2277,512,2414,539"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="2292,613,2399,640"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="2285,563,2405,589"/><area shape="rect" id="node20" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2503,588,2622,615"/><area shape="rect" id="node26" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1139,532,1309,559"/><area shape="rect" id="node29" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="1167,107,1281,133"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1406,56,1519,83"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1357,107,1568,133"/><area shape="rect" id="node32" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1387,157,1538,184"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1387,5,1538,32"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1835,752,1963,779"/><area shape="rect" id="node36" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="2057,933,2172,960"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="2019,781,2210,808"/><area shape="rect" id="node40" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="2033,715,2196,757"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="2027,883,2202,909"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="2040,613,2189,640"/><area shape="rect" id="node45" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="2286,664,2405,691"/><area shape="rect" id="node46" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="2061,832,2168,859"/><area shape="rect" id="node37" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="2294,925,2397,952"/><area shape="rect" id="node39" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="2276,816,2415,843"/><area shape="rect" id="node41" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="2259,715,2431,741"/><area shape="rect" id="node42" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2480,765,2645,792"/><area shape="rect" id="node50" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="703,801,835,828"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga828da1bb7df2ccb80dd93c62f1b0731c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875">tcmi_migman_state_t</a> tcmi_migman_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migration manager state accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current state of the manager </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">248</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d56/tcmi__ccnmigman_8c_source.html#l00111">tcmi_ccnmigman_auth_pen()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00372">tcmi_man_get_non_shutdowning_migman()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00330">tcmi_migman_kill()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00526">tcmi_migman_show_state()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00108">tcmi_penmigman_auth_ccn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga94094c5c702e25dbb12be0bb63b32875" title="Describes the current state of the TCMI migration manager.">tcmi_migman_state_t</a>)atomic_read(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7934e69c38adfb695fc2a3d95da021b1" title="Denotes the current state of the manager.">state</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad131e3ab84c0ce68226c297b508dfcc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_migman_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests asynchronous shutdown of connection with peer. </p>
<p>Asynchronous request to stop migration manager, migrate all process back to hom and terminate connection with peer.</p>
<p>First, it asynchronously requests emigration of tasks to their home node, in case we are on detached node. Then it notifies peer about current node being disconnected. Finally, a self reference is dropped so that the migman is free to be destroyed when all tasks are finished</p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00258">258</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">tcmi_migman_stop_perform()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00404">tcmi_man_stop_migration()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00497">tcmi_migman_stop_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                                {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop.">tcmi_migman_stop_perform</a>(<span class="keyword">self</span>, 0);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_gad131e3ab84c0ce68226c297b508dfcc4_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_gad131e3ab84c0ce68226c297b508dfcc4_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_gad131e3ab84c0ce68226c297b508dfcc4_cgraph" id="d6/da2/group__tcmi__migman__class_gad131e3ab84c0ce68226c297b508dfcc4_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="187,435,370,461"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="419,293,586,320"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="428,362,577,403"/><area shape="rect" id="node6" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="433,427,572,469"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="895,617,1020,644"/><area shape="rect" id="node50" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="435,595,571,621"/><area shape="rect" id="node4" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="673,275,786,301"/><area shape="rect" id="node7" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="655,427,804,469"/><area shape="rect" id="node24" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="662,325,797,352"/><area shape="rect" id="node26" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="905,493,1009,520"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="635,376,823,403"/><area shape="rect" id="node8" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="897,435,1018,461"/><area shape="rect" id="node9" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1121,485,1271,512"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1122,435,1270,461"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1781,359,1915,385"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1349,460,1512,487"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1350,511,1511,537"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1353,561,1508,588"/><area shape="rect" id="node23" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1355,409,1506,436"/><area shape="rect" id="node14" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1561,561,1703,588"/><area shape="rect" id="node15" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1785,460,1911,487"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1787,561,1909,588"/><area shape="rect" id="node22" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1779,409,1917,436"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2010,519,2147,545"/><area shape="rect" id="node20" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="2025,569,2132,596"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="2019,620,2139,647"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2237,493,2355,520"/><area shape="rect" id="node25" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="872,181,1043,208"/><area shape="rect" id="node28" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="900,232,1015,259"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1139,156,1253,183"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1091,207,1301,233"/><area shape="rect" id="node32" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1121,257,1271,284"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1121,72,1271,99"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1359,173,1502,200"/><area shape="rect" id="node34" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1356,5,1505,32"/><area shape="rect" id="node35" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="1359,56,1502,83"/><area shape="rect" id="node36" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="1359,107,1502,149"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1568,707,1696,733"/><area shape="rect" id="node39" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1791,881,1905,908"/><area shape="rect" id="node41" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1753,780,1943,807"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1767,714,1929,755"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1761,663,1935,689"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1773,612,1923,639"/><area shape="rect" id="node48" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="2019,468,2138,495"/><area shape="rect" id="node49" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1795,831,1901,857"/><area shape="rect" id="node40" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="2027,881,2130,908"/><area shape="rect" id="node42" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="2009,780,2148,807"/><area shape="rect" id="node44" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="1993,729,2165,756"/><area shape="rect" id="node45" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2213,729,2379,756"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga39c491f49b4e5b3cc533c816d27135a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_migman_stop_ctlfs_dirs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00454">454</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">tcmi_migman_free()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI migmanager ctlfs directories&quot;</span>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8608ffcfb58f28b9bc12225171a58da7" title="Destroys all TCMI ctlfs directories.">stop_ctlfs_dirs</a>) </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop_ctlfs_dirs(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#afe93b7e5095e938b0fa54acaf5735451">s_migman</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a2323e802e7ef7080a9ec8b201fa9753b" title="TCMI ctlfs - directory for active connections.">d_conns</a>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a7f982a5bcda94e88ccc5ba8888f73af9" title="TCMI ctlfs - reference to the migproc directory - needed when immigrating a process.">d_migproc</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga39c491f49b4e5b3cc533c816d27135a3_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga39c491f49b4e5b3cc533c816d27135a3_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga39c491f49b4e5b3cc533c816d27135a3_cgraph" id="d6/da2/group__tcmi__migman__class_ga39c491f49b4e5b3cc533c816d27135a3_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="245,5,384,32"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="433,5,586,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5b56a5213e9dbcba9973b9530692fd27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_migman_stop_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Unregisters and releases all control files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00472">472</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d7/dc9/tcmi__ctlfs__file_8h_source.html#l00106">TCMI_CTLFS_FILE_FROM_METHOD</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00155">tcmi_ctlfs_file_unregister()</a>, and <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00181">tcmi_ctlfs_file_unregister2()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">tcmi_migman_free()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI migmanager ctlfs files&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a3251113e40f96baeeeb22a9d0d5a1699" title="Destroys all TCMI ctlfs files.">stop_ctlfs_files</a>) </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop_ctlfs_files(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">/* We have to use non-locking unregister, because the unregister could be called from this file&#39;s write method */</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg...">tcmi_ctlfs_file_unregister2</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae5c04e6a281b59180d7970a490f7bb92" title="TCMI ctlfs - request shutdown of this migration manager.">f_stop</a>, <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gga6c67af9bc3bdb400ea6f664d464aa316a99f3a5eb7ee2e58abd8bd9323937ee6b">TCMI_CTLFS_FILE_FROM_METHOD</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ae5c04e6a281b59180d7970a490f7bb92" title="TCMI ctlfs - request shutdown of this migration manager.">f_stop</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/* We have to use non-locking unregister, because the unregister could be called from this file&#39;s write method */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg...">tcmi_ctlfs_file_unregister2</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8dff923f962afb87c0d712a1762ece35" title="TCMI ctlfs - request kill of this migration manager.">f_kill</a>, <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gga6c67af9bc3bdb400ea6f664d464aa316a99f3a5eb7ee2e58abd8bd9323937ee6b">TCMI_CTLFS_FILE_FROM_METHOD</a>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8dff923f962afb87c0d712a1762ece35" title="TCMI ctlfs - request kill of this migration manager.">f_kill</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac34f5543920d4e795d663e4bbea0db11" title="TCMI ctlfs - reports current state of the manager.">f_state</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac34f5543920d4e795d663e4bbea0db11" title="TCMI ctlfs - reports current state of the manager.">f_state</a>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga5b56a5213e9dbcba9973b9530692fd27_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga5b56a5213e9dbcba9973b9530692fd27_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga5b56a5213e9dbcba9973b9530692fd27_cgraph" id="d6/da2/group__tcmi__migman__class_ga5b56a5213e9dbcba9973b9530692fd27_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="233,5,372,32"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="437,56,603,83"/><area shape="rect" id="node9" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="217,107,389,133"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="443,5,597,32"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="674,5,806,32"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="651,107,829,133"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="667,56,813,83"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="877,99,1043,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga42cc54b16a70368b84405761bf8780d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_stop_perform </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>remote_requested</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Actual implementation of stop, see tcmi_migman_stop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">remote_requested</td><td>True, if stop request was initiated as a response to received disconnect message  1, if the migman instance was destroyed in context of this method </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00282">282</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00235">tcmi_migman_change_state()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00262">tcmi_migman_notify_peer_disconnect()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00083">TCMI_MIGMAN_SHUTTING_DOWN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>, and <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00654">tcmi_migman_msg_thread()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00258">tcmi_migman_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                                                                    {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;     <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Requesting stop of migration manager: %d Remote requested: %d&quot;</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>), remote_requested);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;     </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;     <span class="keywordflow">if</span> ( <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state...">tcmi_migman_change_state</a>(<span class="keyword">self</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a98a50e72214094b8fdc3a790cd8e2ad8">TCMI_MIGMAN_SHUTTING_DOWN</a>) ) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">/* We are the first to request stop operation */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a5fe255101d8fed7457ff91ff4b0934d2" title="Operations specific to CCN/PEN migration manager resp.">ops</a>-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a8fc30157e38606e90a001be732ab1c64" title="Request to stop this migration manager and terminate its connection with peer.">stop</a>)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keyword">self</span>-&gt;ops-&gt;stop(<span class="keyword">self</span>, remote_requested);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> ( !remote_requested ) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">/* Sent notification to peer about disconnection being performed.. even if this fails (peer may be dead already), we proceed further */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4">tcmi_migman_notify_peer_disconnect</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }       </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">/* Finally drop the reference to &quot;self&quot;. If this is the last reference, the instance is going to be unhased and deleted.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">       At this phase it is possible some tasks are still running and so they have reference to this instance. Asynchronous emigration requests were already issued */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;     } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Migration manager stop was already requested -&gt; Ignoring this call. Manager state is: %d&quot;</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<span class="keyword">self</span>));</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;     }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;     </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga42cc54b16a70368b84405761bf8780d5_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga42cc54b16a70368b84405761bf8780d5_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga42cc54b16a70368b84405761bf8780d5_cgraph" id="d6/da2/group__tcmi__migman__class_ga42cc54b16a70368b84405761bf8780d5_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="247,422,396,463"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="252,487,391,529"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="713,688,839,715"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="238,629,405,656"/><area shape="rect" id="node50" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="253,680,389,707"/><area shape="rect" id="node4" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="473,462,623,503"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="481,216,615,243"/><area shape="rect" id="node23" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="724,600,828,627"/><area shape="rect" id="node24" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="454,313,642,340"/><area shape="rect" id="node5" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="715,469,837,496"/><area shape="rect" id="node6" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="940,520,1089,547"/><area shape="rect" id="node7" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="941,469,1089,496"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1599,393,1734,420"/><area shape="rect" id="node8" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1168,495,1331,521"/><area shape="rect" id="node9" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1169,545,1330,572"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1172,596,1327,623"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1174,444,1325,471"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1379,545,1522,572"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1604,520,1729,547"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1605,621,1728,648"/><area shape="rect" id="node19" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1597,469,1736,496"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1829,579,1966,605"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1844,629,1951,656"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1837,680,1957,707"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2055,553,2174,580"/><area shape="rect" id="node22" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="691,216,861,243"/><area shape="rect" id="node25" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="719,267,833,293"/><area shape="rect" id="node26" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="958,191,1071,217"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="909,241,1120,268"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="939,292,1090,319"/><area shape="rect" id="node30" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="939,107,1090,133"/><area shape="rect" id="node27" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1178,224,1321,251"/><area shape="rect" id="node31" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1175,56,1324,83"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="1178,107,1321,133"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="1178,158,1321,199"/><area shape="rect" id="node34" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1168,5,1331,32"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1387,755,1515,781"/><area shape="rect" id="node37" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1609,941,1724,968"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1571,840,1762,867"/><area shape="rect" id="node41" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1585,774,1748,815"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1579,723,1754,749"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="1592,672,1741,699"/><area shape="rect" id="node46" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1838,528,1957,555"/><area shape="rect" id="node47" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="1613,891,1720,917"/><area shape="rect" id="node38" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1846,941,1949,968"/><area shape="rect" id="node40" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1828,840,1967,867"/><area shape="rect" id="node42" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2032,789,2197,816"/><area shape="rect" id="node43" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="1811,789,1983,816"/><area shape="rect" id="node49" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="491,629,605,656"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4bcd1bc07e002ed4bc6fafcd44215749"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_migman_stop_request </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- this migration manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- ignored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00497">497</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00258">tcmi_migman_stop()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00404">tcmi_migman_init_ctlfs_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                                           {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *<span class="keyword">self</span> = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(obj);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer.">tcmi_migman_stop</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga4bcd1bc07e002ed4bc6fafcd44215749_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga4bcd1bc07e002ed4bc6fafcd44215749_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga4bcd1bc07e002ed4bc6fafcd44215749_cgraph" id="d6/da2/group__tcmi__migman__class_ga4bcd1bc07e002ed4bc6fafcd44215749_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gad131e3ab84c0ce68226c297b508dfcc4" title="Requests asynchronous shutdown of connection with peer." alt="" coords="238,495,370,521"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#ga42cc54b16a70368b84405761bf8780d5" title="Actual implementation of stop, see tcmi_migman_stop." alt="" coords="419,495,602,521"/><area shape="rect" id="node4" href="../../d6/da2/group__tcmi__migman__class.html#ga9115d78a679e54cf4bf78cf051d6782e" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager, assuming current state == old_state..." alt="" coords="660,338,809,379"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#ga510ce89add226478847ff0bbeb56a6c4" title="tcmi_migman_notify\l_peer_disconnect" alt="" coords="665,403,804,445"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1127,604,1252,631"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="651,545,818,572"/><area shape="rect" id="node50" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="667,596,803,623"/><area shape="rect" id="node6" href="../../d4/de6/group__tcmi__disconnect__msg__class.html#ga19a79788a771ec551e8b131a90966665" title="&lt;&lt;public&gt;&gt; Disconnect message tx constructor." alt="" coords="887,378,1036,419"/><area shape="rect" id="node23" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="894,132,1029,159"/><area shape="rect" id="node25" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1137,516,1241,543"/><area shape="rect" id="node26" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="867,229,1055,256"/><area shape="rect" id="node7" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="1129,385,1250,412"/><area shape="rect" id="node8" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="1353,436,1503,463"/><area shape="rect" id="node9" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="1354,385,1502,412"/><area shape="rect" id="node15" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="2013,309,2147,336"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#gad66082869d71dbe73b9a0b60cb2f437c" title="&lt;&lt;private&gt;&gt; Generates a transaction ID." alt="" coords="1581,411,1744,437"/><area shape="rect" id="node11" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1582,461,1743,488"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#ga244e6188e1c4f9e1faba20d0892f5441" title="&lt;&lt;private&gt;&gt; Callback for the kernel timer that handles transaction timeouts." alt="" coords="1585,512,1740,539"/><area shape="rect" id="node22" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="1587,360,1738,387"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1793,461,1935,488"/><area shape="rect" id="node14" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="2017,436,2143,463"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2019,537,2141,564"/><area shape="rect" id="node21" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="2011,385,2149,412"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="2242,495,2379,521"/><area shape="rect" id="node19" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="2257,545,2364,572"/><area shape="rect" id="node20" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="2251,596,2371,623"/><area shape="rect" id="node18" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="2469,469,2587,496"/><area shape="rect" id="node24" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="1104,132,1275,159"/><area shape="rect" id="node27" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="1132,183,1247,209"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1371,107,1485,133"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="1323,157,1533,184"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="1353,208,1503,235"/><area shape="rect" id="node32" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="1353,56,1503,83"/><area shape="rect" id="node29" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1591,107,1734,133"/><area shape="rect" id="node33" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1588,56,1737,83"/><area shape="rect" id="node34" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="1591,5,1734,32"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1800,671,1928,697"/><area shape="rect" id="node37" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="2023,857,2137,884"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="1985,756,2175,783"/><area shape="rect" id="node41" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="1999,690,2161,731"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="1993,639,2167,665"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="2005,588,2155,615"/><area shape="rect" id="node46" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="2251,444,2370,471"/><area shape="rect" id="node47" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="2027,807,2133,833"/><area shape="rect" id="node38" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="2259,857,2362,884"/><area shape="rect" id="node40" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="2241,756,2380,783"/><area shape="rect" id="node42" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="2445,705,2611,732"/><area shape="rect" id="node43" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="2225,705,2397,732"/><area shape="rect" id="node49" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="905,545,1018,572"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gae4ad418d705edeca23e38eb383343978"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_migman_stop_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for it to terminate. </p>
<p>The thread notices the request from the manager and terminates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00572">572</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">tcmi_migman_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0f3e9793b2c5e39b988fb2d9d2f3b336" title="Message processing thread.">msg_thread</a>) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Stopping message processing thread&quot;</span>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        force_sig(SIGTERM, self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0f3e9793b2c5e39b988fb2d9d2f3b336" title="Message processing thread.">msg_thread</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">if</span> ( self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0f3e9793b2c5e39b988fb2d9d2f3b336" title="Message processing thread.">msg_thread</a> != current ) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <span class="comment">/* We can only call stop if we are not actually the thread being stopped! */</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          kthread_stop(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a0f3e9793b2c5e39b988fb2d9d2f3b336" title="Message processing thread.">msg_thread</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf569bbc03999b4c4e6b9c3814f67ebb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a>* tcmi_migman_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Transactions accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>transactions slot vector </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00282">282</a> of file <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html">tcmi_migman.h</a>.</p>

<p>Referenced by <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00108">tcmi_penmigman_auth_ccn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;transactions;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga71f49cd0661e81a859daab82ae7676de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_migman_unhash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes migman from a list of migration managers of the associated manager. </p>
<p>Check if we were not already unhashed </p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00208">208</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00239">tcmi_slot_lock()</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00148">tcmi_slot_node_unhashed</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00135">tcmi_slot_remove_first</a>, and <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00250">tcmi_slot_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00228">tcmi_migman_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                         {<span class="comment"></span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">      /** Check if we were not already unhashed */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">if</span> ( !<a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga096c99c25b450d849e11c5e7aa57bb09" title="Check for node being removed from the hlist.">tcmi_slot_node_unhashed</a>(&amp;self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>) ) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data.">tcmi_slot_lock</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a56d41f26626952cef2aeb4a31c5d7c3e" title="Reference to slot in an associated manager migmans vector.">manager_slot</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga4e77d9cb5dbafc0fb6759fa09838d547" title="&lt;&lt;public&gt;&gt; Removes the first object in the slot.">tcmi_slot_remove_first</a>(<span class="keyword">self</span>, self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a56d41f26626952cef2aeb4a31c5d7c3e" title="Reference to slot in an associated manager migmans vector.">manager_slot</a>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ab8cd47809d251779626127f751048f3e" title="A slot node, used for insertion of the manager into a slot.">node</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data">tcmi_slot_unlock</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#a56d41f26626952cef2aeb4a31c5d7c3e" title="Reference to slot in an associated manager migmans vector.">manager_slot</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/da2/group__tcmi__migman__class_ga71f49cd0661e81a859daab82ae7676de_cgraph.png" border="0" usemap="#d6/da2/group__tcmi__migman__class_ga71f49cd0661e81a859daab82ae7676de_cgraph" alt=""/></div>
<map name="d6/da2/group__tcmi__migman__class_ga71f49cd0661e81a859daab82ae7676de_cgraph" id="d6/da2/group__tcmi__migman__class_ga71f49cd0661e81a859daab82ae7676de_cgraph">
<area shape="rect" id="node2" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="209,5,316,32"/><area shape="rect" id="node3" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="203,56,323,83"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga5ed214ca4e27ad66cf1cb1eefd650e77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* tcmi_migman_states[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <span class="stringliteral">&quot;Init&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Connected&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Shutting down&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Shutdown&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment -->
<p>String descriptor for the states of migration manager. </p>

<p>Definition at line <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00768">768</a> of file <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html">tcmi_migman.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00526">tcmi_migman_show_state()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 19:06:08 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
