<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: kkc_sock_sleeper class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported to Linux kernel 3.6.11</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/dfa/group__kkc__sock__sleeper.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">kkc_sock_sleeper class<div class="ingroups"><a class="el" href="../../de/d96/group__kkc__class.html">KKC</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The main purpose of this class is to make it easier to create and manage sleeping on KKC sockets.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for kkc_sock_sleeper class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d6/dfa/group__kkc__sock__sleeper.png" border="0" alt="" usemap="#d6_2dfa_2group____kkc____sock____sleeper"/>
<map name="d6_2dfa_2group____kkc____sock____sleeper" id="d6_2dfa_2group____kkc____sock____sleeper">
<area shape="rect" id="node1" href="../../de/d96/group__kkc__class.html" title="KKC is a &lt;&lt;singleton&gt;&gt; class that provides interkernel communication facility." alt="" coords="6,5,55,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:df/d13/structkkc__sock__sleeper"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a></td></tr>
<tr class="memdesc:df/d13/structkkc__sock__sleeper"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compound structure allowing external linking socket sleepers.  <a href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">More...</a><br/></td></tr>
<tr class="separator:df/d13/structkkc__sock__sleeper"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa27c523cccb9943a0e7227c038b2964c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#gaa27c523cccb9943a0e7227c038b2964c">kkc_sock_sleeper_add</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock, struct task_struct *tsk)</td></tr>
<tr class="memdesc:gaa27c523cccb9943a0e7227c038b2964c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Creates a new sleeper element associated with a particular socket and task.  <a href="#gaa27c523cccb9943a0e7227c038b2964c">More...</a><br/></td></tr>
<tr class="separator:gaa27c523cccb9943a0e7227c038b2964c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad67f0eb200b07cfaa2b4961450729234"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234">kkc_sock_sleeper_remove</a> (struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad67f0eb200b07cfaa2b4961450729234"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it.  <a href="#gad67f0eb200b07cfaa2b4961450729234">More...</a><br/></td></tr>
<tr class="separator:gad67f0eb200b07cfaa2b4961450729234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c58cbd362eca4db807ba1b3d50d7537"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#ga6c58cbd362eca4db807ba1b3d50d7537">kkc_sock_sleeper_remove_match</a> (struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock)</td></tr>
<tr class="memdesc:ga6c58cbd362eca4db807ba1b3d50d7537"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper.  <a href="#ga6c58cbd362eca4db807ba1b3d50d7537">More...</a><br/></td></tr>
<tr class="separator:ga6c58cbd362eca4db807ba1b3d50d7537"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The main purpose of this class is to make it easier to create and manage sleeping on KKC sockets. </p>
<p>Usually when a thread is watching multiple sockets, it needs to create a separate wait_queue_t element for it. The problem is where to store all these queue elements as all its internal linking items are fully used by the kernel wait queue. This class provides a simple solution - a wrapper object.</p>
<p>The object is intentionally designed for single threaded access(no reference counting) as this should be sufficient. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="df/d13/structkkc__sock__sleeper" id="df/d13/structkkc__sock__sleeper"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kkc_sock_sleeper</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Compound structure allowing external linking socket sleepers. </p>

<p>Definition at line <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00054">54</a> of file <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html">kkc_sock_sleeper.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for kkc_sock_sleeper:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d0/d0f/structkkc__sock__sleeper__coll__graph.png" border="0" usemap="#kkc__sock__sleeper_coll__map" alt="Collaboration graph"/></div>
<map name="kkc__sock__sleeper_coll__map" id="kkc__sock__sleeper_coll__map">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket." alt="" coords="119,451,248,602"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="39,213,113,320"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="5,5,147,83"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="138,147,301,386"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af502344553d4363b13272c141f090631"></a>struct list_head</td>
<td class="fieldname">
list</td>
<td class="fielddoc">
linking element for public use. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a3a148a30c4bdcfb83cb00146fdc66347"></a>struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *</td>
<td class="fieldname">
sock</td>
<td class="fielddoc">
socket associated with the sleeper </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a84fa0f0040ae0e761fb62968b2e951eb"></a>wait_queue_t</td>
<td class="fieldname">
wait</td>
<td class="fielddoc">
wait queue element passed to the socket. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa27c523cccb9943a0e7227c038b2964c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a>* kkc_sock_sleeper_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct task_struct *&#160;</td>
          <td class="paramname"><em>tsk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Creates a new sleeper element associated with a particular socket and task. </p>
<p>The specified task is added to the socket wait queue</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sock</td><td>- target socket where to add new waiting process </td></tr>
    <tr><td class="paramname">*tsk</td><td>- task that wants to sleep on socket's wait queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new sleeper or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00072">72</a> of file <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html">kkc_sock_sleeper.h</a>.</p>

<p>References <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00207">kkc_sock_add_wait_queue()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00241">kkc_sock_getpeername2()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00226">kkc_sock_getsockname2()</a>, <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00056">list</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00060">sock</a>, and <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00058">wait</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00302">tcmi_ccnman_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper" title="Compound structure allowing external linking socket sleepers.">kkc_sock_sleeper</a> *sleeper;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (!(sleeper = (<span class="keyword">struct</span> <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper" title="Compound structure allowing external linking socket sleepers.">kkc_sock_sleeper</a>*)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;          kmalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper" title="Compound structure allowing external linking socket sleepers.">kkc_sock_sleeper</a>), GFP_KERNEL))) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed to allocate KKC sock sleeper&quot;</span>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">/* initialize internal data */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    INIT_LIST_HEAD(&amp;sleeper-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#af502344553d4363b13272c141f090631" title="linking element for public use.">list</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    init_waitqueue_entry(&amp;sleeper-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a84fa0f0040ae0e761fb62968b2e951eb" title="wait queue element passed to the socket.">wait</a>, tsk);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    sleeper-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a3a148a30c4bdcfb83cb00146fdc66347" title="socket associated with the sleeper">sock</a> = <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a3a148a30c4bdcfb83cb00146fdc66347" title="socket associated with the sleeper">sock</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">/* append the task to socket&#39;s wait queue */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga980a8df7e87a7e87c02cdae7bc221a53" title="&lt;&lt;public&gt;&gt; Adds a task to the queue of processes sleeping on the socket.">kkc_sock_add_wait_queue</a>(sock, &amp;sleeper-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a84fa0f0040ae0e761fb62968b2e951eb" title="wait queue element passed to the socket.">wait</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Added sleeper for socket local: &#39;%s&#39;, remote: &#39;%s&#39;&quot;</span>, </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;         <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getsockname2</a>(sock), <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(sock));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> sleeper;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; exit0:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/dfa/group__kkc__sock__sleeper_gaa27c523cccb9943a0e7227c038b2964c_cgraph.png" border="0" usemap="#d6/dfa/group__kkc__sock__sleeper_gaa27c523cccb9943a0e7227c038b2964c_cgraph" alt=""/></div>
<map name="d6/dfa/group__kkc__sock__sleeper_gaa27c523cccb9943a0e7227c038b2964c_cgraph" id="d6/dfa/group__kkc__sock__sleeper_gaa27c523cccb9943a0e7227c038b2964c_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga980a8df7e87a7e87c02cdae7bc221a53" title="&lt;&lt;public&gt;&gt; Adds a task to the queue of processes sleeping on the socket." alt="" coords="208,5,387,32"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="214,56,381,83"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="212,107,383,133"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="436,56,596,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="435,107,597,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad67f0eb200b07cfaa2b4961450729234"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kkc_sock_sleeper_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- this socket sleeper instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00105">105</a> of file <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html">kkc_sock_sleeper.h</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00241">kkc_sock_getpeername2()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00226">kkc_sock_getsockname2()</a>, <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00225">kkc_sock_remove_wait_queue()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00124">kkc_sock_sleeper_remove_match()</a>, and <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00302">tcmi_ccnman_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    list_del_init(&amp;self-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#af502344553d4363b13272c141f090631" title="linking element for public use.">list</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket.">kkc_sock_remove_wait_queue</a>(self-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a3a148a30c4bdcfb83cb00146fdc66347" title="socket associated with the sleeper">sock</a>, &amp;self-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a84fa0f0040ae0e761fb62968b2e951eb" title="wait queue element passed to the socket.">wait</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Removed sleeper from socket local: &#39;%s&#39;, remote: &#39;%s&#39;&quot;</span>, </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getsockname2</a>(self-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a3a148a30c4bdcfb83cb00146fdc66347" title="socket associated with the sleeper">sock</a>), <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor.">kkc_sock_getpeername2</a>(self-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a3a148a30c4bdcfb83cb00146fdc66347" title="socket associated with the sleeper">sock</a>));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/dfa/group__kkc__sock__sleeper_gad67f0eb200b07cfaa2b4961450729234_cgraph.png" border="0" usemap="#d6/dfa/group__kkc__sock__sleeper_gad67f0eb200b07cfaa2b4961450729234_cgraph" alt=""/></div>
<map name="d6/dfa/group__kkc__sock__sleeper_gad67f0eb200b07cfaa2b4961450729234_cgraph" id="d6/dfa/group__kkc__sock__sleeper_gad67f0eb200b07cfaa2b4961450729234_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="231,5,398,32"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="229,56,400,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="237,107,393,149"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="449,5,609,32"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="448,56,611,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6c58cbd362eca4db807ba1b3d50d7537"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_sock_sleeper_remove_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html#df/d13/structkkc__sock__sleeper">kkc_sock_sleeper</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Checks if the specified socket matches the socket stored in the sleeper. </p>
<p>If so, the sleeper removes itself from the wait queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- this socket sleeper instance </td></tr>
    <tr><td class="paramname">*sock</td><td>- socket that is to be removed from a sleeper </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successfully removed </dd></dl>

<p>Definition at line <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00124">124</a> of file <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html">kkc_sock_sleeper.h</a>.</p>

<p>References <a class="el" href="../../da/dfb/kkc__sock__sleeper_8h_source.html#l00105">kkc_sock_sleeper_remove()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00229">tcmi_ccnman_remove_sleepers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#a3a148a30c4bdcfb83cb00146fdc66347" title="socket associated with the sleeper">sock</a> == sock) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Socket matches, removing..&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it.">kkc_sock_sleeper_remove</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        ret = 1;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/dfa/group__kkc__sock__sleeper_ga6c58cbd362eca4db807ba1b3d50d7537_cgraph.png" border="0" usemap="#d6/dfa/group__kkc__sock__sleeper_ga6c58cbd362eca4db807ba1b3d50d7537_cgraph" alt=""/></div>
<map name="d6/dfa/group__kkc__sock__sleeper_ga6c58cbd362eca4db807ba1b3d50d7537_cgraph" id="d6/dfa/group__kkc__sock__sleeper_ga6c58cbd362eca4db807ba1b3d50d7537_cgraph">
<area shape="rect" id="node2" href="../../d6/dfa/group__kkc__sock__sleeper.html#gad67f0eb200b07cfaa2b4961450729234" title="&lt;&lt;public&gt;&gt; Removes a sleeper from its socket, from the list and disposes it." alt="" coords="230,56,405,83"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="455,5,622,32"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="453,56,624,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gaaea15a738e84235d0594ad65af7f4505" title="&lt;&lt;public&gt;&gt; Removes a task from the queue of processes sleeping on the socket." alt="" coords="461,107,617,149"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="673,5,833,32"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="672,56,835,83"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 19:06:03 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
