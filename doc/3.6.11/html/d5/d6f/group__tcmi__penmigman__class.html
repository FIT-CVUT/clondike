<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_penmigman class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported to Linux kernel 3.6.11</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d6f/group__tcmi__penmigman__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_penmigman class<div class="ingroups"><a class="el" href="../../d6/da2/group__tcmi__migman__class.html">tcmi_migman class</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>TCMI PEN migration manager controls migrating tasks for a particular CCN-PEN pair and resides as the name describes - on a PEN.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_penmigman class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../d5/d6f/group__tcmi__penmigman__class.png" border="0" alt="" usemap="#d5_2d6f_2group____tcmi____penmigman____class"/>
<map name="d5_2d6f_2group____tcmi____penmigman____class" id="d5_2d6f_2group____tcmi____penmigman____class">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html" title="TCMI migration manager controls migrating tasks for a particular CCN&#45;PEN pair." alt="" coords="6,5,141,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d0/dab/structtcmi__penmigman"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a></td></tr>
<tr class="memdesc:d0/dab/structtcmi__penmigman"><td class="mdescLeft">&#160;</td><td class="mdescRight">A compound structure that holds all current shadow processes and other migration related data.  <a href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">More...</a><br/></td></tr>
<tr class="separator:d0/dab/structtcmi__penmigman"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2b47f72edc90a1cdc1ae2d5560778f67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga2b47f72edc90a1cdc1ae2d5560778f67">TCMI_PENMIGMAN</a>(migman)&#160;&#160;&#160;((struct <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a> *)migman)</td></tr>
<tr class="memdesc:ga2b47f72edc90a1cdc1ae2d5560778f67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the CCN migration manager.  <a href="#ga2b47f72edc90a1cdc1ae2d5560778f67">More...</a><br/></td></tr>
<tr class="separator:ga2b47f72edc90a1cdc1ae2d5560778f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4984c2296b69744feb429e933b08938f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga4984c2296b69744feb429e933b08938f">tcmi_penmigman_init_ctlfs_files</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga4984c2296b69744feb429e933b08938f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html">here </a>.  <a href="#ga4984c2296b69744feb429e933b08938f">More...</a><br/></td></tr>
<tr class="separator:ga4984c2296b69744feb429e933b08938f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga136f6b2ad2a2346b466e6900d9e19e74"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga136f6b2ad2a2346b466e6900d9e19e74">tcmi_penmigman_stop_ctlfs_files</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga136f6b2ad2a2346b466e6900d9e19e74"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Unregisters and releases all control files.  <a href="#ga136f6b2ad2a2346b466e6900d9e19e74">More...</a><br/></td></tr>
<tr class="separator:ga136f6b2ad2a2346b466e6900d9e19e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff726802f28d813c892ca2b77595d4f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#gaff726802f28d813c892ca2b77595d4f7">tcmi_penmigman_migrate_all_home</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:gaff726802f28d813c892ca2b77595d4f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward declaration.  <a href="#gaff726802f28d813c892ca2b77595d4f7">More...</a><br/></td></tr>
<tr class="separator:gaff726802f28d813c892ca2b77595d4f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60d88d5a4aae2185ce26b3d961de471d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga60d88d5a4aae2185ce26b3d961de471d">tcmi_penmigman_free</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="separator:ga60d88d5a4aae2185ce26b3d961de471d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac75cfd1ea24bce8404092334a6535f99"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#gac75cfd1ea24bce8404092334a6535f99">tcmi_penmigman_stop</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int remote_requested)</td></tr>
<tr class="memdesc:gac75cfd1ea24bce8404092334a6535f99"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Called on stop request  <a href="#gac75cfd1ea24bce8404092334a6535f99">More...</a><br/></td></tr>
<tr class="separator:gac75cfd1ea24bce8404092334a6535f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd618bb4ba277280303f9618cad4aa2d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#gadd618bb4ba277280303f9618cad4aa2d">tcmi_penmigman_send_signal</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int <a class="el" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, siginfo_t *<a class="el" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940">info</a>)</td></tr>
<tr class="memdesc:gadd618bb4ba277280303f9618cad4aa2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Send dignal to process  <a href="#gadd618bb4ba277280303f9618cad4aa2d">More...</a><br/></td></tr>
<tr class="separator:gadd618bb4ba277280303f9618cad4aa2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga915f07674406d157f89c2c8e8732314d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga915f07674406d157f89c2c8e8732314d">tcmi_penmigman_process_msg</a> (struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *m)</td></tr>
<tr class="memdesc:ga915f07674406d157f89c2c8e8732314d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Processes a TCMI message m.  <a href="#ga915f07674406d157f89c2c8e8732314d">More...</a><br/></td></tr>
<tr class="separator:ga915f07674406d157f89c2c8e8732314d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5886121e8f5d73c313590013fe1d4483"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga5886121e8f5d73c313590013fe1d4483">tcmi_penmigman_new</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock, u_int32_t pen_id, struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *manager_slot, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *root, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *migproc, const char namefmt[],...)</td></tr>
<tr class="memdesc:ga5886121e8f5d73c313590013fe1d4483"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; TCMI PEN migration manager constructor.  <a href="#ga5886121e8f5d73c313590013fe1d4483">More...</a><br/></td></tr>
<tr class="separator:ga5886121e8f5d73c313590013fe1d4483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96c4eb74a06a273be361f4322ca39dac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga96c4eb74a06a273be361f4322ca39dac">tcmi_penmigman_auth_ccn</a> (struct <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int auth_data_length, char *auth_data)</td></tr>
<tr class="memdesc:ga96c4eb74a06a273be361f4322ca39dac"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Tries authenticating itself at the CCN that it is connected to.  <a href="#ga96c4eb74a06a273be361f4322ca39dac">More...</a><br/></td></tr>
<tr class="separator:ga96c4eb74a06a273be361f4322ca39dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98fd96408336a733c18f6097903a94ba"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/dc2/fs__mount__params_8h.html#d8/dce/structfs__mount__params">fs_mount_params</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga98fd96408336a733c18f6097903a94ba">tcmi_penmigman_get_mount_params</a> (struct <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga98fd96408336a733c18f6097903a94ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Getter of mount params structure.  <a href="#ga98fd96408336a733c18f6097903a94ba">More...</a><br/></td></tr>
<tr class="separator:ga98fd96408336a733c18f6097903a94ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga9d282b5399ed6662a0d78ecb02c50b22"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga9d282b5399ed6662a0d78ecb02c50b22">penmigman_ops</a></td></tr>
<tr class="memdesc:ga9d282b5399ed6662a0d78ecb02c50b22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migration manager operations that support polymorphism.  <a href="#ga9d282b5399ed6662a0d78ecb02c50b22">More...</a><br/></td></tr>
<tr class="separator:ga9d282b5399ed6662a0d78ecb02c50b22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>TCMI PEN migration manager controls migrating tasks for a particular CCN-PEN pair and resides as the name describes - on a PEN. </p>
<p>Basic message handling capabilities are used from the <a class="el" href="../../d6/da2/group__tcmi__migman__class.html">generic migration manager </a>.</p>
<p>There are specific tasks that it needs to accomplish:</p>
<ul>
<li>authenticate at the CCN that it is connected to</li>
<li>accept migrating tasks </li>
</ul>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d0/dab/structtcmi__penmigman" id="d0/dab/structtcmi__penmigman"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_penmigman</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A compound structure that holds all current shadow processes and other migration related data. </p>

<p>Definition at line <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00061">61</a> of file <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html">tcmi_penmigman.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_penmigman:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/dda/structtcmi__penmigman__coll__graph.png" border="0" usemap="#tcmi__penmigman_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__penmigman_coll__map" id="tcmi__penmigman_coll__map">
<area shape="rect" id="node2" href="../../d3/dc2/fs__mount__params_8h.html#d8/dce/structfs__mount__params" title="Helper structure that keeps data about the mounting which should be performed on PEN." alt="" coords="5,1003,131,1109"/><area shape="rect" id="node3" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data..." alt="" coords="565,966,688,1146"/><area shape="rect" id="node4" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening." alt="" coords="401,759,487,851"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket." alt="" coords="527,458,656,609"/><area shape="rect" id="node15" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method." alt="" coords="664,737,763,873"/><area shape="rect" id="node6" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="583,213,657,320"/><area shape="rect" id="node7" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="549,5,691,83"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="394,147,557,386"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure." alt="" coords="245,487,360,579"/><area shape="rect" id="node10" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops" title="entry operations that support polymorphism" alt="" coords="247,228,359,305"/><area shape="rect" id="node11" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops" title="Migration manager operations that support polymorphism." alt="" coords="512,723,640,888"/><area shape="rect" id="node12" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec" title="A slot vector compound structure." alt="" coords="1039,723,1149,888"/><area shape="rect" id="node13" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure." alt="" coords="837,451,947,616"/><area shape="rect" id="node14" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue" title="compound structure" alt="" coords="926,737,1015,873"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a03dd423ce87f673eff129287ce935f26"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_mighome_all</td>
<td class="fielddoc">
TCMI ctlfs - migrate-home-all file. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="abd5433771cf003ae1a23b3f926167453"></a>struct <a class="el" href="../../d3/dc2/fs__mount__params_8h.html#d8/dce/structfs__mount__params">fs_mount_params</a></td>
<td class="fieldname">
mount_params</td>
<td class="fielddoc">
Mount params to be used when starting processes from associated CCN. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0243271ee3b73fb9ef9a7f0b655c0f46"></a>struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a></td>
<td class="fieldname">
super</td>
<td class="fielddoc">
parent class instance. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga2b47f72edc90a1cdc1ae2d5560778f67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_PENMIGMAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">migman</td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a> *)migman)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the CCN migration manager. </p>

<p>Definition at line <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00071">71</a> of file <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html">tcmi_penmigman.h</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00154">tcmi_penmigman_init_ctlfs_files()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00067">tcmi_penmigman_new()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">tcmi_penmigman_process_msg()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00177">tcmi_penmigman_stop_ctlfs_files()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga96c4eb74a06a273be361f4322ca39dac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_penmigman_auth_ccn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>auth_data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>auth_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Tries authenticating itself at the CCN that it is connected to. </p>
<p>&lt;&lt;public&gt;&gt; Tries authenticating itself at the CCN that it is connected to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
    <tr><td class="paramname">auth_data_size</td><td>- optional authentication data string length </td></tr>
    <tr><td class="paramname">auth_data</td><td>- optional authentication data string, or NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successfully, -EINVAL otherwise </dd></dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00108">108</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00114">req</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00116">resp</a>, <a class="el" href="../../d0/d99/tcmi__authenticate__msg_8c_source.html#l00065">tcmi_authenticate_msg_new_tx()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00307">tcmi_migman_sock()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00248">tcmi_migman_state()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00282">tcmi_migman_transactions()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00178">tcmi_msg_send_and_receive()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">tcmi_penmigman_process_msg()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">/* authentication request and response*/</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *<a class="code" href="../../d1/d6d/tcmi__msg_8h.html#a523c18bfd05e923b099719721b24db7d" title="request transaction ID">req</a>, *<a class="code" href="../../d1/d6d/tcmi__msg_8h.html#adb26817b6c4a9eeb3f68c832f24d5471" title="response transaction ID">resp</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">/* Build the request */</span> </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> ( !(req = <a class="code" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga90a5660dc2cee4e2f349b572ef273ff5" title="&lt;&lt;public&gt;&gt; Auth message tx constructor.">tcmi_authenticate_msg_new_tx</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gaf569bbc03999b4c4e6b9c3814f67ebb5" title="&lt;&lt;public&gt;&gt; Transactions accessor.">tcmi_migman_transactions</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>)), <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>)-&gt;pen_id, ARCH_CURRENT, auth_data, auth_data_length)) ) { </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error creating the authentication request&quot;</span>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gadcb05f36b8afb930d1a825ae12ff7d3c" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection and waits for the response.">tcmi_msg_send_and_receive</a>(req, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor.">tcmi_migman_sock</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>)), </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                      &amp;resp) &lt; 0) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Failed to send the authentication request!!&quot;</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (!resp) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;No authentication response from CCN - nothing arrived&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Authentication response  is now to be handled&quot;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga915f07674406d157f89c2c8e8732314d" title="&lt;&lt;private&gt;&gt; Processes a TCMI message m.">tcmi_penmigman_process_msg</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>), resp);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/* fall through is ok, the response message has been discarded</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">     * by process_msg */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; exit1:</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">/* release the message */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(req);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; exit0:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor.">tcmi_migman_state</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(<span class="keyword">self</span>)) == <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a> ? </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        0 : -EINVAL); </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_ga96c4eb74a06a273be361f4322ca39dac_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_ga96c4eb74a06a273be361f4322ca39dac_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_ga96c4eb74a06a273be361f4322ca39dac_cgraph" id="d5/d6f/group__tcmi__penmigman__class_ga96c4eb74a06a273be361f4322ca39dac_cgraph">
<area shape="rect" id="node2" href="../../d1/db0/group__tcmi__authenticate__msg__class.html#ga90a5660dc2cee4e2f349b572ef273ff5" title="&lt;&lt;public&gt;&gt; Auth message tx constructor." alt="" coords="260,239,417,281"/><area shape="rect" id="node7" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="751,1151,886,1177"/><area shape="rect" id="node9" href="../../d6/da2/group__tcmi__migman__class.html#ga828da1bb7df2ccb80dd93c62f1b0731c" title="&lt;&lt;public&gt;&gt; Migration manager state accessor." alt="" coords="271,1527,407,1553"/><area shape="rect" id="node10" href="../../d6/da2/group__tcmi__migman__class.html#gaf569bbc03999b4c4e6b9c3814f67ebb5" title="&lt;&lt;public&gt;&gt; Transactions accessor." alt="" coords="249,1577,428,1604"/><area shape="rect" id="node11" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="767,605,871,632"/><area shape="rect" id="node16" href="../../d6/dc2/group__tcmi__msg__class.html#gadcb05f36b8afb930d1a825ae12ff7d3c" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection and waits for the response." alt="" coords="491,340,680,367"/><area shape="rect" id="node30" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga915f07674406d157f89c2c8e8732314d" title="&lt;&lt;private&gt;&gt; Processes a TCMI message m." alt="" coords="235,903,442,929"/><area shape="rect" id="node3" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="758,81,879,108"/><area shape="rect" id="node4" href="../../db/dc8/tcmi__msg_8c.html#a5c394462e393c496f11d949b265b8a9e" title="Shared initialization fuction of both rx and tx messages." alt="" coords="988,5,1137,32"/><area shape="rect" id="node5" href="../../d4/d8c/group__tcmi__transaction__class.html#gada9d9436def8919a10997233cd6b5ea1" title="&lt;&lt;public&gt;&gt; Creates a new transaction." alt="" coords="989,107,1137,133"/><area shape="rect" id="node6" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1230,107,1365,133"/><area shape="rect" id="node8" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="977,1151,1148,1177"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="991,492,1134,519"/><area shape="rect" id="node13" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1235,492,1360,519"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1236,543,1359,569"/><area shape="rect" id="node15" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1228,441,1367,468"/><area shape="rect" id="node17" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="761,471,876,497"/><area shape="rect" id="node24" href="../../d4/d8c/group__tcmi__transaction__class.html#gaadc5d69241ec4815bf37e041ec0844dc" title="&lt;&lt;public&gt;&gt; Waits on a transaction till it expires or is completed, the task can be prematurely woken ..." alt="" coords="745,242,893,283"/><area shape="rect" id="node28" href="../../d4/d8c/group__tcmi__transaction__class.html#ga8a1027d8451c92d105ff818b0bf09c1d" title="&lt;&lt;public&gt;&gt; Transaction context accessor." alt="" coords="735,391,903,417"/><area shape="rect" id="node29" href="../../d4/d8c/group__tcmi__transaction__class.html#gaec110b630e8c0935ddddfb0529a03368" title="&lt;&lt;public&gt;&gt; Aborting the transaction requires:" alt="" coords="741,340,896,367"/><area shape="rect" id="node18" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="1006,593,1119,620"/><area shape="rect" id="node19" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="957,644,1168,671"/><area shape="rect" id="node20" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="987,543,1138,569"/><area shape="rect" id="node21" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="987,391,1138,417"/><area shape="rect" id="node22" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1223,340,1372,367"/><area shape="rect" id="node23" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1216,391,1379,417"/><area shape="rect" id="node25" href="../../d4/d8c/group__tcmi__transaction__class.html#gafebfbc6a51c59cbdb2bd9470b82afc18" title="&lt;&lt;public&gt;&gt; Checks on aborted transaction." alt="" coords="995,209,1130,250"/><area shape="rect" id="node26" href="../../d4/d8c/group__tcmi__transaction__class.html#ga755c57502b82f1c20a9adcdea11990a9" title="&lt;&lt;public&gt;&gt; Checks on a complete transaction." alt="" coords="995,274,1130,315"/><area shape="rect" id="node27" href="../../d4/d8c/group__tcmi__transaction__class.html#ga01baf770d7a3fdaa6931024d50f9d039" title="&lt;&lt;public&gt;&gt; Transaction state accessor." alt="" coords="985,157,1140,184"/><area shape="rect" id="node31" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="537,1228,633,1255"/><area shape="rect" id="node32" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gad69a30de4d22734a3830a8513e2b336b" title="&lt;&lt;public&gt;&gt; CCN architecture getter" alt="" coords="507,1279,664,1321"/><area shape="rect" id="node33" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#ga8dedce1c52ab3d0738f155fc27922972" title="&lt;&lt;public&gt;&gt; CCN id getter" alt="" coords="507,1345,664,1386"/><area shape="rect" id="node34" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gaa8d32a4dae0d024544ff29c1482e4606" title="&lt;&lt;public&gt;&gt; Mount params getter" alt="" coords="507,1410,664,1451"/><area shape="rect" id="node35" href="../../d6/da2/group__tcmi__migman__class.html#ga1826451d879f914f53f0717f363aa914" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager." alt="" coords="505,492,666,519"/><area shape="rect" id="node36" href="../../d5/d6f/group__tcmi__penmigman__class.html#gadd618bb4ba277280303f9618cad4aa2d" title="&lt;&lt;public&gt;&gt; Send dignal to process" alt="" coords="507,543,663,585"/><area shape="rect" id="node38" href="../../da/d93/group__tcmi__migcom__class.html#ga5a1e3a32dd2d833a0dbba0da47daaa1d" title="&lt;&lt;public&gt;&gt; Immigrates a task &#45; handles accepting the task on the PEN side." alt="" coords="503,1060,667,1087"/><area shape="rect" id="node44" href="../../d2/d60/group__tcmi__err__procmsg__class.html#gae5322efeefc565378866b96c6cb101b3" title="&lt;&lt;public&gt;&gt; Error message constructor for transferring." alt="" coords="498,761,673,788"/><area shape="rect" id="node45" href="../../d6/dc2/group__tcmi__msg__class.html#ga5a09e9d377637eba6c3df1236fc97926" title="&lt;&lt;public&gt;&gt; Request transaction ID accessor." alt="" coords="525,812,646,839"/><area shape="rect" id="node43" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga4a20154039e0b8fe71be244c0cdb0919" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="743,874,894,915"/><area shape="rect" id="node46" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="491,391,679,417"/><area shape="rect" id="node47" href="../../d8/d87/director_8c.html#ad03eefeffc228336be26ea451c990a8b" title="Called, when a generic user message arrives." alt="" coords="512,863,659,905"/><area shape="rect" id="node48" href="../../d4/dbe/group__tcmi__generic__user__class.html#gac4823fe4153e1c15518c1a4837abd1da" title="&lt;&lt;public&gt;&gt; Node id getter" alt="" coords="505,929,665,970"/><area shape="rect" id="node40" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="735,768,902,795"/><area shape="rect" id="node49" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga5c50da2fa82cf7efcc7e2673a71b5952" title="&lt;&lt;public&gt;&gt; User data length getter" alt="" coords="505,994,665,1035"/><area shape="rect" id="node50" href="../../d4/dbe/group__tcmi__generic__user__class.html#gad7a3e40e415de6dafa25c1d914a1ec56" title="&lt;&lt;public&gt;&gt; User data data getter" alt="" coords="505,1162,665,1203"/><area shape="rect" id="node37" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="759,551,878,577"/><area shape="rect" id="node39" href="../../d8/d87/director_8c.html#a6267d29dfead4c976971f9c5e8e4112c" title="Request to immigrate process from core node specified by slot_index to this node." alt="" coords="749,967,888,1009"/><area shape="rect" id="node41" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#gac02fceca8a00e1826e22ba9e59a3e5df" title="&lt;&lt;public&gt;&gt; Fsuid accesses" alt="" coords="728,1033,909,1060"/><area shape="rect" id="node42" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga6405fa6bbc7d7d944077ca40c0a63949" title="&lt;&lt;public&gt;&gt; Executable name accessor." alt="" coords="743,1085,894,1126"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga60d88d5a4aae2185ce26b3d961de471d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_penmigman_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TODO: We cannot do it so simply as this method won't get called if there are tasks pointing to the migman.. either tasks should not keep reference to migman or we better we have to introduce some 'stop' method, that is invoked before the free is performed. This stop will migrate everything back and so we wouldn't need to migrate back here, but we'd do that in the stop method</p>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00219">219</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                                                 {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">/* struct tcmi_penmigman *self_ppn  = TCMI_PENMIGMAN(self); */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment"></span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">    /** </span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">        TODO: We cannot do it so simply as this method won&#39;t get called if there are tasks pointing to the migman.. either tasks should not keep reference to migman</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">        or we better we have to introduce some &#39;stop&#39; method, that is invoked before the free is performed. This stop will migrate everything back and so we wouldn&#39;t need</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">        to migrate back here, but we&#39;d do that in the stop method</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">//tcmi_penmigman_migrate_all_home(self, NULL);</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">/* TODO: Wait till all migrations are finished? */</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga98fd96408336a733c18f6097903a94ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d3/dc2/fs__mount__params_8h.html#d8/dce/structfs__mount__params">fs_mount_params</a>* tcmi_penmigman_get_mount_params </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman">tcmi_penmigman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Getter of mount params structure. </p>

<p>Definition at line <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00084">84</a> of file <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html">tcmi_penmigman.h</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                                                                                   {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> &amp;<span class="keyword">self</span>-&gt;mount_params;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;};</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4984c2296b69744feb429e933b08938f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_penmigman_init_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates the static files described <a class="el" href="../../d5/d6f/group__tcmi__penmigman__class.html">here </a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00154">154</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00065">tcmi_penmigman::f_mighome_all</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00063">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00071">TCMI_PENMIGMAN</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00195">tcmi_penmigman_migrate_all_home()</a>, and <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00089">TCMI_PERMS_FILE_W</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_penmigman</a> *self_pen = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga2b47f72edc90a1cdc1ae2d5560778f67" title="Casts to the CCN migration manager.">TCMI_PENMIGMAN</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Creating TCMI ctlfs files - PEN migman&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (!(self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#a03dd423ce87f673eff129287ce935f26" title="TCMI ctlfs - migrate-home-all file.">f_mighome_all</a> = </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ac6d3015a5cfa5173000b3edc26719883" title="TCMI ctlfs - directory where all migration control files/directories reside.">d_migman</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaa901982b6e65df648201a7a7f80f232b" title="Preferred write file rights.">TCMI_PERMS_FILE_W</a>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                     <span class="keyword">self</span>, NULL, <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#gaff726802f28d813c892ca2b77595d4f7" title="Forward declaration.">tcmi_penmigman_migrate_all_home</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),<span class="stringliteral">&quot;migrate-home-all&quot;</span>)))</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;exit0:</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_ga4984c2296b69744feb429e933b08938f_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_ga4984c2296b69744feb429e933b08938f_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_ga4984c2296b69744feb429e933b08938f_cgraph" id="d5/d6f/group__tcmi__penmigman__class_ga4984c2296b69744feb429e933b08938f_cgraph">
<area shape="rect" id="node2" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="213,195,358,221"/><area shape="rect" id="node9" href="../../d5/d6f/group__tcmi__penmigman__class.html#gaff726802f28d813c892ca2b77595d4f7" title="Forward declaration." alt="" coords="200,318,371,359"/><area shape="rect" id="node3" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="419,123,592,149"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="649,123,788,149"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1311,249,1465,276"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="855,123,1011,149"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="863,5,1004,32"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="859,57,1007,98"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1532,1152,1657,1179"/><area shape="rect" id="node11" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="1319,477,1457,504"/><area shape="rect" id="node12" href="../../da/d93/group__tcmi__migcom__class.html#gadc5871d3fb9ab2901eabc69f9e3accc4" title="&lt;&lt;public&gt;&gt; Migrates a task back to its home node using preemptive migration with physical checkpoint ..." alt="" coords="430,398,581,439"/><area shape="rect" id="node44" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1525,460,1664,487"/><area shape="rect" id="node13" href="../../d2/daf/group__tcmi__taskhelper__class.html#gae8f5d2b311ca92e60b598076b578327d" title="&lt;&lt;public&gt;&gt; Submits a specified method to a TCMI task identified by PID." alt="" coords="643,878,795,919"/><area shape="rect" id="node49" href="../../de/d2f/group__tcmi__task__class.html#ga7e6ecd94a71cc78169ab8f5ab8f00f86" title="&lt;&lt;public&gt;&gt; Called from method queue &#45; Migrates a task back to CCN &#45; PPM w/ physical checkpoint..." alt="" coords="640,398,797,439"/><area shape="rect" id="node14" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="863,942,1004,983"/><area shape="rect" id="node17" href="../../de/d2f/group__tcmi__task__class.html#ga2bf62635c09738ef0c1385ea258bec2f" title="&lt;&lt;public&gt;&gt; Flushes all pending methods in the queue submits a method for execution." alt="" coords="863,1246,1004,1287"/><area shape="rect" id="node24" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="846,1101,1021,1128"/><area shape="rect" id="node25" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga9dbb48f23b9ec6a00498db53f026ef4b" title="&lt;&lt;public&gt;&gt; Switches the task into migration mode." alt="" coords="858,478,1009,519"/><area shape="rect" id="node27" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="881,823,985,849"/><area shape="rect" id="node15" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="1329,747,1447,773"/><area shape="rect" id="node16" href="../../de/d2f/group__tcmi__task__class.html#gafb7d2e6227e173c0bdc6fb99ff12bcbc" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="1108,1203,1212,1229"/><area shape="rect" id="node18" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="1071,1253,1249,1280"/><area shape="rect" id="node19" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1100,1405,1220,1432"/><area shape="rect" id="node20" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="1094,1101,1226,1128"/><area shape="rect" id="node21" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1073,1152,1247,1179"/><area shape="rect" id="node22" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="1095,1304,1225,1331"/><area shape="rect" id="node23" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1093,1355,1227,1381"/><area shape="rect" id="node26" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="1075,477,1245,504"/><area shape="rect" id="node28" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1109,1000,1211,1027"/><area shape="rect" id="node32" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1077,1051,1243,1077"/><area shape="rect" id="node36" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1091,275,1229,301"/><area shape="rect" id="node37" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="1091,696,1229,723"/><area shape="rect" id="node38" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1101,645,1219,672"/><area shape="rect" id="node40" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="1112,797,1208,824"/><area shape="rect" id="node41" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1108,848,1212,875"/><area shape="rect" id="node45" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca..." alt="" coords="1073,529,1247,570"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f" title="&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec" alt="" coords="1070,747,1250,773"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1097,899,1223,925"/><area shape="rect" id="node29" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1338,1000,1438,1027"/><area shape="rect" id="node30" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1305,899,1471,925"/><area shape="rect" id="node31" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1303,949,1473,976"/><area shape="rect" id="node33" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1322,1152,1454,1179"/><area shape="rect" id="node34" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1299,1051,1477,1077"/><area shape="rect" id="node35" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1315,1101,1461,1128"/><area shape="rect" id="node39" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1329,645,1447,672"/><area shape="rect" id="node42" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1317,848,1459,875"/><area shape="rect" id="node43" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1533,823,1656,849"/><area shape="rect" id="node47" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1332,696,1444,723"/><area shape="rect" id="node50" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="858,427,1009,453"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaff726802f28d813c892ca2b77595d4f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_penmigman_migrate_all_home </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Forward declaration. </p>
<p>&lt;&lt;private&gt;&gt; Emigrates all contained tasks back to home node The method is asynchrounous.</p>
<p>Migrate home requests are issued to all contained tasks, but we do not wait till the migration back is performed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to this migration manager instance </td></tr>
    <tr><td class="paramname">*data</td><td>- not used </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00195">195</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00409">tcmi_migcom_migrate_home_ppm_p()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00071">tcmi_slot_entry</a>, <a class="el" href="../../d3/d94/tcmi__slot_8h_source.html#l00079">tcmi_slot_for_each</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00100">tcmi_slotvec_for_each_used_slot</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00226">tcmi_slotvec_lock()</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00237">tcmi_slotvec_unlock()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00154">tcmi_penmigman_init_ctlfs_files()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00238">tcmi_penmigman_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                                                  {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>* task;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure.">tcmi_slot</a> *slot;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897" title="A slot node is in fact a hlist node.">tcmi_slot_node_t</a>* node;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_migman</a> *<span class="keyword">self</span>  = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(obj);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Penmigman migrate all home requested&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">/* we protect the iteration so that migration backs do not interfere with the iteration */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_slotvec_lock</a>(<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;tasks);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">/* Iterate over all managed tasks */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga49082f04567681a98c6d39eacbc1e4ed" title="Iterates through all used slots in the slot vector.">tcmi_slotvec_for_each_used_slot</a>(slot, <a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;tasks) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga344314dfdafec96ad6d8398963749fa4" title="&lt;&lt;public&gt;&gt; Iterates through all nodes in the slot.">tcmi_slot_for_each</a>(node, slot) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            task = <a class="code" href="../../da/d0c/group__tcmi__slot__class.html#ga25ff69a7b6d4ba8ef5b85079c0320872" title="&lt;&lt;public&gt;&gt; Extracts the actual entry from a slot node">tcmi_slot_entry</a>(node, <span class="keyword">struct</span> <a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>, node);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Sending migrate home request to task: local_pid=%d&quot;</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task));</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="../../da/d93/group__tcmi__migcom__class.html#gadc5871d3fb9ab2901eabc69f9e3accc4" title="&lt;&lt;public&gt;&gt; Migrates a task back to its home node using preemptive migration with physical checkpoint ...">tcmi_migcom_migrate_home_ppm_p</a>(<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(task));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        };</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    };</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data.">tcmi_slotvec_unlock</a>(<a class="code" href="../../d0/dc1/proxyfs__server_8c.html#acffc38573c809dad4512ce637724ab7e">self</a>-&gt;tasks);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Penmigman migrate all home done&quot;</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_gaff726802f28d813c892ca2b77595d4f7_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_gaff726802f28d813c892ca2b77595d4f7_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_gaff726802f28d813c892ca2b77595d4f7_cgraph" id="d5/d6f/group__tcmi__penmigman__class_gaff726802f28d813c892ca2b77595d4f7_cgraph">
<area shape="rect" id="node2" href="../../da/d93/group__tcmi__migcom__class.html#gadc5871d3fb9ab2901eabc69f9e3accc4" title="&lt;&lt;public&gt;&gt; Migrates a task back to its home node using preemptive migration with physical checkpoint ..." alt="" coords="225,679,375,721"/><area shape="rect" id="node38" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1329,1161,1455,1188"/><area shape="rect" id="node41" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="1323,1212,1461,1239"/><area shape="rect" id="node17" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="1103,832,1241,859"/><area shape="rect" id="node3" href="../../d2/daf/group__tcmi__taskhelper__class.html#gae8f5d2b311ca92e60b598076b578327d" title="&lt;&lt;public&gt;&gt; Submits a specified method to a TCMI task identified by PID." alt="" coords="427,679,579,721"/><area shape="rect" id="node49" href="../../de/d2f/group__tcmi__task__class.html#ga7e6ecd94a71cc78169ab8f5ab8f00f86" title="&lt;&lt;public&gt;&gt; Called from method queue &#45; Migrates a task back to CCN &#45; PPM w/ physical checkpoint..." alt="" coords="424,614,581,655"/><area shape="rect" id="node4" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="647,1078,788,1119"/><area shape="rect" id="node7" href="../../de/d2f/group__tcmi__task__class.html#ga2bf62635c09738ef0c1385ea258bec2f" title="&lt;&lt;public&gt;&gt; Flushes all pending methods in the queue submits a method for execution." alt="" coords="647,175,788,217"/><area shape="rect" id="node14" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="630,368,805,395"/><area shape="rect" id="node15" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga9dbb48f23b9ec6a00498db53f026ef4b" title="&lt;&lt;public&gt;&gt; Switches the task into migration mode." alt="" coords="642,825,793,866"/><area shape="rect" id="node18" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="665,541,769,568"/><area shape="rect" id="node5" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="1113,1136,1231,1163"/><area shape="rect" id="node6" href="../../de/d2f/group__tcmi__task__class.html#gafb7d2e6227e173c0bdc6fb99ff12bcbc" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="892,1085,996,1112"/><area shape="rect" id="node8" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="855,157,1033,184"/><area shape="rect" id="node9" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="884,5,1004,32"/><area shape="rect" id="node10" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="878,259,1010,285"/><area shape="rect" id="node11" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="857,208,1031,235"/><area shape="rect" id="node12" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="879,56,1009,83"/><area shape="rect" id="node13" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="877,107,1011,133"/><area shape="rect" id="node16" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="859,1035,1029,1061"/><area shape="rect" id="node19" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="893,309,995,336"/><area shape="rect" id="node25" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="861,360,1027,387"/><area shape="rect" id="node30" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="875,461,1013,488"/><area shape="rect" id="node32" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="875,629,1013,656"/><area shape="rect" id="node33" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1333,461,1451,488"/><area shape="rect" id="node35" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="896,680,992,707"/><area shape="rect" id="node36" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="892,984,996,1011"/><area shape="rect" id="node42" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca..." alt="" coords="857,563,1031,605"/><area shape="rect" id="node43" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f" title="&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec" alt="" coords="854,933,1034,960"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="881,411,1007,437"/><area shape="rect" id="node20" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1122,107,1222,133"/><area shape="rect" id="node21" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1089,157,1255,184"/><area shape="rect" id="node23" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1087,208,1257,235"/><area shape="rect" id="node22" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1312,157,1472,184"/><area shape="rect" id="node24" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1311,208,1473,235"/><area shape="rect" id="node26" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1106,259,1238,285"/><area shape="rect" id="node27" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1083,309,1261,336"/><area shape="rect" id="node29" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1099,360,1245,387"/><area shape="rect" id="node28" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1309,302,1475,343"/><area shape="rect" id="node31" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1095,461,1249,488"/><area shape="rect" id="node34" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1523,461,1642,488"/><area shape="rect" id="node37" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1101,1085,1243,1112"/><area shape="rect" id="node39" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="1325,1085,1459,1112"/><area shape="rect" id="node40" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1331,959,1453,985"/><area shape="rect" id="node44" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="1116,984,1228,1011"/><area shape="rect" id="node45" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="1091,1035,1253,1061"/><area shape="rect" id="node46" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)" alt="" coords="1115,933,1229,960"/><area shape="rect" id="node48" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="1108,411,1236,437"/><area shape="rect" id="node50" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="642,124,793,151"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5886121e8f5d73c313590013fe1d4483"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a>* tcmi_penmigman_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>pen_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot">tcmi_slot</a> *&#160;</td>
          <td class="paramname"><em>manager_slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>migproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>namefmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; TCMI PEN migration manager constructor. </p>
<p>The initialization is accomplished exactly in this order:</p>
<ul>
<li>create new instance</li>
<li>delegates all remaining intialization work to the generic manager.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*sock</td><td>- socket where the new PEN is registering </td></tr>
    <tr><td class="paramname">pen_id</td><td>- PEN identifier </td></tr>
    <tr><td class="paramname">*root</td><td>- directory where the migration manager should create its files and directories </td></tr>
    <tr><td class="paramname">*migproc</td><td>- directory where the migrated process will have their info </td></tr>
    <tr><td class="paramname">namefmt</td><td>- nameformat string for the main manager directory name (printf style) </td></tr>
    <tr><td class="paramname">...</td><td>- variable arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new TCMI PEN manager instance or NULL </dd></dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00067">67</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../d9/d10/tcmi__npm__params_8h_source.html#l00052">args</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00342">penmigman_ops</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00180">TCMI_MIGMAN</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00081">tcmi_migman_init()</a>, <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00071">TCMI_PENMIGMAN</a>, and <a class="el" href="../../d2/def/arch__ids_8h_source.html#l00006">UNKNOWN</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_penmigman</a> *migman;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    va_list <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aa24f72e6a4d6a997528142211b375496" title="Arrays of args and envps.">args</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO2, <span class="stringliteral">&quot;Creating new TCMI PEN migration manager&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (!(migman = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga2b47f72edc90a1cdc1ae2d5560778f67" title="Casts to the CCN migration manager.">TCMI_PENMIGMAN</a>(kmalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_penmigman</a>), </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                          GFP_KERNEL)))) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t allocate memory for CCM migration manager&quot;</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    va_start(args, namefmt);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga9bdb189ca17e989ab59c89c2dc912600" title="TCMI migration manager initializer.">tcmi_migman_init</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(migman), sock, 0, pen_id, <a class="code" href="../../d2/def/arch__ids_8h.html#adbc45da5aabb1eb49345f13d3eed13a9a6ce26a62afab55d7606ad4e92428b30c">UNKNOWN</a>, manager_slot, root, migproc,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                 &amp;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga9d282b5399ed6662a0d78ecb02c50b22" title="Migration manager operations that support polymorphism.">penmigman_ops</a>, namefmt, args) &lt; 0) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;TCMI PEN migman initializtion failed!&quot;</span>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        va_end(args);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    va_end(args);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga6e53ef2488c50427056d3a56e9b6c045" title="Casts to the migration manager.">TCMI_MIGMAN</a>(migman);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; exit1:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    kfree(migman);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; exit0:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_ga5886121e8f5d73c313590013fe1d4483_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_ga5886121e8f5d73c313590013fe1d4483_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_ga5886121e8f5d73c313590013fe1d4483_cgraph" id="d5/d6f/group__tcmi__penmigman__class_ga5886121e8f5d73c313590013fe1d4483_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga9bdb189ca17e989ab59c89c2dc912600" title="TCMI migration manager initializer." alt="" coords="206,871,330,897"/><area shape="rect" id="node3" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer &#45; for static allocation." alt="" coords="418,208,531,235"/><area shape="rect" id="node4" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$." alt="" coords="409,259,540,285"/><area shape="rect" id="node7" href="../../d9/dfc/group__tcmi__comm__class.html#ga6dd2840fed12c1b41a99ec4cd0f3457c" title="&lt;&lt;public&gt;&gt; TCMI communication component constructor." alt="" coords="647,1187,767,1213"/><area shape="rect" id="node14" href="../../d6/da2/group__tcmi__migman__class.html#gafa1e34536a26378cc123baadbde5452e" title="&lt;&lt;private&gt;&gt; Message delivering method that is called back from the receiving thread of TCMI comm comp..." alt="" coords="387,309,562,336"/><area shape="rect" id="node28" href="../../d6/da2/group__tcmi__migman__class.html#gaf3923f508f4f54440732f33c4f0356dc" title="&lt;&lt;private&gt;&gt; Creates the directories as described in here ." alt="" coords="383,832,566,859"/><area shape="rect" id="node32" href="../../d6/da2/group__tcmi__migman__class.html#gaa481ed8e2b5db852737e1591af2d3202" title="tcmi_migman_create\l_symlink" alt="" coords="403,673,546,714"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#ga0f519d477e445de52505689f56c968e6" title="&lt;&lt;private&gt;&gt; Creates the static files described here ." alt="" coords="629,1361,784,1402"/><area shape="rect" id="node40" href="../../d3/d7e/group__tcmi__sock__class.html#ga68990d4c8a8379fe81d5714cef0cf3f1" title="&lt;&lt;public&gt;&gt; TCMI socket constructor." alt="" coords="651,1035,763,1061"/><area shape="rect" id="node44" href="../../d6/da2/group__tcmi__migman__class.html#gad4006fee98cc9ef9bba73a33dc28bc66" title="&lt;&lt;private&gt;&gt; Starts the listening thread." alt="" coords="387,503,563,529"/><area shape="rect" id="node46" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="653,1136,760,1163"/><area shape="rect" id="node47" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="393,1226,556,1267"/><area shape="rect" id="node49" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="379,908,570,935"/><area shape="rect" id="node50" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="417,1053,532,1080"/><area shape="rect" id="node25" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="875,553,994,580"/><area shape="rect" id="node5" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance." alt="" coords="645,5,769,32"/><area shape="rect" id="node6" href="../../da/d0c/group__tcmi__slot__class.html#ga347147be22f868eacdae39a2846c0e3f" title="Initializes a slot." alt="" coords="885,5,984,32"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="883,1187,986,1213"/><area shape="rect" id="node9" href="../../d9/dfc/group__tcmi__comm__class.html#gaef03fa6d00b3c8a916625e2d17b961d0" title="&lt;&lt;private&gt;&gt; Messages receiving thread." alt="" coords="868,1339,1001,1365"/><area shape="rect" id="node13" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="883,1136,986,1163"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1077,1161,1243,1188"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1075,1111,1245,1137"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1293,933,1453,960"/><area shape="rect" id="node15" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor." alt="" coords="876,95,993,121"/><area shape="rect" id="node16" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself." alt="" coords="873,171,996,197"/><area shape="rect" id="node17" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="887,452,983,479"/><area shape="rect" id="node18" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga00174c2d363b1861e4c14e1804602df8" title="&lt;&lt;public&gt;&gt; Destination PID accessor." alt="" coords="630,309,783,336"/><area shape="rect" id="node19" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881" title="&lt;&lt;public&gt;&gt; Delivers a specified message." alt="" coords="629,259,784,285"/><area shape="rect" id="node20" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="866,259,1003,285"/><area shape="rect" id="node21" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c" title="&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task." alt="" coords="632,107,781,133"/><area shape="rect" id="node22" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="655,528,759,555"/><area shape="rect" id="node27" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="636,361,777,402"/><area shape="rect" id="node23" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="852,1237,1017,1264"/><area shape="rect" id="node24" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="865,883,1004,909"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1101,553,1219,580"/><area shape="rect" id="node29" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="642,832,771,859"/><area shape="rect" id="node30" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="867,832,1002,859"/><area shape="rect" id="node31" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="865,705,1004,732"/><area shape="rect" id="node33" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry." alt="" coords="627,680,787,707"/><area shape="rect" id="node35" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="862,1389,1007,1416"/><area shape="rect" id="node36" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaeaa21c9f35d22ab9ea81f97a39ef3e95" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="861,1288,1008,1315"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#ga7250c98a0358cb6c95dfbe5fd427c09c" title="&lt;&lt;private&gt;&gt; Requests asynchronous kill of this migration manager" alt="" coords="848,1440,1021,1467"/><area shape="rect" id="node38" href="../../d6/da2/group__tcmi__migman__class.html#gac71618221f842f2032e6141c21eed095" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs &#45; reports migration manager state." alt="" coords="848,1491,1021,1517"/><area shape="rect" id="node39" href="../../d6/da2/group__tcmi__migman__class.html#ga4bcd1bc07e002ed4bc6fafcd44215749" title="&lt;&lt;private&gt;&gt; Requests asynchronous shutdown of this migration manager" alt="" coords="843,1541,1026,1568"/><area shape="rect" id="node41" href="../../d3/d7e/group__tcmi__sock__class.html#gad1f976e6e2c20c9f97fa0977cf7c00a8" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its localname." alt="" coords="851,984,1018,1011"/><area shape="rect" id="node42" href="../../d3/d7e/group__tcmi__sock__class.html#ga2febb49f11f25c34307c57b735c6307b" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its peername." alt="" coords="1078,933,1242,960"/><area shape="rect" id="node43" href="../../d3/d7e/group__tcmi__sock__class.html#ga4772df777dec4418da664b5428b6039a" title="&lt;&lt;private&gt;&gt; Asks the KKC socket to supply its peername." alt="" coords="853,1035,1017,1061"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#ga698d639006881752225f808c1d345b1b" title="&lt;&lt;private&gt;&gt; Message processing thread." alt="" coords="619,477,794,504"/><area shape="rect" id="node48" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="621,1237,793,1264"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga915f07674406d157f89c2c8e8732314d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_penmigman_process_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Processes a TCMI message m. </p>
<p>The message is disposed afterwords.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
    <tr><td class="paramname">*m</td><td>- pointer to a message to be processed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">271</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../d8/d87/director_8c_source.html#l00084">director_generic_user_message_recv()</a>, <a class="el" href="../../d6/d23/tcmi__signal__msg_8h_source.html#l00071">info</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d3/dc2/fs__mount__params_8h_source.html#l00018">fs_mount_params::mount_device</a>, <a class="el" href="../../d3/dc2/fs__mount__params_8h_source.html#l00016">fs_mount_params::mount_options</a>, <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00068">tcmi_penmigman::mount_params</a>, <a class="el" href="../../d3/dc2/fs__mount__params_8h_source.html#l00014">fs_mount_params::mount_type</a>, <a class="el" href="../../d6/d23/tcmi__signal__msg_8h_source.html#l00069">pid</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00116">resp</a>, <a class="el" href="../../d6/dd3/tcmi__authenticate__resp__msg_8h_source.html#l00032">tcmi_authenticate_resp_msg::result_code</a>, <a class="el" href="../../d6/dd3/tcmi__authenticate__resp__msg_8h_source.html#l00050">TCMI_AUTHENTICATE_RESP_MSG</a>, <a class="el" href="../../d6/dd3/tcmi__authenticate__resp__msg_8h_source.html#l00069">tcmi_authenticate_resp_msg_arch()</a>, <a class="el" href="../../d6/dd3/tcmi__authenticate__resp__msg_8h_source.html#l00058">tcmi_authenticate_resp_msg_ccn_id()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00120">TCMI_AUTHENTICATE_RESP_MSG_ID</a>, <a class="el" href="../../d6/dd3/tcmi__authenticate__resp__msg_8h_source.html#l00091">tcmi_authenticate_resp_msg_mount_params()</a>, <a class="el" href="../../d9/dc1/tcmi__err__procmsg_8c_source.html#l00095">tcmi_err_procmsg_new_tx()</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00047">TCMI_GENERIC_USER_MSG</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00124">TCMI_GENERIC_USER_MSG_ID</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00055">tcmi_generic_user_msg_node_id()</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00077">tcmi_generic_user_msg_user_data()</a>, <a class="el" href="../../da/d22/tcmi__generic__user__msg_8h_source.html#l00066">tcmi_generic_user_msg_user_data_size()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00134">TCMI_GUEST_STARTED_PROCMSG_ID</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00082">TCMI_MIGMAN_CONNECTED</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00221">tcmi_migman_set_state()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00307">tcmi_migman_sock()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00102">TCMI_MSG_FLG_SET_ERR</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00255">tcmi_msg_req_id()</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00138">tcmi_msg_send_anonymous()</a>, <a class="el" href="../../d5/d20/tcmi__p__emigrate__msg_8h_source.html#l00106">TCMI_P_EMIGRATE_MSG</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00122">TCMI_P_EMIGRATE_MSG_ID</a>, <a class="el" href="../../d5/d20/tcmi__p__emigrate__msg_8h_source.html#l00114">tcmi_p_emigrate_msg_reply_pid()</a>, <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00071">TCMI_PENMIGMAN</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00249">tcmi_penmigman_send_signal()</a>, <a class="el" href="../../d6/d23/tcmi__signal__msg_8h_source.html#l00084">TCMI_SIGNAL_MSG</a>, and <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00123">TCMI_SIGNAL_MSG_ID</a>.</p>

<p>Referenced by <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00108">tcmi_penmigman_auth_ccn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#d9/dc3/structtcmi__authenticate__resp__msg" title="Authentication response message structure.">tcmi_authenticate_resp_msg</a> *auth_msg;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#d3/de1/structtcmi__generic__user__msg" title="Generic user message structure.">tcmi_generic_user_msg</a> *user_msg;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *<a class="code" href="../../d1/d6d/tcmi__msg_8h.html#adb26817b6c4a9eeb3f68c832f24d5471" title="response transaction ID">resp</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_penmigman</a> *self_pen  = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga2b47f72edc90a1cdc1ae2d5560778f67" title="Casts to the CCN migration manager.">TCMI_PENMIGMAN</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Processing message (%p)&quot;</span>, m);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> ( !m )</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m)) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06caedb4f23136a59cd9caf5c956bdf8a0a9">TCMI_AUTHENTICATE_RESP_MSG_ID</a>:</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            auth_msg = <a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gaeb1f65f095d420c04a64126b4b386a69" title="Casts to the tcmi_authenticate_resp_msg instance.">TCMI_AUTHENTICATE_RESP_MSG</a>(m);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">if</span> ( auth_msg-&gt;<a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#a7f84cbc5f4bc978ac930f274310c6394" title="0 if authentication succeeded, negative otherwise">result_code</a> == 0) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Authentication at CCN successful..&quot;</span>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keyword">self</span>-&gt;peer_arch_type = <a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gad69a30de4d22734a3830a8513e2b336b" title="&lt;&lt;public&gt;&gt; CCN architecture getter">tcmi_authenticate_resp_msg_arch</a>(auth_msg);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keyword">self</span>-&gt;ccn_id = <a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#ga8dedce1c52ab3d0738f155fc27922972" title="&lt;&lt;public&gt;&gt; CCN id getter">tcmi_authenticate_resp_msg_ccn_id</a>(auth_msg);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#abd5433771cf003ae1a23b3f926167453" title="Mount params to be used when starting processes from associated CCN.">mount_params</a> = *<a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gaa8d32a4dae0d024544ff29c1482e4606" title="&lt;&lt;public&gt;&gt; Mount params getter">tcmi_authenticate_resp_msg_mount_params</a>(auth_msg);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;received mount_params - type: %s device: %s options: %s&quot;</span>, </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#abd5433771cf003ae1a23b3f926167453" title="Mount params to be used when starting processes from associated CCN.">mount_params</a>.<a class="code" href="../../d3/dc2/fs__mount__params_8h.html#a2cf520062b2d85f9a2e3f8770dc30f18" title="Mounter to be used.">mount_type</a>, self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#abd5433771cf003ae1a23b3f926167453" title="Mount params to be used when starting processes from associated CCN.">mount_params</a>.<a class="code" href="../../d3/dc2/fs__mount__params_8h.html#a1b7cceaf6e63f35a73f09b59ed9efaf6" title="Mounter device.">mount_device</a>,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#abd5433771cf003ae1a23b3f926167453" title="Mount params to be used when starting processes from associated CCN.">mount_params</a>.<a class="code" href="../../d3/dc2/fs__mount__params_8h.html#a615a4031b4773105bf504e0fe3a637c3" title="Mounter options.">mount_options</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga1826451d879f914f53f0717f363aa914" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager.">tcmi_migman_set_state</a>(<span class="keyword">self</span>, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gga94094c5c702e25dbb12be0bb63b32875a5b1ca754502cdb6ddba6b3a263e2a919">TCMI_MIGMAN_CONNECTED</a>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Authentication at CCN failed with error=%d..&quot;</span>, auth_msg-&gt;<a class="code" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#a7f84cbc5f4bc978ac930f274310c6394" title="0 if authentication succeeded, negative otherwise">result_code</a>);            </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#gaa343f0b91b9cee9415f0fcf40f53b2ea" title="Sets an error flag.">TCMI_MSG_FLG_SET_ERR</a>(<a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06caedb4f23136a59cd9caf5c956bdf8a0a9">TCMI_AUTHENTICATE_RESP_MSG_ID</a>):</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Authentication at CCN failed, error received..&quot;</span>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06cae115fae7de14598b32a901acae956b96">TCMI_SIGNAL_MSG_ID</a>:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#gadd618bb4ba277280303f9618cad4aa2d" title="&lt;&lt;public&gt;&gt; Send dignal to process">tcmi_penmigman_send_signal</a>(<span class="keyword">self</span>, <a class="code" href="../../d8/d7b/group__tcmi__signal__msg__class.html#gafd6fa599c2c163886f9690c63f0ce253" title="Casts to the tcmi_signal_msg instance.">TCMI_SIGNAL_MSG</a>(m)-&gt;<a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a>,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    &amp;<a class="code" href="../../d8/d7b/group__tcmi__signal__msg__class.html#gafd6fa599c2c163886f9690c63f0ce253" title="Casts to the tcmi_signal_msg instance.">TCMI_SIGNAL_MSG</a>(m)-&gt;<a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940" title="Siginfo structure (we can use directly this structure as it is padded to be exactly 128 bytes)...">info</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06caa8805a547c5695d62df4ae7e7b91e845">TCMI_P_EMIGRATE_MSG_ID</a>:</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Physical emigrate message has arrived..&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/d93/group__tcmi__migcom__class.html#ga5a1e3a32dd2d833a0dbba0da47daaa1d" title="&lt;&lt;public&gt;&gt; Immigrates a task - handles accepting the task on the PEN side.">tcmi_migcom_immigrate</a>(m, <span class="keyword">self</span>) &lt; 0) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Error immigrating process&quot;</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                                </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordflow">if</span> (!(resp = <a class="code" href="../../d2/d60/group__tcmi__err__procmsg__class.html#gae5322efeefc565378866b96c6cb101b3" title="&lt;&lt;public&gt;&gt; Error message constructor for transferring.">tcmi_err_procmsg_new_tx</a>(<a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#gga61dadd085c1777f559549e05962b2c9ea1fff522372aae1c3fa549658ef13d5ab">TCMI_GUEST_STARTED_PROCMSG_ID</a>, <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga5a09e9d377637eba6c3df1236fc97926" title="&lt;&lt;public&gt;&gt; Request transaction ID accessor.">tcmi_msg_req_id</a>(m), -EINVAL, <a class="code" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga4a20154039e0b8fe71be244c0cdb0919" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_p_emigrate_msg_reply_pid</a>(<a class="code" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#gaff84a941c39a708a128fb640ede3e9b4" title="Casts to the tcmi_p_emigrate_msg instance.">TCMI_P_EMIGRATE_MSG</a>(m))))) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                      <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Failed to send error response&quot;</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                      <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection.">tcmi_msg_send_anonymous</a>(resp, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor.">tcmi_migman_sock</a>(<span class="keyword">self</span>));                      </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggadc29c2ff13d900c2f185ee95427fb06ca0573d290a5baa0461010cca329e9f7de">TCMI_GENERIC_USER_MSG_ID</a>:</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            user_msg = <a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#gaf01d78e69ce5a8dafea3b986c1ef5485" title="Casts to the tcmi_generic_user_msg instance.">TCMI_GENERIC_USER_MSG</a>(m);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;User message arrived in pen.&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            err = <a class="code" href="../../d8/d87/director_8c.html#ad03eefeffc228336be26ea451c990a8b" title="Called, when a generic user message arrives.">director_generic_user_message_recv</a>(<a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#gac4823fe4153e1c15518c1a4837abd1da" title="&lt;&lt;public&gt;&gt; Node id getter">tcmi_generic_user_msg_node_id</a>(user_msg), 0, <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>), <a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga5c50da2fa82cf7efcc7e2673a71b5952" title="&lt;&lt;public&gt;&gt; User data length getter">tcmi_generic_user_msg_user_data_size</a>(user_msg), <a class="code" href="../../d4/dbe/group__tcmi__generic__user__class.html#gad7a3e40e415de6dafa25c1d914a1ec56" title="&lt;&lt;public&gt;&gt; User data data getter">tcmi_generic_user_msg_user_data</a>(user_msg));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">if</span> ( err ) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Error in processing user message %d&quot;</span>, err);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO1, <span class="stringliteral">&quot;Unexpected message ID %x, no handler available.&quot;</span>, </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">/* release the message */</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(m);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_ga915f07674406d157f89c2c8e8732314d_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_ga915f07674406d157f89c2c8e8732314d_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_ga915f07674406d157f89c2c8e8732314d_cgraph" id="d5/d6f/group__tcmi__penmigman__class_ga915f07674406d157f89c2c8e8732314d_cgraph">
<area shape="rect" id="node2" href="../../d8/d87/director_8c.html#ad03eefeffc228336be26ea451c990a8b" title="Called, when a generic user message arrives." alt="" coords="283,30,429,71"/><area shape="rect" id="node5" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gad69a30de4d22734a3830a8513e2b336b" title="&lt;&lt;public&gt;&gt; CCN architecture getter" alt="" coords="277,159,435,201"/><area shape="rect" id="node6" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#ga8dedce1c52ab3d0738f155fc27922972" title="&lt;&lt;public&gt;&gt; CCN id getter" alt="" coords="277,225,435,266"/><area shape="rect" id="node7" href="../../d1/da3/group__tcmi__authenticate__resp__msg__class.html#gaa8d32a4dae0d024544ff29c1482e4606" title="&lt;&lt;public&gt;&gt; Mount params getter" alt="" coords="277,290,435,331"/><area shape="rect" id="node8" href="../../d2/d60/group__tcmi__err__procmsg__class.html#gae5322efeefc565378866b96c6cb101b3" title="&lt;&lt;public&gt;&gt; Error message constructor for transferring." alt="" coords="269,356,443,383"/><area shape="rect" id="node11" href="../../d4/dbe/group__tcmi__generic__user__class.html#gac4823fe4153e1c15518c1a4837abd1da" title="&lt;&lt;public&gt;&gt; Node id getter" alt="" coords="276,407,436,449"/><area shape="rect" id="node12" href="../../d4/dbe/group__tcmi__generic__user__class.html#gad7a3e40e415de6dafa25c1d914a1ec56" title="&lt;&lt;public&gt;&gt; User data data getter" alt="" coords="276,473,436,514"/><area shape="rect" id="node13" href="../../d4/dbe/group__tcmi__generic__user__class.html#ga5c50da2fa82cf7efcc7e2673a71b5952" title="&lt;&lt;public&gt;&gt; User data length getter" alt="" coords="276,538,436,579"/><area shape="rect" id="node14" href="../../da/d93/group__tcmi__migcom__class.html#ga5a1e3a32dd2d833a0dbba0da47daaa1d" title="&lt;&lt;public&gt;&gt; Immigrates a task &#45; handles accepting the task on the PEN side." alt="" coords="274,897,438,924"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#ga1826451d879f914f53f0717f363aa914" title="&lt;&lt;public&gt;&gt; Set atomically a new state of the migration manager." alt="" coords="275,669,437,696"/><area shape="rect" id="node16" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="510,1561,677,1588"/><area shape="rect" id="node21" href="../../d6/da2/group__tcmi__migman__class.html#ga91bf5b41a1d4faa3eab11e6867ec34e4" title="&lt;&lt;public&gt;&gt; Communication socket accesor." alt="" coords="526,1612,661,1639"/><area shape="rect" id="node32" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="981,1064,1077,1091"/><area shape="rect" id="node36" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="977,725,1081,752"/><area shape="rect" id="node47" href="../../d6/dc2/group__tcmi__msg__class.html#ga5a09e9d377637eba6c3df1236fc97926" title="&lt;&lt;public&gt;&gt; Request transaction ID accessor." alt="" coords="295,1049,417,1076"/><area shape="rect" id="node48" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="262,1511,450,1537"/><area shape="rect" id="node45" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga4a20154039e0b8fe71be244c0cdb0919" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="518,1495,669,1537"/><area shape="rect" id="node50" href="../../d5/d6f/group__tcmi__penmigman__class.html#gadd618bb4ba277280303f9618cad4aa2d" title="&lt;&lt;public&gt;&gt; Send dignal to process" alt="" coords="278,603,434,645"/><area shape="rect" id="node3" href="../../d5/d32/generic__user__message__recv__msg_8c.html#a54f0c552eaa74acbea3d366f9f940989" title="Called, when a generic user message arrives." alt="" coords="500,5,687,32"/><area shape="rect" id="node4" href="../../d9/df4/comm_8c.html#af68cf85dec3fb86013cb79568bb30026" title="Performs a netlink transaction." alt="" coords="755,5,893,32"/><area shape="rect" id="node9" href="../../d7/dc8/group__tcmi__procmsg__class.html#gaa22b26ec117d20a804758f501e9d3e59" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="520,56,667,83"/><area shape="rect" id="node10" href="../../d6/dc2/group__tcmi__msg__class.html#gace79df438ec4f7c8f7cee3bfe42f6d93" title="&lt;&lt;public&gt;&gt; Initializes the message for transferring." alt="" coords="763,56,885,83"/><area shape="rect" id="node15" href="../../d8/d87/director_8c.html#a6267d29dfead4c976971f9c5e8e4112c" title="Request to immigrate process from core node specified by slot_index to this node." alt="" coords="524,609,663,650"/><area shape="rect" id="node18" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#gac02fceca8a00e1826e22ba9e59a3e5df" title="&lt;&lt;public&gt;&gt; Fsuid accesses" alt="" coords="503,675,684,701"/><area shape="rect" id="node19" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga6405fa6bbc7d7d944077ca40c0a63949" title="&lt;&lt;public&gt;&gt; Executable name accessor." alt="" coords="518,726,669,767"/><area shape="rect" id="node20" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga98fd96408336a733c18f6097903a94ba" title="&lt;&lt;public&gt;&gt; Getter of mount params structure." alt="" coords="520,791,667,833"/><area shape="rect" id="node23" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga746ccca9274f3e8973a9cbbfb3328571" title="&lt;&lt;public&gt;&gt; Fsuid accesses" alt="" coords="518,857,669,898"/><area shape="rect" id="node24" href="../../df/df9/group__tcmi__p__emigrate__msg__class.html#ga59c42b9887b37e62bd7727f2b6d96375" title="&lt;&lt;public&gt;&gt; Fsgid accesses" alt="" coords="518,922,669,963"/><area shape="rect" id="node25" href="../../d8/dd3/fs__mounter__register_8c.html#ab204dfd5a3981e1c59ba444405f53821" title="Returns new mounter instance with specified params." alt="" coords="762,1191,886,1217"/><area shape="rect" id="node26" href="../../d8/dd3/fs__mounter__register_8c.html#a9d0c99254b26fb79fa50989ef80630a0" title="Releases mounter instance." alt="" coords="775,1368,873,1395"/><area shape="rect" id="node27" href="../../da/d93/group__tcmi__migcom__class.html#ga33969e7bc8365c0fb56c52de3c43b17f" title="&lt;&lt;private&gt;&gt; This method represents a kernel thread that will eventually become the &#39;immigrated&#39; t..." alt="" coords="499,1292,688,1319"/><area shape="rect" id="node28" href="../../d5/d85/group__tcmi__guesttask__class.html#ga31b4326716941bc138080c4f3bb07984" title="&lt;&lt;public&gt;&gt; Instance constructor." alt="" coords="523,1140,664,1167"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#gab2ddb2c11349588bc43f2dd8f8b04fa7" title="&lt;&lt;public&gt;&gt; Migproc directory accessor." alt="" coords="506,1191,681,1217"/><area shape="rect" id="node30" href="../../d6/da2/group__tcmi__migman__class.html#gaaf118703c98a458bdf83eb1058de1347" title="&lt;&lt;public&gt;&gt; Migration manager root directory accessor." alt="" coords="529,1241,658,1268"/><area shape="rect" id="node31" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881" title="&lt;&lt;public&gt;&gt; Delivers a specified message." alt="" coords="516,1039,671,1065"/><area shape="rect" id="node38" href="../../d6/dc2/group__tcmi__msg__class.html#ga23d3ca435be85adedc5c1385469d707f" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="541,1343,645,1369"/><area shape="rect" id="node34" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="737,743,911,769"/><area shape="rect" id="node35" href="../../de/d2f/group__tcmi__task__class.html#ga491523e65c3fb2f665013a2f15899cb8" title="&lt;&lt;public&gt;&gt; Called from method queue &#45; Processes one message from the message queue." alt="" coords="742,1089,906,1116"/><area shape="rect" id="node39" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga2791a4f05cb7d6c3aefd1dbc2b9c7cdb" title="&lt;&lt;public&gt;&gt; Attaches the TCMI task to its kernel task." alt="" coords="515,208,672,235"/><area shape="rect" id="node41" href="../../da/d93/group__tcmi__migcom__class.html#gac4bb2f031b7028eb5648ffab8c1a62e8" title="&lt;&lt;private&gt;&gt; This handler is invoked when the sig_unused hook finds a non&#45;NULL entry in the clondike r..." alt="" coords="510,543,677,585"/><area shape="rect" id="node33" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="961,271,1098,297"/><area shape="rect" id="node43" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga80ea6618ba426419c51193f8fd24822d" title="&lt;&lt;public&gt;&gt; Synchronizes with a task entering the migration mode for the first time." alt="" coords="521,259,666,301"/><area shape="rect" id="node44" href="../../d8/d87/director_8c.html#ac811e31e7ae3f8327dbcd5c18407c6ee" title="Notification about successful imigration." alt="" coords="524,478,663,519"/><area shape="rect" id="node42" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="772,463,876,489"/><area shape="rect" id="node17" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="767,1561,881,1588"/><area shape="rect" id="node22" href="../../d3/d7e/group__tcmi__sock__class.html#ga8573cfac9adbb5996cd90395d8a78502" title="&lt;&lt;public&gt;&gt; KKC socket accessor." alt="" coords="739,1612,909,1639"/><area shape="rect" id="node37" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="1147,725,1290,752"/><area shape="rect" id="node40" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="765,220,883,247"/><area shape="rect" id="node49" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="536,1663,651,1689"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadd618bb4ba277280303f9618cad4aa2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_penmigman_send_signal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">siginfo_t *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Send dignal to process </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this penmigman instance </td></tr>
    <tr><td class="paramname">pid</td><td>- signal target pid </td></tr>
    <tr><td class="paramname">*info</td><td>- info for signal to be send </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00249">249</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d8/d3c/util_8h_source.html#l00007">task_find_by_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00271">tcmi_penmigman_process_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">int</span> sig;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">struct </span>task_struct *task;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    rcu_read_lock();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    task = <a class="code" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea">task_find_by_pid</a>(<a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    rcu_read_unlock();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    sig = <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940" title="Siginfo structure (we can use directly this structure as it is padded to be exactly 128 bytes)...">info</a>-&gt;si_signo;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Sending signal %d to task %p (PID %d)&quot;</span>, sig, task, <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#ae0d46a978d5cd6707411f276ad869b9c" title="Target PID.">pid</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span>(task)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        send_sig_info(sig, <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940" title="Siginfo structure (we can use directly this structure as it is padded to be exactly 128 bytes)...">info</a>, task);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_gadd618bb4ba277280303f9618cad4aa2d_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_gadd618bb4ba277280303f9618cad4aa2d_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_gadd618bb4ba277280303f9618cad4aa2d_cgraph" id="d5/d6f/group__tcmi__penmigman__class_gadd618bb4ba277280303f9618cad4aa2d_cgraph">
<area shape="rect" id="node2" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="211,12,330,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac75cfd1ea24bce8404092334a6535f99"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_penmigman_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>remote_requested</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Called on stop request </p>
<p>Emigrates all contained tasks back to home node (asynchronously - only emigration requests are issued in context of this method)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00238">238</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../d8/d87/director_8c_source.html#l00076">director_node_disconnected()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>, and <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00195">tcmi_penmigman_migrate_all_home()</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                                                                {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#gaff726802f28d813c892ca2b77595d4f7" title="Forward declaration.">tcmi_penmigman_migrate_all_home</a>(<span class="keyword">self</span>, NULL);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="../../d8/d87/director_8c.html#ad59c56c478f3a91729eded5d6da33615" title="Called, when a peer node disconnets.">director_node_disconnected</a>(<a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(<span class="keyword">self</span>), 0, remote_requested);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_gac75cfd1ea24bce8404092334a6535f99_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_gac75cfd1ea24bce8404092334a6535f99_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_gac75cfd1ea24bce8404092334a6535f99_cgraph" id="d5/d6f/group__tcmi__penmigman__class_gac75cfd1ea24bce8404092334a6535f99_cgraph">
<area shape="rect" id="node2" href="../../d8/d87/director_8c.html#ad59c56c478f3a91729eded5d6da33615" title="Called, when a peer node disconnets." alt="" coords="208,176,392,203"/><area shape="rect" id="node15" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="217,233,383,260"/><area shape="rect" id="node17" href="../../d5/d6f/group__tcmi__penmigman__class.html#gaff726802f28d813c892ca2b77595d4f7" title="Forward declaration." alt="" coords="215,567,385,609"/><area shape="rect" id="node3" href="../../de/dc6/node__disconnected__msg_8c.html#a2c31538ce071b19f0700dff2d5df37ce" title="Called, when a peer node disconnets." alt="" coords="449,164,583,191"/><area shape="rect" id="node4" href="../../d9/df4/comm_8c.html#af68cf85dec3fb86013cb79568bb30026" title="Performs a netlink transaction." alt="" coords="649,157,788,184"/><area shape="rect" id="node5" href="../../d9/df4/comm_8c.html#ab708cd00ae28bb68e7a53b6784f6f937" title="Helper method to create&amp;send request." alt="" coords="851,157,1019,184"/><area shape="rect" id="node11" href="../../d9/df4/comm_8c.html#a66ea56ce29053fb1d9ab6d337429652d" title="msg_transaction_response" alt="" coords="845,56,1024,83"/><area shape="rect" id="node6" href="../../d8/d7c/genl__ext_8c.html#ac461d0210fcfe8dde0588f23aebf9aab" title="genlmsg_unicast_tx &#45; wrapper around generic netlink unicast." alt="" coords="1093,208,1232,235"/><area shape="rect" id="node9" href="../../d9/df4/comm_8c.html#a4559dadd35469f8de48ab278303e40a0" title="Returns unique sequence number for transaction." alt="" coords="1106,107,1219,133"/><area shape="rect" id="node10" href="../../d9/df4/comm_8c.html#a5f190e32af9d5c630100bee151c00717" title="Returns pid of director process if there is user&#45;space director connected, 0 otherwise." alt="" coords="1088,157,1237,184"/><area shape="rect" id="node7" href="../../d8/d7c/genl__ext_8c.html#ad7afbee4ce89bce50e383aa7b2cce80c" title="genl_ext_lock" alt="" coords="1334,107,1437,133"/><area shape="rect" id="node8" href="../../d8/d7c/genl__ext_8c.html#a9ea9dfe0b2ad73e1306c736e66755b1d" title="genl_ext_unlock" alt="" coords="1327,183,1443,209"/><area shape="rect" id="node12" href="../../d9/df4/comm_8c.html#ae2479089f7107aec24a9c89a13101d0d" title="Checks, if the transaction returned an error." alt="" coords="1107,56,1218,83"/><area shape="rect" id="node13" href="../../d8/d7c/genl__ext_8c.html#a98fc505709c73b6933abbacd5a656cb9" title="Blocking read call that will read netlink response for the specified transaction." alt="" coords="1081,5,1244,32"/><area shape="rect" id="node14" href="../../d8/d7c/genl__ext_8c.html#a96c79abdde8010527de40d4806b4942c" title="__find_itx" alt="" coords="1347,5,1424,32"/><area shape="rect" id="node16" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="459,233,573,260"/><area shape="rect" id="node18" href="../../da/d93/group__tcmi__migcom__class.html#gadc5871d3fb9ab2901eabc69f9e3accc4" title="&lt;&lt;public&gt;&gt; Migrates a task back to its home node using preemptive migration with physical checkpoint ..." alt="" coords="441,567,591,609"/><area shape="rect" id="node49" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="453,633,579,660"/><area shape="rect" id="node50" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="447,684,585,711"/><area shape="rect" id="node33" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="1317,512,1454,539"/><area shape="rect" id="node19" href="../../d2/daf/group__tcmi__taskhelper__class.html#gae8f5d2b311ca92e60b598076b578327d" title="&lt;&lt;public&gt;&gt; Submits a specified method to a TCMI task identified by PID." alt="" coords="643,697,795,738"/><area shape="rect" id="node47" href="../../de/d2f/group__tcmi__task__class.html#ga7e6ecd94a71cc78169ab8f5ab8f00f86" title="&lt;&lt;public&gt;&gt; Called from method queue &#45; Migrates a task back to CCN &#45; PPM w/ physical checkpoint..." alt="" coords="640,1382,797,1423"/><area shape="rect" id="node20" href="../../d2/daf/group__tcmi__taskhelper__class.html#gab89ca5c0deb987d20cf94fe2d000c58f" title="&lt;&lt;public&gt;&gt; Finds a TCMI task based on PID, in addition checks whether the task has a valid migration ..." alt="" coords="864,361,1005,402"/><area shape="rect" id="node23" href="../../de/d2f/group__tcmi__task__class.html#ga2bf62635c09738ef0c1385ea258bec2f" title="&lt;&lt;public&gt;&gt; Flushes all pending methods in the queue submits a method for execution." alt="" coords="864,1179,1005,1221"/><area shape="rect" id="node30" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="847,980,1022,1007"/><area shape="rect" id="node31" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga9dbb48f23b9ec6a00498db53f026ef4b" title="&lt;&lt;public&gt;&gt; Switches the task into migration mode." alt="" coords="859,454,1010,495"/><area shape="rect" id="node34" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="883,807,987,833"/><area shape="rect" id="node21" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="1326,335,1445,361"/><area shape="rect" id="node22" href="../../de/d2f/group__tcmi__task__class.html#gafb7d2e6227e173c0bdc6fb99ff12bcbc" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="1111,360,1215,387"/><area shape="rect" id="node24" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="1073,1187,1252,1213"/><area shape="rect" id="node25" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1103,1339,1223,1365"/><area shape="rect" id="node26" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="1097,1085,1229,1112"/><area shape="rect" id="node27" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1075,1136,1250,1163"/><area shape="rect" id="node28" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="1097,1237,1228,1264"/><area shape="rect" id="node29" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1095,1288,1230,1315"/><area shape="rect" id="node32" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="1078,411,1247,437"/><area shape="rect" id="node35" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1111,1035,1214,1061"/><area shape="rect" id="node38" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1080,731,1245,757"/><area shape="rect" id="node39" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="1093,781,1232,808"/><area shape="rect" id="node40" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="1094,832,1231,859"/><area shape="rect" id="node41" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="1103,883,1222,909"/><area shape="rect" id="node42" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="1115,933,1211,960"/><area shape="rect" id="node43" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="1111,563,1215,589"/><area shape="rect" id="node44" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca..." alt="" coords="1075,665,1250,706"/><area shape="rect" id="node45" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f" title="&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec" alt="" coords="1073,984,1253,1011"/><area shape="rect" id="node46" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="1100,613,1225,640"/><area shape="rect" id="node36" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1335,1009,1435,1036"/><area shape="rect" id="node37" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1302,1060,1469,1087"/><area shape="rect" id="node48" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="859,1440,1010,1467"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga136f6b2ad2a2346b466e6900d9e19e74"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_penmigman_stop_ctlfs_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Unregisters and releases all control files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this migration manager instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00177">177</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>References <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00065">tcmi_penmigman::f_mighome_all</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00155">tcmi_ctlfs_file_unregister()</a>, and <a class="el" href="../../dc/d77/tcmi__penmigman_8h_source.html#l00071">TCMI_PENMIGMAN</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#d0/dab/structtcmi__penmigman" title="A compound structure that holds all current shadow processes and other migration related data...">tcmi_penmigman</a> *self_pen = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga2b47f72edc90a1cdc1ae2d5560778f67" title="Casts to the CCN migration manager.">TCMI_PENMIGMAN</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Destroying  TCMI ctlfs files - PEN migman&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#a03dd423ce87f673eff129287ce935f26" title="TCMI ctlfs - migrate-home-all file.">f_mighome_all</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self_pen-&gt;<a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#a03dd423ce87f673eff129287ce935f26" title="TCMI ctlfs - migrate-home-all file.">f_mighome_all</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d6f/group__tcmi__penmigman__class_ga136f6b2ad2a2346b466e6900d9e19e74_cgraph.png" border="0" usemap="#d5/d6f/group__tcmi__penmigman__class_ga136f6b2ad2a2346b466e6900d9e19e74_cgraph" alt=""/></div>
<map name="d5/d6f/group__tcmi__penmigman__class_ga136f6b2ad2a2346b466e6900d9e19e74_cgraph" id="d5/d6f/group__tcmi__penmigman__class_ga136f6b2ad2a2346b466e6900d9e19e74_cgraph">
<area shape="rect" id="node2" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="221,19,360,45"/><area shape="rect" id="node4" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="208,95,373,121"/><area shape="rect" id="node3" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="434,5,587,32"/><area shape="rect" id="node5" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="445,56,577,83"/><area shape="rect" id="node6" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="421,107,600,133"/><area shape="rect" id="node8" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="437,157,584,184"/><area shape="rect" id="node7" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="648,99,813,141"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga9d282b5399ed6662a0d78ecb02c50b22"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops">tcmi_migman_ops</a> penmigman_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .init_ctlfs_files = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga4984c2296b69744feb429e933b08938f" title="&lt;&lt;private&gt;&gt; Creates the static files described here .">tcmi_penmigman_init_ctlfs_files</a>, </div>
<div class="line">    .stop_ctlfs_files = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga136f6b2ad2a2346b466e6900d9e19e74" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files.">tcmi_penmigman_stop_ctlfs_files</a>,</div>
<div class="line"></div>
<div class="line">    .stop = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#gac75cfd1ea24bce8404092334a6535f99" title="&lt;&lt;private&gt;&gt; Called on stop request">tcmi_penmigman_stop</a>,</div>
<div class="line">    .process_msg = <a class="code" href="../../d5/d6f/group__tcmi__penmigman__class.html#ga915f07674406d157f89c2c8e8732314d" title="&lt;&lt;private&gt;&gt; Processes a TCMI message m.">tcmi_penmigman_process_msg</a>,</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Migration manager operations that support polymorphism. </p>

<p>Definition at line <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00342">342</a> of file <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html">tcmi_penmigman.c</a>.</p>

<p>Referenced by <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00067">tcmi_penmigman_new()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 19:06:09 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
