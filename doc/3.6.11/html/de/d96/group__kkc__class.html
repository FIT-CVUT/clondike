<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: KKC</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported to Linux kernel 3.6.11</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d96/group__kkc__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">KKC</div>  </div>
</div><!--header-->
<div class="contents">

<p>KKC is a &lt;&lt;singleton&gt;&gt; class that provides interkernel communication facility.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for KKC:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../de/d96/group__kkc__class.png" border="0" alt="" usemap="#de_2d96_2group____kkc____class"/>
<map name="de_2d96_2group____kkc____class" id="de_2d96_2group____kkc____class">
<area shape="rect" id="node1" href="../../d6/d8e/group__kkc__sock__class.html" title="This is a generic KKC socket." alt="" coords="129,56,242,83"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html" title="This class describes a particular network architecture." alt="" coords="130,5,241,32"/><area shape="rect" id="node3" href="../../d6/dfa/group__kkc__sock__sleeper.html" title="The main purpose of this class is to make it easier to create and manage sleeping on KKC sockets..." alt="" coords="104,107,267,133"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:d5/ddf/group__kkc__arch__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddf/group__kkc__arch__class.html">kkc_arch class</a></td></tr>
<tr class="memdesc:d5/ddf/group__kkc__arch__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class describes a particular network architecture. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d6/d8e/group__kkc__sock__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d8e/group__kkc__sock__class.html">kkc_sock class</a></td></tr>
<tr class="memdesc:d6/d8e/group__kkc__sock__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a generic KKC socket. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d6/dfa/group__kkc__sock__sleeper"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/group__kkc__sock__sleeper.html">kkc_sock_sleeper class</a></td></tr>
<tr class="memdesc:d6/dfa/group__kkc__sock__sleeper"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main purpose of this class is to make it easier to create and manage sleeping on KKC sockets. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga36f883edbbf112ba37bfa162b66b81f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/group__kkc__class.html#ga36f883edbbf112ba37bfa162b66b81f0">KKC_MAX_WHERE_LENGTH</a>&#160;&#160;&#160;(<a class="el" href="../../d5/ddf/group__kkc__arch__class.html#gac6347cfcb8b88bd94b71265d7d27bd98">KKC_MAX_ARCH_LENGTH</a> + <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66">KKC_SOCK_MAX_ADDR_LENGTH</a>)</td></tr>
<tr class="memdesc:ga36f883edbbf112ba37bfa162b66b81f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum where string length.  <a href="#ga36f883edbbf112ba37bfa162b66b81f0">More...</a><br/></td></tr>
<tr class="separator:ga36f883edbbf112ba37bfa162b66b81f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3c3c0bbda961e0184aa4cf3ff59ef030"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030">kkc_establish</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **sock, const char *where, int(*kkc_sock_method)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *))</td></tr>
<tr class="memdesc:ga3c3c0bbda961e0184aa4cf3ff59ef030"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destination.  <a href="#ga3c3c0bbda961e0184aa4cf3ff59ef030">More...</a><br/></td></tr>
<tr class="separator:ga3c3c0bbda961e0184aa4cf3ff59ef030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8935ce0affe2c466dd62272b3d4bc44"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/group__kkc__class.html#gad8935ce0affe2c466dd62272b3d4bc44">kkc_get_architecture</a> (const char *where, struct <a class="el" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch">kkc_arch</a> **arch, char *addr)</td></tr>
<tr class="memdesc:gad8935ce0affe2c466dd62272b3d4bc44"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Helper function for parsing 'where' string and requesting for particular architecture structure.  <a href="#gad8935ce0affe2c466dd62272b3d4bc44">More...</a><br/></td></tr>
<tr class="separator:gad8935ce0affe2c466dd62272b3d4bc44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68329ac5e0102d5d3246638006d8123f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/group__kkc__class.html#ga68329ac5e0102d5d3246638006d8123f">kkc_connect</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **sock, const char *addr)</td></tr>
<tr class="memdesc:ga68329ac5e0102d5d3246638006d8123f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Creates an architecture specific socket and performs a connection to the destination.  <a href="#ga68329ac5e0102d5d3246638006d8123f">More...</a><br/></td></tr>
<tr class="separator:ga68329ac5e0102d5d3246638006d8123f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf3eeb3137650f2008a9eda4dc69c99e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/group__kkc__class.html#gacf3eeb3137650f2008a9eda4dc69c99e">kkc_listen</a> (struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **sock, const char *addr)</td></tr>
<tr class="memdesc:gacf3eeb3137650f2008a9eda4dc69c99e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Creates an architecture specific socket and starts listening for incoming connnections.  <a href="#gacf3eeb3137650f2008a9eda4dc69c99e">More...</a><br/></td></tr>
<tr class="separator:gacf3eeb3137650f2008a9eda4dc69c99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>KKC is a &lt;&lt;singleton&gt;&gt; class that provides interkernel communication facility. </p>
<p>KKC sockets are used as an abstraction of a connection. This component ensures loading architecture specific modules via <a class="el" href="../../d5/ddf/group__kkc__arch__class.html">kkc_arch </a>.</p>
<p>The communication features can be divided into two groups:</p>
<ol type="1">
<li>Socket creation and connecting to the destination or listening on a specified interface. This is handled by connect/listen operations as follows: Based on the string specified by the user (e.g. tcp:192.168.0.1:2000), it gets the instance of the particular architecture (tcp in this case) and delegates the work to the particular architecture to instantiate the socket. Then, the new socket is asked to setup a connection or listening.</li>
<li>Regular socket operations - to send/receive data, disconnect, append/remove a process to the socket waitqueue. These operations are KKC socket methods and this class provides only aliases. </li>
</ol>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga36f883edbbf112ba37bfa162b66b81f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KKC_MAX_WHERE_LENGTH&#160;&#160;&#160;(<a class="el" href="../../d5/ddf/group__kkc__arch__class.html#gac6347cfcb8b88bd94b71265d7d27bd98">KKC_MAX_ARCH_LENGTH</a> + <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66">KKC_SOCK_MAX_ADDR_LENGTH</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum where string length. </p>

<p>Definition at line <a class="el" href="../../de/dba/kkc_8h_source.html#l00065">65</a> of file <a class="el" href="../../de/dba/kkc_8h_source.html">kkc.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00159">tcmi_ccnman_init_ctlfs_files()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00103">tcmi_penman_init_ctlfs_files()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga68329ac5e0102d5d3246638006d8123f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Creates an architecture specific socket and performs a connection to the destination. </p>
<p>&lt;&lt;public&gt;&gt; Creates an architecture specific socket and performs a connection to the destination.</p>
<p>The work is delegated to the <a class="el" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati...">kkc_establish()</a> method along with the socket method that <a class="el" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati...">kkc_establish()</a> should call on the newly created socket. To create new connection - kkc_sock.c::kkc_sock_connect() is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">**sock</td><td>- ouput parameter - upon successful connection contains a valid socket </td></tr>
    <tr><td class="paramname">*where</td><td>- address string with architecture prefix - e.g. tcp:192.168.0.1.2:2000 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d94/kkc_8c_source.html#l00050">50</a> of file <a class="el" href="../../d0/d94/kkc_8c_source.html">kkc.c</a>.</p>

<p>References <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">kkc_establish()</a>, and <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00074">kkc_sock_connect()</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/proxyfs__peer_8c_source.html#l00200">proxyfs_peer_connect()</a>, and <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00167">tcmi_penman_connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati...">kkc_establish</a>(sock, where, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gabb00f44a4d56997c5c04ed3ceb26c15b" title="&lt;&lt;public&gt;&gt; Connects to the given address.">kkc_sock_connect</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d96/group__kkc__class_ga68329ac5e0102d5d3246638006d8123f_cgraph.png" border="0" usemap="#de/d96/group__kkc__class_ga68329ac5e0102d5d3246638006d8123f_cgraph" alt=""/></div>
<map name="de/d96/group__kkc__class_ga68329ac5e0102d5d3246638006d8123f_cgraph" id="de/d96/group__kkc__class_ga68329ac5e0102d5d3246638006d8123f_cgraph">
<area shape="rect" id="node2" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati..." alt="" coords="163,81,266,108"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#gabb00f44a4d56997c5c04ed3ceb26c15b" title="&lt;&lt;public&gt;&gt; Connects to the given address." alt="" coords="149,132,280,159"/><area shape="rect" id="node3" href="../../de/d96/group__kkc__class.html#gad8935ce0affe2c466dd62272b3d4bc44" title="&lt;&lt;private&gt;&gt; Helper function for parsing &#39;where&#39; string and requesting for particular architecture..." alt="" coords="329,5,471,32"/><area shape="rect" id="node5" href="../../d5/ddf/group__kkc__arch__class.html#ga5e04e5a8a82c505eed2219852423fea4" title="&lt;&lt;public&gt;&gt; Calls the constructor to build the architecture specific object." alt="" coords="335,56,465,83"/><area shape="rect" id="node6" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="555,107,655,133"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="349,157,451,184"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#gac8f29f1a1a075fdc311c1c40534e2be3" title="&lt;&lt;public&gt;&gt; Retrieves an architecture by name." alt="" coords="525,5,685,32"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="520,157,691,184"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="522,208,689,235"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="739,157,901,184"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="740,208,900,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3c3c0bbda961e0184aa4cf3ff59ef030"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_establish </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *, char *)&#160;</td>
          <td class="paramname"><em>kkc_sock_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destination. </p>
<p>First an architecture, based on the prefix in the address, has to be retrieved. The creation of the socket is delegated to the archictecture. If everything goes fine, the socket is asked to perform an operation specified by the user - kkc_sock_method().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">**sock</td><td>- ouput parameter - upon successful creation of a connection or listening contains a valid socket </td></tr>
    <tr><td class="paramname">*where</td><td>- address string with architecture prefix - e.g. tcp:192.168.0.1.2:2000 </td></tr>
    <tr><td class="paramname">*kkc_sock_method</td><td>- method called on the created socket. This would yield a new connection or a listening, depending on what method the user specified </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">96</a> of file <a class="el" href="../../d0/d94/kkc_8c_source.html">kkc.c</a>.</p>

<p>References <a class="el" href="../../d0/d6e/kkc__arch_8h_source.html#l00183">kkc_arch_obj_new()</a>, <a class="el" href="../../d0/d6e/kkc__arch_8h_source.html#l00171">kkc_arch_put()</a>, <a class="el" href="../../d0/d94/kkc_8c_source.html#l00148">kkc_get_architecture()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00353">KKC_SOCK</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00060">KKC_SOCK_MAX_ADDR_LENGTH</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00271">kkc_sock_put()</a>, and <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00050">kkc_connect()</a>, and <a class="el" href="../../d0/d94/kkc_8c_source.html#l00069">kkc_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture.">kkc_arch</a> *arch;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">char</span> addr[<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a>];</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    *sock = NULL;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Requesting architecture structure and network address&quot;</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../de/d96/group__kkc__class.html#gad8935ce0affe2c466dd62272b3d4bc44" title="&lt;&lt;private&gt;&gt; Helper function for parsing &#39;where&#39; string and requesting for particular architecture...">kkc_get_architecture</a>(where, &amp;arch, addr)) &lt; 0) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;Cannot get architecture structure&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        err = -ENOMEM;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">/* instantiate the socket */</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (!((*sock) = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gad5dca00ea3136d4d6d01c26dc134443b" title="Casts to the kkc_sock instance.">KKC_SOCK</a>(<a class="code" href="../../d5/ddf/group__kkc__arch__class.html#ga5e04e5a8a82c505eed2219852423fea4" title="&lt;&lt;public&gt;&gt; Calls the constructor to build the architecture specific object.">kkc_arch_obj_new</a>(arch)))) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;Failed to create a new socket&quot;</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        err = -ENOMEM;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (kkc_sock_method(*sock, addr)) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;KKC socket method failed&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        err = -ENOMEM;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">/* release the architecture as the socket has created its own</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">     * reference */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture.">kkc_arch_put</a>(arch);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; exit2:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(*sock);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    *sock = NULL; <span class="comment">/* return no socket to the user */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; exit1:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture.">kkc_arch_put</a>(arch);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; exit0:</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d96/group__kkc__class_ga3c3c0bbda961e0184aa4cf3ff59ef030_cgraph.png" border="0" usemap="#de/d96/group__kkc__class_ga3c3c0bbda961e0184aa4cf3ff59ef030_cgraph" alt=""/></div>
<map name="de/d96/group__kkc__class_ga3c3c0bbda961e0184aa4cf3ff59ef030_cgraph" id="de/d96/group__kkc__class_ga3c3c0bbda961e0184aa4cf3ff59ef030_cgraph">
<area shape="rect" id="node2" href="../../d5/ddf/group__kkc__arch__class.html#ga5e04e5a8a82c505eed2219852423fea4" title="&lt;&lt;public&gt;&gt; Calls the constructor to build the architecture specific object." alt="" coords="165,5,294,32"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="385,107,485,133"/><area shape="rect" id="node4" href="../../de/d96/group__kkc__class.html#gad8935ce0affe2c466dd62272b3d4bc44" title="&lt;&lt;private&gt;&gt; Helper function for parsing &#39;where&#39; string and requesting for particular architecture..." alt="" coords="158,56,301,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="178,157,281,184"/><area shape="rect" id="node5" href="../../d5/ddf/group__kkc__arch__class.html#gac8f29f1a1a075fdc311c1c40534e2be3" title="&lt;&lt;public&gt;&gt; Retrieves an architecture by name." alt="" coords="355,56,515,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="349,157,520,184"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="351,208,518,235"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="568,157,731,184"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="569,208,729,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad8935ce0affe2c466dd62272b3d4bc44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kkc_get_architecture </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch">kkc_arch</a> **&#160;</td>
          <td class="paramname"><em>arch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Helper function for parsing 'where' string and requesting for particular architecture structure. </p>
<p>As side effect fills 'addr' string with address part of 'where'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*where</td><td>- pointer to the where request string </td></tr>
    <tr><td class="paramname">**arch</td><td>- output parameter - stores the architecture if one found </td></tr>
    <tr><td class="paramname">*addr</td><td>- storage for the address string, that gets extracted from the where string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success. </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d94/kkc_8c_source.html#l00148">148</a> of file <a class="el" href="../../d0/d94/kkc_8c_source.html">kkc.c</a>.</p>

<p>References <a class="el" href="../../d0/d6e/kkc__arch_8h_source.html#l00154">kkc_arch_get_by_name()</a>, <a class="el" href="../../d0/d6e/kkc__arch_8h_source.html#l00059">KKC_MAX_ARCH_LENGTH</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00060">KKC_SOCK_MAX_ADDR_LENGTH</a>, and <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">kkc_establish()</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">char</span> arch_name[<a class="code" href="../../d5/ddf/group__kkc__arch__class.html#gac6347cfcb8b88bd94b71265d7d27bd98" title="Maximum architecture string length.">KKC_MAX_ARCH_LENGTH</a>];</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">char</span> *colon_ptr;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">int</span> colon_pos;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">/* find colon */</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> ((colon_ptr = strchr(where, <span class="charliteral">&#39;:&#39;</span>)) == NULL) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;Invalid syntax - could not find colon&quot;</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        err = -EINVAL;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">/* check position */</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    colon_pos = colon_ptr - where;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (colon_pos &gt; (<a class="code" href="../../d5/ddf/group__kkc__arch__class.html#gac6347cfcb8b88bd94b71265d7d27bd98" title="Maximum architecture string length.">KKC_MAX_ARCH_LENGTH</a> - 1)) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;Invalid syntax - too long architecture name length&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        err = -EINVAL;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">/* get architecture name */</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    strncpy(arch_name, where, colon_pos);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    arch_name[colon_pos] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Extracted architecture name: &quot;</span><span class="stringliteral">&quot;%s&quot;</span><span class="stringliteral">&quot;&quot;</span>, arch_name);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">/* get address */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    strncpy(addr, colon_ptr + 1, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a> - 1);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    addr[<a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga22cf4745e4dd8b649e6b3fb4eb96ed66" title="Maximum address length.">KKC_SOCK_MAX_ADDR_LENGTH</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Extracted address: &quot;</span><span class="stringliteral">&quot;%s&quot;</span><span class="stringliteral">&quot;&quot;</span>, addr); </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (!(*arch = <a class="code" href="../../d5/ddf/group__kkc__arch__class.html#gac8f29f1a1a075fdc311c1c40534e2be3" title="&lt;&lt;public&gt;&gt; Retrieves an architecture by name.">kkc_arch_get_by_name</a>(arch_name))) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR4, <span class="stringliteral">&quot;Could not get architecture for &#39;%s&#39;&quot;</span>, arch_name);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        err = -EINVAL;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;exit0:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d96/group__kkc__class_gad8935ce0affe2c466dd62272b3d4bc44_cgraph.png" border="0" usemap="#de/d96/group__kkc__class_gad8935ce0affe2c466dd62272b3d4bc44_cgraph" alt=""/></div>
<map name="de/d96/group__kkc__class_gad8935ce0affe2c466dd62272b3d4bc44_cgraph" id="de/d96/group__kkc__class_gad8935ce0affe2c466dd62272b3d4bc44_cgraph">
<area shape="rect" id="node2" href="../../d5/ddf/group__kkc__arch__class.html#gac8f29f1a1a075fdc311c1c40534e2be3" title="&lt;&lt;public&gt;&gt; Retrieves an architecture by name." alt="" coords="197,5,357,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gacf3eeb3137650f2008a9eda4dc69c99e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kkc_listen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> **&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Creates an architecture specific socket and starts listening for incoming connnections. </p>
<p>&lt;&lt;public&gt;&gt; Creates an architecture specific socket and starts listening for incoming connnections.</p>
<p>The work is delegated to the <a class="el" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati...">kkc_establish()</a> method along with the socket method that <a class="el" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati...">kkc_establish()</a> should call on the newly created socket. To create new listening - kkc_sock.c::kkc_sock_connect() is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">**sock</td><td>- ouput parameter - upon successful creation of listening contains a valid socket </td></tr>
    <tr><td class="paramname">*where</td><td>- address string with architecture prefix - e.g. tcp:192.168.0.1.2:2000 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d94/kkc_8c_source.html#l00069">69</a> of file <a class="el" href="../../d0/d94/kkc_8c_source.html">kkc.c</a>.</p>

<p>References <a class="el" href="../../d0/d94/kkc_8c_source.html#l00096">kkc_establish()</a>, and <a class="el" href="../../d7/d5c/kkc__sock_8c_source.html#l00093">kkc_sock_listen()</a>.</p>

<p>Referenced by <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00092">proxyfs_server_listen()</a>, and <a class="el" href="../../d2/de0/tcmi__ccnman_8c_source.html#l00302">tcmi_ccnman_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati...">kkc_establish</a>(sock, where, <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga77e4c63fcf522765937e3b985c124ebc" title="&lt;&lt;public&gt;&gt; Starts listening on a specified address.">kkc_sock_listen</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d96/group__kkc__class_gacf3eeb3137650f2008a9eda4dc69c99e_cgraph.png" border="0" usemap="#de/d96/group__kkc__class_gacf3eeb3137650f2008a9eda4dc69c99e_cgraph" alt=""/></div>
<map name="de/d96/group__kkc__class_gacf3eeb3137650f2008a9eda4dc69c99e_cgraph" id="de/d96/group__kkc__class_gacf3eeb3137650f2008a9eda4dc69c99e_cgraph">
<area shape="rect" id="node2" href="../../de/d96/group__kkc__class.html#ga3c3c0bbda961e0184aa4cf3ff59ef030" title="&lt;&lt;private&gt;&gt; Creates an architecture specific socket and starts listening or connects to the destinati..." alt="" coords="143,81,246,108"/><area shape="rect" id="node12" href="../../d6/d8e/group__kkc__sock__class.html#ga77e4c63fcf522765937e3b985c124ebc" title="&lt;&lt;public&gt;&gt; Starts listening on a specified address." alt="" coords="137,132,253,159"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#ga5e04e5a8a82c505eed2219852423fea4" title="&lt;&lt;public&gt;&gt; Calls the constructor to build the architecture specific object." alt="" coords="309,5,438,32"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="529,107,629,133"/><area shape="rect" id="node5" href="../../de/d96/group__kkc__class.html#gad8935ce0affe2c466dd62272b3d4bc44" title="&lt;&lt;private&gt;&gt; Helper function for parsing &#39;where&#39; string and requesting for particular architecture..." alt="" coords="302,56,445,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="322,157,425,184"/><area shape="rect" id="node6" href="../../d5/ddf/group__kkc__arch__class.html#gac8f29f1a1a075fdc311c1c40534e2be3" title="&lt;&lt;public&gt;&gt; Retrieves an architecture by name." alt="" coords="499,56,659,83"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="493,157,664,184"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="495,208,662,235"/><area shape="rect" id="node9" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="712,157,875,184"/><area shape="rect" id="node11" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="713,208,873,235"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 19:06:03 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
