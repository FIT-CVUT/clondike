<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Clondike: tcmi_task class</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clondike
   </div>
   <div id="projectbrief">Supported to Linux kernel 3.6.11</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d2f/group__tcmi__task__class.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tcmi_task class<div class="ingroups"><a class="el" href="../../d3/d1d/group__tcmi__task__group.html">task component</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>TCMI task is an abstraction for any process in the system that participates in migration.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_task class:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="../../de/d2f/group__tcmi__task__class.png" border="0" alt="" usemap="#de_2d2f_2group____tcmi____task____class"/>
<map name="de_2d2f_2group____tcmi____task____class" id="de_2d2f_2group____tcmi____task____class">
<area shape="rect" id="node1" href="../../d5/d85/group__tcmi__guesttask__class.html" title="This class is an abstraction for an &#39;immigrated&#39; process on PEN." alt="" coords="337,5,484,32"/><area shape="rect" id="node3" href="../../dc/dff/group__tcmi__shadowtask__class.html" title="This class is an abstraction for a migrated process on CCN." alt="" coords="331,56,490,83"/><area shape="rect" id="node4" href="../../d3/d1d/group__tcmi__task__group.html" title="Classes in this group represent migrating processes in the system and related objects." alt="" coords="5,31,120,57"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:d5/d85/group__tcmi__guesttask__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d85/group__tcmi__guesttask__class.html">tcmi_guesttask class</a></td></tr>
<tr class="memdesc:d5/d85/group__tcmi__guesttask__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is an abstraction for an 'immigrated' process on PEN. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dc/dff/group__tcmi__shadowtask__class"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dff/group__tcmi__shadowtask__class.html">tcmi_shadowtask class</a></td></tr>
<tr class="memdesc:dc/dff/group__tcmi__shadowtask__class"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is an abstraction for a migrated process on CCN. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d1/dd2/structtcmi__task"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a></td></tr>
<tr class="memdesc:d1/dd2/structtcmi__task"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compound structure that gathers necessary process information.  <a href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">More...</a><br/></td></tr>
<tr class="separator:d1/dd2/structtcmi__task"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d5/d04/structtcmi__task__ops"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#d5/d04/structtcmi__task__ops">tcmi_task_ops</a></td></tr>
<tr class="memdesc:d5/d04/structtcmi__task__ops"><td class="mdescLeft">&#160;</td><td class="mdescRight">TCMI task operations that support polymorphism.  <a href="../../de/d2f/group__tcmi__task__class.html#d5/d04/structtcmi__task__ops">More...</a><br/></td></tr>
<tr class="separator:d5/d04/structtcmi__task__ops"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaf05e0c401db433deef4d95a64ce9117b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b">TCMI_TASK</a>(<a class="el" href="../../d3/d8e/install__manual__clondike-en_8desc.html#a09ff0ffa84c9eedbf9f4be2ca365b89b">t</a>)&#160;&#160;&#160;((struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a>*)<a class="el" href="../../d3/d8e/install__manual__clondike-en_8desc.html#a09ff0ffa84c9eedbf9f4be2ca365b89b">t</a>)</td></tr>
<tr class="memdesc:gaf05e0c401db433deef4d95a64ce9117b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Casts to the task instance.  <a href="#gaf05e0c401db433deef4d95a64ce9117b">More...</a><br/></td></tr>
<tr class="separator:gaf05e0c401db433deef4d95a64ce9117b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaa81f1a7178bfcf01d74e57d6bbcb869b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gaa81f1a7178bfcf01d74e57d6bbcb869b">tcmi_task_method_status_t</a> { <br/>
&#160;&#160;<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>, 
<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba20ea4bc1d0ee2a10cb98d6c168f49d54">TCMI_TASK_MOVE_ME</a>, 
<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba0d820f34432c988875982f560e54da2b">TCMI_TASK_EXECVE_FAILED_KILL_ME</a>, 
<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bad619e483cc5231333ada87518fb2b301">TCMI_TASK_KILL_ME</a>, 
<br/>
&#160;&#160;<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba67409e338aae7921b48943c4c2a5d818">TCMI_TASK_LET_ME_GO</a>, 
<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bade59423de18b4fdc67a09f36b7cd71aa">TCMI_TASK_REMOVE_AND_LET_ME_GO</a>
<br/>
 }</td></tr>
<tr class="memdesc:gaa81f1a7178bfcf01d74e57d6bbcb869b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes the status returned by task methods that are executed from the method queue.  <a href="../../de/d2f/group__tcmi__task__class.html#gaa81f1a7178bfcf01d74e57d6bbcb869b">More...</a><br/></td></tr>
<tr class="separator:gaa81f1a7178bfcf01d74e57d6bbcb869b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga17c54fbcb86f7f3158426742c3ff04ba"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga17c54fbcb86f7f3158426742c3ff04ba">tcmi_task_show_remote_pid</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="memdesc:ga17c54fbcb86f7f3158426742c3ff04ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports remote PID.  <a href="#ga17c54fbcb86f7f3158426742c3ff04ba">More...</a><br/></td></tr>
<tr class="separator:ga17c54fbcb86f7f3158426742c3ff04ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad41453e0aefb9dd79c2d3b65d8b9b16c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c">tcmi_task_release_execve_context</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad41453e0aefb9dd79c2d3b65d8b9b16c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have allocated a linear chunks of memory (including all strings) we need to issue only 1 kfree/vfree for each and don't need to scan the array releasing each string separate.  <a href="#gad41453e0aefb9dd79c2d3b65d8b9b16c">More...</a><br/></td></tr>
<tr class="separator:gad41453e0aefb9dd79c2d3b65d8b9b16c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87f10a21c32bf05db4c36e7304f0a881"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga87f10a21c32bf05db4c36e7304f0a881">tcmi_task_deliver_msg</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *m)</td></tr>
<tr class="memdesc:ga87f10a21c32bf05db4c36e7304f0a881"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Delivers a specified message.  <a href="#ga87f10a21c32bf05db4c36e7304f0a881">More...</a><br/></td></tr>
<tr class="separator:ga87f10a21c32bf05db4c36e7304f0a881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8ffeed5183656312cb65d1bdf1b495c"><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gaf8ffeed5183656312cb65d1bdf1b495c">tcmi_task_migman_id</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaf8ffeed5183656312cb65d1bdf1b495c"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task.  <a href="#gaf8ffeed5183656312cb65d1bdf1b495c">More...</a><br/></td></tr>
<tr class="separator:gaf8ffeed5183656312cb65d1bdf1b495c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90412716287ffdaf54ba3f6f1e374a38"><td class="memItemLeft" align="right" valign="top">u_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga90412716287ffdaf54ba3f6f1e374a38">tcmi_task_migman_slot_index</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga90412716287ffdaf54ba3f6f1e374a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Accessor of vector slot index of the migration manager associated with this task.  <a href="#ga90412716287ffdaf54ba3f6f1e374a38">More...</a><br/></td></tr>
<tr class="separator:ga90412716287ffdaf54ba3f6f1e374a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b3a924515ad4005bc713b135d75f6b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga4b3a924515ad4005bc713b135d75f6b9">tcmi_task_init</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, pid_t local_pid, struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *migman, struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *sock, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *d_migproc, struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *d_migman, struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d5/d04/structtcmi__task__ops">tcmi_task_ops</a> *ops)</td></tr>
<tr class="memdesc:ga4b3a924515ad4005bc713b135d75f6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the task.  <a href="#ga4b3a924515ad4005bc713b135d75f6b9">More...</a><br/></td></tr>
<tr class="separator:ga4b3a924515ad4005bc713b135d75f6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb7d2e6227e173c0bdc6fb99ff12bcbc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gafb7d2e6227e173c0bdc6fb99ff12bcbc">tcmi_task_get</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gafb7d2e6227e173c0bdc6fb99ff12bcbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.  <a href="#gafb7d2e6227e173c0bdc6fb99ff12bcbc">More...</a><br/></td></tr>
<tr class="separator:gafb7d2e6227e173c0bdc6fb99ff12bcbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9317afe43a9b9343c70eaf42409864b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga9317afe43a9b9343c70eaf42409864b7">tcmi_task_put</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga9317afe43a9b9343c70eaf42409864b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Releases the instance.  <a href="#ga9317afe43a9b9343c70eaf42409864b7">More...</a><br/></td></tr>
<tr class="separator:ga9317afe43a9b9343c70eaf42409864b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0409e631915b37fbcfe096dfc498bbbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb">tcmi_task_submit_method</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga51adea36dbef7cb03ffb89f5821ef2e0">tcmi_method_t</a> *method, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>, int <a class="el" href="../../d8/d08/tcmi__ppm__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f">size</a>)</td></tr>
<tr class="memdesc:ga0409e631915b37fbcfe096dfc498bbbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Submits a method for execution.  <a href="#ga0409e631915b37fbcfe096dfc498bbbb">More...</a><br/></td></tr>
<tr class="separator:ga0409e631915b37fbcfe096dfc498bbbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bf62635c09738ef0c1385ea258bec2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga2bf62635c09738ef0c1385ea258bec2f">tcmi_task_flush_and_submit_method</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga51adea36dbef7cb03ffb89f5821ef2e0">tcmi_method_t</a> *method, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>, int <a class="el" href="../../d8/d08/tcmi__ppm__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f">size</a>)</td></tr>
<tr class="memdesc:ga2bf62635c09738ef0c1385ea258bec2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Prior to submitting, atomically flushes the method queue.  <a href="#ga2bf62635c09738ef0c1385ea258bec2f">More...</a><br/></td></tr>
<tr class="separator:ga2bf62635c09738ef0c1385ea258bec2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadcb547384aea0db7f2be54ae48cdc2d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gadcb547384aea0db7f2be54ae48cdc2d9">tcmi_task_process_methods</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gadcb547384aea0db7f2be54ae48cdc2d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Processes all methods in the queue.  <a href="#gadcb547384aea0db7f2be54ae48cdc2d9">More...</a><br/></td></tr>
<tr class="separator:gadcb547384aea0db7f2be54ae48cdc2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga491523e65c3fb2f665013a2f15899cb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga491523e65c3fb2f665013a2f15899cb8">tcmi_task_process_msg</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:ga491523e65c3fb2f665013a2f15899cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Processes message in the message queue.  <a href="#ga491523e65c3fb2f665013a2f15899cb8">More...</a><br/></td></tr>
<tr class="separator:ga491523e65c3fb2f665013a2f15899cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85318d71dab1a903c2799134c696990d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga85318d71dab1a903c2799134c696990d">tcmi_task_send_message</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:ga85318d71dab1a903c2799134c696990d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Sends a message to peer.  <a href="#ga85318d71dab1a903c2799134c696990d">More...</a><br/></td></tr>
<tr class="separator:ga85318d71dab1a903c2799134c696990d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4314e915251536470fdbef57a68cb0d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga4314e915251536470fdbef57a68cb0d4">tcmi_task_emigrate_ppm_p</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:ga4314e915251536470fdbef57a68cb0d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - PPM w/ physical checkpoint.  <a href="#ga4314e915251536470fdbef57a68cb0d4">More...</a><br/></td></tr>
<tr class="separator:ga4314e915251536470fdbef57a68cb0d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e6ecd94a71cc78169ab8f5ab8f00f86"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga7e6ecd94a71cc78169ab8f5ab8f00f86">tcmi_task_migrateback_ppm_p</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:ga7e6ecd94a71cc78169ab8f5ab8f00f86"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migrates a task back to CCN - PPM w/ physical checkpoint.  <a href="#ga7e6ecd94a71cc78169ab8f5ab8f00f86">More...</a><br/></td></tr>
<tr class="separator:ga7e6ecd94a71cc78169ab8f5ab8f00f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3c2e2d0700558ed149306c368577ab2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gac3c2e2d0700558ed149306c368577ab2">tcmi_task_emigrate_ppm_v</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:gac3c2e2d0700558ed149306c368577ab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - PPM w/ virtual checkpoint.  <a href="#gac3c2e2d0700558ed149306c368577ab2">More...</a><br/></td></tr>
<tr class="separator:gac3c2e2d0700558ed149306c368577ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb2e88d3b8f3809950377472bcc4dea9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gabb2e88d3b8f3809950377472bcc4dea9">tcmi_task_migrateback_ppm_v</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:gabb2e88d3b8f3809950377472bcc4dea9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migrates a task back to CCN - PPM w/ virtual checkpoint.  <a href="#gabb2e88d3b8f3809950377472bcc4dea9">More...</a><br/></td></tr>
<tr class="separator:gabb2e88d3b8f3809950377472bcc4dea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ddc594d454cc80c776c7c5fc53df45d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga2ddc594d454cc80c776c7c5fc53df45d">tcmi_task_emigrate_npm</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:ga2ddc594d454cc80c776c7c5fc53df45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - NPM.  <a href="#ga2ddc594d454cc80c776c7c5fc53df45d">More...</a><br/></td></tr>
<tr class="separator:ga2ddc594d454cc80c776c7c5fc53df45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0cec9fea3d6f19f8d9c903a97fba347"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gad0cec9fea3d6f19f8d9c903a97fba347">tcmi_task_migrateback_npm</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:gad0cec9fea3d6f19f8d9c903a97fba347"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Migrates a task back to CCN - NPM.  <a href="#gad0cec9fea3d6f19f8d9c903a97fba347">More...</a><br/></td></tr>
<tr class="separator:gad0cec9fea3d6f19f8d9c903a97fba347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga724d575729c5a3f2be09db7ee6833999"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga724d575729c5a3f2be09db7ee6833999">tcmi_task_exit</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:ga724d575729c5a3f2be09db7ee6833999"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Exits a task.  <a href="#ga724d575729c5a3f2be09db7ee6833999">More...</a><br/></td></tr>
<tr class="separator:ga724d575729c5a3f2be09db7ee6833999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24a9d8c612da1a4484b1b3a28a181c15"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga24a9d8c612da1a4484b1b3a28a181c15">tcmi_task_prepare_execve</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, char *file, char **argv, char **<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#aeebc47a01a74a156c1843bcc37b2bd02">envp</a>)</td></tr>
<tr class="memdesc:ga24a9d8c612da1a4484b1b3a28a181c15"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Prepares execution of a file given the arrays of arguments and environment.  <a href="#ga24a9d8c612da1a4484b1b3a28a181c15">More...</a><br/></td></tr>
<tr class="separator:ga24a9d8c612da1a4484b1b3a28a181c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1a418ac9d8b708dcee524671db07518"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gab1a418ac9d8b708dcee524671db07518">tcmi_task_execve</a> (void *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *wr)</td></tr>
<tr class="memdesc:gab1a418ac9d8b708dcee524671db07518"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Executes the file that has been previously setup for execution.  <a href="#gab1a418ac9d8b708dcee524671db07518">More...</a><br/></td></tr>
<tr class="separator:gab1a418ac9d8b708dcee524671db07518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga86b8af90f121c51ad718c6965441972f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga86b8af90f121c51ad718c6965441972f">tcmi_task_transactions</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga86b8af90f121c51ad718c6965441972f"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Transactions accessor - needed when tasks construct their own messages.  <a href="#ga86b8af90f121c51ad718c6965441972f">More...</a><br/></td></tr>
<tr class="separator:ga86b8af90f121c51ad718c6965441972f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0fce20d29a557abe480312086dad8b45"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga0fce20d29a557abe480312086dad8b45">tcmi_task_exit_code</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga0fce20d29a557abe480312086dad8b45"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Exit code accessor.  <a href="#ga0fce20d29a557abe480312086dad8b45">More...</a><br/></td></tr>
<tr class="separator:ga0fce20d29a557abe480312086dad8b45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2304b37598ad3c64f6a24f0ed0064de"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gad2304b37598ad3c64f6a24f0ed0064de">tcmi_task_set_exit_code</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, long code)</td></tr>
<tr class="memdesc:gad2304b37598ad3c64f6a24f0ed0064de"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Exit code setter.  <a href="#gad2304b37598ad3c64f6a24f0ed0064de">More...</a><br/></td></tr>
<tr class="separator:gad2304b37598ad3c64f6a24f0ed0064de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade1e8f7b12614ca0fecbc40aaae9a6c5"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gade1e8f7b12614ca0fecbc40aaae9a6c5">tcmi_task_context</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gade1e8f7b12614ca0fecbc40aaae9a6c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Process context accessor.  <a href="#gade1e8f7b12614ca0fecbc40aaae9a6c5">More...</a><br/></td></tr>
<tr class="separator:gade1e8f7b12614ca0fecbc40aaae9a6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc853647b7b732333c5909e617030f44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gabc853647b7b732333c5909e617030f44">tcmi_task_set_context</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, void *context)</td></tr>
<tr class="memdesc:gabc853647b7b732333c5909e617030f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Process context setter.  <a href="#gabc853647b7b732333c5909e617030f44">More...</a><br/></td></tr>
<tr class="separator:gabc853647b7b732333c5909e617030f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44b0c0c985d4c3954c6e35d748d9638b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga44b0c0c985d4c3954c6e35d748d9638b">tcmi_task_ckpt_name</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga44b0c0c985d4c3954c6e35d748d9638b"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Task checkpoint pathname accessor.  <a href="#ga44b0c0c985d4c3954c6e35d748d9638b">More...</a><br/></td></tr>
<tr class="separator:ga44b0c0c985d4c3954c6e35d748d9638b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0232aeae006148ffa6c760e7f1979865"><td class="memItemLeft" align="right" valign="top">static pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865">tcmi_task_local_pid</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga0232aeae006148ffa6c760e7f1979865"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Local PID accessor.  <a href="#ga0232aeae006148ffa6c760e7f1979865">More...</a><br/></td></tr>
<tr class="separator:ga0232aeae006148ffa6c760e7f1979865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f054ae4772c0921004eebdb48d39dcf"><td class="memItemLeft" align="right" valign="top">static pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf">tcmi_task_remote_pid</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga2f054ae4772c0921004eebdb48d39dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Remote PID accessor.  <a href="#ga2f054ae4772c0921004eebdb48d39dcf">More...</a><br/></td></tr>
<tr class="separator:ga2f054ae4772c0921004eebdb48d39dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e714bdc8a7e81d5439db8c88d1d3151"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga0e714bdc8a7e81d5439db8c88d1d3151">tcmi_task_set_local_pid</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, pid_t local_pid)</td></tr>
<tr class="memdesc:ga0e714bdc8a7e81d5439db8c88d1d3151"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Local PID setter.  <a href="#ga0e714bdc8a7e81d5439db8c88d1d3151">More...</a><br/></td></tr>
<tr class="separator:ga0e714bdc8a7e81d5439db8c88d1d3151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga401654abdc812f0a923d05c95b412fb1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga401654abdc812f0a923d05c95b412fb1">tcmi_task_show_remote_pid_rev</a> (void *obj, void *<a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084">data</a>)</td></tr>
<tr class="separator:ga401654abdc812f0a923d05c95b412fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60a2a872664867b7a86ec278b570fef2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga60a2a872664867b7a86ec278b570fef2">tcmi_task_set_remote_pid</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, pid_t remote_pid)</td></tr>
<tr class="memdesc:ga60a2a872664867b7a86ec278b570fef2"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Remote PID setter.  <a href="#ga60a2a872664867b7a86ec278b570fef2">More...</a><br/></td></tr>
<tr class="separator:ga60a2a872664867b7a86ec278b570fef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddcd1c0b8ba2bfee9a3602dbabea04e1"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gaddcd1c0b8ba2bfee9a3602dbabea04e1">tcmi_task_wait_for_pick_up_timeout</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, unsigned long timeout)</td></tr>
<tr class="memdesc:gaddcd1c0b8ba2bfee9a3602dbabea04e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Waits until the task is picked up, by the associated process.  <a href="#gaddcd1c0b8ba2bfee9a3602dbabea04e1">More...</a><br/></td></tr>
<tr class="separator:gaddcd1c0b8ba2bfee9a3602dbabea04e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1f29bebb7bb9f2174559555d97d8f29"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gad1f29bebb7bb9f2174559555d97d8f29">tcmi_task_pick_up</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad1f29bebb7bb9f2174559555d97d8f29"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Signals, the tcmi task has been pickedup by the associated process.n  <a href="#gad1f29bebb7bb9f2174559555d97d8f29">More...</a><br/></td></tr>
<tr class="separator:gad1f29bebb7bb9f2174559555d97d8f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccbe464cf89735f8da8ff88fc1a202a8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gaccbe464cf89735f8da8ff88fc1a202a8">tcmi_task_picked_up</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gaccbe464cf89735f8da8ff88fc1a202a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Checks whether the task has been picked up.  <a href="#gaccbe464cf89735f8da8ff88fc1a202a8">More...</a><br/></td></tr>
<tr class="separator:gaccbe464cf89735f8da8ff88fc1a202a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e660ea948542a5a057e25640a762efc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga4e660ea948542a5a057e25640a762efc">tcmi_task_send_anonymous_msg</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *m)</td></tr>
<tr class="memdesc:ga4e660ea948542a5a057e25640a762efc"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Sends a specified message.  <a href="#ga4e660ea948542a5a057e25640a762efc">More...</a><br/></td></tr>
<tr class="separator:ga4e660ea948542a5a057e25640a762efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01d55ac246026189ab497ec974bc75f8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga01d55ac246026189ab497ec974bc75f8">tcmi_task_get_execve_count</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="separator:ga01d55ac246026189ab497ec974bc75f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1483e4662ef7df7f603ea607b3291de3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga1483e4662ef7df7f603ea607b3291de3">tcmi_task_inc_execve_count</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="separator:ga1483e4662ef7df7f603ea607b3291de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac263213bf219960dea9c7d4b4e6f3b34"><td class="memItemLeft" align="right" valign="top">static struct task_struct *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34">tcmi_task_to_task_struct</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gac263213bf219960dea9c7d4b4e6f3b34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a task_struct associated with the <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>.  <a href="#gac263213bf219960dea9c7d4b4e6f3b34">More...</a><br/></td></tr>
<tr class="separator:gac263213bf219960dea9c7d4b4e6f3b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f509d7a61c069c641e99fe32a57ef75"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga6f509d7a61c069c641e99fe32a57ef75">tcmi_task_send_and_receive_msg</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *<a class="el" href="../../d1/d6d/tcmi__msg_8h.html#a523c18bfd05e923b099719721b24db7d">req</a>, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> **<a class="el" href="../../d1/d6d/tcmi__msg_8h.html#adb26817b6c4a9eeb3f68c832f24d5471">resp</a>)</td></tr>
<tr class="memdesc:ga6f509d7a61c069c641e99fe32a57ef75"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Sends a specified message and waits for a response.  <a href="#ga6f509d7a61c069c641e99fe32a57ef75">More...</a><br/></td></tr>
<tr class="separator:ga6f509d7a61c069c641e99fe32a57ef75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2d3dad02cf555da12cb2926cebb25f6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6">tcmi_task_signal_peer_lost</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:gad2d3dad02cf555da12cb2926cebb25f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies task that it peer is lost and sends a kill signal to that task.  <a href="#gad2d3dad02cf555da12cb2926cebb25f6">More...</a><br/></td></tr>
<tr class="separator:gad2d3dad02cf555da12cb2926cebb25f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d63cea88da4ef266e6c191720c2f2fb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga1d63cea88da4ef266e6c191720c2f2fb">tcmi_task_do_signal</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, unsigned long signr, siginfo_t *<a class="el" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940">info</a>)</td></tr>
<tr class="memdesc:ga1d63cea88da4ef266e6c191720c2f2fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Processes a specified signal.  <a href="#ga1d63cea88da4ef266e6c191720c2f2fb">More...</a><br/></td></tr>
<tr class="separator:ga1d63cea88da4ef266e6c191720c2f2fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68c818baf665eed96e9e0b277c599d36"><td class="memItemLeft" align="right" valign="top">static enum tcmi_task_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga68c818baf665eed96e9e0b277c599d36">tcmi_task_get_type</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>)</td></tr>
<tr class="memdesc:ga68c818baf665eed96e9e0b277c599d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Get task type  <a href="#ga68c818baf665eed96e9e0b277c599d36">More...</a><br/></td></tr>
<tr class="separator:ga68c818baf665eed96e9e0b277c599d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00ff41ed284360c257ed41138ad58d99"><td class="memItemLeft" align="right" valign="top">static u_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99">tcmi_task_hash</a> (pid_t local_pid, u_int hashmask)</td></tr>
<tr class="memdesc:ga00ff41ed284360c257ed41138ad58d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)  <a href="#ga00ff41ed284360c257ed41138ad58d99">More...</a><br/></td></tr>
<tr class="separator:ga00ff41ed284360c257ed41138ad58d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac04862f389dea22fbd5b8dc8f642ca9c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#gac04862f389dea22fbd5b8dc8f642ca9c">tcmi_task_check_peer_lost</a> (struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, int err)</td></tr>
<tr class="memdesc:gac04862f389dea22fbd5b8dc8f642ca9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple error checking method to be used after communication operations to detect lost peer.  <a href="#gac04862f389dea22fbd5b8dc8f642ca9c">More...</a><br/></td></tr>
<tr class="separator:gac04862f389dea22fbd5b8dc8f642ca9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>TCMI task is an abstraction for any process in the system that participates in migration. </p>
<p>This &lt;&lt;template&gt;&gt; class gathers common functionality for shadow tasks that represent a migrated process on CCN as well as for guest tasks that represent the migrated process on PEN.</p>
<p>TCMI tasks are controlled from user space via migration component. Each task is associated with its migration manager. This ensures that all messages addressed to a particular task are also delivered to its message queue or transactions slotvector. A TCMI task is given a communication socket (KKC socket) upon its instantiation. It is the communication channel that it will use for sending messages out. Note, that message delivery is handled exclusively by the migration manager. This makes it very easy to move a task among TCMI migration managers.</p>
<p>The main purpose of this class is execution of methods in the context of the shadow and guest process resp. These methods are submitted by the migration component into the method queue and include:</p>
<ul>
<li>request to migrate a process to a PEN - includes PPM_P, PPM_V, NPM</li>
<li>request to migrate a process back to CCN - includes PPM_P, PPM_V, NPM</li>
<li>request to process any incoming TCMI messages from the message queue.</li>
<li>request to terminate</li>
</ul>
<p>Methods in the queue are processed via a 'method pump'. Each method returns a status that is used by the controlling component to make a decision what to do further. Status return codes have following meanings:</p>
<ul>
<li>KEEP_PUMPING - the method pump should keep going as long as there are methods to process</li>
</ul>
<ul>
<li>MOVE_ME - stop pumping and tell the task controlling component to move it to a different migration manager (relevant for shadow tasks on CCN)</li>
</ul>
<ul>
<li>EXECVE_FAILED_KILL_ME - stop pumping and tell the task controlling component to kill this task. This status denotes the situation when the task tried issuing execve(typically when loading a new checkpoint or processing a non-preemptive migration request) and it failed. This status is needed as it also instructs the method pump not to discard the method wrapper as it has already been done by (<a class="el" href="../../de/d2f/group__tcmi__task__class.html#gab1a418ac9d8b708dcee524671db07518" title="&lt;&lt;public&gt;&gt; Executes the file that has been previously setup for execution.">tcmi_task_execve()</a> method internally)</li>
</ul>
<ul>
<li>KILL_ME - stop pumping and tell the task controlling component to kill this task (issue do_exit()) and remove it from its migration manager</li>
</ul>
<ul>
<li>LET_ME_GO -stop pumping and tell the task controlling component leave the migration mode, leave the task as is.</li>
</ul>
<ul>
<li>REMOVE_AND_LET_ME_GO -stop pumping and tell the task controlling component to remove the task from its current migration manager, destroy the <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> and and let the regular task go. For example, this status is returned by task_exit() method as it is called from the intercepted exit system call. Once the TCMI task is detached from its process the exit system call resumes and performs the actual exit.</li>
</ul>
<p>In addition, the task also holds the filename along with argv and envp arrays that will be executed. It is important to keep track of this data as they are required by the execve (e.g. when migrating a a task by executing it's checkpoint image). These resources eventually need to be released once the execve has been issued or when the task is destroyed. There is functionality that makes arguments and environment management easy.</p>
<p>Abbreviations:</p>
<ul>
<li>PPM_P - preemptive process migration using physical checkpoint image</li>
<li>PPM_V - preemptive process migration using virtual checkpoint image</li>
<li>NPM - non-preemptive process migration (using execve hook) </li>
</ul>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d1/dd2/structtcmi__task" id="d1/dd2/structtcmi__task"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_task</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Compound structure that gathers necessary process information. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00139">139</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_task:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/d48/structtcmi__task__coll__graph.png" border="0" usemap="#tcmi__task_coll__map" alt="Collaboration graph"/></div>
<map name="tcmi__task_coll__map" id="tcmi__task_coll__map">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#d5/d04/structtcmi__task__ops" title="TCMI task operations that support polymorphism." alt="" coords="5,1011,155,1250"/><area shape="rect" id="node3" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec" title="A slot vector compound structure." alt="" coords="354,723,464,888"/><area shape="rect" id="node5" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman" title="A compound structure that holds all current shadow processes and other migration related data..." alt="" coords="537,1041,660,1221"/><area shape="rect" id="node4" href="../../da/d0c/group__tcmi__slot__class.html#d9/dbb/structtcmi__slot" title="A slot compound structure." alt="" coords="521,451,631,616"/><area shape="rect" id="node6" href="../../d3/d7e/group__tcmi__sock__class.html#da/dba/structtcmi__sock" title="A compound structure that holds the actual KKC listening." alt="" coords="489,759,575,851"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock" title="A coumpound structure that contains generic information about a KKC socket." alt="" coords="215,458,344,609"/><area shape="rect" id="node15" href="../../d9/dfc/group__tcmi__comm__class.html#de/d0f/structtcmi__comm" title="Compound structure that holds reference to the connection and the user method." alt="" coords="231,737,329,873"/><area shape="rect" id="node8" href="../../d5/ddf/group__kkc__arch__class.html#db/d0a/structkkc__arch" title="Compound structure, describes one particular architecture." alt="" coords="135,213,209,320"/><area shape="rect" id="node9" href="../../d5/ddf/group__kkc__arch__class.html#d0/d60/structkkc__arch__ops" title="Architecture specific operations." alt="" coords="101,5,243,83"/><area shape="rect" id="node10" href="../../d6/d8e/group__kkc__sock__class.html#d9/db1/structkkc__sock__ops" title="Socket operations that support polymorphism." alt="" coords="234,147,397,386"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry" title="An entry compound structure." alt="" coords="857,487,972,579"/><area shape="rect" id="node12" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#df/d10/structtcmi__ctlfs__ops" title="entry operations that support polymorphism" alt="" coords="859,228,971,305"/><area shape="rect" id="node13" href="../../d6/da2/group__tcmi__migman__class.html#d6/d88/structtcmi__migman__ops" title="Migration manager operations that support polymorphism." alt="" coords="739,723,867,888"/><area shape="rect" id="node14" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue" title="compound structure" alt="" coords="1013,737,1101,873"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a00d2cb20c8d850399c7d22aeb55bca60"></a>char **</td>
<td class="fieldname">
argv</td>
<td class="fielddoc">
command line arguments for the checkpoint file (NULL terminated array of strings) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aa34a652a7d6449eb0009fb5671c273a9"></a>char *</td>
<td class="fieldname">
ckpt_pathname</td>
<td class="fielddoc">
contains the pathname of the latest checkpoint file </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac0a2ebb08fcde2d5c72f3e65a34cc475"></a>void *</td>
<td class="fieldname">
context</td>
<td class="fielddoc">
Pointer to the context of a process when switched into user mode. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aeceec0fe895316cadbf14b0761e5f51b"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_migman_root</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ab784101a73446f36684299f707224af2"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
d_task</td>
<td class="fielddoc">
TCMI ctlfs - migproc directory entry. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a59a4f4a4ace54362a3caed6f4cc28ab3"></a>char **</td>
<td class="fieldname">
envp</td>
<td class="fielddoc">
environment (NULL terminated array of strings) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7aab0d5c7b7cd830715c6376c4e29ecc"></a>int</td>
<td class="fieldname">
execve_count</td>
<td class="fielddoc">
How many time was execve called on this task, since it became controlled by the tcmi. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad2f33e1b99743200912dd03b6d714d62"></a>long</td>
<td class="fieldname">
exit_code</td>
<td class="fielddoc">
Task exit code - used when terminating the task. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a41d32d459815e14b75d57530f5cbf478"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_remote_pid</td>
<td class="fielddoc">
TCMI ctlfs - contains remote PID. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aaabc21f2174b2b71cacb0f1ca4489adc"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
f_remote_pid_rev</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a09013a5bce7e48887d48902700ef48a0"></a>pid_t</td>
<td class="fieldname">
local_pid</td>
<td class="fielddoc">
local PID on PEN, CCN resp. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0715f37fdf5a4d68fea317555e761a74"></a>struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a></td>
<td class="fieldname">
method_queue</td>
<td class="fielddoc">
queue of methods to be executed. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2efb62586c1f4f7e0e5438fd20ec1008"></a>struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *</td>
<td class="fieldname">
migman</td>
<td class="fielddoc">
Reference to a migration manager to which this task belongs to. <p>TODO: This "back" reference perhaps couples the class to tighly to migman class. We in fact need just a slotvector of migman tasks so that this task can handle its addition/removal on creation/deletion. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af9b79c52550bf4bfc6b4de90e58b7462"></a>struct <a class="el" href="../../dc/d0c/group__tcmi__queue__class.html#d5/d9a/structtcmi__queue">tcmi_queue</a></td>
<td class="fieldname">
msg_queue</td>
<td class="fielddoc">
Message queue for transaction-less messages. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="acfa8de59bfc98aedf6b8f76b59f9222c"></a><a class="el" href="../../da/d0c/group__tcmi__slot__class.html#ga97f49e924fec185311972baf87d31897">tcmi_slot_node_t</a></td>
<td class="fieldname">
node</td>
<td class="fielddoc">
node for storage in the migration slot of the migration manager </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a69041edc7f9b15b1c8dce13a1b291f95"></a>struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d5/d04/structtcmi__task__ops">tcmi_task_ops</a> *</td>
<td class="fieldname">
ops</td>
<td class="fielddoc">
Operations specific to shadow/guest tasks resp. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="abe0af04d790416a4840a39d2ef5465ea"></a>volatile int</td>
<td class="fieldname">
peer_lost</td>
<td class="fielddoc">
Flag used to inform the task that its peer is lost and it should terminate. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a6697ba8209fa90d595c5fa117bcaa4ae"></a>struct completion</td>
<td class="fieldname">
picked_up</td>
<td class="fielddoc">
Used for signalling when the task is picked up by the associated process. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a027c5d233a1f7fca0baacd3f4693c6b1"></a>int</td>
<td class="fieldname">
picked_up_flag</td>
<td class="fielddoc">
This flag is set when the task has been picked up, indicates the completion is finished. <p>It is used when performing synchronized waiting on pickup with timeout. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a41e26840f05057b49e416cc321ae91dc"></a>void *</td>
<td class="fieldname">
proxyfs_data</td>
<td class="fielddoc">
Data for proxyfs filesystem. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7d4eec507c5fee1002cfa190960e0950"></a>atomic_t</td>
<td class="fieldname">
ref_count</td>
<td class="fielddoc">
Instance reference counter. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a071b7d4b1e2f24e055b643810a97570c"></a>pid_t</td>
<td class="fieldname">
remote_pid</td>
<td class="fielddoc">
remote PID on PEN, CCN resp. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a803eb69f063f8a9f898ce5b7124e5b99"></a>struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *</td>
<td class="fieldname">
s_migman</td>
<td class="fielddoc">
TCMI ctlfs - symlink to the migration manager directory. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a9f310760627b79375736e0f7f30b1192"></a>struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *</td>
<td class="fieldname">
sock</td>
<td class="fielddoc">
communication socket. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="afc4fb209349243d6000fc141bc4de260"></a>struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a> *</td>
<td class="fieldname">
transactions</td>
<td class="fielddoc">
Message transactions. </td></tr>
</table>

</div>
</div>
<a name="d5/d04/structtcmi__task__ops" id="d5/d04/structtcmi__task__ops"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcmi_task_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>TCMI task operations that support polymorphism. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00219">219</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for tcmi_task_ops:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d7e/structtcmi__task__ops__coll__graph.png" border="0" usemap="#tcmi__task__ops_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:ae5dd3e79db9d2c7839f66643a662c3cc"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ae5dd3e79db9d2c7839f66643a662c3cc">process_msg</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td></tr>
<tr class="memdesc:ae5dd3e79db9d2c7839f66643a662c3cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a message that has arrived on the message queue.  <a href="#ae5dd3e79db9d2c7839f66643a662c3cc">More...</a><br/></td></tr>
<tr class="separator:ae5dd3e79db9d2c7839f66643a662c3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcb9b7a63522014a34c9bdb73530b1b"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#a0fcb9b7a63522014a34c9bdb73530b1b">emigrate_ppm_p</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td></tr>
<tr class="memdesc:a0fcb9b7a63522014a34c9bdb73530b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emigrates a task to a PEN - PPM w/ physical checkpoint.  <a href="#a0fcb9b7a63522014a34c9bdb73530b1b">More...</a><br/></td></tr>
<tr class="separator:a0fcb9b7a63522014a34c9bdb73530b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee196b92276b8649b2a4afe20f69d1c4"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#aee196b92276b8649b2a4afe20f69d1c4">migrateback_ppm_p</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td></tr>
<tr class="memdesc:aee196b92276b8649b2a4afe20f69d1c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrates a task back to CCN - PPM w/ physical checkpoint.  <a href="#aee196b92276b8649b2a4afe20f69d1c4">More...</a><br/></td></tr>
<tr class="separator:aee196b92276b8649b2a4afe20f69d1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409ad09731d1afea81f1cabc1592476e"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#a409ad09731d1afea81f1cabc1592476e">emigrate_ppm_v</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td></tr>
<tr class="memdesc:a409ad09731d1afea81f1cabc1592476e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emigrates a task to a PEN - PPM w/ virtual checkpoint.  <a href="#a409ad09731d1afea81f1cabc1592476e">More...</a><br/></td></tr>
<tr class="separator:a409ad09731d1afea81f1cabc1592476e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd2f3519b68c8992aa2f99d740a6674"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#a4cd2f3519b68c8992aa2f99d740a6674">migrateback_ppm_v</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td></tr>
<tr class="memdesc:a4cd2f3519b68c8992aa2f99d740a6674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrates a task back to CCN - PPM w/ virtual checkpoint.  <a href="#a4cd2f3519b68c8992aa2f99d740a6674">More...</a><br/></td></tr>
<tr class="separator:a4cd2f3519b68c8992aa2f99d740a6674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3eabe1c0b260e3efcf08e52c23877d4"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ae3eabe1c0b260e3efcf08e52c23877d4">emigrate_npm</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *)</td></tr>
<tr class="memdesc:ae3eabe1c0b260e3efcf08e52c23877d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emigrates a task to a PEN - NPM.  <a href="#ae3eabe1c0b260e3efcf08e52c23877d4">More...</a><br/></td></tr>
<tr class="separator:ae3eabe1c0b260e3efcf08e52c23877d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecbd2cf968b18b92a414d5583f2a5ae6"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#aecbd2cf968b18b92a414d5583f2a5ae6">migrateback_npm</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *)</td></tr>
<tr class="memdesc:aecbd2cf968b18b92a414d5583f2a5ae6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrates a task back to CCN - NPM.  <a href="#aecbd2cf968b18b92a414d5583f2a5ae6">More...</a><br/></td></tr>
<tr class="separator:aecbd2cf968b18b92a414d5583f2a5ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4eae8756d81c3e7bef400390523d727"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ad4eae8756d81c3e7bef400390523d727">exit</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, long)</td></tr>
<tr class="memdesc:ad4eae8756d81c3e7bef400390523d727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used upon task exit.  <a href="#ad4eae8756d81c3e7bef400390523d727">More...</a><br/></td></tr>
<tr class="separator:ad4eae8756d81c3e7bef400390523d727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0c236456d6fe84945707698478ef031"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#ae0c236456d6fe84945707698478ef031">execve</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td></tr>
<tr class="memdesc:ae0c236456d6fe84945707698478ef031"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance specific execve.  <a href="#ae0c236456d6fe84945707698478ef031">More...</a><br/></td></tr>
<tr class="separator:ae0c236456d6fe84945707698478ef031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37963610da80aa0e5e7ee0595de42e82"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#a37963610da80aa0e5e7ee0595de42e82">do_signal</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, unsigned long signr, siginfo_t *<a class="el" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940">info</a>)</td></tr>
<tr class="memdesc:a37963610da80aa0e5e7ee0595de42e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a specific signal.  <a href="#a37963610da80aa0e5e7ee0595de42e82">More...</a><br/></td></tr>
<tr class="separator:a37963610da80aa0e5e7ee0595de42e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a45a5a3cbb011a4fc26c7637584ebc"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#a52a45a5a3cbb011a4fc26c7637584ebc">free</a> )(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td></tr>
<tr class="memdesc:a52a45a5a3cbb011a4fc26c7637584ebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the instance specific resources.  <a href="#a52a45a5a3cbb011a4fc26c7637584ebc">More...</a><br/></td></tr>
<tr class="separator:a52a45a5a3cbb011a4fc26c7637584ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17965dc5cec704be6bdbd7264459f4f4"><td class="memItemLeft" align="right" valign="top">enum tcmi_task_type(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2f/group__tcmi__task__class.html#a17965dc5cec704be6bdbd7264459f4f4">get_type</a> )(void)</td></tr>
<tr class="memdesc:a17965dc5cec704be6bdbd7264459f4f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return type of task.  <a href="#a17965dc5cec704be6bdbd7264459f4f4">More...</a><br/></td></tr>
<tr class="separator:a17965dc5cec704be6bdbd7264459f4f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="a37963610da80aa0e5e7ee0595de42e82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::do_signal)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *<a class="el" href="../../db/d61/group__tcmi__penman__class.html#gae3924f624412b270d461d2543744407e">self</a>, unsigned long signr, siginfo_t *<a class="el" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940">info</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles a specific signal. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00239">239</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae3eabe1c0b260e3efcf08e52c23877d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::emigrate_npm)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emigrates a task to a PEN - NPM. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00231">231</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00583">tcmi_task_emigrate_npm()</a>.</p>

</div>
</div>
<a class="anchor" id="a0fcb9b7a63522014a34c9bdb73530b1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::emigrate_ppm_p)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emigrates a task to a PEN - PPM w/ physical checkpoint. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00223">223</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00487">tcmi_task_emigrate_ppm_p()</a>.</p>

</div>
</div>
<a class="anchor" id="a409ad09731d1afea81f1cabc1592476e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::emigrate_ppm_v)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emigrates a task to a PEN - PPM w/ virtual checkpoint. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00227">227</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00535">tcmi_task_emigrate_ppm_v()</a>.</p>

</div>
</div>
<a class="anchor" id="ae0c236456d6fe84945707698478ef031"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::execve)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instance specific execve. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00237">237</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00804">tcmi_task_execve()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4eae8756d81c3e7bef400390523d727"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::exit)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, long)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used upon task exit. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00235">235</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00637">tcmi_task_exit()</a>.</p>

</div>
</div>
<a class="anchor" id="a52a45a5a3cbb011a4fc26c7637584ebc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* tcmi_task_ops::free)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the instance specific resources. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00241">241</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

</div>
</div>
<a class="anchor" id="a17965dc5cec704be6bdbd7264459f4f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum tcmi_task_type(* tcmi_task_ops::get_type)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return type of task. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00243">243</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

</div>
</div>
<a class="anchor" id="aecbd2cf968b18b92a414d5583f2a5ae6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::migrateback_npm)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, struct <a class="el" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params">tcmi_npm_params</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Migrates a task back to CCN - NPM. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00233">233</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00607">tcmi_task_migrateback_npm()</a>.</p>

</div>
</div>
<a class="anchor" id="aee196b92276b8649b2a4afe20f69d1c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::migrateback_ppm_p)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Migrates a task back to CCN - PPM w/ physical checkpoint. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00225">225</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00511">tcmi_task_migrateback_ppm_p()</a>.</p>

</div>
</div>
<a class="anchor" id="a4cd2f3519b68c8992aa2f99d740a6674"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::migrateback_ppm_v)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Migrates a task back to CCN - PPM w/ virtual checkpoint. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00229">229</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00559">tcmi_task_migrateback_ppm_v()</a>.</p>

</div>
</div>
<a class="anchor" id="ae5dd3e79db9d2c7839f66643a662c3cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* tcmi_task_ops::process_msg)(struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *, struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a message that has arrived on the message queue. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00221">221</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00400">tcmi_task_process_msg()</a>.</p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gaf05e0c401db433deef4d95a64ce9117b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCMI_TASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/d8e/install__manual__clondike-en_8desc.html#a09ff0ffa84c9eedbf9f4be2ca365b89b">t</a></td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a>*)<a class="el" href="../../d3/d8e/install__manual__clondike-en_8desc.html#a09ff0ffa84c9eedbf9f4be2ca365b89b">t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Casts to the task instance. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">261</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00058">tcmi_guesttask_new()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00392">tcmi_guesttask_post_fork_set_tid()</a>, <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00542">tcmi_man_fork()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00089">tcmi_shadowtask_new()</a>, <a class="el" href="../../db/d35/tcmi__syscallhooks__other_8c_source.html#l00131">tcmi_syscall_hooks_post_fork()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00583">tcmi_task_emigrate_npm()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00487">tcmi_task_emigrate_ppm_p()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00535">tcmi_task_emigrate_ppm_v()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00804">tcmi_task_execve()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00637">tcmi_task_exit()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00607">tcmi_task_migrateback_npm()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00511">tcmi_task_migrateback_ppm_p()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00559">tcmi_task_migrateback_ppm_v()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00400">tcmi_task_process_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00452">tcmi_task_send_message()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00854">tcmi_task_show_remote_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00439">tcmi_task_show_remote_pid_rev()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gaa81f1a7178bfcf01d74e57d6bbcb869b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d2f/group__tcmi__task__class.html#gaa81f1a7178bfcf01d74e57d6bbcb869b">tcmi_task_method_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Describes the status returned by task methods that are executed from the method queue. </p>
<p>See the <a class="el" href="../../de/d2f/group__tcmi__task__class.html">task </a> detailed description for explanation of each individual return status. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675"></a>TCMI_TASK_KEEP_PUMPING</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaa81f1a7178bfcf01d74e57d6bbcb869ba20ea4bc1d0ee2a10cb98d6c168f49d54"></a>TCMI_TASK_MOVE_ME</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaa81f1a7178bfcf01d74e57d6bbcb869ba0d820f34432c988875982f560e54da2b"></a>TCMI_TASK_EXECVE_FAILED_KILL_ME</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaa81f1a7178bfcf01d74e57d6bbcb869bad619e483cc5231333ada87518fb2b301"></a>TCMI_TASK_KILL_ME</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaa81f1a7178bfcf01d74e57d6bbcb869ba67409e338aae7921b48943c4c2a5d818"></a>TCMI_TASK_LET_ME_GO</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaa81f1a7178bfcf01d74e57d6bbcb869bade59423de18b4fdc67a09f36b7cd71aa"></a>TCMI_TASK_REMOVE_AND_LET_ME_GO</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00251">251</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;             {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba20ea4bc1d0ee2a10cb98d6c168f49d54">TCMI_TASK_MOVE_ME</a>,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba0d820f34432c988875982f560e54da2b">TCMI_TASK_EXECVE_FAILED_KILL_ME</a>,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bad619e483cc5231333ada87518fb2b301">TCMI_TASK_KILL_ME</a>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba67409e338aae7921b48943c4c2a5d818">TCMI_TASK_LET_ME_GO</a>,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bade59423de18b4fdc67a09f36b7cd71aa">TCMI_TASK_REMOVE_AND_LET_ME_GO</a></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;} <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaa81f1a7178bfcf01d74e57d6bbcb869b" title="Describes the status returned by task methods that are executed from the method queue.">tcmi_task_method_status_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac04862f389dea22fbd5b8dc8f642ca9c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_check_peer_lost </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simple error checking method to be used after communication operations to detect lost peer. </p>
<p>In case err indicates broken connection, peer is considered dead for us.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns passed err param, so that it can be easily used for call chaining </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00648">648</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00577">tcmi_task_signal_peer_lost()</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00149">tcmi_guesttask_migrateback_p()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00307">tcmi_guesttask_process_p_emigrate_msg()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00384">tcmi_shadowtask_do_signal()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00328">tcmi_shadowtask_migrateback_ppm_p()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                                                             {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="comment">// For now, we react only on broken pipe, but we may react on more cases, right?</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">if</span> ( err == -EPIPE )</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task.">tcmi_task_signal_peer_lost</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gac04862f389dea22fbd5b8dc8f642ca9c_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gac04862f389dea22fbd5b8dc8f642ca9c_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gac04862f389dea22fbd5b8dc8f642ca9c_cgraph" id="de/d2f/group__tcmi__task__class_gac04862f389dea22fbd5b8dc8f642ca9c_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#gad2d3dad02cf555da12cb2926cebb25f6" title="Notifies task that it peer is lost and sends a kill signal to that task." alt="" coords="235,31,415,57"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="465,31,634,57"/><area shape="rect" id="node4" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="693,5,811,32"/><area shape="rect" id="node5" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="683,56,821,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga44b0c0c985d4c3954c6e35d748d9638b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* tcmi_task_ckpt_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Task checkpoint pathname accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the most recent checkpoint pathname. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00400">400</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00149">tcmi_guesttask_migrateback_p()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>.</p>
<div class="fragment"><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;ckpt_pathname;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gade1e8f7b12614ca0fecbc40aaae9a6c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* tcmi_task_context </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Process context accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>process context. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00378">378</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00620">tcmi_taskhelper_checkpoint()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00574">tcmi_taskhelper_notify_current()</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;context;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga87f10a21c32bf05db4c36e7304f0a881"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_deliver_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Delivers a specified message. </p>
<p>Asks the message to deliver itself into a message queue or associate itself with a matching transaction. The result is communicated back.</p>
<p>If the message is delivered sucessfully, an enter to the migration mode is requested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*m</td><td>- message to be delivered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when the message has been successfully delivered.</dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00906">906</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00297">tcmi_msg_deliver()</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00083">TCMI_MSG_GROUP</a>, <a class="el" href="../../dd/dd5/tcmi__messages__id_8h_source.html#l00108">TCMI_MSG_GROUP_PROC</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d5/d2b/tcmi__procmsg_8h_source.html#l00115">TCMI_PROCMSG</a>, <a class="el" href="../../d5/d2b/tcmi__procmsg_8h_source.html#l00108">tcmi_procmsg_enforce_migmode()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00400">tcmi_task_process_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00272">tcmi_task_submit_method()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00092">tcmi_taskhelper_enter_mig_mode()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;{</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself.">tcmi_msg_deliver</a>(m, &amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#afc4fb209349243d6000fc141bc4de260" title="Message transactions.">transactions</a>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> ( res ) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Failed to deliver the message: errno=%d&quot;</span>, res);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// Request migration mode only for proc messages with enforce migmode flag specified</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ga9526a29f88aecae5da9f8c28be9bea4f" title="Extracts group number.">TCMI_MSG_GROUP</a>(<a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m)) == <a class="code" href="../../d8/d9d/group__tcmi__messages__id.html#ggabc6126af1d45847bc59afa0aa3216b04a6725f18f4d3a5f445b6917c9a22a3f16">TCMI_MSG_GROUP_PROC</a> &amp;&amp; <a class="code" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga460e4aa5dcb20680794c04a07712e59f" title="&lt;&lt;public&gt;&gt; Getter of flag idicating whether we should switch to migmode or not">tcmi_procmsg_enforce_migmode</a>(<a class="code" href="../../d7/dc8/group__tcmi__procmsg__class.html#gaba00344eba012e8234726bd601b06aaf" title="Casts to the tcmi_procmsg instance.">TCMI_PROCMSG</a>(m)) ) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Message successfully delivered, requesting migration mode for pid: %d&quot;</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>));    </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="comment">// TODO: Nasty workaround.. this should likely by in a guest task specific code, since it makes no sense for shadow</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>) ) { </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="keywordtype">int</span> wait_for_msg = 0;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="comment">// If there is no method in method queue, there is nothing that would process the message, so we have to submit the processing method into the queue</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution.">tcmi_task_submit_method</a>(<span class="keyword">self</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga491523e65c3fb2f665013a2f15899cb8" title="&lt;&lt;public&gt;&gt; Called from method queue - Processes one message from the message queue.">tcmi_task_process_msg</a>, &amp;wait_for_msg, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga9dbb48f23b9ec6a00498db53f026ef4b" title="&lt;&lt;public&gt;&gt; Switches the task into migration mode.">tcmi_taskhelper_enter_mig_mode</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga87f10a21c32bf05db4c36e7304f0a881_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga87f10a21c32bf05db4c36e7304f0a881_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga87f10a21c32bf05db4c36e7304f0a881_cgraph" id="de/d2f/group__tcmi__task__class_ga87f10a21c32bf05db4c36e7304f0a881_cgraph">
<area shape="rect" id="node2" href="../../d6/dc2/group__tcmi__msg__class.html#ga8e7c8f734e50ec514ed77795ad41b050" title="&lt;&lt;public&gt;&gt; A message always delivers itself." alt="" coords="235,183,357,209"/><area shape="rect" id="node28" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="475,717,571,744"/><area shape="rect" id="node29" href="../../d7/dc8/group__tcmi__procmsg__class.html#ga460e4aa5dcb20680794c04a07712e59f" title="&lt;&lt;public&gt;&gt; Getter of flag idicating whether we should switch to migmode or not" alt="" coords="219,702,373,743"/><area shape="rect" id="node30" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="677,557,809,584"/><area shape="rect" id="node31" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="674,819,811,845"/><area shape="rect" id="node32" href="../../de/d2f/group__tcmi__task__class.html#ga491523e65c3fb2f665013a2f15899cb8" title="&lt;&lt;public&gt;&gt; Called from method queue &#45; Processes one message from the message queue." alt="" coords="214,600,378,627"/><area shape="rect" id="node37" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="209,903,383,929"/><area shape="rect" id="node39" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga9dbb48f23b9ec6a00498db53f026ef4b" title="&lt;&lt;public&gt;&gt; Switches the task into migration mode." alt="" coords="221,819,371,861"/><area shape="rect" id="node3" href="../../dc/d0c/group__tcmi__queue__class.html#ga640f6067e72f77558cac6c58ca898c46" title="&lt;&lt;public&gt;&gt; Locks the queue and appends a new element to the tail." alt="" coords="464,107,581,133"/><area shape="rect" id="node7" href="../../d4/d8c/group__tcmi__transaction__class.html#gacb04fbb3689a2fffdef88873aa6cda62" title="&lt;&lt;public&gt;&gt; Tries to find a transaction based on its ID." alt="" coords="661,157,824,184"/><area shape="rect" id="node14" href="../../d4/d8c/group__tcmi__transaction__class.html#ga283a3e7e1414ff2eb5a49300c4af3208" title="&lt;&lt;public&gt;&gt; Completes a transaction and wakes up the processing thread." alt="" coords="433,328,612,355"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="886,335,1021,361"/><area shape="rect" id="node27" href="../../d4/d8c/group__tcmi__transaction__class.html#ga96d22d09c9571b01fee1eacf0b0c0b6b" title="&lt;&lt;public&gt;&gt; Checks on an anonymous transaction." alt="" coords="437,56,608,83"/><area shape="rect" id="node4" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="677,56,808,83"/><area shape="rect" id="node5" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="683,107,803,133"/><area shape="rect" id="node6" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="675,5,810,32"/><area shape="rect" id="node8" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="873,132,1034,159"/><area shape="rect" id="node9" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="891,284,1016,311"/><area shape="rect" id="node10" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="897,183,1009,209"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="882,81,1025,108"/><area shape="rect" id="node13" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="884,233,1023,260"/><area shape="rect" id="node15" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="668,309,817,336"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#ga01baf770d7a3fdaa6931024d50f9d039" title="&lt;&lt;public&gt;&gt; Transaction state accessor." alt="" coords="665,360,820,387"/><area shape="rect" id="node17" href="../../d4/d8c/group__tcmi__transaction__class.html#gaf09ca8b38517289edf0bdb43ec06360d" title="&lt;&lt;public&gt;&gt; Checks on a running transaction." alt="" coords="675,411,810,453"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="661,259,824,285"/><area shape="rect" id="node19" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="671,477,814,504"/><area shape="rect" id="node20" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="892,477,1015,504"/><area shape="rect" id="node21" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1083,427,1221,453"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1099,477,1205,504"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1092,528,1212,555"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1291,401,1410,428"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1270,452,1431,479"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1480,452,1592,479"/><area shape="rect" id="node33" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="432,616,613,643"/><area shape="rect" id="node34" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty." alt="" coords="453,550,593,591"/><area shape="rect" id="node35" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="471,448,575,475"/><area shape="rect" id="node36" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaf0a8913b9f40f66641ad7076e023dd58" title="&lt;&lt;public&gt;&gt; Method wrapper accessor." alt="" coords="435,499,610,525"/><area shape="rect" id="node38" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="433,920,612,947"/><area shape="rect" id="node40" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="438,869,607,896"/><area shape="rect" id="node41" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="683,869,802,896"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1d63cea88da4ef266e6c191720c2f2fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_do_signal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>signr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">siginfo_t *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Processes a specified signal. </p>
<p>The work is delegated to the task specific method if one is specified. This allows the shadow and guest processes to handle the signal differently. In fact, they have to: - shadow process takes appropriate actions and forwards the signal to the guest using signal forwarding component(since the guest might not be in migration mode) - guest process takes only appropriate actions and is able to communicate with the shadow directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">signr</td><td>- signal that is to be processed </td></tr>
    <tr><td class="paramname">*info</td><td>- info for signal to be processed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific signal handling method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00599">599</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00255">TCMI_TASK_KILL_ME</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00282">tcmi_taskhelper_do_signals()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Processing signal %lu&quot;</span>, signr);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> ( self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#abe0af04d790416a4840a39d2ef5465ea" title="Flag used to inform the task that its peer is lost and it should terminate.">peer_lost</a> &amp;&amp; signr == SIGKILL ) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Peer task is dead, killing current task&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bad619e483cc5231333ada87518fb2b301">TCMI_TASK_KILL_ME</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a37963610da80aa0e5e7ee0595de42e82" title="Handles a specific signal.">do_signal</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        res = <span class="keyword">self</span>-&gt;ops-&gt;do_signal(<span class="keyword">self</span>, signr, <a class="code" href="../../d6/d23/tcmi__signal__msg_8h.html#a7d5c5f5b173fb960963b2c44980dc940" title="Siginfo structure (we can use directly this structure as it is padded to be exactly 128 bytes)...">info</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2ddc594d454cc80c776c7c5fc53df45d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_emigrate_npm </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - NPM. </p>
<p>&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - NPM.</p>
<ul>
<li>NPM. All the work is delegated to the task specific emigrate method.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific emigrate method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00583">583</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00231">tcmi_task_ops::emigrate_npm</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00175">tcmi_method_wrapper_data()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;{</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params" title="Structure containing data required for performing of non-preemtive restart.">tcmi_npm_params</a>* npm_params = *((<span class="keyword">struct </span><a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params" title="Structure containing data required for performing of non-preemtive restart.">tcmi_npm_params</a>**)<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper.">tcmi_method_wrapper_data</a>(wr));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task - local pid %d, remote pid %d, emigrating&quot;</span>,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(self_tsk), <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(self_tsk));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ae3eabe1c0b260e3efcf08e52c23877d4" title="Emigrates a task to a PEN - NPM.">emigrate_npm</a>)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ae3eabe1c0b260e3efcf08e52c23877d4" title="Emigrates a task to a PEN - NPM.">emigrate_npm</a>(self_tsk, npm_params);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga2ddc594d454cc80c776c7c5fc53df45d_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga2ddc594d454cc80c776c7c5fc53df45d_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga2ddc594d454cc80c776c7c5fc53df45d_cgraph" id="de/d2f/group__tcmi__task__class_ga2ddc594d454cc80c776c7c5fc53df45d_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="221,5,403,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="243,56,381,83"/><area shape="rect" id="node4" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="237,107,387,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4314e915251536470fdbef57a68cb0d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_emigrate_ppm_p </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - PPM w/ physical checkpoint. </p>
<p>&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - PPM w/ physical checkpoint.</p>
<ul>
<li>PPM w/ physical checkpoint. All the work is delegated to the task specific emigrate method.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific emigrate method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00487">487</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00223">tcmi_task_ops::emigrate_ppm_p</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>.</p>
<div class="fragment"><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;{</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task - local pid %d, remote pid %d, emigrating&quot;</span>,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;         <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(self_tsk), <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(self_tsk));</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0fcb9b7a63522014a34c9bdb73530b1b" title="Emigrates a task to a PEN - PPM w/ physical checkpoint.">emigrate_ppm_p</a>)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0fcb9b7a63522014a34c9bdb73530b1b" title="Emigrates a task to a PEN - PPM w/ physical checkpoint.">emigrate_ppm_p</a>(self_tsk);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga4314e915251536470fdbef57a68cb0d4_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga4314e915251536470fdbef57a68cb0d4_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga4314e915251536470fdbef57a68cb0d4_cgraph" id="de/d2f/group__tcmi__task__class_ga4314e915251536470fdbef57a68cb0d4_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="197,5,334,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="190,56,341,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac3c2e2d0700558ed149306c368577ab2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_emigrate_ppm_v </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - PPM w/ virtual checkpoint. </p>
<p>&lt;&lt;public&gt;&gt; Emigrates a task to a PEN - PPM w/ virtual checkpoint.</p>
<ul>
<li>PPM w/ virtual checkpoint. All the work is delegated to the task specific emigrate method.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific emigrate method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00535">535</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00227">tcmi_task_ops::emigrate_ppm_v</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task - local pid %d, remote pid %d, emigrating&quot;</span>,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;         <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(self_tsk), <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(self_tsk));</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a409ad09731d1afea81f1cabc1592476e" title="Emigrates a task to a PEN - PPM w/ virtual checkpoint.">emigrate_ppm_v</a>)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a409ad09731d1afea81f1cabc1592476e" title="Emigrates a task to a PEN - PPM w/ virtual checkpoint.">emigrate_ppm_v</a>(self_tsk);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gac3c2e2d0700558ed149306c368577ab2_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gac3c2e2d0700558ed149306c368577ab2_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gac3c2e2d0700558ed149306c368577ab2_cgraph" id="de/d2f/group__tcmi__task__class_gac3c2e2d0700558ed149306c368577ab2_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="197,5,334,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="190,56,341,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab1a418ac9d8b708dcee524671db07518"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_execve </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Executes the file that has been previously setup for execution. </p>
<p>Prior to performing the exec, it is necessary to discard the method wrapper as the method pump won't resume anymore in this context. Also the instance specific execve method is called. This allows a particular TCMI task to get ready for an upcoming execve.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper that carried this method in the queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- doesn't return upon succesful execve, otherwise TCMI_TASK_EXECVE_FAILED_KILL_ME to inform the method pump to quit without discarding the method wrapper as we have already done so. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00804">804</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00194">tcmi_task::argv</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00191">tcmi_task::ckpt_pathname</a>, <a class="el" href="../../da/d7c/i386_2make__syscall_8h_source.html#l00059">copyof_kernel_execve()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00196">tcmi_task::envp</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00032">errno</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00237">tcmi_task_ops::execve</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00213">memory_sanity_check</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00136">tcmi_method_wrapper_put()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00254">TCMI_TASK_EXECVE_FAILED_KILL_ME</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00700">tcmi_taskhelper_restart()</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    mm_segment_t oldfs;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<a class="code" href="../../d6/d01/dbg_8h.html#a9c4ed0974203b4d07545e0f6904da15e">memory_sanity_check</a>(<span class="stringliteral">&quot;Sanity check on execve&quot;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Performing exec on &#39;%s&#39; Args: %p ([0] -&gt; %p) Envp: %p ([0] -&gt; %p) in atomic=%d&quot;</span>, self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a>, self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>, self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>[0], self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a59a4f4a4ace54362a3caed6f4cc28ab3" title="environment (NULL terminated array of strings)">envp</a>, self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a59a4f4a4ace54362a3caed6f4cc28ab3" title="environment (NULL terminated array of strings)">envp</a>[0], in_atomic());</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="comment">/* discard the method wrapper prior to doing anything */</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_method_wrapper_put</a>(wr);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="comment">/* instance specific execve notification */</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ae0c236456d6fe84945707698478ef031" title="Instance specific execve.">execve</a>)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        err = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ae0c236456d6fe84945707698478ef031" title="Instance specific execve.">execve</a>(self_tsk);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Task specific execve failed!&quot;</span>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    oldfs = get_fs();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    set_fs(KERNEL_DS);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">/*mm_segment_t fs = get_fs();*/</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<a class="code" href="../../d6/d01/dbg_8h.html#a9c4ed0974203b4d07545e0f6904da15e">memory_sanity_check</a>(<span class="stringliteral">&quot;Sanity check on execve - just before the call&quot;</span>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../da/d7c/i386_2make__syscall_8h.html#a042af8adc43a2caa376c6a5dfddfeb6c" title="TODO: Export the original kernel_execve in kernel and use that instead.">copyof_kernel_execve</a>((<span class="keyword">const</span> <span class="keywordtype">char</span>*)self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a>, (<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> *)self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>,</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">/* if ((err = execve(self_tsk-&gt;ckpt_pathname, self_tsk-&gt;argv, */</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;             (<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> *)self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a59a4f4a4ace54362a3caed6f4cc28ab3" title="environment (NULL terminated array of strings)">envp</a>)) &lt; 0) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Execve failed!!! %d, errno=%d&quot;</span>, err, <a class="code" href="../../de/d84/tcmi__task_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    set_fs(oldfs);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO2, <span class="stringliteral">&quot;Exec done!&quot;</span>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; exit0:</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba0d820f34432c988875982f560e54da2b">TCMI_TASK_EXECVE_FAILED_KILL_ME</a>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gab1a418ac9d8b708dcee524671db07518_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gab1a418ac9d8b708dcee524671db07518_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gab1a418ac9d8b708dcee524671db07518_cgraph" id="de/d2f/group__tcmi__task__class_gab1a418ac9d8b708dcee524671db07518_cgraph">
<area shape="rect" id="node2" href="../../da/d7c/i386_2make__syscall_8h.html#a042af8adc43a2caa376c6a5dfddfeb6c" title="TODO: Export the original kernel_execve in kernel and use that instead." alt="" coords="195,5,344,32"/><area shape="rect" id="node3" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="182,56,357,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga724d575729c5a3f2be09db7ee6833999"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_exit </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Exits a task. </p>
<p>&lt;&lt;public&gt;&gt; Exits a task.</p>
<p>This method is primarily intended terminate the main method processing loop of the task. The task is then removed from its migration manager and destroyed. Task specific method has the chance to communicate this to its counter part. E.g. a guest task sends an exit code to the associated shadow process on the CCN.</p>
<p>The method wrapper might contain an exit code. If so, it is communicated to the specific task method. The default exit code is 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper that stores the requested exit code. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific exit method or TCMI_TASK_REMOVE_AND_LET_ME_GO </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00637">637</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00235">tcmi_task_ops::exit</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00175">tcmi_method_wrapper_data()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00257">TCMI_TASK_REMOVE_AND_LET_ME_GO</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00135">tcmi_mighooks_do_exit()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00365">tcmi_shadowtask_execve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bade59423de18b4fdc67a09f36b7cd71aa">TCMI_TASK_REMOVE_AND_LET_ME_GO</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordtype">long</span> *pcode, code;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Doing exit&quot;</span>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">/* extract the exit code if any. */</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    pcode = (<span class="keywordtype">long</span>*)<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper.">tcmi_method_wrapper_data</a>(wr);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    code = (pcode ? *pcode : 0);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Executing custom exit method&quot;</span>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ad4eae8756d81c3e7bef400390523d727" title="Used upon task exit.">exit</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ad4eae8756d81c3e7bef400390523d727" title="Used upon task exit.">exit</a>(self_tsk, code);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Executed custom exit method&quot;</span>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga724d575729c5a3f2be09db7ee6833999_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga724d575729c5a3f2be09db7ee6833999_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga724d575729c5a3f2be09db7ee6833999_cgraph" id="de/d2f/group__tcmi__task__class_ga724d575729c5a3f2be09db7ee6833999_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="160,5,341,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0fce20d29a557abe480312086dad8b45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static long tcmi_task_exit_code </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Exit code accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>task exit code. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00356">356</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00625">tcmi_migcom_mig_mode_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;exit_code;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2bf62635c09738ef0c1385ea258bec2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_task_flush_and_submit_method </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga51adea36dbef7cb03ffb89f5821ef2e0">tcmi_method_t</a> *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Prior to submitting, atomically flushes the method queue. </p>
<p>&lt;&lt;public&gt;&gt; Prior to submitting, atomically flushes the method queue.</p>
<p>This operation must be atomic - under a queue lock, all methods are removed and a new wrapper is added to the method queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*method</td><td>- pointer to the method that is to be submitted </td></tr>
    <tr><td class="paramname">*data</td><td>- argument for the submitted method </td></tr>
    <tr><td class="paramname">size</td><td>- size of the argument in bytes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00297">297</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00206">__tcmi_queue_add()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00282">__tcmi_queue_remove_entry</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00062">tcmi_method_wrapper::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00082">tcmi_method_wrapper_new()</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00136">tcmi_method_wrapper_put()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00175">tcmi_queue_lock()</a>, and <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00185">tcmi_queue_unlock()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00365">tcmi_shadowtask_execve()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00181">tcmi_taskhelper_notify_by_pid()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00574">tcmi_taskhelper_notify_current()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00700">tcmi_taskhelper_restart()</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper" title="Compound structure that describes the method.">tcmi_method_wrapper</a> *wr, *old_w;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (!(wr = <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method.">tcmi_method_wrapper_new</a>(<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a0bcde113894e5e3d0e99f2ed5da7bcaf" title="method stored in the wrapper.">method</a>, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>, <a class="code" href="../../d5/d20/tcmi__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f" title="size of the checkpoint name in bytes (including trailing zero)">size</a>))) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create method wrapper&quot;</span>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data.">tcmi_queue_lock</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">/* flush everything in the queue. */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>)) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga6c8484afbdb969e18822e606b87df076" title="&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.">__tcmi_queue_remove_entry</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>, old_w, <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a14ae3e37137d142872600cfb0806ccca" title="node to link the wrapper in a queue.">node</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_method_wrapper_put</a>(old_w);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">/* append the requested method into the queue. */</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue - lock free version, assumes the lock is already held...">__tcmi_queue_add</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>, &amp;wr-&gt;<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a14ae3e37137d142872600cfb0806ccca" title="node to link the wrapper in a queue.">node</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data">tcmi_queue_unlock</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Flushed method queue and submitted new method in atomic=%d&quot;</span>, in_atomic());</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; exit0:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga2bf62635c09738ef0c1385ea258bec2f_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga2bf62635c09738ef0c1385ea258bec2f_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga2bf62635c09738ef0c1385ea258bec2f_cgraph" id="de/d2f/group__tcmi__task__class_ga2bf62635c09738ef0c1385ea258bec2f_cgraph">
<area shape="rect" id="node2" href="../../dc/d0c/group__tcmi__queue__class.html#ga40921ea3b077d55d70fb7b94ac666292" title="&lt;&lt;public&gt;&gt; Adds an element to the queue &#45; lock free version, assumes the lock is already held..." alt="" coords="219,5,349,32"/><area shape="rect" id="node3" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="195,56,373,83"/><area shape="rect" id="node4" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="197,107,371,133"/><area shape="rect" id="node5" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="218,157,350,184"/><area shape="rect" id="node6" href="../../dc/d0c/group__tcmi__queue__class.html#ga3ae4d7e0a4d5d21ec8b9fff138f5b0d4" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="224,208,344,235"/><area shape="rect" id="node7" href="../../dc/d0c/group__tcmi__queue__class.html#ga2e0e25eec1d5e4ea6e89dfde81ed43f4" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="217,259,351,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gafb7d2e6227e173c0bdc6fb99ff12bcbc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a>* tcmi_task_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> instance </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00275">275</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00339">tcmi_taskhelper_attach()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00391">tcmi_taskhelper_attach_exclusive()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00128">tcmi_taskhelper_find_by_pid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        atomic_inc(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a7d4eec507c5fee1002cfa190960e0950" title="Instance reference counter.">ref_count</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga01d55ac246026189ab497ec974bc75f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_get_execve_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00529">529</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00215">tcmi_mighooks_execve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;execve_count;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga68c818baf665eed96e9e0b277c599d36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum tcmi_task_type tcmi_task_get_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Get task type </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(tcmi_task_type)shadow or (tcmi_task_type)guest (or unresolved if not defined). </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00624">624</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00215">tcmi_mighooks_execve()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00339">tcmi_taskhelper_attach()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00391">tcmi_taskhelper_attach_exclusive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keyword">enum</span> tcmi_task_type res = unresolved_type;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a17965dc5cec704be6bdbd7264459f4f4" title="Return type of task.">get_type</a>)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        res = <span class="keyword">self</span>-&gt;ops-&gt;get_type();</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga00ff41ed284360c257ed41138ad58d99"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u_int tcmi_task_hash </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>local_pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int&#160;</td>
          <td class="paramname"><em>hashmask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">local_pid</td><td>- local pid of the task </td></tr>
    <tr><td class="paramname">hashmask</td><td>- hashmask limiting the maximum hash value. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00638">638</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00709">tcmi_migman_add_task()</a>, and <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00728">tcmi_migman_remove_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;{</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> (local_pid &amp; hashmask);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1483e4662ef7df7f603ea607b3291de3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_inc_execve_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00535">535</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00215">tcmi_mighooks_execve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keyword">self</span>-&gt;execve_count++;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4b3a924515ad4005bc713b135d75f6b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>local_pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/da2/group__tcmi__migman__class.html#d2/d8c/structtcmi__migman">tcmi_migman</a> *&#160;</td>
          <td class="paramname"><em>migman</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d8e/group__kkc__sock__class.html#da/d0d/structkkc__sock">kkc_sock</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>d_migproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#db/d2a/structtcmi__ctlfs__entry">tcmi_ctlfs_entry</a> *&#160;</td>
          <td class="paramname"><em>d_migman</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d5/d04/structtcmi__task__ops">tcmi_task_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the task. </p>
<p>Task initialization requires:</p>
<ul>
<li>setting PID's (remote PID is set to 0 it will be updated once the migration is finished)</li>
<li>getting an extra reference to the communication socket</li>
<li>getting an extra reference to the associated migration manager</li>
<li>initializing method and message queues</li>
<li>create transaction slot vector</li>
<li>creating directory in migproc using the local PID as its name</li>
<li>creating symlink to the migration manager directory</li>
<li>creating remote PID TCMI ctlfs file</li>
<li>default exit code is set to 0, this might change when the guest task terminates and sends back its exit code.</li>
<li>setting all execve context to NULL (file, argv, envp)</li>
<li>initialize the completion synchronization element, so that the task instantiator (usually the migration component) can be notified when the task has been picked up by the associated process. Also reset the picked_up flag. This is used for atomic check if the task might have been pickedup short after the timeout.</li>
<li>setting operations for the specific task</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- this task instance </td></tr>
    <tr><td class="paramname">local_pid</td><td>- local PID on CCN or PEN </td></tr>
    <tr><td class="paramname">migman</td><td>- migration manager that maintains this task (can be null) </td></tr>
    <tr><td class="paramname">*sock</td><td>- socket used for communication with guest task on PEN or shadow task on CCN resp. </td></tr>
    <tr><td class="paramname">*d_migproc</td><td>- directory where ctlfs entries of migrated processes reside </td></tr>
    <tr><td class="paramname">*d_migman</td><td>- TCMI ctlfs directory of the migration manager responsible for this task </td></tr>
    <tr><td class="paramname">*ops</td><td>- task specific operations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">114</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00253">kkc_sock_get()</a>, <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00271">kkc_sock_put()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d1/ddf/tcmi__ctlfs__dir_8c_source.html#l00049">tcmi_ctlfs_dir_new()</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00063">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../d8/d16/tcmi__ctlfs__symlink_8c_source.html#l00054">tcmi_ctlfs_symlink_new()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00709">tcmi_migman_add_task()</a>, <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00201">tcmi_migman_get()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00087">TCMI_PERMS_DIR</a>, <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00091">TCMI_PERMS_FILE_R</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00097">tcmi_queue_init()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00095">tcmi_slotvec_hnew()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00854">tcmi_task_show_remote_pid()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00079">TRANSACTION_ORDER</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00058">tcmi_guesttask_new()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00089">tcmi_shadowtask_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordtype">int</span> err = -EINVAL;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">self</span>-&gt;local_pid = local_pid;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">self</span>-&gt;migman = <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter.">tcmi_migman_get</a>(migman);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">self</span>-&gt;remote_pid = 0;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keyword">self</span>-&gt;sock = <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count.">kkc_sock_get</a>(sock);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">self</span>-&gt;execve_count = 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">self</span>-&gt;peer_lost = 0;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">self</span>-&gt;d_migman_root = d_migman;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">self</span>-&gt;f_remote_pid_rev = NULL;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer - for static allocation.">tcmi_queue_init</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer - for static allocation.">tcmi_queue_init</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (!ops) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Missing task operations!&quot;</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#afc4fb209349243d6000fc141bc4de260" title="Message transactions.">transactions</a> = <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$.">tcmi_slotvec_hnew</a>(<a class="code" href="../../de/d84/tcmi__task_8c.html#a7e2213bf1ab2d8a6210c3e58e363a2ae" title="TODO: Move this somewhere to arch.">TRANSACTION_ORDER</a>))) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create transactions slotvector!&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        err = -ENOMEM;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ab784101a73446f36684299f707224af2" title="TCMI ctlfs - migproc directory entry.">d_task</a> = </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <a class="code" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree.">tcmi_ctlfs_dir_new</a>(d_migproc, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#gaf838aee6d2933dc427bf9d47ac09c610" title="Preferred directory rights.">TCMI_PERMS_DIR</a>, <span class="stringliteral">&quot;%d&quot;</span>, local_pid))) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create migproc entry for %d&quot;</span>, local_pid);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a803eb69f063f8a9f898ce5b7124e5b99" title="TCMI ctlfs - symlink to the migration manager directory.">s_migman</a> = </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          <a class="code" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry.">tcmi_ctlfs_symlink_new</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ab784101a73446f36684299f707224af2" title="TCMI ctlfs - migproc directory entry.">d_task</a>, d_migman, <span class="stringliteral">&quot;migman&quot;</span>))) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create symlink to migration manager for %d&quot;</span>, local_pid);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a41d32d459815e14b75d57530f5cbf478" title="TCMI ctlfs - contains remote PID.">f_remote_pid</a> = </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;          <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ab784101a73446f36684299f707224af2" title="TCMI ctlfs - migproc directory entry.">d_task</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#ga84907a0ffd1393cf8b462e14c9b4140a" title="Preferred read file rights.">TCMI_PERMS_FILE_R</a>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                     <span class="keyword">self</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga17c54fbcb86f7f3158426742c3ff04ba" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports remote PID.">tcmi_task_show_remote_pid</a>, NULL,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                     <span class="keyword">sizeof</span>(pid_t), <span class="stringliteral">&quot;remote-pid&quot;</span>))) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create remote PID file entry for %d&quot;</span>, local_pid);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">goto</span> exit3;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> ( migman &amp;&amp; <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga936802da41af02ca6c660e18ade52dbb" title="&lt;&lt;public&gt;&gt; Registers tcmi task into the migration manager tasks slotvec">tcmi_migman_add_task</a>(migman, <span class="keyword">self</span>) ) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t add task to migman tasks struct: lpid %d&quot;</span>, local_pid);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">goto</span> exit4;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">self</span>-&gt;exit_code = 0;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    atomic_set(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a7d4eec507c5fee1002cfa190960e0950" title="Instance reference counter.">ref_count</a>, 1);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">self</span>-&gt;ckpt_pathname = NULL;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keyword">self</span>-&gt;argv = NULL;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">self</span>-&gt;envp = NULL;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    init_completion(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a6697ba8209fa90d595c5fa117bcaa4ae" title="Used for signalling when the task is picked up by the associated process.">picked_up</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">self</span>-&gt;picked_up_flag = 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">self</span>-&gt;ops = ops;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO4, <span class="stringliteral">&quot;Initialized TCMI task PID=%d, %p&quot;</span>, local_pid, <span class="keyword">self</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; exit4:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a41d32d459815e14b75d57530f5cbf478" title="TCMI ctlfs - contains remote PID.">f_remote_pid</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; exit3:</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a803eb69f063f8a9f898ce5b7124e5b99" title="TCMI ctlfs - symlink to the migration manager directory.">s_migman</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; exit2:</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ab784101a73446f36684299f707224af2" title="TCMI ctlfs - migproc directory entry.">d_task</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; exit1:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#afc4fb209349243d6000fc141bc4de260" title="Message transactions.">transactions</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; exit0:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a9f310760627b79375736e0f7f30b1192" title="communication socket.">sock</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga4b3a924515ad4005bc713b135d75f6b9_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga4b3a924515ad4005bc713b135d75f6b9_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga4b3a924515ad4005bc713b135d75f6b9_cgraph" id="de/d2f/group__tcmi__task__class_ga4b3a924515ad4005bc713b135d75f6b9_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#gabada9f8c5976a6aff07529239acdf727" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="199,21,302,48"/><area shape="rect" id="node3" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="889,493,991,520"/><area shape="rect" id="node9" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga1f51ad6279415ce522a3a932178702d6" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="186,72,315,99"/><area shape="rect" id="node17" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="871,275,1009,301"/><area shape="rect" id="node18" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="178,123,323,149"/><area shape="rect" id="node20" href="../../dd/d30/group__tcmi__ctlfs__symlink__class.html#ga952244eff8b5630626b305e1b6c68b97" title="&lt;&lt;public&gt;&gt; Symbolic link is created as a regular ctlfs entry." alt="" coords="399,173,559,200"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#ga936802da41af02ca6c660e18ade52dbb" title="&lt;&lt;public&gt;&gt; Registers tcmi task into the migration manager tasks slotvec" alt="" coords="171,595,331,621"/><area shape="rect" id="node32" href="../../d6/da2/group__tcmi__migman__class.html#gacd13117046ccc1fa12ac743b893fcfca" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference counter." alt="" coords="188,645,313,672"/><area shape="rect" id="node33" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="188,443,313,469"/><area shape="rect" id="node45" href="../../dc/d0c/group__tcmi__queue__class.html#ga10c0b527cad2d814db860b28847ca543" title="&lt;&lt;public&gt;&gt; Queue initializer &#45; for static allocation." alt="" coords="194,696,307,723"/><area shape="rect" id="node46" href="../../d0/db7/group__tcmi__slotvec__class.html#ga25d6b55df23662a9fc2c613762134a85" title="&lt;&lt;public&gt;&gt; This method creates a slot vector of the size $2^{order}$." alt="" coords="185,759,316,785"/><area shape="rect" id="node42" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="650,595,769,621"/><area shape="rect" id="node49" href="../../de/d2f/group__tcmi__task__class.html#ga17c54fbcb86f7f3158426742c3ff04ba" title="&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs &#45; reports remote PID." alt="" coords="157,835,344,861"/><area shape="rect" id="node4" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1110,493,1210,520"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1077,544,1243,571"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1075,443,1245,469"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1295,544,1455,571"/><area shape="rect" id="node8" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1293,443,1456,469"/><area shape="rect" id="node10" href="../../dc/def/group__tcmi__ctlfs__dir__class.html#ga571b8ac681691e3ceca2e833b89b6a21" title="&lt;&lt;public&gt;&gt; Creates a new directory entry in the tcmi_ctlfs tree." alt="" coords="411,72,546,99"/><area shape="rect" id="node11" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="640,123,779,149"/><area shape="rect" id="node16" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga71558bf14c4a13eed4e4b9ca240fd016" title="&lt;&lt;public&gt;&gt; Increments the number of links referencing this entry&#39;s inode." alt="" coords="640,57,779,98"/><area shape="rect" id="node12" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1083,224,1237,251"/><area shape="rect" id="node13" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="862,123,1018,149"/><area shape="rect" id="node14" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="869,5,1011,32"/><area shape="rect" id="node15" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="866,57,1014,98"/><area shape="rect" id="node19" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="392,123,565,149"/><area shape="rect" id="node21" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaab2e404bb2da373a66578541e2dc4ba9" title="&lt;&lt;public&gt;&gt; Instance accessor, Calls instance custom get method and increments the reference counter..." alt="" coords="871,224,1009,251"/><area shape="rect" id="node23" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="398,645,559,672"/><area shape="rect" id="node24" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4f973395848150fbebecf3cc292c80ba" title="&lt;&lt;public&gt;&gt; The index where the insertion takes place has to be a valid slot." alt="" coords="403,747,554,773"/><area shape="rect" id="node30" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)" alt="" coords="421,696,536,723"/><area shape="rect" id="node31" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="410,595,547,621"/><area shape="rect" id="node25" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="653,747,765,773"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#gaefe294678d9d6922b3af1e452a318fa1" title="&lt;&lt;public&gt;&gt; Inserts a new node into the slot." alt="" coords="652,696,767,723"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="887,696,993,723"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="884,747,996,773"/><area shape="rect" id="node29" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="880,645,1000,672"/><area shape="rect" id="node34" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="415,443,543,469"/><area shape="rect" id="node35" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="652,493,767,520"/><area shape="rect" id="node36" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="614,275,805,301"/><area shape="rect" id="node37" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="628,326,791,367"/><area shape="rect" id="node40" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="622,392,797,419"/><area shape="rect" id="node41" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="635,645,784,672"/><area shape="rect" id="node44" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="656,443,763,469"/><area shape="rect" id="node38" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1077,384,1243,411"/><area shape="rect" id="node39" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="854,333,1026,360"/><area shape="rect" id="node43" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="881,595,999,621"/><area shape="rect" id="node47" href="../../d0/db7/group__tcmi__slotvec__class.html#gaf11359c8cb20ddd7549296737eaf348d" title="&lt;&lt;public&gt;&gt; Creates new instance." alt="" coords="417,797,541,824"/><area shape="rect" id="node48" href="../../da/d0c/group__tcmi__slot__class.html#ga347147be22f868eacdae39a2846c0e3f" title="Initializes a slot." alt="" coords="660,797,759,824"/><area shape="rect" id="node50" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="403,848,554,875"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0232aeae006148ffa6c760e7f1979865"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pid_t tcmi_task_local_pid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Local PID accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>local PID of the task </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">411</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00307">kill_all_tasks()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00149">tcmi_guesttask_migrateback_p()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00358">tcmi_guesttask_post_fork()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00101">tcmi_guesttask_process_msg()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00307">tcmi_guesttask_process_p_emigrate_msg()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00533">tcmi_migcom_guest_fork()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00709">tcmi_migman_add_task()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00728">tcmi_migman_remove_task()</a>, <a class="el" href="../../d9/ded/tcmi__penmigman_8c_source.html#l00195">tcmi_penmigman_migrate_all_home()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00328">tcmi_shadowtask_migrateback_ppm_p()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00467">tcmi_shadowtask_process_ppm_p_migr_back_guestreq_procmsg()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00412">tcmi_shadowtask_verify_migration()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00906">tcmi_task_deliver_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00583">tcmi_task_emigrate_npm()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00487">tcmi_task_emigrate_ppm_p()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00535">tcmi_task_emigrate_ppm_v()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00607">tcmi_task_migrateback_npm()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00511">tcmi_task_migrateback_ppm_p()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00559">tcmi_task_migrateback_ppm_v()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00757">tcmi_task_prepare_execve()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">tcmi_task_put()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00875">tcmi_task_release_execve_context()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00439">tcmi_task_show_remote_pid_rev()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00542">tcmi_task_to_task_struct()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00339">tcmi_taskhelper_attach()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00391">tcmi_taskhelper_attach_exclusive()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00092">tcmi_taskhelper_enter_mig_mode()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00512">tcmi_taskhelper_sanity_check()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00224">tcmi_taskhelper_wait_for_pick_up_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;local_pid;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf8ffeed5183656312cb65d1bdf1b495c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t tcmi_task_migman_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Accessor of id of the migration manager associated with this task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>migration manager id </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00936">936</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00332">tcmi_migman_id()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;{</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;migman ? <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor.">tcmi_migman_id</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>) : -1;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gaf8ffeed5183656312cb65d1bdf1b495c_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gaf8ffeed5183656312cb65d1bdf1b495c_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gaf8ffeed5183656312cb65d1bdf1b495c_cgraph" id="de/d2f/group__tcmi__task__class_gaf8ffeed5183656312cb65d1bdf1b495c_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#ga5d70369a7eb27d7aac550ce6a2ca12e2" title="&lt;&lt;public&gt;&gt; Migration manager ID accessor." alt="" coords="203,5,320,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga90412716287ffdaf54ba3f6f1e374a38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int tcmi_task_migman_slot_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Accessor of vector slot index of the migration manager associated with this task. </p>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00944">944</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d8/d88/tcmi__migman_8h_source.html#l00259">tcmi_migman_slot_index()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/dbd/tcmi__man_8c_source.html#l00542">tcmi_man_fork()</a>.</p>
<div class="fragment"><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                                          {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;migman ? <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter">tcmi_migman_slot_index</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>) : -1;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga90412716287ffdaf54ba3f6f1e374a38_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga90412716287ffdaf54ba3f6f1e374a38_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga90412716287ffdaf54ba3f6f1e374a38_cgraph" id="de/d2f/group__tcmi__task__class_ga90412716287ffdaf54ba3f6f1e374a38_cgraph">
<area shape="rect" id="node2" href="../../d6/da2/group__tcmi__migman__class.html#gafca6221a82ff480ee067fcfa39745719" title="&lt;&lt;public&gt;&gt; Migration manager slot index getter" alt="" coords="214,12,381,39"/><area shape="rect" id="node3" href="../../da/d0c/group__tcmi__slot__class.html#ga821f6b686443bfc7fff52dd3b155de37" title="&lt;&lt;public&gt;&gt; Slot index accessor." alt="" coords="430,12,543,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad0cec9fea3d6f19f8d9c903a97fba347"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_migrateback_npm </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migrates a task back to CCN - NPM. </p>
<p>&lt;&lt;public&gt;&gt; Migrates a task back to CCN - NPM.</p>
<p>work is delegated to the task specific emigrate method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific migrate back method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00607">607</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00233">tcmi_task_ops::migrateback_npm</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00175">tcmi_method_wrapper_data()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00253">tcmi_penman_migrateback_npm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#db/d53/structtcmi__npm__params" title="Structure containing data required for performing of non-preemtive restart.">tcmi_npm_params</a>* npm_params = <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper.">tcmi_method_wrapper_data</a>(wr);  </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task - local pid %d, remote pid %d, migrating back&quot;</span>,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;         <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(self_tsk), <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(self_tsk));</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aecbd2cf968b18b92a414d5583f2a5ae6" title="Migrates a task back to CCN - NPM.">migrateback_npm</a>)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aecbd2cf968b18b92a414d5583f2a5ae6" title="Migrates a task back to CCN - NPM.">migrateback_npm</a>(self_tsk, npm_params);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gad0cec9fea3d6f19f8d9c903a97fba347_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gad0cec9fea3d6f19f8d9c903a97fba347_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gad0cec9fea3d6f19f8d9c903a97fba347_cgraph" id="de/d2f/group__tcmi__task__class_gad0cec9fea3d6f19f8d9c903a97fba347_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="243,5,424,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="265,56,402,83"/><area shape="rect" id="node4" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="258,107,409,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7e6ecd94a71cc78169ab8f5ab8f00f86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_migrateback_ppm_p </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migrates a task back to CCN - PPM w/ physical checkpoint. </p>
<p>&lt;&lt;public&gt;&gt; Migrates a task back to CCN - PPM w/ physical checkpoint.</p>
<p>All the work is delegated to the task specific emigrate method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific migrate back method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00511">511</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00225">tcmi_task_ops::migrateback_ppm_p</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00409">tcmi_migcom_migrate_home_ppm_p()</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task - local pid %d, remote pid %d, migrating back&quot;</span>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;         <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(self_tsk), <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(self_tsk));</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aee196b92276b8649b2a4afe20f69d1c4" title="Migrates a task back to CCN - PPM w/ physical checkpoint.">migrateback_ppm_p</a>)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aee196b92276b8649b2a4afe20f69d1c4" title="Migrates a task back to CCN - PPM w/ physical checkpoint.">migrateback_ppm_p</a>(self_tsk);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga7e6ecd94a71cc78169ab8f5ab8f00f86_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga7e6ecd94a71cc78169ab8f5ab8f00f86_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga7e6ecd94a71cc78169ab8f5ab8f00f86_cgraph" id="de/d2f/group__tcmi__task__class_ga7e6ecd94a71cc78169ab8f5ab8f00f86_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="218,5,355,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="211,56,362,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabb2e88d3b8f3809950377472bcc4dea9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_migrateback_ppm_v </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Migrates a task back to CCN - PPM w/ virtual checkpoint. </p>
<p>&lt;&lt;public&gt;&gt; Migrates a task back to CCN - PPM w/ virtual checkpoint.</p>
<p>All the work is delegated to the task specific emigrate method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific migrate back method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00559">559</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00229">tcmi_task_ops::migrateback_ppm_v</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;{</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task - local pid %d, remote pid %d, migrating back&quot;</span>,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(self_tsk), <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(self_tsk));</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a4cd2f3519b68c8992aa2f99d740a6674" title="Migrates a task back to CCN - PPM w/ virtual checkpoint.">migrateback_ppm_v</a>)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a4cd2f3519b68c8992aa2f99d740a6674" title="Migrates a task back to CCN - PPM w/ virtual checkpoint.">migrateback_ppm_v</a>(self_tsk);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gabb2e88d3b8f3809950377472bcc4dea9_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gabb2e88d3b8f3809950377472bcc4dea9_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gabb2e88d3b8f3809950377472bcc4dea9_cgraph" id="de/d2f/group__tcmi__task__class_gabb2e88d3b8f3809950377472bcc4dea9_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="218,5,355,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="211,56,362,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad1f29bebb7bb9f2174559555d97d8f29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_pick_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Signals, the tcmi task has been pickedup by the associated process.n </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when successfully completed </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00496">496</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00512">tcmi_taskhelper_sanity_check()</a>.</p>
<div class="fragment"><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;{</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    complete(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a6697ba8209fa90d595c5fa117bcaa4ae" title="Used for signalling when the task is picked up by the associated process.">picked_up</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">self</span>-&gt;picked_up_flag = 1;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaccbe464cf89735f8da8ff88fc1a202a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_picked_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Checks whether the task has been picked up. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true when it has already been picked up </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00509">509</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00512">tcmi_taskhelper_sanity_check()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00224">tcmi_taskhelper_wait_for_pick_up_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;picked_up_flag &gt; 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga24a9d8c612da1a4484b1b3a28a181c15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_prepare_execve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>envp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Prepares execution of a file given the arrays of arguments and environment. </p>
<p>Allocates memory for all execve parameters and copies the parameters into the instance. The main purpose of this method is setup everything for execve. After using this method, the caller is able to release all memory resources and issue <a class="el" href="../../de/d2f/group__tcmi__task__class.html#gab1a418ac9d8b708dcee524671db07518" title="&lt;&lt;public&gt;&gt; Executes the file that has been previously setup for execution.">tcmi_task_execve()</a>.</p>
<p>To reduce the overhead when releasing the argv/envp arrays of the task, the layout of each array is as follows. All strings are put at the end of the array.</p>
<pre class="fragment">+-------------+
| pointer  0  |--+
+-------------+  |
| pointer  1  |--------------------+
+-------------+  |                 |
.             .  |                 |
.             .  |                 |
+-------------+  |                 |
| pointer  n  |---------------------------------------------+
+-------------+  |                 |                        |
| NULL        |  |                 |                        |
+-------------+--V-----------------V------------------------V----------+
| "string 0 goes up here\0", "string 1 here\0", ..., "string n here\0" |
+----------------------------------------------------------------------+</pre><p> This code can be used to printout the argv/envp arrays for testing. </p>
<pre class="fragment">   int i;
   mdbg(INFO3, "Environ test");
   for(i = 0; self-&gt;argv[i] != NULL; i++)
    mdbg(INFO3, "ARGV[%d]='%s'", i, self-&gt;argv[i]);

   for(i = 0; self-&gt;envp[i] != NULL; i++)
    mdbg(INFO3, "ENVP[%d]='%s'", i, self-&gt;envp[i]); </pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*file</td><td></td></tr>
    <tr><td class="paramname">**argv</td><td>- arguments list terminated by NULL </td></tr>
    <tr><td class="paramname">**envp</td><td>- environment strings terminated by NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, otherwise -ENOEXEC </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00757">757</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00668">tcmi_task_copy_strings()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00875">tcmi_task_release_execve_context()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00620">tcmi_taskhelper_checkpoint()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00700">tcmi_taskhelper_restart()</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;{</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">/* release the old context first. */</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca...">tcmi_task_release_execve_context</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a> = (<span class="keywordtype">char</span>*)kmalloc(strlen(file) + 1, GFP_ATOMIC))) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t allocate memory for execve file &#39;%s&#39;&quot;</span>, file);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    strcpy(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a>, file);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d84/tcmi__task_8c.html#ab73603e4adaf2a1bb6b7cf6a01a1c2f3" title="&lt;&lt;private&gt;&gt; Class method - copies an array of strings terminated by NULL string (standard argv/envp f...">tcmi_task_copy_strings</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>) &lt; 0) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed copying ARGV array for file &#39;%s&#39;&quot;</span>, file);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">goto</span> exit1;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d84/tcmi__task_8c.html#ab73603e4adaf2a1bb6b7cf6a01a1c2f3" title="&lt;&lt;private&gt;&gt; Class method - copies an array of strings terminated by NULL string (standard argv/envp f...">tcmi_task_copy_strings</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a59a4f4a4ace54362a3caed6f4cc28ab3" title="environment (NULL terminated array of strings)">envp</a>, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#aeebc47a01a74a156c1843bcc37b2bd02">envp</a>) &lt; 0) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Failed copying ENVP array for file &#39;%s&#39;&quot;</span>, file);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">goto</span> exit2;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Allocated TCMI task execve context(%s, %p, %p) PID=%d, %p&quot;</span>, </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;         self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a>, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a59a4f4a4ace54362a3caed6f4cc28ab3" title="environment (NULL terminated array of strings)">envp</a>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>), <span class="keyword">self</span>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">/* error handling */</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; exit2:</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    kfree(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keyword">self</span>-&gt;argv = NULL;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; exit1:</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    kfree(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a>);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keyword">self</span>-&gt;ckpt_pathname = NULL;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; exit0:</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">return</span> -ENOEXEC;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga24a9d8c612da1a4484b1b3a28a181c15_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga24a9d8c612da1a4484b1b3a28a181c15_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga24a9d8c612da1a4484b1b3a28a181c15_cgraph" id="de/d2f/group__tcmi__task__class_ga24a9d8c612da1a4484b1b3a28a181c15_cgraph">
<area shape="rect" id="node2" href="../../de/d84/tcmi__task_8c.html#ab73603e4adaf2a1bb6b7cf6a01a1c2f3" title="&lt;&lt;private&gt;&gt; Class method &#45; copies an array of strings terminated by NULL string (standard argv/envp f..." alt="" coords="237,5,397,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="454,85,591,112"/><area shape="rect" id="node4" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca..." alt="" coords="230,107,405,149"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadcb547384aea0db7f2be54ae48cdc2d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_process_methods </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Processes all methods in the queue. </p>
<p>This method is used as a method pump, it keeps on unwrapping methods from the queue and executing them until one of them returns a results different from TCMI_TASK_KEEP_PUMPING. This result is communicated to the component that controls this particular task (usually the migration component). Every iteration, the signals are also handled. This might also influence the method pump and terminate it.</p>
<p>The method wrapper is released once the method is executed only if there was no execve problem. To explain this: some methods perform an execve operation - in which case, the execution context changes immediately. Therefore, these methods have to discard the method wrapper on their own. Should the execve fail, they have already discarded the wrapper and thus have on control over it. In that case, the returned error is TCMI_TASK_EXECVE_FAILED_KILL_ME and we have to prevent releasing this method wrapper.</p>
<p>The specific task method that had been executed had a chance to get an extra reference and resubmit the method wrapper into the method queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the last executed method </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00348">348</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00062">tcmi_method_wrapper::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00158">tcmi_method_wrapper_call()</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00136">tcmi_method_wrapper_put()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00266">tcmi_queue_remove_entry</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00254">TCMI_TASK_EXECVE_FAILED_KILL_ME</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00282">tcmi_taskhelper_do_signals()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00625">tcmi_migcom_mig_mode_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper" title="Compound structure that describes the method.">tcmi_method_wrapper</a> *w;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">while</span> ((!<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>)) &amp;&amp; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;           (res == <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>)) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">/* handle any pending signals */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> ((res = <a class="code" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga06e7d78c524d9f07c54eb78a41bad530" title="&lt;&lt;public&gt;&gt; Checks if there are any pending signals and handles them.">tcmi_taskhelper_do_signals</a>(<span class="keyword">self</span>)) != <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">/* get next method to proces */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gad1083b0f8850c7e9ff98175807920929" title="&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.">tcmi_queue_remove_entry</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>, w, <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a14ae3e37137d142872600cfb0806ccca" title="node to link the wrapper in a queue.">node</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">/* unwrap &amp; destroy the method wrapper excluding the execve failure */</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> ((res = <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga3281ef9f5751a5245bb827c4ffb0e674" title="&lt;&lt;public&gt;&gt; Calls the method that resides in the wrapper.">tcmi_method_wrapper_call</a>(w, <span class="keyword">self</span>)) != </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869ba0d820f34432c988875982f560e54da2b">TCMI_TASK_EXECVE_FAILED_KILL_ME</a>) {          </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Execve have NOT failed.&quot;</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_method_wrapper_put</a>(w);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Execve have failed.&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Process methods finished with res %d&quot;</span>, res);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gadcb547384aea0db7f2be54ae48cdc2d9_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gadcb547384aea0db7f2be54ae48cdc2d9_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gadcb547384aea0db7f2be54ae48cdc2d9_cgraph" id="de/d2f/group__tcmi__task__class_gadcb547384aea0db7f2be54ae48cdc2d9_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga3281ef9f5751a5245bb827c4ffb0e674" title="&lt;&lt;public&gt;&gt; Calls the method that resides in the wrapper." alt="" coords="243,5,419,32"/><area shape="rect" id="node3" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="243,56,418,83"/><area shape="rect" id="node4" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="265,107,397,133"/><area shape="rect" id="node5" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga06e7d78c524d9f07c54eb78a41bad530" title="&lt;&lt;public&gt;&gt; Checks if there are any pending signals and handles them." alt="" coords="263,158,398,199"/><area shape="rect" id="node6" href="../../de/d2f/group__tcmi__task__class.html#ga1d63cea88da4ef266e6c191720c2f2fb" title="&lt;&lt;public&gt;&gt; Processes a specified signal." alt="" coords="467,165,608,192"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga491523e65c3fb2f665013a2f15899cb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_process_msg </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Processes message in the message queue. </p>
<p>&lt;&lt;public&gt;&gt; Processes message in the message queue.</p>
<ul>
<li>Waits for the message to arrive or a signal to wake us up.</li>
<li>Upon message arrival, the message is processed (delegated to the task specific method if any) and discarded.</li>
<li>Eventually, the method resubmits itself into the method queue reusing the method wrapper iff the result of the message processing is TCMI_TASK_KEEP_PUMPING.</li>
</ul>
<p>Optionally, this method can take an integer argument (argument to wrapper). This argument specifies, whether we should be waiting for new messages, if there is no message, or not. By default, this method waits for messages and in the end it resubmits itself. If wait for messages is false, and there are no messages this method returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the last executed method </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00400">400</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00164">tcmi_task::msg_queue</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00141">tcmi_task::node</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00215">tcmi_task::ops</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00221">tcmi_task_ops::process_msg</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00175">tcmi_method_wrapper_data()</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00122">tcmi_method_wrapper_get()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00266">tcmi_queue_remove_entry</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00297">tcmi_queue_wait_on_empty_interruptible()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00906">tcmi_task_deliver_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *m; <span class="comment">/* message that is being processed */</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">int</span> wait_for_messages = 1;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper.">tcmi_method_wrapper_data</a>(wr) ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        wait_for_messages = *(<span class="keywordtype">int</span>*)<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper.">tcmi_method_wrapper_data</a>(wr);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// No msgs and we do not want to wait?</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> ( !wait_for_messages &amp;&amp; <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(&amp;self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>) )</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty.">tcmi_queue_wait_on_empty_interruptible</a>(&amp;self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>)) &lt; 0) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Signal arrived %d&quot;</span>, err);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gad1083b0f8850c7e9ff98175807920929" title="&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.">tcmi_queue_remove_entry</a>(&amp;self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>, m, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#acfa8de59bfc98aedf6b8f76b59f9222c" title="node for storage in the migration slot of the migration manager">node</a>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">/* process the message that has arrived */</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (m) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Processing message..%x&quot;</span>, <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> (self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ae5dd3e79db9d2c7839f66643a662c3cc" title="Processes a message that has arrived on the message queue.">process_msg</a>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            res = self_tsk-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ae5dd3e79db9d2c7839f66643a662c3cc" title="Processes a message that has arrived on the message queue.">process_msg</a>(self_tsk, m);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="comment">/* discard the mesage*/</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(m);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; exit0:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">/* resubmit the process_msg method. */</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">/* This is to have an extra reference for resubmitting */</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaf0a8913b9f40f66641ad7076e023dd58" title="&lt;&lt;public&gt;&gt; Method wrapper accessor.">tcmi_method_wrapper_get</a>(wr);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">/* resubmit the method. */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        tcmi_task_add_wrapper(self_tsk, wr);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga491523e65c3fb2f665013a2f15899cb8_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga491523e65c3fb2f665013a2f15899cb8_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga491523e65c3fb2f665013a2f15899cb8_cgraph" id="de/d2f/group__tcmi__task__class_ga491523e65c3fb2f665013a2f15899cb8_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="219,5,400,32"/><area shape="rect" id="node3" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaf0a8913b9f40f66641ad7076e023dd58" title="&lt;&lt;public&gt;&gt; Method wrapper accessor." alt="" coords="222,56,397,83"/><area shape="rect" id="node4" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="261,107,357,133"/><area shape="rect" id="node5" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="257,157,361,184"/><area shape="rect" id="node17" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="454,237,586,264"/><area shape="rect" id="node18" href="../../dc/d0c/group__tcmi__queue__class.html#gae749f14f4593f9b0b48cf31fc43eaa17" title="&lt;&lt;public&gt;&gt; Puts the calling process to sleep as long as the queue is empty." alt="" coords="239,259,379,301"/><area shape="rect" id="node6" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="449,157,591,184"/><area shape="rect" id="node7" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="647,81,772,108"/><area shape="rect" id="node8" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="642,132,777,159"/><area shape="rect" id="node9" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="648,183,771,209"/><area shape="rect" id="node16" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="640,233,779,260"/><area shape="rect" id="node10" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="827,132,965,159"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="843,183,949,209"/><area shape="rect" id="node15" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="836,233,956,260"/><area shape="rect" id="node11" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1035,107,1154,133"/><area shape="rect" id="node12" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1014,157,1175,184"/><area shape="rect" id="node13" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1224,157,1336,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9317afe43a9b9343c70eaf42409864b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_task_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Releases the instance. </p>
<ul>
<li>calls custom free method for a specific task</li>
<li>destroys all ctlfs files, directories, symlinks</li>
<li>destroys the transaction slot vector</li>
<li>empties the message queue</li>
<li>empties the method queue</li>
<li>releases the execve context (execve filename, argv, envp)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">211</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../df/dfa/kkc__sock_8h_source.html#l00271">kkc_sock_put()</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00062">tcmi_method_wrapper::node</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../df/d2f/tcmi__ctlfs__entry_8h_source.html#l00212">tcmi_ctlfs_entry_put()</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00155">tcmi_ctlfs_file_unregister()</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00136">tcmi_method_wrapper_put()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00189">tcmi_migman_put()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00728">tcmi_migman_remove_task()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00231">tcmi_msg_id()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00193">tcmi_queue_empty()</a>, <a class="el" href="../../d8/d86/tcmi__queue_8h_source.html#l00266">tcmi_queue_remove_entry</a>, <a class="el" href="../../d8/dc3/tcmi__slotvec_8h_source.html#l00215">tcmi_slotvec_empty()</a>, <a class="el" href="../../d3/dc2/tcmi__slotvec_8c_source.html#l00117">tcmi_slotvec_put()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00875">tcmi_task_release_execve_context()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00533">tcmi_migcom_guest_fork()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00625">tcmi_migcom_mig_mode_handler()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>, <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00604">tcmi_migman_deliver_msg()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00181">tcmi_taskhelper_notify_by_pid()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00224">tcmi_taskhelper_wait_for_pick_up_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">/* Used for destruction of messages and methods. */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *m;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper" title="Compound structure that describes the method.">tcmi_method_wrapper</a> *w;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span> &amp;&amp; atomic_dec_and_test(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a7d4eec507c5fee1002cfa190960e0950" title="Instance reference counter.">ref_count</a>)) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Destroying TCMI task PID=%d, %p&quot;</span>, </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;             <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>), <span class="keyword">self</span>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">/* instance specific free method */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a69041edc7f9b15b1c8dce13a1b291f95" title="Operations specific to shadow/guest tasks resp.">ops</a>-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a52a45a5a3cbb011a4fc26c7637584ebc" title="Releases the instance specific resources.">free</a>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keyword">self</span>-&gt;ops-&gt;free(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">kkc_sock_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a9f310760627b79375736e0f7f30b1192" title="communication socket.">sock</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">/* destroy all ctlfs entries */</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races...">tcmi_ctlfs_file_unregister</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a41d32d459815e14b75d57530f5cbf478" title="TCMI ctlfs - contains remote PID.">f_remote_pid</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a41d32d459815e14b75d57530f5cbf478" title="TCMI ctlfs - contains remote PID.">f_remote_pid</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a803eb69f063f8a9f898ce5b7124e5b99" title="TCMI ctlfs - symlink to the migration manager directory.">s_migman</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ab784101a73446f36684299f707224af2" title="TCMI ctlfs - migproc directory entry.">d_task</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d...">tcmi_ctlfs_entry_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aaabc21f2174b2b71cacb0f1ca4489adc">f_remote_pid_rev</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness">tcmi_slotvec_empty</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#afc4fb209349243d6000fc141bc4de260" title="Message transactions.">transactions</a>))</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(WARN2, <span class="stringliteral">&quot;Task %d, destroying non-empty transactions slotvector!!&quot;</span>,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                 self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a09013a5bce7e48887d48902700ef48a0" title="local PID on PEN, CCN resp.">local_pid</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_slotvec_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#afc4fb209349243d6000fc141bc4de260" title="Message transactions.">transactions</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">/* destroy remaining messages in the queue. */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>)) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gad1083b0f8850c7e9ff98175807920929" title="&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.">tcmi_queue_remove_entry</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#af9b79c52550bf4bfc6b4de90e58b7462" title="Message queue for transaction-less messages.">msg_queue</a>, m, <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a14ae3e37137d142872600cfb0806ccca" title="node to link the wrapper in a queue.">node</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task %d, destroying message %x&quot;</span>,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                 <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>), <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor.">tcmi_msg_id</a>(m));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>(m);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="comment">/* destroy remaining methods in the queue. */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f">tcmi_queue_empty</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>)) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="../../dc/d0c/group__tcmi__queue__class.html#gad1083b0f8850c7e9ff98175807920929" title="&lt;&lt;public&gt;&gt; Removes an entry from the head of the queue.">tcmi_queue_remove_entry</a>(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a0715f37fdf5a4d68fea317555e761a74" title="queue of methods to be executed.">method_queue</a>, w, <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a14ae3e37137d142872600cfb0806ccca" title="node to link the wrapper in a queue.">node</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Task %d, destroying method wrapper %p&quot;</span>,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                 <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>), w);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed...">tcmi_method_wrapper_put</a>(w);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Releasing execve context&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca...">tcmi_task_release_execve_context</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Done..&quot;</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f" title="&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec">tcmi_migman_remove_task</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>, <span class="keyword">self</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(INFO3, <span class="stringliteral">&quot;Removed from migman tasks done&quot;</span>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:">tcmi_migman_put</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a2efb62586c1f4f7e0e5438fd20ec1008" title="Reference to a migration manager to which this task belongs to.">migman</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        kfree(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga9317afe43a9b9343c70eaf42409864b7_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga9317afe43a9b9343c70eaf42409864b7_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga9317afe43a9b9343c70eaf42409864b7_cgraph" id="de/d2f/group__tcmi__task__class_ga9317afe43a9b9343c70eaf42409864b7_cgraph">
<area shape="rect" id="node2" href="../../d6/d8e/group__kkc__sock__class.html#ga9f980056fbf3436596c4cfdf3913e85c" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="873,321,975,348"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga6d6cbcd957efaaa590b335ac3150bb30" title="&lt;&lt;public&gt;&gt; Calls the instance custom put method(if any) and Decrements the reference counter of the d..." alt="" coords="855,93,993,120"/><area shape="rect" id="node10" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga665210941a04fda118949874767ced93" title="&lt;&lt;public&gt;&gt; This method unregisters the file uses the semaphore lock as protection from races..." alt="" coords="1061,195,1227,221"/><area shape="rect" id="node15" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gad93018cc0894a434a94703eed0f869f9" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="161,720,335,747"/><area shape="rect" id="node16" href="../../d6/da2/group__tcmi__migman__class.html#gab536c262c24d8fc76cdbdfa8d6d65b81" title="&lt;&lt;public&gt;&gt; The manager is shutdown exactly in this order:" alt="" coords="185,312,311,339"/><area shape="rect" id="node29" href="../../d6/da2/group__tcmi__migman__class.html#ga73763ae6fc849730aa1346f16208908f" title="&lt;&lt;public&gt;&gt; Removes tcmi task from the migration manager tasks slotvec" alt="" coords="158,552,338,579"/><area shape="rect" id="node38" href="../../d6/dc2/group__tcmi__msg__class.html#ga73489766817f528da25369a3f4c713a1" title="&lt;&lt;public&gt;&gt; Message ID accessor." alt="" coords="200,771,296,797"/><area shape="rect" id="node39" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="196,501,300,528"/><area shape="rect" id="node44" href="../../dc/d0c/group__tcmi__queue__class.html#ga2b0f1376bcd561196e77599cbc23090f" title="tcmi_queue_empty" alt="" coords="182,821,314,848"/><area shape="rect" id="node45" href="../../d0/db7/group__tcmi__slotvec__class.html#ga03946dfe98a88a916f30eaf3f2eed1be" title="&lt;&lt;public&gt;&gt; Tester method for slotvec emptyness" alt="" coords="179,872,317,899"/><area shape="rect" id="node26" href="../../d0/db7/group__tcmi__slotvec__class.html#ga2376bcc84e5bbd48a8f92400f5ad5f25" title="&lt;&lt;public&gt;&gt; Decrements the reference counter, when the count reaches 0, the instance is destroyed..." alt="" coords="634,413,753,440"/><area shape="rect" id="node37" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="399,755,537,781"/><area shape="rect" id="node46" href="../../de/d2f/group__tcmi__task__class.html#gad41453e0aefb9dd79c2d3b65d8b9b16c" title="&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have alloca..." alt="" coords="161,603,335,645"/><area shape="rect" id="node3" href="../../d5/ddf/group__kkc__arch__class.html#ga06049c969ae0324d0607f10db99af65c" title="&lt;&lt;public&gt;&gt; Decrements the reference counter on the module owning the architecture." alt="" coords="1094,329,1194,356"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#ga00d8b033d3e1118303e7b4c54c6aafe6" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1061,380,1227,407"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#gac8e64f52015e75cb76a34c4b7e9ef176" title="&lt;&lt;public&gt;&gt; Socket name accessor." alt="" coords="1059,279,1229,305"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gadf1b231c727891d5ac2d32646d574931" title="&lt;&lt;public&gt;&gt; Peer socket name accessor." alt="" coords="1287,380,1447,407"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga3cae649f56c8f5fa18f755f6c7d53597" title="&lt;&lt;public&gt;&gt; Local socket name accessor." alt="" coords="1285,296,1448,323"/><area shape="rect" id="node9" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="1067,93,1221,120"/><area shape="rect" id="node11" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga5323f5b0f103dd3c42defc6c4494e641" title="&lt;&lt;public&gt;&gt; Locks this file instance." alt="" coords="1301,245,1433,272"/><area shape="rect" id="node12" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaddf76bb53a90657e6773b485e0a89248" title="This method is used when object associated with the file wants to unregister with the file..." alt="" coords="1277,144,1456,171"/><area shape="rect" id="node14" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gad49b6ab401eeac4dab0ecd314796d569" title="&lt;&lt;public&gt;&gt; Unlocks this file instance." alt="" coords="1293,195,1440,221"/><area shape="rect" id="node13" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#ga8c97fc25ab3bd060017a3539edf7d6f0" title="&lt;&lt;public&gt;&gt; Sets the unregistered flag of the file." alt="" coords="1504,137,1669,178"/><area shape="rect" id="node17" href="../../d6/da2/group__tcmi__migman__class.html#ga94df994d6d2ad3dd9aa6543ee67bf934" title="&lt;&lt;private&gt;&gt; Free method is has two purposes:when the last reference is released, it will free all ins..." alt="" coords="404,287,532,313"/><area shape="rect" id="node18" href="../../d9/dfc/group__tcmi__comm__class.html#ga89dc5a63295a65407cc93606c79ca314" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="636,312,751,339"/><area shape="rect" id="node19" href="../../d6/da2/group__tcmi__migman__class.html#ga39c491f49b4e5b3cc533c816d27135a3" title="&lt;&lt;private&gt;&gt; Destroys all TCMI ctlfs directories" alt="" coords="598,93,789,120"/><area shape="rect" id="node20" href="../../d6/da2/group__tcmi__migman__class.html#ga5b56a5213e9dbcba9973b9530692fd27" title="&lt;&lt;private&gt;&gt; Unregisters and releases all control files." alt="" coords="612,145,775,186"/><area shape="rect" id="node22" href="../../d6/da2/group__tcmi__migman__class.html#gae4ad418d705edeca23e38eb383343978" title="&lt;&lt;private&gt;&gt; The TCMI manager listening thread is to be terminated by forcing a signal and waiting for..." alt="" coords="606,211,781,237"/><area shape="rect" id="node23" href="../../d6/da2/group__tcmi__migman__class.html#ga71f49cd0661e81a859daab82ae7676de" title="Removes migman from a list of migration managers of the associated manager." alt="" coords="619,464,768,491"/><area shape="rect" id="node28" href="../../d3/d7e/group__tcmi__sock__class.html#gaa64951d80cedfaf76bb82ee811255d69" title="&lt;&lt;public&gt;&gt; Decrements the reference counter and if it reaches 0, the instance." alt="" coords="640,261,747,288"/><area shape="rect" id="node21" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gaead344003750e43cb4a0326876a191bc" title="&lt;&lt;public&gt;&gt; This method unregisters the file and allows the user to specify the preferred way of unreg..." alt="" coords="838,144,1010,171"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="871,591,977,617"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="864,515,984,541"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1085,525,1203,552"/><area shape="rect" id="node30" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="632,667,755,693"/><area shape="rect" id="node34" href="../../d0/db7/group__tcmi__slotvec__class.html#ga876670f605631a5deb930412dae02b28" title="&lt;&lt;public&gt;&gt; Accesses a slot at a given index." alt="" coords="412,704,524,731"/><area shape="rect" id="node35" href="../../d0/db7/group__tcmi__slotvec__class.html#ga463d8dd03bd30b24c3ebfed5a0239d8a" title="&lt;&lt;public&gt;&gt; Hashmask accessor." alt="" coords="387,603,549,629"/><area shape="rect" id="node36" href="../../de/d2f/group__tcmi__task__class.html#ga00ff41ed284360c257ed41138ad58d99" title="&lt;&lt;public&gt;&gt; Computes the hash value of the task (to be used in tasks slotvec of migman)" alt="" coords="411,653,525,680"/><area shape="rect" id="node31" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="855,653,993,680"/><area shape="rect" id="node32" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1063,653,1225,680"/><area shape="rect" id="node33" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1311,653,1423,680"/><area shape="rect" id="node40" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="397,501,539,528"/><area shape="rect" id="node41" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="631,565,756,592"/><area shape="rect" id="node42" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="626,616,761,643"/><area shape="rect" id="node43" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="624,515,763,541"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad41453e0aefb9dd79c2d3b65d8b9b16c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_release_execve_context </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Releases the execve context (execve file, argv, envp) Since the argv/envp have allocated a linear chunks of memory (including all strings) we need to issue only 1 kfree/vfree for each and don't need to scan the array releasing each string separate. </p>
<p>Releasing is atomic as this method is also used when preparing a new execve context (<a class="el" href="../../de/d2f/group__tcmi__task__class.html#ga24a9d8c612da1a4484b1b3a28a181c15" title="&lt;&lt;public&gt;&gt; Prepares execution of a file given the arrays of arguments and environment.">tcmi_task_prepare_execve()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00875">875</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00757">tcmi_task_prepare_execve()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00211">tcmi_task_put()</a>.</p>
<div class="fragment"><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;{</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordtype">char</span> *tmp1, **tmp2;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO4, <span class="stringliteral">&quot;Destroying TCMI task execve context(%p, %p, %p) PID=%d, %p&quot;</span>, </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aa34a652a7d6449eb0009fb5671c273a9" title="contains the pathname of the latest checkpoint file">ckpt_pathname</a>, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a00d2cb20c8d850399c7d22aeb55bca60" title="command line arguments for the checkpoint file (NULL terminated array of strings)">argv</a>, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a59a4f4a4ace54362a3caed6f4cc28ab3" title="environment (NULL terminated array of strings)">envp</a>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>), <span class="keyword">self</span>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    tmp1 = <span class="keyword">self</span>-&gt;ckpt_pathname;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keyword">self</span>-&gt;ckpt_pathname = NULL;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    kfree(tmp1);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    tmp2 = <span class="keyword">self</span>-&gt;argv;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keyword">self</span>-&gt;argv = NULL;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    kfree(tmp2);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    tmp2 = <span class="keyword">self</span>-&gt;envp;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keyword">self</span>-&gt;envp = NULL;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    kfree(tmp2);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gad41453e0aefb9dd79c2d3b65d8b9b16c_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gad41453e0aefb9dd79c2d3b65d8b9b16c_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gad41453e0aefb9dd79c2d3b65d8b9b16c_cgraph" id="de/d2f/group__tcmi__task__class_gad41453e0aefb9dd79c2d3b65d8b9b16c_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="230,12,367,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2f054ae4772c0921004eebdb48d39dcf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pid_t tcmi_task_remote_pid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Remote PID accessor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remote PID of the task </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">422</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00237">tcmi_guesttask_exit()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00149">tcmi_guesttask_migrateback_p()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00358">tcmi_guesttask_post_fork()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00392">tcmi_guesttask_post_fork_set_tid()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00307">tcmi_guesttask_process_p_emigrate_msg()</a>, <a class="el" href="../../df/d9d/tcmi__rpcresp__procmsg_8c_source.html#l00098">tcmi_rpcresp_procmsg_create()</a>, <a class="el" href="../../df/d9d/tcmi__rpcresp__procmsg_8c_source.html#l00157">tcmi_rpcresp_procmsg_get_response()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00384">tcmi_shadowtask_do_signal()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00328">tcmi_shadowtask_migrateback_ppm_p()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00467">tcmi_shadowtask_process_ppm_p_migr_back_guestreq_procmsg()</a>, <a class="el" href="../../d7/dc5/tcmi__syscallhooks__pidman_8c_source.html#l00092">tcmi_syscall_hooks_sys_getpid()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00583">tcmi_task_emigrate_npm()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00487">tcmi_task_emigrate_ppm_p()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00535">tcmi_task_emigrate_ppm_v()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00607">tcmi_task_migrateback_npm()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00511">tcmi_task_migrateback_ppm_p()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00559">tcmi_task_migrateback_ppm_v()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00854">tcmi_task_show_remote_pid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;remote_pid;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga6f509d7a61c069c641e99fe32a57ef75"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_send_and_receive_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> **&#160;</td>
          <td class="paramname"><em>resp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Sends a specified message and waits for a response. </p>
<p>All work is delegate to tcmi_msg.c::tcmi_msg_send_and_receive() method</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*req</td><td>- request message to be sent. </td></tr>
    <tr><td class="paramname">**resp</td><td>- output parameter, stores the response message or NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when the message has been sent. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00567">567</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00178">tcmi_msg_send_and_receive()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d9d/tcmi__rpcresp__procmsg_8c_source.html#l00157">tcmi_rpcresp_procmsg_get_response()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gadcb05f36b8afb930d1a825ae12ff7d3c" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection and waits for the response.">tcmi_msg_send_and_receive</a>(req, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a9f310760627b79375736e0f7f30b1192" title="communication socket.">sock</a>, resp);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga6f509d7a61c069c641e99fe32a57ef75_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga6f509d7a61c069c641e99fe32a57ef75_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga6f509d7a61c069c641e99fe32a57ef75_cgraph" id="de/d2f/group__tcmi__task__class_ga6f509d7a61c069c641e99fe32a57ef75_cgraph">
<area shape="rect" id="node2" href="../../d6/dc2/group__tcmi__msg__class.html#gadcb05f36b8afb930d1a825ae12ff7d3c" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection and waits for the response." alt="" coords="197,333,387,360"/><area shape="rect" id="node3" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="461,107,576,133"/><area shape="rect" id="node13" href="../../d4/d8c/group__tcmi__transaction__class.html#gaadc5d69241ec4815bf37e041ec0844dc" title="&lt;&lt;public&gt;&gt; Waits on a transaction till it expires or is completed, the task can be prematurely woken ..." alt="" coords="445,297,593,338"/><area shape="rect" id="node17" href="../../d4/d8c/group__tcmi__transaction__class.html#ga8a1027d8451c92d105ff818b0bf09c1d" title="&lt;&lt;public&gt;&gt; Transaction context accessor." alt="" coords="435,428,603,455"/><area shape="rect" id="node18" href="../../d4/d8c/group__tcmi__transaction__class.html#gaec110b630e8c0935ddddfb0529a03368" title="&lt;&lt;public&gt;&gt; Aborting the transaction requires:" alt="" coords="441,377,596,404"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="699,56,813,83"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="651,157,861,184"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="681,5,831,32"/><area shape="rect" id="node8" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="681,107,831,133"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="919,56,1062,83"/><area shape="rect" id="node9" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="916,240,1065,267"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="919,107,1062,133"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="919,158,1062,199"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="909,324,1072,351"/><area shape="rect" id="node14" href="../../d4/d8c/group__tcmi__transaction__class.html#gafebfbc6a51c59cbdb2bd9470b82afc18" title="&lt;&lt;public&gt;&gt; Checks on aborted transaction." alt="" coords="689,209,823,250"/><area shape="rect" id="node15" href="../../d4/d8c/group__tcmi__transaction__class.html#ga755c57502b82f1c20a9adcdea11990a9" title="&lt;&lt;public&gt;&gt; Checks on a complete transaction." alt="" coords="689,326,823,367"/><area shape="rect" id="node16" href="../../d4/d8c/group__tcmi__transaction__class.html#ga01baf770d7a3fdaa6931024d50f9d039" title="&lt;&lt;public&gt;&gt; Transaction state accessor." alt="" coords="679,275,833,301"/><area shape="rect" id="node19" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="685,493,827,520"/><area shape="rect" id="node20" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="928,569,1053,596"/><area shape="rect" id="node21" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="923,417,1058,444"/><area shape="rect" id="node22" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="929,468,1052,495"/><area shape="rect" id="node29" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="921,519,1060,545"/><area shape="rect" id="node23" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="1121,417,1258,444"/><area shape="rect" id="node27" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="1136,468,1243,495"/><area shape="rect" id="node28" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1129,519,1249,545"/><area shape="rect" id="node24" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1329,392,1447,419"/><area shape="rect" id="node25" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1307,443,1469,469"/><area shape="rect" id="node26" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1517,443,1629,469"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4e660ea948542a5a057e25640a762efc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_send_anonymous_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg">tcmi_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Sends a specified message. </p>
<p>The message is sent as anonymous, so that any potential responses will be delivered to the message queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*m</td><td>- message to be sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when the message has been successfully sent </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00524">524</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, and <a class="el" href="../../db/dc8/tcmi__msg_8c_source.html#l00138">tcmi_msg_send_anonymous()</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00237">tcmi_guesttask_exit()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00149">tcmi_guesttask_migrateback_p()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00358">tcmi_guesttask_post_fork()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00307">tcmi_guesttask_process_p_emigrate_msg()</a>, <a class="el" href="../../d9/d98/tcmi__mighooks_8c_source.html#l00215">tcmi_mighooks_execve()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00328">tcmi_shadowtask_migrateback_ppm_p()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00452">tcmi_task_send_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection.">tcmi_msg_send_anonymous</a>(m, self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a9f310760627b79375736e0f7f30b1192" title="communication socket.">sock</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga4e660ea948542a5a057e25640a762efc_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga4e660ea948542a5a057e25640a762efc_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga4e660ea948542a5a057e25640a762efc_cgraph" id="de/d2f/group__tcmi__task__class_ga4e660ea948542a5a057e25640a762efc_cgraph">
<area shape="rect" id="node2" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="275,81,463,108"/><area shape="rect" id="node3" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="512,81,627,108"/><area shape="rect" id="node4" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="723,5,837,32"/><area shape="rect" id="node6" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="675,56,885,83"/><area shape="rect" id="node7" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="705,107,855,133"/><area shape="rect" id="node8" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="705,157,855,184"/><area shape="rect" id="node5" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="943,5,1086,32"/><area shape="rect" id="node9" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="940,81,1089,108"/><area shape="rect" id="node10" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="943,132,1086,159"/><area shape="rect" id="node11" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="943,183,1086,225"/><area shape="rect" id="node12" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="933,249,1096,276"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga85318d71dab1a903c2799134c696990d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcmi_task_send_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper">tcmi_method_wrapper</a> *&#160;</td>
          <td class="paramname"><em>wr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Sends a message to peer. </p>
<p>&lt;&lt;public&gt;&gt; Sends a message to peer.</p>
<p>The method is primarily designed for retransmission of messages in case the original transimision failed due to pending signals.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*wr</td><td>- method wrapper used to store the method in the method queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the task specific emigrate method or TCMI_TASK_KEEP_PUMPING </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00452">452</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d6/d01/dbg_8h_source.html#l00211">minfo</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00116">resp</a>, <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00175">tcmi_method_wrapper_data()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00194">tcmi_msg_get()</a>, <a class="el" href="../../d1/d6d/tcmi__msg_8h_source.html#l00212">tcmi_msg_put()</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00252">TCMI_TASK_KEEP_PUMPING</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00524">tcmi_task_send_anonymous_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00452">tcmi_task_send_message()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00272">tcmi_task_submit_method()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>, and <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00452">tcmi_task_send_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ggaa81f1a7178bfcf01d74e57d6bbcb869bafa7c813a4364ccccdc1edfd29839c675">TCMI_TASK_KEEP_PUMPING</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordtype">int</span> send_res;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *self_tsk = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a> *<a class="code" href="../../d1/d6d/tcmi__msg_8h.html#adb26817b6c4a9eeb3f68c832f24d5471" title="response transaction ID">resp</a> = *((<span class="keyword">struct </span><a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a>**)<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper.">tcmi_method_wrapper_data</a>(wr));</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">//ERESTARTSYS</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    send_res = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga4e660ea948542a5a057e25640a762efc" title="&lt;&lt;public&gt;&gt; Sends a specified message.">tcmi_task_send_anonymous_msg</a>(self_tsk, resp);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> ( send_res == -ERESTARTSYS ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Signal arrived while sending message, will retransmit later.&quot;</span>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#ga23d3ca435be85adedc5c1385469d707f" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count.">tcmi_msg_get</a>(resp);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution.">tcmi_task_submit_method</a>(<span class="keyword">self</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga85318d71dab1a903c2799134c696990d" title="&lt;&lt;public&gt;&gt; Called from method queue - Sends a message to peer task.">tcmi_task_send_message</a>, resp, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#d0/d5b/structtcmi__msg" title="A coumpound structure that carries a generic TCMI message.">tcmi_msg</a>));   </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( send_res != 0 ) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="../../d6/d01/dbg_8h.html#abc23c8dde04f89ca72fc5035015a65e7">minfo</a>(ERR3, <span class="stringliteral">&quot;Sending of message has failed with error: %d. The message will NOT be retransmitted.&quot;</span>, send_res);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(INFO3, <span class="stringliteral">&quot;Message send&quot;</span>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined...">tcmi_msg_put</a>( resp );</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga85318d71dab1a903c2799134c696990d_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga85318d71dab1a903c2799134c696990d_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga85318d71dab1a903c2799134c696990d_cgraph" id="de/d2f/group__tcmi__task__class_ga85318d71dab1a903c2799134c696990d_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#gaaf4d02eac4338a675bd5ed2df9943c97" title="&lt;&lt;public&gt;&gt; Accessor for the data stored in the method wrapper." alt="" coords="249,56,431,83"/><area shape="rect" id="node3" href="../../d6/dc2/group__tcmi__msg__class.html#ga23d3ca435be85adedc5c1385469d707f" title="&lt;&lt;public&gt;&gt; Instance accessor, increments the reference count." alt="" coords="288,107,392,133"/><area shape="rect" id="node4" href="../../d6/dc2/group__tcmi__msg__class.html#gac86a4090b7e1902ef603cb03191d6281" title="&lt;&lt;public&gt;&gt; Decrements reference counter, if it reaches 0 the custom free method is called if defined..." alt="" coords="288,157,392,184"/><area shape="rect" id="node16" href="../../de/d2f/group__tcmi__task__class.html#ga4e660ea948542a5a057e25640a762efc" title="&lt;&lt;public&gt;&gt; Sends a specified message." alt="" coords="230,208,450,235"/><area shape="rect" id="node28" href="../../de/d2f/group__tcmi__task__class.html#ga0409e631915b37fbcfe096dfc498bbbb" title="&lt;&lt;public&gt;&gt; Submits a method for execution." alt="" coords="253,259,427,285"/><area shape="rect" id="node5" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2748d267a8fddd1ced86e73ba8efd079" title="&lt;&lt;public&gt;&gt; Releases the instance." alt="" coords="522,107,665,133"/><area shape="rect" id="node6" href="../../d0/db7/group__tcmi__slotvec__class.html#ga5b4586b2e897ec306862a0b6901f39e7" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="743,5,868,32"/><area shape="rect" id="node7" href="../../d4/d8c/group__tcmi__transaction__class.html#gaac666feaaab1fe5c341237a3e0283501" title="&lt;&lt;public&gt;&gt; Transaction ID accessor." alt="" coords="738,56,873,83"/><area shape="rect" id="node8" href="../../da/d0c/group__tcmi__slot__class.html#ga1d6232adcf00094597a66d9f5740d5f8" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="744,107,867,133"/><area shape="rect" id="node15" href="../../d0/db7/group__tcmi__slotvec__class.html#ga4df343d549736d3dc994ad0f43529a57" title="&lt;&lt;public&gt;&gt; Unlocks the instance data." alt="" coords="736,157,875,184"/><area shape="rect" id="node9" href="../../da/d0c/group__tcmi__slot__class.html#ga29d8101c5815a6519567c548da4a3c7e" title="&lt;&lt;public&gt;&gt; Removes a given node from a slot." alt="" coords="959,31,1097,57"/><area shape="rect" id="node13" href="../../da/d0c/group__tcmi__slot__class.html#ga109d6d783ebf06046f364f970f84da1f" title="&lt;&lt;public&gt;&gt; Locks the slot data." alt="" coords="975,81,1081,108"/><area shape="rect" id="node14" href="../../da/d0c/group__tcmi__slot__class.html#ga5447231fec5f42040c40307eb2e6a13c" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="968,132,1088,159"/><area shape="rect" id="node10" href="../../da/d0c/group__tcmi__slot__class.html#ga6dd63ff2854a9939a5aa094f6543a5d1" title="&lt;&lt;public&gt;&gt; Checks if the slot is empty." alt="" coords="1203,5,1322,32"/><area shape="rect" id="node11" href="../../da/d0c/group__tcmi__slot__class.html#ga2550a3e6624b54e323c73cb1d06e6cd0" title="&lt;&lt;public&gt;&gt; Moves a slot among unused_slots." alt="" coords="1182,56,1343,83"/><area shape="rect" id="node12" href="../../da/d0c/group__tcmi__slot__class.html#ga8d6885be2677819158e0d956f0cca5b2" title="&lt;&lt;private&gt;&gt; Moves a slot into the specified list." alt="" coords="1392,56,1504,83"/><area shape="rect" id="node17" href="../../d6/dc2/group__tcmi__msg__class.html#ga7a8fe8cbfd4b25c15589c8599f66e574" title="&lt;&lt;public&gt;&gt; Sends a message via a specified connection." alt="" coords="499,208,687,235"/><area shape="rect" id="node18" href="../../d6/dc2/group__tcmi__msg__class.html#ga1c21eeafb9a0d56dabb025d5fbdc0bc3" title="&lt;&lt;private&gt;&gt; Sends a message via a specified connection." alt="" coords="748,233,863,260"/><area shape="rect" id="node19" href="../../d6/d8e/group__kkc__sock__class.html#gad734b131e2ab00e8d7fa30737fc2f5ad" title="&lt;&lt;public&gt;&gt; Sends out specified data." alt="" coords="971,183,1085,209"/><area shape="rect" id="node21" href="../../d6/d8e/group__kkc__sock__class.html#ga141590d302ece9990e5c8cdd82a3c3d8" title="&lt;&lt;public&gt;&gt; Locks this socket instance for sending, interruptible version, the process can be woken up..." alt="" coords="923,233,1133,260"/><area shape="rect" id="node22" href="../../d6/d8e/group__kkc__sock__class.html#ga841d6dff84842f19540eae27c37fcb4c" title="&lt;&lt;public&gt;&gt; Unlocks this socket instance for sending." alt="" coords="953,284,1103,311"/><area shape="rect" id="node23" href="../../d4/d8c/group__tcmi__transaction__class.html#ga653b1761a1b6e9fef415196c54e00768" title="&lt;&lt;public&gt;&gt; Starts a transaction." alt="" coords="953,335,1103,361"/><area shape="rect" id="node20" href="../../d6/d8e/group__kkc__sock__class.html#gaff5e8804c93f0cb2a4b5e2e12f64e743" title="&lt;&lt;private&gt;&gt; Transfers a required number of bytes." alt="" coords="1191,183,1334,209"/><area shape="rect" id="node24" href="../../d4/d8c/group__tcmi__transaction__class.html#gaba57811a17b10df187e7918d02e3679e" title="&lt;&lt;public&gt;&gt; Locks the instance data." alt="" coords="1188,259,1337,285"/><area shape="rect" id="node25" href="../../d4/d8c/group__tcmi__transaction__class.html#ga176151d0f528ed8cda13e21da8551519" title="&lt;&lt;public&gt;&gt; Instance accessor." alt="" coords="1191,309,1334,336"/><area shape="rect" id="node26" href="../../d4/d8c/group__tcmi__transaction__class.html#ga1dfece4fcea1c1b9ce676f560957077f" title="&lt;&lt;public&gt;&gt; Sets flags in the transaction that denote additional transaction attributes." alt="" coords="1191,361,1334,402"/><area shape="rect" id="node27" href="../../d4/d8c/group__tcmi__transaction__class.html#ga2c5c24c4b88dae68aa68c7b043d105b8" title="&lt;&lt;public&gt;&gt; Unlocks the instance data" alt="" coords="1181,427,1344,453"/><area shape="rect" id="node29" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="504,259,683,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabc853647b7b732333c5909e617030f44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_set_context </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Process context setter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*context</td><td>- pointer to the context stored in the task </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00389">389</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00547">tcmi_taskhelper_do_mig_mode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;{</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">self</span>-&gt;context = context;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad2304b37598ad3c64f6a24f0ed0064de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_set_exit_code </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Exit code setter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">code</td><td>- exit code that is to be set for the task </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00367">367</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00272">tcmi_guesttask_do_signal()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;{</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">self</span>-&gt;exit_code = code;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga0e714bdc8a7e81d5439db8c88d1d3151"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_set_local_pid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>local_pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Local PID setter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">local_pid</td><td>- new local PID of the task </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00433">433</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keyword">self</span>-&gt;local_pid = local_pid;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga60a2a872664867b7a86ec278b570fef2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_set_remote_pid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>remote_pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Remote PID setter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">remote_pid</td><td>- new remote PID of the task </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00453">453</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00146">tcmi_task::remote_pid</a>, <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>, <a class="el" href="../../d2/d0f/tcmi__ctlfs__file_8c_source.html#l00063">tcmi_ctlfs_intfile_new()</a>, <a class="el" href="../../d0/d49/tcmi__ctlfs_8h_source.html#l00091">TCMI_PERMS_FILE_R</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00439">tcmi_task_show_remote_pid_rev()</a>.</p>

<p>Referenced by <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00358">tcmi_guesttask_post_fork()</a>, <a class="el" href="../../da/d61/tcmi__guesttask_8c_source.html#l00307">tcmi_guesttask_process_p_emigrate_msg()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00412">tcmi_shadowtask_verify_migration()</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keyword">self</span>-&gt;remote_pid = remote_pid;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">self</span>-&gt;f_remote_pid_rev = <a class="code" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file.">tcmi_ctlfs_intfile_new</a>(self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#aeceec0fe895316cadbf14b0761e5f51b">d_migman_root</a>, <a class="code" href="../../d9/d0a/group__tcmi__ctlfs__class.html#ga84907a0ffd1393cf8b462e14c9b4140a" title="Preferred read file rights.">TCMI_PERMS_FILE_R</a>,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                     <span class="keyword">self</span>, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga401654abdc812f0a923d05c95b412fb1">tcmi_task_show_remote_pid_rev</a>, NULL,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                     <span class="keyword">sizeof</span>(pid_t),<span class="stringliteral">&quot;%d&quot;</span> , self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a071b7d4b1e2f24e055b643810a97570c" title="remote PID on PEN, CCN resp.">remote_pid</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga60a2a872664867b7a86ec278b570fef2_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga60a2a872664867b7a86ec278b570fef2_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga60a2a872664867b7a86ec278b570fef2_cgraph" id="de/d2f/group__tcmi__task__class_ga60a2a872664867b7a86ec278b570fef2_cgraph">
<area shape="rect" id="node2" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gac720ca77312808db7cbbc645be8e3541" title="&lt;&lt;public&gt;&gt; Creates a new instance of a file." alt="" coords="238,81,383,108"/><area shape="rect" id="node9" href="../../de/d2f/group__tcmi__task__class.html#ga401654abdc812f0a923d05c95b412fb1" title="tcmi_task_show_remote\l_pid_rev" alt="" coords="229,133,392,174"/><area shape="rect" id="node3" href="../../d1/de7/group__tcmi__ctlfs__file__class.html#gafcb50575d3f6cc783130766295300741" title="&lt;&lt;private&gt;&gt; This is a generic method, that creates a new instance of a file as follows:" alt="" coords="440,81,613,108"/><area shape="rect" id="node4" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga532181c3f7224fe5aa7651a69e6ad6b4" title="&lt;&lt;public&gt;&gt; This method is used when initializing a new entry." alt="" coords="661,81,800,108"/><area shape="rect" id="node5" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga986b629882729daaf2c9607bfca57c3c" title="&lt;&lt;public&gt;&gt; Entry name accessor." alt="" coords="850,5,1003,32"/><area shape="rect" id="node6" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga4fbd3f1c3789bd79d4e2c684fc08d1a2" title="&lt;&lt;private&gt;&gt; Checks whether a directory entry contains entry of the specified name" alt="" coords="849,56,1005,83"/><area shape="rect" id="node7" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#ga256f5088d3434bfadcdb0cb59bf25cb7" title="&lt;&lt;private&gt;&gt; A method for inode allocation." alt="" coords="856,107,997,133"/><area shape="rect" id="node8" href="../../d8/d36/group__tcmi__ctlfs__entry__class.html#gaeeb7fba5f385c90d93878a60a4dcf1dc" title="&lt;&lt;private&gt;&gt; The new dentry is allocated based on the parent&#39;s dentry and the current name of the ..." alt="" coords="853,158,1001,199"/><area shape="rect" id="node10" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="458,140,595,167"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga17c54fbcb86f7f3158426742c3ff04ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_show_remote_pid </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;private&gt;&gt; Read method for the TCMI ctlfs - reports remote PID. </p>
<p>For a shadow process, the remote PID is the identifier of the guest process on PEN and vica versa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*obj</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*data</td><td>- pointer where the PID is to be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00854">854</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00146">tcmi_task::remote_pid</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00422">tcmi_task_remote_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00114">tcmi_task_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *<span class="keyword">self</span> = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(obj);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a071b7d4b1e2f24e055b643810a97570c" title="remote PID on PEN, CCN resp.">remote_pid</a> = (<span class="keywordtype">int</span>*) <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    *remote_pid = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor.">tcmi_task_remote_pid</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga17c54fbcb86f7f3158426742c3ff04ba_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga17c54fbcb86f7f3158426742c3ff04ba_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga17c54fbcb86f7f3158426742c3ff04ba_cgraph" id="de/d2f/group__tcmi__task__class_ga17c54fbcb86f7f3158426742c3ff04ba_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga2f054ae4772c0921004eebdb48d39dcf" title="&lt;&lt;public&gt;&gt; Remote PID accessor." alt="" coords="241,5,391,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga401654abdc812f0a923d05c95b412fb1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tcmi_task_show_remote_pid_rev </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00439">439</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00144">tcmi_task::local_pid</a>, <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00261">TCMI_TASK</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00453">tcmi_task_set_remote_pid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a> *<span class="keyword">self</span> = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gaf05e0c401db433deef4d95a64ce9117b" title="Casts to the task instance.">TCMI_TASK</a>(obj);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">int</span> * <a class="code" href="../../de/d2f/group__tcmi__task__class.html#a09013a5bce7e48887d48902700ef48a0" title="local PID on PEN, CCN resp.">local_pid</a> = (<span class="keywordtype">int</span>*) <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    *local_pid = <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga401654abdc812f0a923d05c95b412fb1_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga401654abdc812f0a923d05c95b412fb1_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga401654abdc812f0a923d05c95b412fb1_cgraph" id="de/d2f/group__tcmi__task__class_ga401654abdc812f0a923d05c95b412fb1_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="217,12,354,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad2d3dad02cf555da12cb2926cebb25f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tcmi_task_signal_peer_lost </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies task that it peer is lost and sends a kill signal to that task. </p>
<p>The method is used for termination of tasks with lost peers. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00577">577</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00542">tcmi_task_to_task_struct()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d82/tcmi__migman_8c_source.html#l00307">kill_all_tasks()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00648">tcmi_task_check_peer_lost()</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                                                      {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keyword">self</span>-&gt;peer_lost = 1;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      force_sig(SIGKILL, <a class="code" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task.">tcmi_task_to_task_struct</a>(<span class="keyword">self</span>));</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gad2d3dad02cf555da12cb2926cebb25f6_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gad2d3dad02cf555da12cb2926cebb25f6_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gad2d3dad02cf555da12cb2926cebb25f6_cgraph" id="de/d2f/group__tcmi__task__class_gad2d3dad02cf555da12cb2926cebb25f6_cgraph">
<area shape="rect" id="node2" href="../../de/d2f/group__tcmi__task__class.html#gac263213bf219960dea9c7d4b4e6f3b34" title="Returns a task_struct associated with the tcmi_task." alt="" coords="235,31,405,57"/><area shape="rect" id="node3" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="463,5,582,32"/><area shape="rect" id="node4" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="454,56,591,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0409e631915b37fbcfe096dfc498bbbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmi_task_submit_method </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga51adea36dbef7cb03ffb89f5821ef2e0">tcmi_method_t</a> *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Submits a method for execution. </p>
<p>Creates a new method wrapper with the specified data and delegates all work to tcmi_task_add_wrapper</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">*method</td><td>- pointer to the method that is to be submitted </td></tr>
    <tr><td class="paramname">*data</td><td>- argument for the submitted method </td></tr>
    <tr><td class="paramname">size</td><td>- size of the argument in bytes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00272">272</a> of file <a class="el" href="../../de/d84/tcmi__task_8c_source.html">tcmi_task.c</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, and <a class="el" href="../../d6/d30/tcmi__method__wrapper_8h_source.html#l00082">tcmi_method_wrapper_new()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00203">tcmi_migcom_emigrate_ccn_npm()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00152">tcmi_migcom_emigrate_ccn_ppm_p()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00533">tcmi_migcom_guest_fork()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00294">tcmi_migcom_immigrate()</a>, <a class="el" href="../../dc/d44/tcmi__migcom_8c_source.html#l00573">tcmi_migcom_shadow_fork()</a>, <a class="el" href="../../d9/d86/tcmi__penman_8c_source.html#l00253">tcmi_penman_migrateback_npm()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>, <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00127">tcmi_shadowtask_process_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00906">tcmi_task_deliver_msg()</a>, <a class="el" href="../../de/d84/tcmi__task_8c_source.html#l00452">tcmi_task_send_message()</a>, <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00181">tcmi_taskhelper_notify_by_pid()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00574">tcmi_taskhelper_notify_current()</a>.</p>
<div class="fragment"><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#d3/d01/structtcmi__method__wrapper" title="Compound structure that describes the method.">tcmi_method_wrapper</a> *wr;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (!(wr = <a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method.">tcmi_method_wrapper_new</a>(<a class="code" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#a0bcde113894e5e3d0e99f2ed5da7bcaf" title="method stored in the wrapper.">method</a>, <a class="code" href="../../d9/d10/tcmi__npm__params_8h.html#ab9090ca30e7609aecaf540276e3c5084" title="Helper field that stores content of args/envp for the serialization.">data</a>, <a class="code" href="../../d5/d20/tcmi__p__emigrate__msg_8h.html#af8fd9ce16b371c8a3bf5e0b37a69419f" title="size of the checkpoint name in bytes (including trailing zero)">size</a>))) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t create method wrapper&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">goto</span> exit0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    tcmi_task_add_wrapper(<span class="keyword">self</span>, wr);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; exit0:</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_ga0409e631915b37fbcfe096dfc498bbbb_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_ga0409e631915b37fbcfe096dfc498bbbb_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_ga0409e631915b37fbcfe096dfc498bbbb_cgraph" id="de/d2f/group__tcmi__task__class_ga0409e631915b37fbcfe096dfc498bbbb_cgraph">
<area shape="rect" id="node2" href="../../d1/d5d/group__tcmi__method__wrapper__class.html#ga57cd57a64f1ec847f1b71452daf4b3b1" title="&lt;&lt;public&gt;&gt; Creates a new wrapper for the specified method." alt="" coords="229,5,408,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac263213bf219960dea9c7d4b4e6f3b34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct task_struct* tcmi_task_to_task_struct </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a task_struct associated with the <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task" title="Compound structure that gathers necessary process information.">tcmi_task</a>. </p>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00542">542</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d6/d01/dbg_8h_source.html#l00210">mdbg</a>, <a class="el" href="../../d8/d3c/util_8h_source.html#l00007">task_find_by_pid()</a>, and <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00411">tcmi_task_local_pid()</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00577">tcmi_task_signal_peer_lost()</a>, and <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00092">tcmi_taskhelper_enter_mig_mode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                                                                                   {     </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">struct </span>task_struct *task;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">/* try finding the target kernel task for our TCMI task by PID */</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    read_lock_irq(&amp;tasklist_lock);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (!(task = <a class="code" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea">task_find_by_pid</a>(<a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>)))) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="../../d6/d01/dbg_8h.html#a881516d8ffc635f7f0e87468340c80dc">mdbg</a>(ERR3, <span class="stringliteral">&quot;Can&#39;t find corresponding task_struct for PID: %d&quot;</span>, </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;             <a class="code" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor.">tcmi_task_local_pid</a>(<span class="keyword">self</span>));        </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }   </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    read_unlock_irq(&amp;tasklist_lock);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">return</span> task;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div>
</div><!-- fragment -->
<p><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d2f/group__tcmi__task__class_gac263213bf219960dea9c7d4b4e6f3b34_cgraph.png" border="0" usemap="#de/d2f/group__tcmi__task__class_gac263213bf219960dea9c7d4b4e6f3b34_cgraph" alt=""/></div>
<map name="de/d2f/group__tcmi__task__class_gac263213bf219960dea9c7d4b4e6f3b34_cgraph" id="de/d2f/group__tcmi__task__class_gac263213bf219960dea9c7d4b4e6f3b34_cgraph">
<area shape="rect" id="node2" href="../../d8/d3c/util_8h.html#a5f449355b8f54aaed664de85f89092ea" title="task_find_by_pid" alt="" coords="234,5,353,32"/><area shape="rect" id="node3" href="../../de/d2f/group__tcmi__task__class.html#ga0232aeae006148ffa6c760e7f1979865" title="&lt;&lt;public&gt;&gt; Local PID accessor." alt="" coords="225,56,362,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga86b8af90f121c51ad718c6965441972f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/db7/group__tcmi__slotvec__class.html#da/ded/structtcmi__slotvec">tcmi_slotvec</a>* tcmi_task_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Transactions accessor - needed when tasks construct their own messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>transactions slot vector. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00344">344</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>Referenced by <a class="el" href="../../df/d9d/tcmi__rpcresp__procmsg_8c_source.html#l00157">tcmi_rpcresp_procmsg_get_response()</a>, and <a class="el" href="../../d7/d0a/tcmi__shadowtask_8c_source.html#l00205">tcmi_shadowtask_emigrate_p()</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;transactions;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaddcd1c0b8ba2bfee9a3602dbabea04e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long tcmi_task_wait_for_pick_up_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d2f/group__tcmi__task__class.html#d1/dd2/structtcmi__task">tcmi_task</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt;&lt;public&gt;&gt; Waits until the task is picked up, by the associated process. </p>
<p>Returns also when the timer expires. This method is meant to be used by the task helper, that provides <a class="el" href="../../d2/daf/group__tcmi__taskhelper__class.html#ga80ea6618ba426419c51193f8fd24822d">tcmi_taskhelper_wait_for_pickup_timeout() </a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*self</td><td>- pointer to this task instance </td></tr>
    <tr><td class="paramname">timeout</td><td>- time out limit in ticks to wait for pickup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when successfully completed </dd></dl>

<p>Definition at line <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html#l00483">483</a> of file <a class="el" href="../../d4/d4e/tcmi__task_8h_source.html">tcmi_task.h</a>.</p>

<p>References <a class="el" href="../../d0/dc1/proxyfs__server_8c_source.html#l00059">self</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d05/tcmi__taskhelper_8h_source.html#l00224">tcmi_taskhelper_wait_for_pick_up_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> wait_for_completion_interruptible_timeout(&amp;self-&gt;<a class="code" href="../../de/d2f/group__tcmi__task__class.html#a6697ba8209fa90d595c5fa117bcaa4ae" title="Used for signalling when the task is picked up by the associated process.">picked_up</a>, timeout);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 12 2013 19:06:11 for Clondike by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
