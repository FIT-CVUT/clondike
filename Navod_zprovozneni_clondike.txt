Preklad jadra
Instalace nastroju pro kompilaci jadra: apt-get install apt-get install ncurses-dev gcc make initramfs-tools

Stazeni clondike patche: git clone https://github.com/FIT-CVUT/Clondike.git

Stazeni prislusneho jadra: wget www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.33.1.tar.gz

Rozbaleni jadra: untar linux-2.6.33.1.tar.gz

Otevreni adresare s j�drem: cd linux-2.6.33.1

Proveden� patche: patch -p1 < ../Clondike/patch/clondike-33.1.patch

mv config-2.6.32-5-xen-amd64 .config # if we use an existing .config make oldconfig # if we use an existing .config

make menuconfig Clondike > Enable TCMI Enable TCMI CCN Enable TCMI PEN Enable ROOT_NFS # when booting from NFS Disable ATALK

paste into ../Clondike/src/dbg.h / define hack / #define APPNAME 0 #define MDBGCRIT 1 #define MDBGERR 1 #define MDBGWARN 1 #define MDBG_INFO 1

ln -s ../Clondike/src/arch/current ../Clondike/src/arch/x86_64

in kernel/signal.c (if we build clondike into kernel) strip static by do_tkill

cp -R ../Clondike/src/ clondike/

make clean make -j4 make modules make modules_install make install

Priprava ke spusteni
mkdir /mnt/local/proc mkdir /mnt/proxy mkdir /mnt/clondike

cd /boot mkinitramfs -o initrd.img-2.6.33.1-clondike-nfs 2.6.33.1-clondike-nfs append to grub: proxyfs.server=tcp:0.0.0.0:1112

after coning make a new identity rm * /root/clondike/userspace/simple-ruby-director/conf restart Director

po bootu apt-get install ruby ruby-dev ntpdate

Vytvoreni adresarove struktury:
/clondike/ccn/listen
/clondike/ccn/stop-listen-one
/clondike/ccn/stop-listen-all
/clondike/ccn/stop
/clondike/ccn/listening-on 
/clondike/ccn/mig/migrate-home
/clondike/ccn/mig/emigrate-ppm-p
/clondike/ccn/mig/migproc
/clondike/ccn/nodes 
/clondike/pen/listen
/clondike/pen/stop-listen-one
/clondike/pen/stop-listen-all
/clondike/pen/stop
/clondike/pen/listening-on 
/clondike/pen/mig/migrate-home
/clondike/pen/mig/emigrate-ppm-p
/clondike/pen/mig/migproc
/clondike/pen/nodes 

Rozbehnuti Ruby skriptu:
spustit make v nasledujicich adresarich
/userspace/director-api
/userspace/ruby-director-api

Pridat zaznamy do /etc/fstab

none    /dev/shm  tmpfs   defaults    0 0
none    /clondike tcmi_ctlfs  defaults  0 0

Konfigurace Bashe:
v /etc/bash prepiste soubor bashrc
nastavuje bash prompt   

Spusteni Clondike:
/root/clondike/scripts/clondike_init

Poznamka: Pokud je clonovan image tak je treba pred spustenim Clondike smazat obsah složky /root/clondike/userspace/simple-ruby-director/conf/